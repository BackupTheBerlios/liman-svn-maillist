<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Liman-svn] r131 - in trunk: . db design docs/beleg2/doxygen docs/protokoll include
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/liman-svn/2006-June/index.html" >
   <LINK REL="made" HREF="mailto:liman-svn%40lists.berlios.de?Subject=Re%3A%20%5BLiman-svn%5D%20r131%20-%20in%20trunk%3A%20.%20db%20design%20docs/beleg2/doxygen%20docs/protokoll%20include&In-Reply-To=%3C200606041337.k54Dbuf2019319%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000122.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Liman-svn] r131 - in trunk: . db design docs/beleg2/doxygen docs/protokoll include</H1>
    <B>lazhur at BerliOS</B> 
    <A HREF="mailto:liman-svn%40lists.berlios.de?Subject=Re%3A%20%5BLiman-svn%5D%20r131%20-%20in%20trunk%3A%20.%20db%20design%20docs/beleg2/doxygen%20docs/protokoll%20include&In-Reply-To=%3C200606041337.k54Dbuf2019319%40sheep.berlios.de%3E"
       TITLE="[Liman-svn] r131 - in trunk: . db design docs/beleg2/doxygen docs/protokoll include">lazhur at berlios.de
       </A><BR>
    <I>Sun Jun  4 15:37:56 CEST 2006</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000122.html">[Liman-svn] r132 - in trunk: . design include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#121">[ date ]</a>
              <a href="thread.html#121">[ thread ]</a>
              <a href="subject.html#121">[ subject ]</a>
              <a href="author.html#121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lazhur
Date: 2006-06-04 15:37:50 +0200 (Sun, 04 Jun 2006)
New Revision: 131

Added:
   trunk/include/form_helper.php
Modified:
   trunk/db/liman_struktur.sql
   trunk/db/liman_test.sql
   trunk/design/liman.css
   trunk/docs/beleg2/doxygen/classLiteratur.tex
   trunk/docs/beleg2/doxygen/classMitglied.tex
   trunk/docs/protokoll/2006_05_30.xhtml
   trunk/include/kommentar.php
   trunk/include/literatur.php
   trunk/include/mitglied.php
   trunk/include/suche.php
   trunk/index.php
   trunk/lit.php
   trunk/litmod.php
   trunk/search.php
   trunk/searchmore.php
   trunk/user.php
   trunk/userlist.php
   trunk/usermod.php
Log:
- grobe Literatur und Mitgliederverwaltung implementiert
- Protokoll 1. Pflichtbeleg korrigiert
- Formulare Erweiterte Suche in Fieldset zusammengefasst


Modified: trunk/db/liman_struktur.sql
===================================================================
--- trunk/db/liman_struktur.sql	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/db/liman_struktur.sql	2006-06-04 13:37:50 UTC (rev 131)
@@ -22,7 +22,7 @@
   `Literatur_Nr` int(11) NOT NULL auto_increment,
   `Art` enum('Buch','Artikel','Brosch&#252;re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver&#246;ffentlicht','Sonstiges') NOT NULL,
   `Titel` varchar(40) NOT NULL,
-  `Jahr` year(4) NOT NULL,
+  `Jahr` int(11) NOT NULL,
   `Verlag` varchar(40) NOT NULL,
   `ISBN` varchar(20) NOT NULL,
   `Beschreibung` text NOT NULL,

Modified: trunk/db/liman_test.sql
===================================================================
--- trunk/db/liman_test.sql	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/db/liman_test.sql	2006-06-04 13:37:50 UTC (rev 131)
@@ -32,7 +32,7 @@
   `Literatur_Nr` int(11) NOT NULL auto_increment,
   `Art` enum('Buch','Artikel','Brosch&#252;re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver&#246;ffentlicht','Sonstiges') NOT NULL,
   `Titel` varchar(40) NOT NULL,
-  `Jahr` year(4) NOT NULL,
+  `Jahr` int(11) NOT NULL,
   `Verlag` varchar(40) NOT NULL,
   `ISBN` varchar(20) NOT NULL,
   `Beschreibung` text NOT NULL,

Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/design/liman.css	2006-06-04 13:37:50 UTC (rev 131)
@@ -83,14 +83,27 @@
 	margin-left: 1em;
 }
 
+#content form td {
+	width: 99%;
+}
 
+#content form th {
+	width: 20em;
+}
+
+#content input[type=&quot;text&quot;],
+#content input[type=&quot;password&quot;],
+#content form textarea {
+	width: 99%;
+}
+
 #searchresult, #userlist {
 	
 	width: 99%;
 	border: 1px solid black;
 	border-collapse: collapse;
 }
-.searchmore td {
+.searchmore th label {
 	width:9em;
 }
 
@@ -108,3 +121,16 @@
 	text-align: left;
 	vertical-align: top;
 }
+
+#error_list {
+	padding: 0.5em;
+	border: 2px solid red;
+	margin: 0 auto;
+	margin-bottom: 1em;
+	background-color: #ffeaea;
+}
+.input_failure {
+	border-color: red;
+	background-color: red;
+	color: black;
+}

Modified: trunk/docs/beleg2/doxygen/classLiteratur.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-04 13:37:50 UTC (rev 131)
@@ -54,7 +54,7 @@
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Importiert:]\begin{itemize}
-\item \hyperlink{classAutor_77b27af7e471abe5a404fc92c7319921}{Autor::Clean}\item \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Autor::Get\-All}\item \hyperlink{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{Autor::Split}\item \hyperlink{classKommentar_9903f1df98f71eefa3b44a81d6a8ee5c}{Kommentar::Delete\-All}\item \hyperlink{classKommentar_33d65db8c526c50017a5fa029bc04416}{Kommentar::Get\-All}\item \hyperlink{classLiteraturArt_b3312217430531ed7821a46a39c49af7}{Literatur\-Art::Literatur\-Art}\item Literatur\-Art::Get\-Bib\-Tex\-Text\item \hyperlink{classLogin_6c120224aa6719f58c6ccd08acc28758}{Login::Is\-Administrator}\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\end{itemize}
+\item \hyperlink{classAutor_77b27af7e471abe5a404fc92c7319921}{Autor::Clean}\item \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Autor::Get\-All}\item \hyperlink{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{Autor::Split}\item \hyperlink{classKommentar_9903f1df98f71eefa3b44a81d6a8ee5c}{Kommentar::Delete\-All}\item \hyperlink{classKommentar_33d65db8c526c50017a5fa029bc04416}{Kommentar::Get\-All}\item \hyperlink{classLiteraturArt_b3312217430531ed7821a46a39c49af7}{Literatur\-Art::Literatur\-Art}\item Literatur\-Art::Get\-Bib\-Tex\-Text\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\end{itemize}
 \end{Desc}
 \begin{Desc}
 \item[Autor:]Sven Eckelmann \end{Desc}

Modified: trunk/docs/beleg2/doxygen/classMitglied.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classMitglied.tex	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/docs/beleg2/doxygen/classMitglied.tex	2006-06-04 13:37:50 UTC (rev 131)
@@ -14,9 +14,9 @@
 \begin{CompactList}\small\item\em Generiert Passworthash. \item\end{CompactList}\item 
 \hyperlink{classMitglied_c6900c12663e9b228bf9942fc045b8b4}{Delete} (\$nr)
 \begin{CompactList}\small\item\em Entfernt \hyperlink{classMitglied}{Mitglied}. \item\end{CompactList}\item 
-\hyperlink{classMitglied_a856527798258505adf9eb08b79fd9fc}{Insert} (\$login, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
+\hyperlink{classMitglied_5d9d5d087779303f002cbbcfcf1735c1}{Insert} (\$loginname, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
 \begin{CompactList}\small\item\em Legt \hyperlink{classMitglied}{Mitglied} an. \item\end{CompactList}\item 
-\hyperlink{classMitglied_0d173487bebdd0579a70ea007b37b5ec}{Update} (\$nr, \$login, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
+\hyperlink{classMitglied_5bd2a31b6aeea5c69de9b6de825e11c2}{Update} (\$nr, \$loginname, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
 \begin{CompactList}\small\item\em &#196;ndert ein \hyperlink{classMitglied}{Mitglied}. \item\end{CompactList}\item 
 \hyperlink{classMitglied_70ce63c9c9a7159966dc9e80a7f726a2}{Get\-All} ()
 \begin{CompactList}\small\item\em R&#252;ckgabe einer Liste der Mitglieder. \item\end{CompactList}\end{CompactItemize}
@@ -111,21 +111,21 @@
 \end{Desc}
 \begin{Desc}
 \item[Bemerkungen:]Ist der Nutzer nicht als Administrator, sondern als \hyperlink{classMitglied}{Mitglied} angemeldet, wird nur der eigene Eintrag zur&#252;ckgegeben. Ist der Nutzer nicht angemeldet werden keine Operationen ausgef&#252;hrt. \end{Desc}
-\hypertarget{classMitglied_a856527798258505adf9eb08b79fd9fc}{
+\hypertarget{classMitglied_5d9d5d087779303f002cbbcfcf1735c1}{
 \index{Mitglied@{Mitglied}!Insert@{Insert}}
 \index{Insert@{Insert}!Mitglied@{Mitglied}}
-\paragraph[Insert]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Insert (\$ {\em login}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
-\label{classMitglied_a856527798258505adf9eb08b79fd9fc}
+\paragraph[Insert]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Insert (\$ {\em loginname}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
+\label{classMitglied_5d9d5d087779303f002cbbcfcf1735c1}
 
 
 Legt \hyperlink{classMitglied}{Mitglied} an. 
 
-F&#252;gt neues \hyperlink{classMitglied}{Mitglied} mit Benutzernamen (\$login), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder ein. Dazu wird das Passwort noch mit Mitglied::Passwort\-Hash gehasht. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur&#252;ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
+F&#252;gt neues \hyperlink{classMitglied}{Mitglied} mit Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder ein. Dazu wird das Passwort noch mit Mitglied::Passwort\-Hash gehasht. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur&#252;ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
-\item[\mbox{$\leftarrow$} {\em \$login}]Benutzername des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]Benutzerpasswort des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]Rechte des neuen Mitglieds (1 - \hyperlink{classMitglied}{Mitglied}, 2 - Passwort) \item[\mbox{$\leftarrow$} {\em \$vorname}]Vorname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]Nachname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]E-Mail-Adresse des neuen Mitglieds \end{description}
+\item[\mbox{$\leftarrow$} {\em \$loginname}]Benutzername des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]Benutzerpasswort des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]Rechte des neuen Mitglieds (Benutzer, Administrator) \item[\mbox{$\leftarrow$} {\em \$vorname}]Vorname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]Nachname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]E-Mail-Adresse des neuen Mitglieds \end{description}
 \end{Desc}
 \begin{Desc}
 \item[R\&quot;{u}ckgabewerte:]
@@ -150,21 +150,21 @@
 \begin{description}
 \item[\mbox{$\leftarrow$} {\em \$pass}]zu hashendes Klartextpasswort \end{description}
 \end{Desc}
-\hypertarget{classMitglied_0d173487bebdd0579a70ea007b37b5ec}{
+\hypertarget{classMitglied_5bd2a31b6aeea5c69de9b6de825e11c2}{
 \index{Mitglied@{Mitglied}!Update@{Update}}
 \index{Update@{Update}!Mitglied@{Mitglied}}
-\paragraph[Update]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Update (\$ {\em nr}, \$ {\em login}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
-\label{classMitglied_0d173487bebdd0579a70ea007b37b5ec}
+\paragraph[Update]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Update (\$ {\em nr}, \$ {\em loginname}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
+\label{classMitglied_5bd2a31b6aeea5c69de9b6de825e11c2}
 
 
 &#196;ndert ein \hyperlink{classMitglied}{Mitglied}. 
 
-&#196;ndert die Daten das Mitglieds mit der Mitglieds\_\-Nr (\$nr), in neuen Benutzernamen (\$login), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder. Wenn \$passwort nicht die L&#228;nge 0 hat, wird es noch mit Mitglied::Passwort\-Hash gehasht. Andernfalls wird das alte Passwort in Mitglieder beibehalten. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur&#252;ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
+&#196;ndert die Daten das Mitglieds mit der Mitglieds\_\-Nr (\$nr), in neuen Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder. Wenn \$passwort nicht die L&#228;nge 0 hat, wird es noch mit Mitglied::Passwort\-Hash gehasht. Andernfalls wird das alte Passwort in Mitglieder beibehalten. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur&#252;ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
-\item[\mbox{$\leftarrow$} {\em \$nr}]Mitglieds\_\-Nr des zu ver&#228;ndernden Mitglieds \item[\mbox{$\leftarrow$} {\em \$login}]neuer Benutzername des Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]neues Passwort des Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]neuen Rechte des Mitglieds \item[\mbox{$\leftarrow$} {\em \$vorname}]neuer Vorname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]neuer Nachname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]neue E-Mail-Adresse des Mitglieds \end{description}
+\item[\mbox{$\leftarrow$} {\em \$nr}]Mitglieds\_\-Nr des zu ver&#228;ndernden Mitglieds \item[\mbox{$\leftarrow$} {\em \$loginname}]neuer Benutzername des Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]neues Passwort des Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]neuen Rechte des Mitglieds (Benutzer, Administrator) \item[\mbox{$\leftarrow$} {\em \$vorname}]neuer Vorname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]neuer Nachname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]neue E-Mail-Adresse des Mitglieds \end{description}
 \end{Desc}
 \begin{Desc}
 \item[R\&quot;{u}ckgabewerte:]

Modified: trunk/docs/protokoll/2006_05_30.xhtml
===================================================================
--- trunk/docs/protokoll/2006_05_30.xhtml	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/docs/protokoll/2006_05_30.xhtml	2006-06-04 13:37:50 UTC (rev 131)
@@ -49,8 +49,8 @@
 			
 			&lt;h3 id=&quot;sitzung&quot;&gt;N&#228;chste Sitzung&lt;/h3&gt;
 			&lt;ul&gt;
-				&lt;li&gt;Treffen am 31.05. 15:15&lt;/li&gt;
-				&lt;li&gt;Besprechung einzelner Punkte des 2. Belegs und 3. Belegs&lt;/li&gt;
+				&lt;li&gt;Treffen am 7.6. 15:15&lt;/li&gt;
+				&lt;li&gt;Besprechung einzelner Punkte des 3. Belegs&lt;/li&gt;
 			&lt;/ul&gt;
 		&lt;/div&gt;
 

Added: trunk/include/form_helper.php
===================================================================
--- trunk/include/form_helper.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/form_helper.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -0,0 +1,57 @@
+&lt;?php
+	/*! \brief Gibt HTML-Form-Input zur&#252;ck
+	 *
+	 *  \param[in] $type Type des Inputfeldes
+	 *  \param[in] $name ID und Name des Inputfeldes
+	 *  \param[in] $value Inhalt des Feldes
+	 *  \param[in] $failure ob Feld als fehlerhaft markiert werden soll
+	 */
+	function form_input($type, $name, $value = &quot;&quot;, $failure = false)
+	{
+		$str = &quot;&lt;input type=\&quot;&quot;.htmlspecialchars($type).&quot;\&quot; name=\&quot;&quot;.htmlspecialchars($name).&quot;\&quot; id=\&quot;&quot;.htmlspecialchars($name).&quot;\&quot; &quot;;
+
+		if (empty($value) === false)
+		{
+			$str .= &quot; value=\&quot;&quot;.htmlspecialchars($value).&quot;\&quot; &quot;;
+		}
+
+		if ($failure === true)
+		{
+			$str .= &quot; class=\&quot;input_failure\&quot; &quot;;
+		}
+
+		$str .= &quot;&gt;&quot;;
+		
+		return $str;
+	}
+
+	/*! \brief Gibt HTML-Form-Select zur&#252;ck
+	 *
+	 *  \param[in] $options Feld mit Auswahlm&#246;glichkeiten
+	 *  \param[in] $name ID und Name der Auswahlfeldes
+	 *  \param[in] $value aktuell ausgew&#228;hltes Element der Auswahl
+	 *  \param[in] $failure ob Auswahl als fehlerhaft markiert werden soll
+	 */
+	function form_select($options, $name, $value=&quot;&quot;, $failure = false)
+	{
+		$str = &quot;&lt;select id=\&quot;&quot;.htmlspecialchars($name).&quot;\&quot; name=\&quot;&quot;.htmlspecialchars($name).&quot;\&quot; &quot;;
+		if ($failure === true)
+		{
+			$str .= &quot; class=\&quot;input_failure\&quot; &quot;;
+		}
+		$str .= &quot;&gt;&quot;;
+
+		foreach ($options as $option)
+		{
+			$str .= &quot; &lt;option &quot;;
+			if ($option == $value)
+			{
+				$str .= &quot; selected &quot;;
+			}
+			$str .= &quot;&gt;&quot;.htmlspecialchars($option).&quot;&lt;/option&gt;&quot;;
+		}
+		$str .= &quot;&lt;/select&gt;&quot;;
+
+		return $str;
+	}
+?&gt;
\ No newline at end of file

Modified: trunk/include/kommentar.php
===================================================================
--- trunk/include/kommentar.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/kommentar.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -109,7 +109,7 @@
 		{
 			global $db_config, $sqldb, $login;
 
-			if ($login-&gt;IsAdministrator === true)
+			if ($login-&gt;IsAdministrator() === true)
 			{
 				$sql = &quot;DELETE FROM &quot;.$db_config['prefix'].&quot;Kommentare
 						WHERE Mitglieds_Nr = '$member_nr'&quot;;

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/literatur.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -17,7 +17,6 @@
 	 *  - Kommentar::GetAll
 	 *  - LiteraturArt::LiteraturArt
 	 *  - LiteraturArt::GetBibTexText
-	 *  - Login::IsAdministrator
 	 *  - Login::IsMember
 	 *  - SQLDB::Query
 	 *  - SQLDB::Fetch
@@ -79,49 +78,53 @@
 		 */
 		function ToBibtex()
 		{
-			$str = &quot;@&quot;.$this-&gt;Art-&gt;GetBibtexText().&quot;{&quot;.$this-&gt;Art-&gt;GetBibtexText().$this-&gt;Nr;
+			$str = &quot;&quot;;
+			if (is_object($this-&gt;Art) === true)
+			{
+				$str = &quot;@&quot;.$this-&gt;Art-&gt;GetBibtexText().&quot;{&quot;.$this-&gt;Art-&gt;GetBibtexText().$this-&gt;Nr;
 				
-			if (!empty($this-&gt;Titel))
-			{
-				$str .= &quot;,\n\ttitle = \&quot;&quot;.addslashes($this-&gt;Titel).&quot;\&quot;&quot;;
-			}
-
-			if (count($this-&gt;Autoren) &gt; 0)
-			{
-				$autorlist = &quot;&quot;;
-				for ($j = 0; $j &lt; count($this-&gt;Autoren); $j++)
+				if (!empty($this-&gt;Titel))
 				{
-					if ($j != 0)
+					$str .= &quot;,\n\ttitle = \&quot;&quot;.addslashes($this-&gt;Titel).&quot;\&quot;&quot;;
+				}
+	
+				if (count($this-&gt;Autoren) &gt; 0)
+				{
+					$autorlist = &quot;&quot;;
+					for ($j = 0; $j &lt; count($this-&gt;Autoren); $j++)
 					{
-						$autorlist .= &quot; and &quot;;
+						if ($j != 0)
+						{
+							$autorlist .= &quot; and &quot;;
+						}
+						$autorlist .= $this-&gt;Autoren[$j]-&gt;Name;
 					}
-					$autorlist .= $this-&gt;Autoren[$j]-&gt;Name;
+	
+					$str .= &quot;,\n\tauthor = \&quot;&quot;.addslashes($autorlist).&quot;\&quot;&quot;;
 				}
-
-				$str .= &quot;,\n\tauthor = \&quot;&quot;.addslashes($autorlist).&quot;\&quot;&quot;;
+	
+				if (!empty($this-&gt;Jahr))
+				{
+					$str .= &quot;,\n\tyear = \&quot;&quot;.addslashes($this-&gt;Jahr).&quot;\&quot;&quot;;
+				}
+	
+				if (!empty($this-&gt;Verlag))
+				{
+					$str .= &quot;,\n\tpublisher = \&quot;&quot;.addslashes($this-&gt;Verlag).&quot;\&quot;&quot;;
+				}
+	
+				if (!empty($this-&gt;ISBN))
+				{
+					$str .= &quot;,\n\tisbn = \&quot;&quot;.addslashes($this-&gt;ISBN).&quot;\&quot;&quot;;
+				}
+	
+				if (!empty($this-&gt;Ort))
+				{
+					$str .= &quot;,\n\taddress = \&quot;&quot;.addslashes($this-&gt;Ort).&quot;\&quot;&quot;;
+				}
+				
+				$str .= &quot;\n}\n&quot;;
 			}
-
-			if (!empty($this-&gt;Jahr))
-			{
-				$str .= &quot;,\n\tyear = \&quot;&quot;.addslashes($this-&gt;Jahr).&quot;\&quot;&quot;;
-			}
-
-			if (!empty($this-&gt;Verlag))
-			{
-				$str .= &quot;,\n\tpublisher = \&quot;&quot;.addslashes($this-&gt;Verlag).&quot;\&quot;&quot;;
-			}
-
-			if (!empty($this-&gt;ISBN))
-			{
-				$str .= &quot;,\n\tisbn = \&quot;&quot;.addslashes($this-&gt;ISBN).&quot;\&quot;&quot;;
-			}
-
-			if (!empty($this-&gt;Ort))
-			{
-				$str .= &quot;,\n\taddress = \&quot;&quot;.addslashes($this-&gt;Ort).&quot;\&quot;&quot;;
-			}
-			
-			$str .= &quot;\n}\n&quot;;
 			return $str;
 		}
 
@@ -195,7 +198,7 @@
 		{
 			global $db_config, $sqldb, $login;
 
-			if ($login-&gt;IsAdministrator() === true)
+			if ($login-&gt;IsMember() === true)
 			{
 				$sql = &quot;INSERT INTO &quot;.$db_config['prefix'].&quot;Bibliothek
 						VALUES (NULL, '$art', '$titel', '$jahr', '$verlag', '$isbn', '$beschreibung', '$ort', '$stichworte')&quot;;
@@ -246,7 +249,7 @@
 		{
 			global $db_config, $sqldb, $login;
 
-			if ($login-&gt;IsAdministrator() === true)
+			if ($login-&gt;IsMember() === true)
 			{
 				$sql = &quot;DELETE FROM &quot;.$db_config['prefix'].&quot;Literatur_Autor
 						WHERE Literatur_Nr='$nr'&quot;;

Modified: trunk/include/mitglied.php
===================================================================
--- trunk/include/mitglied.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/mitglied.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -106,7 +106,7 @@
 		
 		/*! \brief Legt  Mitglied an
 		 *
-		 *  F&#252;gt neues Mitglied mit Benutzernamen ($login), Passwort
+		 *  F&#252;gt neues Mitglied mit Benutzernamen ($loginname), Passwort
 		 *  ($passwort), Benutzerrechten ($rechte), Vorname ($vorname),
 		 *  Nachname ($nachname), E-Mail-Adresse ($email) in Mitglieder
 		 *  ein. Dazu wird das Passwort noch mit Mitglied::PasswortHash
@@ -114,10 +114,10 @@
 		 *  wird ein Fehler zur&#252;ckgegeben, da die Datenbank nur ein
 		 *  Mitglied mit gleichem Login erlaubt.
 		 *  \pre Datenbankverbindung muss bestehen
-		 *  \param[in] $login Benutzername des neuen Mitglieds
+		 *  \param[in] $loginname Benutzername des neuen Mitglieds
 		 *  \param[in] $passwort Benutzerpasswort des neuen Mitglieds
 		 *  \param[in] $rechte Rechte des neuen Mitglieds
-		 *     (1 - Mitglied, 2 - Passwort)
+		 *     (Benutzer, Administrator)
 		 *  \param[in] $vorname Vorname des neuen Mitglieds
 		 *  \param[in] $nachname Nachname des neuen Mitglieds
 		 *  \param[in] $email E-Mail-Adresse des neuen Mitglieds
@@ -126,27 +126,15 @@
 		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
 		 *    werden keine Operationen ausgef&#252;hrt.
 		 */
-		function Insert($login, $passwort, $rechte, $vorname, $nachname, $email)
+		function Insert($loginname, $passwort, $rechte, $vorname, $nachname, $email)
 		{
 			global $db_config, $sqldb, $login;
 
 			if ($login-&gt;IsAdministrator() === true)
 			{
-				$rechtestring = &quot;&quot;;
-				switch ($rechte)
-				{
-				case 2:
-					$rechtestring = &quot;Administrator&quot;;
-					break;
-				default:
-				case 1:
-					$rechtestring = &quot;Benutzer&quot;;
-					break;
-				}
-	
 				$passworthash = Mitglied::PasswordHash($passwort);
 				$sql = &quot;INSERT INTO &quot;.$db_config['prefix'].&quot;Mitglieder
-						VALUES (NULL, '$nachname', '$vorname', '$email', '$login', '$passworthash', '$rechtestring')&quot;;
+						VALUES (NULL, '$nachname', '$vorname', '$email', '$loginname', '$passworthash', '$rechte')&quot;;
 				
 				if ($sqldb-&gt;Query($sql) !== false)
 				{
@@ -166,7 +154,7 @@
 		/*! \brief &#196;ndert ein Mitglied
 		 *
 		 *  &#196;ndert die Daten das Mitglieds mit der Mitglieds_Nr ($nr),
-		 *  in neuen Benutzernamen ($login), Passwort ($passwort),
+		 *  in neuen Benutzernamen ($loginname), Passwort ($passwort),
 		 *  Benutzerrechten ($rechte), Vorname ($vorname),
 		 *  Nachname ($nachname), E-Mail-Adresse ($email) in
 		 *  Mitglieder. Wenn $passwort nicht die L&#228;nge 0 hat, wird es 
@@ -177,9 +165,10 @@
 		 *  gleichem Login erlaubt.
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \param[in] $nr Mitglieds_Nr des zu ver&#228;ndernden Mitglieds
-		 *  \param[in] $login neuer Benutzername des Mitglieds
+		 *  \param[in] $loginname neuer Benutzername des Mitglieds
 		 *  \param[in] $passwort neues Passwort des Mitglieds
 		 *  \param[in] $rechte neuen Rechte des Mitglieds
+		 *    (Benutzer, Administrator)
 		 *  \param[in] $vorname neuer Vorname des Mitglieds
 		 *  \param[in] $nachname neuer Nachname des Mitglieds
 		 *  \param[in] $email neue E-Mail-Adresse des Mitglieds
@@ -189,30 +178,23 @@
 		 *    werden keine Operationen ausgef&#252;hrt, wenn $nr ungleich
 		 *    der eigenen Mitglieds_Nr is.
 		 */
-		function Update($nr, $login, $passwort, $rechte, $vorname, $nachname, $email)
+		function Update($nr, $loginname, $passwort, $rechte, $vorname, $nachname, $email)
 		{
 			global $db_config, $sqldb, $login;
 
 			if ($login-&gt;IsAdministrator() === true || $nr == $login-&gt;Nr)
 			{
-				$rechtestring = &quot;&quot;;
-				switch ($rechte)
+				if ($login-&gt;IsAdministrator() === false)
 				{
-				case 2:
-					$rechtestring = &quot;Administrator&quot;;
-					break;
-				default:
-				case 1:
-					$rechtestring = &quot;Benutzer&quot;;
-					break;
+					$rechte = &quot;Benutzer&quot;;
 				}
-	
+
 				$sql = &quot;&quot;;
 				if (empty($passwort) === true)
 				{
 					
 					$sql = &quot;UPDATE &quot;.$db_config['prefix'].&quot;Mitglieder
-							SET Login='$login', Rechte='$rechtestring', Vorname='$vorname', Name='$nachname', Email='$email'
+							SET Login='$loginname', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
 							WHERE Mitglieds_Nr='$nr'
 							LIMIT 1&quot;;
 				}
@@ -220,7 +202,7 @@
 				{
 					$passworthash = Mitglied::PasswordHash($passwort);
 					$sql = &quot;UPDATE &quot;.$db_config['prefix'].&quot;Mitglieder
-							SET Login='$login', Passwort='$passworthash', Rechte='$rechtestring', Vorname='$vorname', Name='$nachname', Email='$email'
+							SET Login='$loginname', Passwort='$passworthash', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
 							WHERE Mitglieds_Nr='$nr'
 							LIMIT 1&quot;;
 				}

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/suche.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -98,8 +98,8 @@
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  &quot;.$db_config['prefix'].&quot;Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr
-						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext')
-						OR MATCH (Autorname) AGAINST ('$volltext')&quot;;
+						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext' IN BOOLEAN MODE)
+						OR MATCH (Autorname) AGAINST ('$volltext' IN BOOLEAN MODE)&quot;;
 				$sqldb-&gt;Query($sql);
 				
 				while ($cur = $sqldb-&gt;Fetch())

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/index.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -1,5 +1,5 @@
 &lt;?php
-	$title = &quot;Literaturliste&quot;;
+	$title = &quot;Letzte Literatur&quot;;
 	//$extracss = &quot;home.css&quot;;
 
 	require_once(&quot;include/header.php&quot;);

Modified: trunk/lit.php
===================================================================
--- trunk/lit.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/lit.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -70,7 +70,12 @@
 			?&gt;
 				&lt;tr&gt;
 					&lt;th scope=&quot;row&quot;&gt;Aktionen:&lt;/th&gt;	
-					&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Bearbeiten&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;L&ouml;schen&quot;&gt;&lt;/td&gt;
+					&lt;td&gt;&lt;form style=&quot;display:inline&quot; action=&quot;litmod.&lt;?=$ext;?&gt;?id=&lt;?=htmlspecialchars($_GET[&quot;id&quot;]);?&gt;&quot; method=&quot;post&quot;&gt;
+							&lt;span&gt;&lt;input type=&quot;submit&quot; value=&quot;Bearbeiten&quot;&gt;&lt;/span&gt;
+						&lt;/form&gt;
+						&lt;form style=&quot;display:inline&quot; action=&quot;litmod.&lt;?=$ext;?&gt;?delete=&amp;id=&lt;?=htmlspecialchars($_GET[&quot;id&quot;]);?&gt;&quot; method=&quot;post&quot;&gt;
+							&lt;span&gt;&lt;input type=&quot;submit&quot; value=&quot;L&ouml;schen&quot;&gt;&lt;/span&gt;
+					&lt;/form&gt;&lt;/td&gt;
 				&lt;/tr&gt;
 			&lt;?php
 				}

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/litmod.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,70 +3,280 @@
 	//$extracss = &quot;home.css&quot;;
 
 	require_once(&quot;include/header.php&quot;);
+
+	if ($login-&gt;IsMember() === false)
+	{
+		require_once(&quot;include/footer.php&quot;);
+		die();
+	}
 ?&gt;
 &lt;div id=&quot;cfront&quot; class=&quot;content&quot;&gt;
-	&lt;form action=&quot;litmod.&lt;?=$ext;?&gt;?add&quot; id=&quot;litaddform&quot; method=&quot;post&quot;&gt;
-	&lt;table id=&quot;litadd&quot;&gt;
-		&lt;tbody&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Titel:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;titel&quot; id=&quot;titel&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Autor:&lt;/th&gt;
-				&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;autor&quot; id=&quot;autor&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Erscheinungsjahr:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;jahr&quot; id=&quot;jahr&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Stichworte:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Art:&lt;/th&gt;	
-				&lt;td&gt;&lt;select name=&quot;art&quot; id=&quot;art&quot;&gt;
-					&lt;option&gt;Anleitung&lt;/option&gt;
-					&lt;option&gt;Artikel&lt;/option&gt;
-					&lt;option&gt;Brosch&#252;re&lt;/option&gt;
-					&lt;option&gt;Buch&lt;/option&gt;
-					&lt;option&gt;Diplomarbeit&lt;/option&gt;
-					&lt;option&gt;Dissertation&lt;/option&gt;
-					&lt;option&gt;Protokoll&lt;/option&gt;
-					&lt;option&gt;Sonstiges&lt;/option&gt;
-					&lt;option&gt;Techn. Bericht&lt;/option&gt;
-					&lt;option&gt;Unver&#246;ffentlicht&lt;/option&gt;
-				&lt;/select&gt;
-				&lt;/td&gt;
-			&lt;/tr&gt;
+&lt;?php
+	$error_occurred = false; // Fehler beim Verarbeiten aufgetreten?
+	$error_titel = false;
+	$error_autor = false;
+	$error_jahr = false;
 
+	if (isset($_GET[&quot;insert&quot;]) === true || isset($_GET[&quot;update&quot;]) === true)
+	{
+		if (empty($_POST[&quot;titel&quot;]) === true)
+		{
+			$error_titel = true;
+			$error_occurred = true;
+		}
 
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Verlag:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;verlag&quot; id=&quot;verlag&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Verlagsort:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ort&quot; id=&quot;ort&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
+		if (empty($_POST[&quot;autor&quot;]) === true)
+		{
+			$error_autor = true;
+			$error_occurred = true;
+		}
 
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;ISBN:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;isbn&quot; id=&quot;isbn&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Bemerkung:&lt;/th&gt;	
-				&lt;td&gt;&lt;textarea cols=&quot;20&quot; rows=&quot;10&quot; name=&quot;beschreibung&quot; id=&quot;beschreibung&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;th scope=&quot;row&quot;&gt;Aktionen:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;&Uuml;bernehmen&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
+		if (empty($_POST[&quot;jahr&quot;]) === false &amp;&amp; is_numeric($_POST[&quot;jahr&quot;]) === false)
+		{
+			$error_jahr = true;
+			$error_occurred = true;
+		}
+	}
 
-		&lt;/tbody&gt;
-	&lt;/table&gt;
-	&lt;/form&gt;
+	if ($error_occurred == true)
+	{
+		echo &quot;&lt;div id=\&quot;error_list\&quot;&gt;Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:&lt;ul&gt;&quot;;
+		
+		if ($error_titel === true)
+		{
+			echo &quot;&lt;li&gt;Sie m&#252;ssen einen Titel f&#252;r die Literatur angeben&lt;/li&gt;&quot;;
+		}
+
+		if ($error_autor === true)
+		{
+			echo &quot;&lt;li&gt;Sie m&#252;ssen mindestens einen Autor angeben&lt;/li&gt;&quot;;
+		}
+
+		if ($error_jahr === true)
+		{
+			echo &quot;&lt;li&gt;Das Jahr muss eine Zahl sein&lt;/li&gt;&quot;;
+		}
+
+		echo &quot;&lt;/ul&gt;&lt;/div&gt;&quot;;
+	}
+
+
+	if ((isset($_GET[&quot;delete&quot;]) === false &amp;&amp; isset($_GET[&quot;insert&quot;]) === false &amp;&amp; isset($_GET[&quot;update&quot;]) === false)
+		|| $error_occurred === true)
+	{
+		require_once(&quot;include/form_helper.php&quot;);
+		if (isset($_GET[&quot;id&quot;]) === true || isset($_POST[&quot;id&quot;]) === true)
+		{
+			require_once(&quot;include/literatur.php&quot;);
+
+			if (isset($_POST[&quot;id&quot;]) === true)
+			{
+				$id = $_POST[&quot;id&quot;];
+			}
+			else
+			{
+				$id = $_GET[&quot;id&quot;];
+			}
+
+			$lit = new Literatur($_GET[&quot;id&quot;]);
+			$titel = $lit-&gt;Titel;
+			$autor = &quot;&quot;;
+			$jahr = $lit-&gt;Jahr;
+			$stichworte = $lit-&gt;Stichworte;
+
+			if (isset($lit-&gt;Art) === true)
+			{
+				$art = $lit-&gt;Art-&gt;GetDisplayText();
+			}
+			else
+			{
+				$art = &quot;Buch&quot;;
+			}
+
+			$autor = &quot;&quot;;
+			if (isset($lit-&gt;Autoren) === true)
+			{
+				for ($j = 0; $j &lt; count($lit-&gt;Autoren); $j++)
+				{
+					if ($j != 0)
+					{
+						$autor .= &quot;, &quot;;
+					}
+					$autor .= $lit-&gt;Autoren[$j]-&gt;Name;
+				}
+			}
+
+			$verlag = $lit-&gt;Verlag;
+			$ort = $lit-&gt;Ort;
+			$isbn = $lit-&gt;ISBN;
+			$beschreibung = $lit-&gt;Beschreibung;
+		}
+		else
+		{
+			if (isset($_POST[&quot;titel&quot;]) === true)
+			{
+				$titel = stripslashes($_POST[&quot;titel&quot;]);
+			}
+			else
+			{
+				$titel = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;autor&quot;]) === true)
+			{
+				$autor = stripslashes($_POST[&quot;autor&quot;]);
+			}
+			else
+			{
+				$autor = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;jahr&quot;]) === true)
+			{
+				$jahr = stripslashes($_POST[&quot;jahr&quot;]);
+			}
+			else
+			{
+				$jahr = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;stichworte&quot;]) === true)
+			{
+				$stichworte = stripslashes($_POST[&quot;stichworte&quot;]);
+			}
+			else
+			{
+				$stichworte = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;art&quot;]) === true)
+			{
+				$art = stripslashes($_POST[&quot;art&quot;]);
+			}
+			else
+			{
+				$art = &quot;Buch&quot;;
+			}
+
+			if (isset($_POST[&quot;verlag&quot;]) === true)
+			{
+				$verlag = stripslashes($_POST[&quot;verlag&quot;]);
+			}
+			else
+			{
+				$verlag = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;ort&quot;]) === true)
+			{
+				$ort = stripslashes($_POST[&quot;ort&quot;]);
+			}
+			else
+			{
+				$ort = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;isbn&quot;]) === true)
+			{
+				$isbn = stripslashes($_POST[&quot;isbn&quot;]);
+			}
+			else
+			{
+				$isbn = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;beschreibung&quot;]) === true)
+			{
+				$beschreibung = stripslashes($_POST[&quot;beschreibung&quot;]);
+			}
+			else
+			{
+				$beschreibung = &quot;&quot;;
+			}
+		}
+
+		if (empty($id) === true)
+		{
+			echo &quot;&lt;form action=\&quot;litmod.&quot;.$ext.&quot;?insert\&quot; id=\&quot;litaddform\&quot; method=\&quot;post\&quot;&gt;&quot;;
+		}
+		else
+		{
+			echo &quot;&lt;form action=\&quot;litmod.&quot;.$ext.&quot;?update\&quot; id=\&quot;litupdateform\&quot; method=\&quot;post\&quot;&gt;&quot;;
+			echo form_input(&quot;hidden&quot;, &quot;id&quot;, $id);
+		}
+	?&gt;
+		&lt;table id=&quot;litadd&quot;&gt;
+			&lt;tbody&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Titel:&lt;/th&gt;	
+					&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;titel&quot;, $titel, $error_titel);?&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Autor:&lt;/th&gt;
+					&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;autor&quot;, $autor, $error_autor);?&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Erscheinungsjahr:&lt;/th&gt;	
+					&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;jahr&quot;, $jahr, $error_jahr);?&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Stichworte:&lt;/th&gt;	
+					&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;stichworte&quot;, $stichworte);?&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Art:&lt;/th&gt;	
+					&lt;td&gt;&lt;?=form_select(array(&quot;Anleitung&quot;, &quot;Artikel&quot;, &quot;Brosch&#252;re&quot;, &quot;Buch&quot;, &quot;Diplomarbeit&quot;,
+						&quot;Dissertation&quot;, &quot;Protokoll&quot;, &quot;Sonstiges&quot;, &quot;Techn. Bericht&quot;, &quot;Unver&#246;ffentlicht&quot;),
+						&quot;art&quot;, $art);?&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Verlag:&lt;/th&gt;	
+					&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;verlag&quot;, $verlag);?&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Verlagsort:&lt;/th&gt;	
+					&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;ort&quot;, $ort);?&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+	
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;ISBN:&lt;/th&gt;	
+					&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;isbn&quot;, $isbn);?&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Bemerkung:&lt;/th&gt;	
+					&lt;td&gt;&lt;textarea cols=&quot;20&quot; rows=&quot;10&quot; name=&quot;beschreibung&quot; id=&quot;beschreibung&quot;&gt;&lt;?=htmlspecialchars($beschreibung);?&gt;&lt;/textarea&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=&quot;row&quot;&gt;Aktionen:&lt;/th&gt;	
+					&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;&Uuml;bernehmen&quot;&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+	
+			&lt;/tbody&gt;
+		&lt;/table&gt;
+		&lt;/form&gt;
+	&lt;?php
+	}
+	else
+	{
+		require_once(&quot;include/literatur.php&quot;);
+		if (isset($_GET[&quot;delete&quot;]) === true)
+		{
+			/// \todo Hier erstmal nachfragen, ob &#252;berhaupt L&#246;schen
+			
+			Literatur::Delete($_GET[&quot;id&quot;]);
+		}
+		elseif  (isset($_GET[&quot;insert&quot;]) === true)
+		{
+			/// \todo Hier erstmal schauen, ob Literatur mit Titel und Autor existiert und entsprechend Nachfragen
+			Literatur::Insert($_POST[&quot;autor&quot;], $_POST[&quot;art&quot;], $_POST[&quot;titel&quot;], $_POST[&quot;jahr&quot;], $_POST[&quot;verlag&quot;], $_POST[&quot;isbn&quot;], $_POST[&quot;beschreibung&quot;], $_POST[&quot;ort&quot;], $_POST[&quot;stichworte&quot;]);
+		}
+		elseif (isset($_GET[&quot;update&quot;]) === true)
+		{
+			Literatur::Update($_POST[&quot;id&quot;], $_POST[&quot;autor&quot;], $_POST[&quot;art&quot;], $_POST[&quot;titel&quot;], $_POST[&quot;jahr&quot;], $_POST[&quot;verlag&quot;], $_POST[&quot;isbn&quot;], $_POST[&quot;beschreibung&quot;], $_POST[&quot;ort&quot;], $_POST[&quot;stichworte&quot;]);
+		}
+	}
+?&gt;
 &lt;/div&gt;
 &lt;?php	require_once(&quot;include/footer.php&quot;); ?&gt;
 

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/search.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,11 +3,11 @@
 
 	if (isset($_GET[&quot;suchbegriff&quot;]) === true)
 	{
-		$title = &quot;Suchergebnisse f&uuml;r \&quot;&quot;.htmlspecialchars(addslashes($_GET[&quot;suchbegriff&quot;])).&quot;\&quot;&quot;;
+		$title = &quot;Suchergebnisse f&uuml;r \&quot;&quot;.htmlspecialchars($_GET[&quot;suchbegriff&quot;]).&quot;\&quot;&quot;;
 	}
 	elseif (isset($_GET[&quot;autor&quot;]) === true &amp;&amp; isset($_GET[&quot;titel&quot;]) === true)
 	{
-		$title = &quot;Suchergebnisse f&uuml;r \&quot;&quot;.htmlspecialchars(addslashes($_GET[&quot;autor&quot;])).&quot;\&quot; und \&quot;&quot;.htmlspecialchars(addslashes($_GET[&quot;titel&quot;])).&quot;\&quot;&quot;;
+		$title = &quot;Suchergebnisse f&uuml;r \&quot;&quot;.htmlspecialchars($_GET[&quot;autor&quot;]).&quot;\&quot; und \&quot;&quot;.htmlspecialchars($_GET[&quot;titel&quot;]).&quot;\&quot;&quot;;
 	}
 	else
 	{

Modified: trunk/searchmore.php
===================================================================
--- trunk/searchmore.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/searchmore.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -5,36 +5,49 @@
 	require_once(&quot;include/header.php&quot;);
 ?&gt;
 &lt;div id=&quot;cfront&quot; class=&quot;content&quot;&gt;
-	&lt;h3&gt;Autoren- und Titelsuche&lt;/h3&gt;
-	&lt;form action=&quot;search.&lt;?=$ext;?&gt;&quot; id=&quot;searchform&quot; method=&quot;get&quot;&gt;
-	&lt;table class=&quot;searchmore&quot;&gt;
-		&lt;tbody&gt;
-			&lt;tr&gt;
-				&lt;td scope=row&gt;&lt;label for=&quot;autor&quot;&gt;Autor:&lt;/label&gt;&lt;/td&gt;
-				&lt;td&gt;&lt;input id=&quot;autor&quot; name=&quot;autor&quot;&gt;&lt;/td&gt;
-				&lt;td&gt;&nbsp;&lt;/td&gt;
-			&lt;/tr&gt;
-			&lt;tr&gt;
-				&lt;td scope=row&gt;&lt;label for=&quot;titel&quot;&gt;Titel:&lt;/label&gt;&lt;/td&gt;
-				&lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;titel&quot; name=&quot;titel&quot;&gt;&lt;/td&gt;
-				&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Suche&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-		&lt;/tbody&gt;
-	&lt;/table&gt;
+
+	&lt;form action=&quot;search.&lt;?=$ext;?&gt;&quot; id=&quot;extrasearchform&quot; method=&quot;get&quot;&gt;
+	&lt;fieldset&gt;
+   		 &lt;legend&gt;&lt;b&gt;Autoren- und Titelsuche&lt;/b&gt;&lt;/legend&gt;
+	
+	
+		&lt;table class=&quot;searchmore&quot;&gt;
+			&lt;tbody&gt;
+				&lt;tr&gt;
+					&lt;th scope=row&gt;&lt;label for=&quot;autor&quot;&gt;Autor:&lt;/label&gt;&lt;/th&gt;
+					&lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;autor&quot; name=&quot;autor&quot;&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th scope=row&gt;&lt;label for=&quot;titel&quot;&gt;Titel:&lt;/label&gt;&lt;/th&gt;
+					&lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;titel&quot; name=&quot;titel&quot;&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th&gt;&lt;/th&gt;
+					&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Suche&quot;&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/tbody&gt;
+		&lt;/table&gt;
+	&lt;/fieldset&gt;
 	&lt;/form&gt;
+
 	&lt;hr&gt;
 	
-	&lt;h3&gt;Volltextsuche&lt;/h3&gt;
-	&lt;form action=&quot;search.&lt;?=$ext;?&gt;&quot; id=&quot;searchform&quot; method=&quot;get&quot;&gt;
-	&lt;table class=&quot;searchmore&quot;&gt;
-		&lt;tbody&gt;
-			&lt;tr&gt;
-				&lt;td scope=row&gt;&lt;label for=&quot;suchbegriff&quot;&gt;Suchbegriff:&lt;/label&gt;&lt;/td&gt;
-				&lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;suchbegriff&quot; name=&quot;suchbegriff&quot;&gt;&lt;/td&gt;
-				&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Suche&quot;&gt;&lt;/td&gt;
-			&lt;/tr&gt;
-		&lt;/tbody&gt;
-	&lt;/table&gt;
+	&lt;form action=&quot;search.&lt;?=$ext;?&gt;&quot; id=&quot;fulltextform&quot; method=&quot;get&quot;&gt;
+	&lt;fieldset&gt;
+   		&lt;legend&gt;&lt;b&gt;Volltextsuche&lt;/b&gt;&lt;/legend&gt;
+		&lt;table class=&quot;searchmore&quot;&gt;
+			&lt;tbody&gt;
+				&lt;tr&gt;
+					&lt;th scope=row&gt;&lt;label for=&quot;suchbegriff&quot;&gt;Suchbegriff:&lt;/label&gt;&lt;/th&gt;
+					&lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;suchbegriff&quot; name=&quot;suchbegriff&quot;&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;th&gt;&lt;/th&gt;
+					&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Suche&quot;&gt;&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/tbody&gt;
+		&lt;/table&gt;
+	&lt;/fieldset&gt;
 	&lt;/form&gt;
 &lt;/div&gt;
 &lt;?php	require_once(&quot;include/footer.php&quot;); ?&gt;

Modified: trunk/user.php
===================================================================
--- trunk/user.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/user.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,6 +3,27 @@
 	//$extracss = &quot;home.css&quot;;
 
 	require_once(&quot;include/header.php&quot;);
+	require_once(&quot;include/mitglied.php&quot;);
+
+	if ($login-&gt;IsMember() === false)
+	{
+		require_once(&quot;include/footer.php&quot;);
+		die();
+	}
+	elseif ($login-&gt;IsAdministrator() === false)
+	{
+		$_GET[&quot;id&quot;] = $login-&gt;Nr;
+		$_POST[&quot;id&quot;] = $login-&gt;Nr;
+	}
+
+	if (isset($_GET[&quot;id&quot;]))
+	{
+		$mitglied = new Mitglied($_GET[&quot;id&quot;]);
+	}
+	else
+	{
+		$mitglied = new Mitglied(0);
+	}
 ?&gt;
 &lt;div id=&quot;cfront&quot; class=&quot;content&quot;&gt;
 	&lt;form action=&quot;usermod.php&quot;&gt;
@@ -11,29 +32,43 @@
 		&lt;tbody&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Login:&lt;/th&gt;	
-				&lt;td&gt;siwu&lt;/td&gt;
+				&lt;td&gt;&lt;?=htmlspecialchars($mitglied-&gt;Login);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Vorname:&lt;/th&gt;	
-				&lt;td&gt;Simon&lt;/td&gt;
+				&lt;td&gt;&lt;?=htmlspecialchars($mitglied-&gt;Vorname);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Nachname:&lt;/th&gt;	
-				&lt;td&gt;Wunderlich&lt;/td&gt;
+				&lt;td&gt;&lt;?=htmlspecialchars($mitglied-&gt;Nachname);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Rechte:&lt;/th&gt;	
-				&lt;td&gt;Administrator&lt;/td&gt;
+				&lt;td&gt;&lt;?php
+					switch ($mitglied-&gt;Rechte)
+					{
+					case 2:
+						$rechte = &quot;Administrator&quot;;
+						break;
+					default:
+					case 1:
+						$rechte = &quot;Benutzer&quot;;
+						break;
+					}
+					echo htmlspecialchars($rechte);
+				?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;E-Mail:&lt;/th&gt;	
-				&lt;td&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/liman-svn">siwu at hrz.tu-chemnitz.de</A>&lt;/td&gt;
+				&lt;td&gt;&lt;?=htmlspecialchars($mitglied-&gt;Email);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Aktionen:&lt;/th&gt;	
 				&lt;td&gt;
-				&lt;input type=&quot;submit&quot; value=&quot;Bearbeiten&quot;&gt;
+					&lt;form style=&quot;display:inline&quot; action=&quot;usermod.&lt;?=$ext;?&gt;?id=&lt;?=htmlspecialchars($_GET[&quot;id&quot;]);?&gt;&quot; method=&quot;post&quot;&gt;
+						&lt;span&gt;&lt;input type=&quot;submit&quot; value=&quot;Bearbeiten&quot;&gt;&lt;/span&gt;
+					&lt;/form&gt;
 				&lt;/td&gt;
 			&lt;/tr&gt;
 		&lt;/tbody&gt;

Modified: trunk/userlist.php
===================================================================
--- trunk/userlist.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/userlist.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -5,7 +5,6 @@
 	require_once(&quot;include/header.php&quot;);
 ?&gt;
 &lt;div id=&quot;cfront&quot; class=&quot;content&quot;&gt;
-	&lt;form action=&quot;usermod.php&quot;&gt;
 	&lt;table id=&quot;userlist&quot;&gt;
 		&lt;thead&gt;
 			&lt;tr&gt;
@@ -34,11 +33,15 @@
 					&lt;?php
 						if ($login-&gt;IsAdministrator() === true || $login-&gt;Nr == $cur-&gt;Nr)
 						{
+							echo &quot;&lt;form style=\&quot;display: inline\&quot; method=\&quot;post\&quot; action=\&quot;usermod.$ext?id=&quot;.htmlspecialchars($cur-&gt;Nr).&quot;\&quot;&gt;&quot;;
 							echo &quot;&lt;input type=\&quot;submit\&quot; value=\&quot;Bearbeiten\&quot;&gt;&quot;;
+							echo &quot;&lt;/form&gt;&quot;;
 						}
-						else
+						if ($login-&gt;IsAdministrator() === true)
 						{
-							echo &quot;&lt;input type=\&quot;submit\&quot; value=\&quot;Details\&quot;&gt;&quot;;
+							echo &quot;&lt;form style=\&quot;display: inline\&quot; method=\&quot;post\&quot; action=\&quot;usermod.$ext?delete=&amp;id=&quot;.htmlspecialchars($cur-&gt;Nr).&quot;\&quot;&gt;&quot;;
+							echo &quot;&lt;input type=\&quot;submit\&quot; value=\&quot;L&#246;schen\&quot;&gt;&quot;;
+							echo &quot;&lt;/form&gt;&quot;;
 						}
 					?&gt;
 				&lt;/td&gt;
@@ -48,7 +51,6 @@
 			?&gt;
 		&lt;/tbody&gt;
 	&lt;/table&gt;
-	&lt;/form&gt;
 
 	&lt;?php
 		if ($login-&gt;IsAdministrator() === true)

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/usermod.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,44 +3,244 @@
 	//$extracss = &quot;home.css&quot;;
 
 	require_once(&quot;include/header.php&quot;);
+
+	if ($login-&gt;IsMember() === false)
+	{
+		require_once(&quot;include/footer.php&quot;);
+		die();
+	}
+	elseif ($login-&gt;IsAdministrator() === false)
+	{
+		$_GET[&quot;id&quot;] = $login-&gt;Nr;
+		$_POST[&quot;id&quot;] = $login-&gt;Nr;
+	}
 ?&gt;
 &lt;div id=&quot;cfront&quot; class=&quot;content&quot;&gt;
-	
-	&lt;form action=&quot;usermod.&lt;?=$ext;?&gt;?add&quot; id=&quot;litaddform&quot; method=&quot;post&quot;&gt;
+&lt;?php
+	$error_occurred = false; // Fehler beim Verarbeiten aufgetreten?
+	$error_benutzername = false;
+	$error_vorname = false;
+	$error_nachname = false;
+	$error_email = false;
+	$error_password = false;
+	$error_password_missing = false;
+	$error_password_different = false;
+
+	if (isset($_GET[&quot;insert&quot;]) === true || isset($_GET[&quot;update&quot;]) === true)
+	{
+		if (empty($_POST[&quot;benutzername&quot;]) === true)
+		{
+			$error_benutzername = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST[&quot;vorname&quot;]) === true)
+		{
+			$error_vorname = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST[&quot;nachname&quot;]) === true)
+		{
+			$error_nachname = true;
+			$error_occurred = true;
+		}
+		
+		if (empty($_POST[&quot;email&quot;]) === true)
+		{
+			$error_email = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST[&quot;password&quot;]) === true &amp;&amp; isset($_GET[&quot;insert&quot;]) === true)
+		{
+			$error_password = true;
+			$error_password_missing = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST[&quot;password&quot;]) === false || empty($_POST[&quot;password_check&quot;]) === false)
+		{
+			if ($_POST[&quot;password&quot;] != $_POST[&quot;password_check&quot;])
+			{
+				$error_password = true;
+				$error_password_different = true;
+				$error_occurred = true;
+			}
+		}
+	}
+
+	if ($error_occurred == true)
+	{
+		echo &quot;&lt;div id=\&quot;error_list\&quot;&gt;Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:&lt;ul&gt;&quot;;
+		
+		if ($error_benutzername === true)
+		{
+			echo &quot;&lt;li&gt;Sie m&#252;ssen ein Login angeben&lt;/li&gt;&quot;;
+		}
+		
+		if ($error_vorname === true)
+		{
+			echo &quot;&lt;li&gt;Sie m&#252;ssen einen Vornamen angeben&lt;/li&gt;&quot;;
+		}
+		
+		if ($error_nachname === true)
+		{
+			echo &quot;&lt;li&gt;Sie m&#252;ssen ein Nachnamen angeben&lt;/li&gt;&quot;;
+		}
+		
+		if ($error_email === true)
+		{
+			echo &quot;&lt;li&gt;E-Mail scheint nicht korrekt zu sein&lt;/li&gt;&quot;;
+		}
+		
+		if ($error_password_missing === true)
+		{
+			echo &quot;&lt;li&gt;Sie m&#252;ssen ein Passwort angeben&lt;/li&gt;&quot;;
+		}
+		elseif ($error_password_different === true)
+		{
+			echo &quot;&lt;li&gt;Passw&#246;rter stimmen nicht &#252;berein&lt;/li&gt;&quot;;
+		}
+
+		echo &quot;&lt;/ul&gt;&lt;/div&gt;&quot;;
+	}
+
+
+	if ((isset($_GET[&quot;delete&quot;]) === false &amp;&amp; isset($_GET[&quot;insert&quot;]) === false &amp;&amp; isset($_GET[&quot;update&quot;]) === false)
+		|| $error_occurred === true)
+	{
+		require_once(&quot;include/form_helper.php&quot;);
+		if (isset($_GET[&quot;id&quot;]) === true || isset($_POST[&quot;id&quot;]) === true)
+		{
+			require_once(&quot;include/mitglied.php&quot;);
+
+			if (isset($_POST[&quot;id&quot;]) === true)
+			{
+				$id = $_POST[&quot;id&quot;];
+			}
+			else
+			{
+				$id = $_GET[&quot;id&quot;];
+			}
+
+			$mitglied = new Mitglied($_GET[&quot;id&quot;]);
+			$benutzername = $mitglied-&gt;Login;
+
+			if (isset($mitglied-&gt;Rechte) === true)
+			{
+				switch ($mitglied-&gt;Rechte)
+				{
+				case 2:
+					$rechte = &quot;Administrator&quot;;
+					break;
+				default:
+				case 1:
+					$rechte = &quot;Benutzer&quot;;
+					break;
+				}
+			}
+			else
+			{
+				$rechte = &quot;Benutzer&quot;;
+			}
+
+			$vorname = $mitglied-&gt;Vorname;
+			$nachname = $mitglied-&gt;Nachname;
+			$email = $mitglied-&gt;Email;
+		}
+		else
+		{
+			if (isset($_POST[&quot;benutzername&quot;]) === true)
+			{
+				$benutzername = stripslashes($_POST[&quot;benutzername&quot;]);
+			}
+			else
+			{
+				$benutzername = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;rechte&quot;]) === true)
+			{
+				$rechte = stripslashes($_POST[&quot;rechte&quot;]);
+			}
+			else
+			{
+				$rechte = &quot;Benutzer&quot;;
+			}
+
+			if (isset($_POST[&quot;vorname&quot;]) === true)
+			{
+				$vorname = stripslashes($_POST[&quot;vorname&quot;]);
+			}
+			else
+			{
+				$vorname = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;nachname&quot;]) === true)
+			{
+				$nachname = stripslashes($_POST[&quot;nachname&quot;]);
+			}
+			else
+			{
+				$nachname = &quot;&quot;;
+			}
+
+			if (isset($_POST[&quot;email&quot;]) === true)
+			{
+				$email = stripslashes($_POST[&quot;email&quot;]);
+			}
+			else
+			{
+				$email = &quot;&quot;;
+			}
+
+			$passwort = &quot;&quot;;
+		}
+
+	if (empty($id) === true)
+	{
+		echo &quot;&lt;form action=\&quot;usermod.&quot;.$ext.&quot;?insert\&quot; id=\&quot;useraddform\&quot; method=\&quot;post\&quot;&gt;&quot;;
+	}
+	else
+	{
+		echo &quot;&lt;form action=\&quot;usermod.&quot;.$ext.&quot;?update\&quot; id=\&quot;userupdateform\&quot; method=\&quot;post\&quot;&gt;&quot;;
+		echo form_input(&quot;hidden&quot;, &quot;id&quot;, $id);
+	}
+?&gt;
 	&lt;table id=&quot;bookdetails&quot;&gt;
 		&lt;tbody&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Login:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; value=&quot;siwu&quot; name=&quot;login&quot; id=&quot;login&quot;&gt;&lt;/td&gt;
+				&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;benutzername&quot;, $benutzername, $error_benutzername);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Vorname:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; value=&quot;Simon&quot; name=&quot;vorname&quot; id=&quot;vorname&quot;&gt;&lt;/td&gt;
+				&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;vorname&quot;, $vorname, $error_vorname);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Nachname:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; value=&quot;Wunderlich&quot; name=&quot;nachname&quot; id=&quot;nachname&quot;&gt;&lt;/td&gt;
+				&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;nachname&quot;, $nachname, $error_nachname);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;E-Mail:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;text&quot; value=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/liman-svn">siwu at hrz.tu-chemnitz.de</A>&quot; name=&quot;email&quot; id=&quot;email&quot;&gt;&lt;/td&gt;
+				&lt;td&gt;&lt;?=form_input(&quot;text&quot;, &quot;email&quot;, $email, $error_email);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot; name=&quot;rechte&quot; id=&quot;rechte&quot;&gt;Rechte:&lt;/th&gt;	
-				&lt;td&gt;&lt;select&gt;
-				&lt;option&gt;Administrator&lt;/option&gt;
-				&lt;option&gt;Mitarbeiter&lt;/option&gt;
-				&lt;/select&gt;
+				&lt;td&gt;&lt;?=form_select(array(&quot;Administrator&quot;, &quot;Benutzer&quot;),
+					&quot;rechte&quot;, $rechte);?&gt;
 				&lt;/td&gt;
 			&lt;/tr&gt;
 
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Passwort:&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;password&quot; value=&quot;password&quot; name=&quot;passwort&quot; id=&quot;passwort&quot;&gt;&lt;/td&gt;
+				&lt;td&gt;&lt;?=form_input(&quot;password&quot;, &quot;password&quot;, &quot;&quot;, $error_password);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 			&lt;tr&gt;
 				&lt;th scope=&quot;row&quot;&gt;Passwort (wiederholen):&lt;/th&gt;	
-				&lt;td&gt;&lt;input type=&quot;password&quot; value=&quot;password&quot; name=&quot;passwort_check&quot; id=&quot;passwort_check&quot;&gt;&lt;/td&gt;
+				&lt;td&gt;&lt;?=form_input(&quot;password&quot;, &quot;password_check&quot;, &quot;&quot;, $error_password);?&gt;&lt;/td&gt;
 			&lt;/tr&gt;
 
 			&lt;tr&gt;
@@ -53,5 +253,27 @@
 		&lt;/tbody&gt;
 	&lt;/table&gt;
 	&lt;/form&gt;
+&lt;?php
+	}
+	else
+	{
+		require_once(&quot;include/mitglied.php&quot;);
+		if (isset($_GET[&quot;delete&quot;]) === true)
+		{
+			/// \todo Hier erstmal nachfragen, ob &#252;berhaupt L&#246;schen
+			Mitglied::Delete($_GET[&quot;id&quot;]);
+		}
+		elseif  (isset($_GET[&quot;insert&quot;]) === true)
+		{
+			/// \todo &#252;berhaupt die Rechte dazu?
+			Mitglied::Insert($_POST[&quot;benutzername&quot;], $_POST[&quot;password&quot;], $_POST[&quot;rechte&quot;], $_POST[&quot;vorname&quot;], $_POST[&quot;nachname&quot;], $_POST[&quot;email&quot;]);
+		}
+		elseif (isset($_GET[&quot;update&quot;]) === true)
+		{
+			/// \todo beide passw&#246;rter gleich?
+			Mitglied::Update($_POST[&quot;id&quot;], $_POST[&quot;benutzername&quot;], $_POST[&quot;password&quot;], $_POST[&quot;rechte&quot;], $_POST[&quot;vorname&quot;], $_POST[&quot;nachname&quot;], $_POST[&quot;email&quot;]);
+		}
+	}
+?&gt;
 &lt;/div&gt;
 &lt;?php	require_once(&quot;include/footer.php&quot;); ?&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000122.html">[Liman-svn] r132 - in trunk: . design include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#121">[ date ]</a>
              <a href="thread.html#121">[ thread ]</a>
              <a href="subject.html#121">[ subject ]</a>
              <a href="author.html#121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/liman-svn">More information about the Liman-svn
mailing list</a><br>
</body></html>
