From lazhur at berlios.de  Sun Jun  4 15:37:56 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sun, 4 Jun 2006 15:37:56 +0200
Subject: [Liman-svn] r131 - in trunk: . db design docs/beleg2/doxygen docs/protokoll include
Message-ID: <200606041337.k54Dbuf2019319@sheep.berlios.de>

Author: lazhur
Date: 2006-06-04 15:37:50 +0200 (Sun, 04 Jun 2006)
New Revision: 131

Added:
   trunk/include/form_helper.php
Modified:
   trunk/db/liman_struktur.sql
   trunk/db/liman_test.sql
   trunk/design/liman.css
   trunk/docs/beleg2/doxygen/classLiteratur.tex
   trunk/docs/beleg2/doxygen/classMitglied.tex
   trunk/docs/protokoll/2006_05_30.xhtml
   trunk/include/kommentar.php
   trunk/include/literatur.php
   trunk/include/mitglied.php
   trunk/include/suche.php
   trunk/index.php
   trunk/lit.php
   trunk/litmod.php
   trunk/search.php
   trunk/searchmore.php
   trunk/user.php
   trunk/userlist.php
   trunk/usermod.php
Log:
- grobe Literatur und Mitgliederverwaltung implementiert
- Protokoll 1. Pflichtbeleg korrigiert
- Formulare Erweiterte Suche in Fieldset zusammengefasst


Modified: trunk/db/liman_struktur.sql
===================================================================
--- trunk/db/liman_struktur.sql	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/db/liman_struktur.sql	2006-06-04 13:37:50 UTC (rev 131)
@@ -22,7 +22,7 @@
   `Literatur_Nr` int(11) NOT NULL auto_increment,
   `Art` enum('Buch','Artikel','Brosch?re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver?ffentlicht','Sonstiges') NOT NULL,
   `Titel` varchar(40) NOT NULL,
-  `Jahr` year(4) NOT NULL,
+  `Jahr` int(11) NOT NULL,
   `Verlag` varchar(40) NOT NULL,
   `ISBN` varchar(20) NOT NULL,
   `Beschreibung` text NOT NULL,

Modified: trunk/db/liman_test.sql
===================================================================
--- trunk/db/liman_test.sql	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/db/liman_test.sql	2006-06-04 13:37:50 UTC (rev 131)
@@ -32,7 +32,7 @@
   `Literatur_Nr` int(11) NOT NULL auto_increment,
   `Art` enum('Buch','Artikel','Brosch?re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver?ffentlicht','Sonstiges') NOT NULL,
   `Titel` varchar(40) NOT NULL,
-  `Jahr` year(4) NOT NULL,
+  `Jahr` int(11) NOT NULL,
   `Verlag` varchar(40) NOT NULL,
   `ISBN` varchar(20) NOT NULL,
   `Beschreibung` text NOT NULL,

Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/design/liman.css	2006-06-04 13:37:50 UTC (rev 131)
@@ -83,14 +83,27 @@
 	margin-left: 1em;
 }
 
+#content form td {
+	width: 99%;
+}
 
+#content form th {
+	width: 20em;
+}
+
+#content input[type="text"],
+#content input[type="password"],
+#content form textarea {
+	width: 99%;
+}
+
 #searchresult, #userlist {
 	
 	width: 99%;
 	border: 1px solid black;
 	border-collapse: collapse;
 }
-.searchmore td {
+.searchmore th label {
 	width:9em;
 }
 
@@ -108,3 +121,16 @@
 	text-align: left;
 	vertical-align: top;
 }
+
+#error_list {
+	padding: 0.5em;
+	border: 2px solid red;
+	margin: 0 auto;
+	margin-bottom: 1em;
+	background-color: #ffeaea;
+}
+.input_failure {
+	border-color: red;
+	background-color: red;
+	color: black;
+}

Modified: trunk/docs/beleg2/doxygen/classLiteratur.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-04 13:37:50 UTC (rev 131)
@@ -54,7 +54,7 @@
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Importiert:]\begin{itemize}
-\item \hyperlink{classAutor_77b27af7e471abe5a404fc92c7319921}{Autor::Clean}\item \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Autor::Get\-All}\item \hyperlink{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{Autor::Split}\item \hyperlink{classKommentar_9903f1df98f71eefa3b44a81d6a8ee5c}{Kommentar::Delete\-All}\item \hyperlink{classKommentar_33d65db8c526c50017a5fa029bc04416}{Kommentar::Get\-All}\item \hyperlink{classLiteraturArt_b3312217430531ed7821a46a39c49af7}{Literatur\-Art::Literatur\-Art}\item Literatur\-Art::Get\-Bib\-Tex\-Text\item \hyperlink{classLogin_6c120224aa6719f58c6ccd08acc28758}{Login::Is\-Administrator}\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\end{itemize}
+\item \hyperlink{classAutor_77b27af7e471abe5a404fc92c7319921}{Autor::Clean}\item \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Autor::Get\-All}\item \hyperlink{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{Autor::Split}\item \hyperlink{classKommentar_9903f1df98f71eefa3b44a81d6a8ee5c}{Kommentar::Delete\-All}\item \hyperlink{classKommentar_33d65db8c526c50017a5fa029bc04416}{Kommentar::Get\-All}\item \hyperlink{classLiteraturArt_b3312217430531ed7821a46a39c49af7}{Literatur\-Art::Literatur\-Art}\item Literatur\-Art::Get\-Bib\-Tex\-Text\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\end{itemize}
 \end{Desc}
 \begin{Desc}
 \item[Autor:]Sven Eckelmann \end{Desc}

Modified: trunk/docs/beleg2/doxygen/classMitglied.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classMitglied.tex	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/docs/beleg2/doxygen/classMitglied.tex	2006-06-04 13:37:50 UTC (rev 131)
@@ -14,9 +14,9 @@
 \begin{CompactList}\small\item\em Generiert Passworthash. \item\end{CompactList}\item 
 \hyperlink{classMitglied_c6900c12663e9b228bf9942fc045b8b4}{Delete} (\$nr)
 \begin{CompactList}\small\item\em Entfernt \hyperlink{classMitglied}{Mitglied}. \item\end{CompactList}\item 
-\hyperlink{classMitglied_a856527798258505adf9eb08b79fd9fc}{Insert} (\$login, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
+\hyperlink{classMitglied_5d9d5d087779303f002cbbcfcf1735c1}{Insert} (\$loginname, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
 \begin{CompactList}\small\item\em Legt \hyperlink{classMitglied}{Mitglied} an. \item\end{CompactList}\item 
-\hyperlink{classMitglied_0d173487bebdd0579a70ea007b37b5ec}{Update} (\$nr, \$login, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
+\hyperlink{classMitglied_5bd2a31b6aeea5c69de9b6de825e11c2}{Update} (\$nr, \$loginname, \$passwort, \$rechte, \$vorname, \$nachname, \$email)
 \begin{CompactList}\small\item\em ?ndert ein \hyperlink{classMitglied}{Mitglied}. \item\end{CompactList}\item 
 \hyperlink{classMitglied_70ce63c9c9a7159966dc9e80a7f726a2}{Get\-All} ()
 \begin{CompactList}\small\item\em R?ckgabe einer Liste der Mitglieder. \item\end{CompactList}\end{CompactItemize}
@@ -111,21 +111,21 @@
 \end{Desc}
 \begin{Desc}
 \item[Bemerkungen:]Ist der Nutzer nicht als Administrator, sondern als \hyperlink{classMitglied}{Mitglied} angemeldet, wird nur der eigene Eintrag zur?ckgegeben. Ist der Nutzer nicht angemeldet werden keine Operationen ausgef?hrt. \end{Desc}
-\hypertarget{classMitglied_a856527798258505adf9eb08b79fd9fc}{
+\hypertarget{classMitglied_5d9d5d087779303f002cbbcfcf1735c1}{
 \index{Mitglied@{Mitglied}!Insert@{Insert}}
 \index{Insert@{Insert}!Mitglied@{Mitglied}}
-\paragraph[Insert]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Insert (\$ {\em login}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
-\label{classMitglied_a856527798258505adf9eb08b79fd9fc}
+\paragraph[Insert]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Insert (\$ {\em loginname}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
+\label{classMitglied_5d9d5d087779303f002cbbcfcf1735c1}
 
 
 Legt \hyperlink{classMitglied}{Mitglied} an. 
 
-F?gt neues \hyperlink{classMitglied}{Mitglied} mit Benutzernamen (\$login), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder ein. Dazu wird das Passwort noch mit Mitglied::Passwort\-Hash gehasht. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
+F?gt neues \hyperlink{classMitglied}{Mitglied} mit Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder ein. Dazu wird das Passwort noch mit Mitglied::Passwort\-Hash gehasht. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
-\item[\mbox{$\leftarrow$} {\em \$login}]Benutzername des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]Benutzerpasswort des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]Rechte des neuen Mitglieds (1 - \hyperlink{classMitglied}{Mitglied}, 2 - Passwort) \item[\mbox{$\leftarrow$} {\em \$vorname}]Vorname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]Nachname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]E-Mail-Adresse des neuen Mitglieds \end{description}
+\item[\mbox{$\leftarrow$} {\em \$loginname}]Benutzername des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]Benutzerpasswort des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]Rechte des neuen Mitglieds (Benutzer, Administrator) \item[\mbox{$\leftarrow$} {\em \$vorname}]Vorname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]Nachname des neuen Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]E-Mail-Adresse des neuen Mitglieds \end{description}
 \end{Desc}
 \begin{Desc}
 \item[R\"{u}ckgabewerte:]
@@ -150,21 +150,21 @@
 \begin{description}
 \item[\mbox{$\leftarrow$} {\em \$pass}]zu hashendes Klartextpasswort \end{description}
 \end{Desc}
-\hypertarget{classMitglied_0d173487bebdd0579a70ea007b37b5ec}{
+\hypertarget{classMitglied_5bd2a31b6aeea5c69de9b6de825e11c2}{
 \index{Mitglied@{Mitglied}!Update@{Update}}
 \index{Update@{Update}!Mitglied@{Mitglied}}
-\paragraph[Update]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Update (\$ {\em nr}, \$ {\em login}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
-\label{classMitglied_0d173487bebdd0579a70ea007b37b5ec}
+\paragraph[Update]{\setlength{\rightskip}{0pt plus 5cm}Mitglied::Update (\$ {\em nr}, \$ {\em loginname}, \$ {\em passwort}, \$ {\em rechte}, \$ {\em vorname}, \$ {\em nachname}, \$ {\em email})}\hfill}
+\label{classMitglied_5bd2a31b6aeea5c69de9b6de825e11c2}
 
 
 ?ndert ein \hyperlink{classMitglied}{Mitglied}. 
 
-?ndert die Daten das Mitglieds mit der Mitglieds\_\-Nr (\$nr), in neuen Benutzernamen (\$login), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder. Wenn \$passwort nicht die L?nge 0 hat, wird es noch mit Mitglied::Passwort\-Hash gehasht. Andernfalls wird das alte Passwort in Mitglieder beibehalten. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
+?ndert die Daten das Mitglieds mit der Mitglieds\_\-Nr (\$nr), in neuen Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder. Wenn \$passwort nicht die L?nge 0 hat, wird es noch mit Mitglied::Passwort\-Hash gehasht. Andernfalls wird das alte Passwort in Mitglieder beibehalten. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
-\item[\mbox{$\leftarrow$} {\em \$nr}]Mitglieds\_\-Nr des zu ver?ndernden Mitglieds \item[\mbox{$\leftarrow$} {\em \$login}]neuer Benutzername des Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]neues Passwort des Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]neuen Rechte des Mitglieds \item[\mbox{$\leftarrow$} {\em \$vorname}]neuer Vorname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]neuer Nachname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]neue E-Mail-Adresse des Mitglieds \end{description}
+\item[\mbox{$\leftarrow$} {\em \$nr}]Mitglieds\_\-Nr des zu ver?ndernden Mitglieds \item[\mbox{$\leftarrow$} {\em \$loginname}]neuer Benutzername des Mitglieds \item[\mbox{$\leftarrow$} {\em \$passwort}]neues Passwort des Mitglieds \item[\mbox{$\leftarrow$} {\em \$rechte}]neuen Rechte des Mitglieds (Benutzer, Administrator) \item[\mbox{$\leftarrow$} {\em \$vorname}]neuer Vorname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$nachname}]neuer Nachname des Mitglieds \item[\mbox{$\leftarrow$} {\em \$email}]neue E-Mail-Adresse des Mitglieds \end{description}
 \end{Desc}
 \begin{Desc}
 \item[R\"{u}ckgabewerte:]

Modified: trunk/docs/protokoll/2006_05_30.xhtml
===================================================================
--- trunk/docs/protokoll/2006_05_30.xhtml	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/docs/protokoll/2006_05_30.xhtml	2006-06-04 13:37:50 UTC (rev 131)
@@ -49,8 +49,8 @@
 			
 			<h3 id="sitzung">N?chste Sitzung</h3>
 			<ul>
-				<li>Treffen am 31.05. 15:15</li>
-				<li>Besprechung einzelner Punkte des 2. Belegs und 3. Belegs</li>
+				<li>Treffen am 7.6. 15:15</li>
+				<li>Besprechung einzelner Punkte des 3. Belegs</li>
 			</ul>
 		</div>
 

Added: trunk/include/form_helper.php
===================================================================
--- trunk/include/form_helper.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/form_helper.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -0,0 +1,57 @@
+<?php
+	/*! \brief Gibt HTML-Form-Input zur?ck
+	 *
+	 *  \param[in] $type Type des Inputfeldes
+	 *  \param[in] $name ID und Name des Inputfeldes
+	 *  \param[in] $value Inhalt des Feldes
+	 *  \param[in] $failure ob Feld als fehlerhaft markiert werden soll
+	 */
+	function form_input($type, $name, $value = "", $failure = false)
+	{
+		$str = "<input type=\"".htmlspecialchars($type)."\" name=\"".htmlspecialchars($name)."\" id=\"".htmlspecialchars($name)."\" ";
+
+		if (empty($value) === false)
+		{
+			$str .= " value=\"".htmlspecialchars($value)."\" ";
+		}
+
+		if ($failure === true)
+		{
+			$str .= " class=\"input_failure\" ";
+		}
+
+		$str .= ">";
+		
+		return $str;
+	}
+
+	/*! \brief Gibt HTML-Form-Select zur?ck
+	 *
+	 *  \param[in] $options Feld mit Auswahlm?glichkeiten
+	 *  \param[in] $name ID und Name der Auswahlfeldes
+	 *  \param[in] $value aktuell ausgew?hltes Element der Auswahl
+	 *  \param[in] $failure ob Auswahl als fehlerhaft markiert werden soll
+	 */
+	function form_select($options, $name, $value="", $failure = false)
+	{
+		$str = "<select id=\"".htmlspecialchars($name)."\" name=\"".htmlspecialchars($name)."\" ";
+		if ($failure === true)
+		{
+			$str .= " class=\"input_failure\" ";
+		}
+		$str .= ">";
+
+		foreach ($options as $option)
+		{
+			$str .= " <option ";
+			if ($option == $value)
+			{
+				$str .= " selected ";
+			}
+			$str .= ">".htmlspecialchars($option)."</option>";
+		}
+		$str .= "</select>";
+
+		return $str;
+	}
+?>
\ No newline at end of file

Modified: trunk/include/kommentar.php
===================================================================
--- trunk/include/kommentar.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/kommentar.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -109,7 +109,7 @@
 		{
 			global $db_config, $sqldb, $login;
 
-			if ($login->IsAdministrator === true)
+			if ($login->IsAdministrator() === true)
 			{
 				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
 						WHERE Mitglieds_Nr = '$member_nr'";

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/literatur.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -17,7 +17,6 @@
 	 *  - Kommentar::GetAll
 	 *  - LiteraturArt::LiteraturArt
 	 *  - LiteraturArt::GetBibTexText
-	 *  - Login::IsAdministrator
 	 *  - Login::IsMember
 	 *  - SQLDB::Query
 	 *  - SQLDB::Fetch
@@ -79,49 +78,53 @@
 		 */
 		function ToBibtex()
 		{
-			$str = "@".$this->Art->GetBibtexText()."{".$this->Art->GetBibtexText().$this->Nr;
+			$str = "";
+			if (is_object($this->Art) === true)
+			{
+				$str = "@".$this->Art->GetBibtexText()."{".$this->Art->GetBibtexText().$this->Nr;
 				
-			if (!empty($this->Titel))
-			{
-				$str .= ",\n\ttitle = \"".addslashes($this->Titel)."\"";
-			}
-
-			if (count($this->Autoren) > 0)
-			{
-				$autorlist = "";
-				for ($j = 0; $j < count($this->Autoren); $j++)
+				if (!empty($this->Titel))
 				{
-					if ($j != 0)
+					$str .= ",\n\ttitle = \"".addslashes($this->Titel)."\"";
+				}
+	
+				if (count($this->Autoren) > 0)
+				{
+					$autorlist = "";
+					for ($j = 0; $j < count($this->Autoren); $j++)
 					{
-						$autorlist .= " and ";
+						if ($j != 0)
+						{
+							$autorlist .= " and ";
+						}
+						$autorlist .= $this->Autoren[$j]->Name;
 					}
-					$autorlist .= $this->Autoren[$j]->Name;
+	
+					$str .= ",\n\tauthor = \"".addslashes($autorlist)."\"";
 				}
-
-				$str .= ",\n\tauthor = \"".addslashes($autorlist)."\"";
+	
+				if (!empty($this->Jahr))
+				{
+					$str .= ",\n\tyear = \"".addslashes($this->Jahr)."\"";
+				}
+	
+				if (!empty($this->Verlag))
+				{
+					$str .= ",\n\tpublisher = \"".addslashes($this->Verlag)."\"";
+				}
+	
+				if (!empty($this->ISBN))
+				{
+					$str .= ",\n\tisbn = \"".addslashes($this->ISBN)."\"";
+				}
+	
+				if (!empty($this->Ort))
+				{
+					$str .= ",\n\taddress = \"".addslashes($this->Ort)."\"";
+				}
+				
+				$str .= "\n}\n";
 			}
-
-			if (!empty($this->Jahr))
-			{
-				$str .= ",\n\tyear = \"".addslashes($this->Jahr)."\"";
-			}
-
-			if (!empty($this->Verlag))
-			{
-				$str .= ",\n\tpublisher = \"".addslashes($this->Verlag)."\"";
-			}
-
-			if (!empty($this->ISBN))
-			{
-				$str .= ",\n\tisbn = \"".addslashes($this->ISBN)."\"";
-			}
-
-			if (!empty($this->Ort))
-			{
-				$str .= ",\n\taddress = \"".addslashes($this->Ort)."\"";
-			}
-			
-			$str .= "\n}\n";
 			return $str;
 		}
 
@@ -195,7 +198,7 @@
 		{
 			global $db_config, $sqldb, $login;
 
-			if ($login->IsAdministrator() === true)
+			if ($login->IsMember() === true)
 			{
 				$sql = "INSERT INTO ".$db_config['prefix']."Bibliothek
 						VALUES (NULL, '$art', '$titel', '$jahr', '$verlag', '$isbn', '$beschreibung', '$ort', '$stichworte')";
@@ -246,7 +249,7 @@
 		{
 			global $db_config, $sqldb, $login;
 
-			if ($login->IsAdministrator() === true)
+			if ($login->IsMember() === true)
 			{
 				$sql = "DELETE FROM ".$db_config['prefix']."Literatur_Autor
 						WHERE Literatur_Nr='$nr'";

Modified: trunk/include/mitglied.php
===================================================================
--- trunk/include/mitglied.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/mitglied.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -106,7 +106,7 @@
 		
 		/*! \brief Legt  Mitglied an
 		 *
-		 *  F?gt neues Mitglied mit Benutzernamen ($login), Passwort
+		 *  F?gt neues Mitglied mit Benutzernamen ($loginname), Passwort
 		 *  ($passwort), Benutzerrechten ($rechte), Vorname ($vorname),
 		 *  Nachname ($nachname), E-Mail-Adresse ($email) in Mitglieder
 		 *  ein. Dazu wird das Passwort noch mit Mitglied::PasswortHash
@@ -114,10 +114,10 @@
 		 *  wird ein Fehler zur?ckgegeben, da die Datenbank nur ein
 		 *  Mitglied mit gleichem Login erlaubt.
 		 *  \pre Datenbankverbindung muss bestehen
-		 *  \param[in] $login Benutzername des neuen Mitglieds
+		 *  \param[in] $loginname Benutzername des neuen Mitglieds
 		 *  \param[in] $passwort Benutzerpasswort des neuen Mitglieds
 		 *  \param[in] $rechte Rechte des neuen Mitglieds
-		 *     (1 - Mitglied, 2 - Passwort)
+		 *     (Benutzer, Administrator)
 		 *  \param[in] $vorname Vorname des neuen Mitglieds
 		 *  \param[in] $nachname Nachname des neuen Mitglieds
 		 *  \param[in] $email E-Mail-Adresse des neuen Mitglieds
@@ -126,27 +126,15 @@
 		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
 		 *    werden keine Operationen ausgef?hrt.
 		 */
-		function Insert($login, $passwort, $rechte, $vorname, $nachname, $email)
+		function Insert($loginname, $passwort, $rechte, $vorname, $nachname, $email)
 		{
 			global $db_config, $sqldb, $login;
 
 			if ($login->IsAdministrator() === true)
 			{
-				$rechtestring = "";
-				switch ($rechte)
-				{
-				case 2:
-					$rechtestring = "Administrator";
-					break;
-				default:
-				case 1:
-					$rechtestring = "Benutzer";
-					break;
-				}
-	
 				$passworthash = Mitglied::PasswordHash($passwort);
 				$sql = "INSERT INTO ".$db_config['prefix']."Mitglieder
-						VALUES (NULL, '$nachname', '$vorname', '$email', '$login', '$passworthash', '$rechtestring')";
+						VALUES (NULL, '$nachname', '$vorname', '$email', '$loginname', '$passworthash', '$rechte')";
 				
 				if ($sqldb->Query($sql) !== false)
 				{
@@ -166,7 +154,7 @@
 		/*! \brief ?ndert ein Mitglied
 		 *
 		 *  ?ndert die Daten das Mitglieds mit der Mitglieds_Nr ($nr),
-		 *  in neuen Benutzernamen ($login), Passwort ($passwort),
+		 *  in neuen Benutzernamen ($loginname), Passwort ($passwort),
 		 *  Benutzerrechten ($rechte), Vorname ($vorname),
 		 *  Nachname ($nachname), E-Mail-Adresse ($email) in
 		 *  Mitglieder. Wenn $passwort nicht die L?nge 0 hat, wird es 
@@ -177,9 +165,10 @@
 		 *  gleichem Login erlaubt.
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \param[in] $nr Mitglieds_Nr des zu ver?ndernden Mitglieds
-		 *  \param[in] $login neuer Benutzername des Mitglieds
+		 *  \param[in] $loginname neuer Benutzername des Mitglieds
 		 *  \param[in] $passwort neues Passwort des Mitglieds
 		 *  \param[in] $rechte neuen Rechte des Mitglieds
+		 *    (Benutzer, Administrator)
 		 *  \param[in] $vorname neuer Vorname des Mitglieds
 		 *  \param[in] $nachname neuer Nachname des Mitglieds
 		 *  \param[in] $email neue E-Mail-Adresse des Mitglieds
@@ -189,30 +178,23 @@
 		 *    werden keine Operationen ausgef?hrt, wenn $nr ungleich
 		 *    der eigenen Mitglieds_Nr is.
 		 */
-		function Update($nr, $login, $passwort, $rechte, $vorname, $nachname, $email)
+		function Update($nr, $loginname, $passwort, $rechte, $vorname, $nachname, $email)
 		{
 			global $db_config, $sqldb, $login;
 
 			if ($login->IsAdministrator() === true || $nr == $login->Nr)
 			{
-				$rechtestring = "";
-				switch ($rechte)
+				if ($login->IsAdministrator() === false)
 				{
-				case 2:
-					$rechtestring = "Administrator";
-					break;
-				default:
-				case 1:
-					$rechtestring = "Benutzer";
-					break;
+					$rechte = "Benutzer";
 				}
-	
+
 				$sql = "";
 				if (empty($passwort) === true)
 				{
 					
 					$sql = "UPDATE ".$db_config['prefix']."Mitglieder
-							SET Login='$login', Rechte='$rechtestring', Vorname='$vorname', Name='$nachname', Email='$email'
+							SET Login='$loginname', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
 							WHERE Mitglieds_Nr='$nr'
 							LIMIT 1";
 				}
@@ -220,7 +202,7 @@
 				{
 					$passworthash = Mitglied::PasswordHash($passwort);
 					$sql = "UPDATE ".$db_config['prefix']."Mitglieder
-							SET Login='$login', Passwort='$passworthash', Rechte='$rechtestring', Vorname='$vorname', Name='$nachname', Email='$email'
+							SET Login='$loginname', Passwort='$passworthash', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
 							WHERE Mitglieds_Nr='$nr'
 							LIMIT 1";
 				}

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/include/suche.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -98,8 +98,8 @@
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr
-						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext')
-						OR MATCH (Autorname) AGAINST ('$volltext')";
+						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext' IN BOOLEAN MODE)
+						OR MATCH (Autorname) AGAINST ('$volltext' IN BOOLEAN MODE)";
 				$sqldb->Query($sql);
 				
 				while ($cur = $sqldb->Fetch())

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/index.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -1,5 +1,5 @@
 <?php
-	$title = "Literaturliste";
+	$title = "Letzte Literatur";
 	//$extracss = "home.css";
 
 	require_once("include/header.php");

Modified: trunk/lit.php
===================================================================
--- trunk/lit.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/lit.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -70,7 +70,12 @@
 			?>
 				<tr>
 					<th scope="row">Aktionen:</th>	
-					<td><input type="submit" value="Bearbeiten"><input type="submit" value="L&ouml;schen"></td>
+					<td><form style="display:inline" action="litmod.<?=$ext;?>?id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+							<span><input type="submit" value="Bearbeiten"></span>
+						</form>
+						<form style="display:inline" action="litmod.<?=$ext;?>?delete=&amp;id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+							<span><input type="submit" value="L&ouml;schen"></span>
+					</form></td>
 				</tr>
 			<?php
 				}

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/litmod.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,70 +3,280 @@
 	//$extracss = "home.css";
 
 	require_once("include/header.php");
+
+	if ($login->IsMember() === false)
+	{
+		require_once("include/footer.php");
+		die();
+	}
 ?>
 <div id="cfront" class="content">
-	<form action="litmod.<?=$ext;?>?add" id="litaddform" method="post">
-	<table id="litadd">
-		<tbody>
-			<tr>
-				<th scope="row">Titel:</th>	
-				<td><input type="text" name="titel" id="titel"></td>
-			</tr>
-			<tr>
-				<th scope="row">Autor:</th>
-				<td><input type="text" name="autor" id="autor"></td>
-			</tr>
-			<tr>
-				<th scope="row">Erscheinungsjahr:</th>	
-				<td><input type="text" name="jahr" id="jahr"></td>
-			</tr>
-			<tr>
-				<th scope="row">Stichworte:</th>	
-				<td><input type="text"></td>
-			</tr>
-			<tr>
-				<th scope="row">Art:</th>	
-				<td><select name="art" id="art">
-					<option>Anleitung</option>
-					<option>Artikel</option>
-					<option>Brosch?re</option>
-					<option>Buch</option>
-					<option>Diplomarbeit</option>
-					<option>Dissertation</option>
-					<option>Protokoll</option>
-					<option>Sonstiges</option>
-					<option>Techn. Bericht</option>
-					<option>Unver?ffentlicht</option>
-				</select>
-				</td>
-			</tr>
+<?php
+	$error_occurred = false; // Fehler beim Verarbeiten aufgetreten?
+	$error_titel = false;
+	$error_autor = false;
+	$error_jahr = false;
 
+	if (isset($_GET["insert"]) === true || isset($_GET["update"]) === true)
+	{
+		if (empty($_POST["titel"]) === true)
+		{
+			$error_titel = true;
+			$error_occurred = true;
+		}
 
-			<tr>
-				<th scope="row">Verlag:</th>	
-				<td><input type="text" name="verlag" id="verlag"></td>
-			</tr>
-			<tr>
-				<th scope="row">Verlagsort:</th>	
-				<td><input type="text" name="ort" id="ort"></td>
-			</tr>
+		if (empty($_POST["autor"]) === true)
+		{
+			$error_autor = true;
+			$error_occurred = true;
+		}
 
-			<tr>
-				<th scope="row">ISBN:</th>	
-				<td><input type="text" name="isbn" id="isbn"></td>
-			</tr>
-			<tr>
-				<th scope="row">Bemerkung:</th>	
-				<td><textarea cols="20" rows="10" name="beschreibung" id="beschreibung"></textarea></td>
-			</tr>
-			<tr>
-				<th scope="row">Aktionen:</th>	
-				<td><input type="submit" value="&Uuml;bernehmen"></td>
-			</tr>
+		if (empty($_POST["jahr"]) === false && is_numeric($_POST["jahr"]) === false)
+		{
+			$error_jahr = true;
+			$error_occurred = true;
+		}
+	}
 
-		</tbody>
-	</table>
-	</form>
+	if ($error_occurred == true)
+	{
+		echo "<div id=\"error_list\">Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:<ul>";
+		
+		if ($error_titel === true)
+		{
+			echo "<li>Sie m?ssen einen Titel f?r die Literatur angeben</li>";
+		}
+
+		if ($error_autor === true)
+		{
+			echo "<li>Sie m?ssen mindestens einen Autor angeben</li>";
+		}
+
+		if ($error_jahr === true)
+		{
+			echo "<li>Das Jahr muss eine Zahl sein</li>";
+		}
+
+		echo "</ul></div>";
+	}
+
+
+	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
+		|| $error_occurred === true)
+	{
+		require_once("include/form_helper.php");
+		if (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+		{
+			require_once("include/literatur.php");
+
+			if (isset($_POST["id"]) === true)
+			{
+				$id = $_POST["id"];
+			}
+			else
+			{
+				$id = $_GET["id"];
+			}
+
+			$lit = new Literatur($_GET["id"]);
+			$titel = $lit->Titel;
+			$autor = "";
+			$jahr = $lit->Jahr;
+			$stichworte = $lit->Stichworte;
+
+			if (isset($lit->Art) === true)
+			{
+				$art = $lit->Art->GetDisplayText();
+			}
+			else
+			{
+				$art = "Buch";
+			}
+
+			$autor = "";
+			if (isset($lit->Autoren) === true)
+			{
+				for ($j = 0; $j < count($lit->Autoren); $j++)
+				{
+					if ($j != 0)
+					{
+						$autor .= ", ";
+					}
+					$autor .= $lit->Autoren[$j]->Name;
+				}
+			}
+
+			$verlag = $lit->Verlag;
+			$ort = $lit->Ort;
+			$isbn = $lit->ISBN;
+			$beschreibung = $lit->Beschreibung;
+		}
+		else
+		{
+			if (isset($_POST["titel"]) === true)
+			{
+				$titel = stripslashes($_POST["titel"]);
+			}
+			else
+			{
+				$titel = "";
+			}
+
+			if (isset($_POST["autor"]) === true)
+			{
+				$autor = stripslashes($_POST["autor"]);
+			}
+			else
+			{
+				$autor = "";
+			}
+
+			if (isset($_POST["jahr"]) === true)
+			{
+				$jahr = stripslashes($_POST["jahr"]);
+			}
+			else
+			{
+				$jahr = "";
+			}
+
+			if (isset($_POST["stichworte"]) === true)
+			{
+				$stichworte = stripslashes($_POST["stichworte"]);
+			}
+			else
+			{
+				$stichworte = "";
+			}
+
+			if (isset($_POST["art"]) === true)
+			{
+				$art = stripslashes($_POST["art"]);
+			}
+			else
+			{
+				$art = "Buch";
+			}
+
+			if (isset($_POST["verlag"]) === true)
+			{
+				$verlag = stripslashes($_POST["verlag"]);
+			}
+			else
+			{
+				$verlag = "";
+			}
+
+			if (isset($_POST["ort"]) === true)
+			{
+				$ort = stripslashes($_POST["ort"]);
+			}
+			else
+			{
+				$ort = "";
+			}
+
+			if (isset($_POST["isbn"]) === true)
+			{
+				$isbn = stripslashes($_POST["isbn"]);
+			}
+			else
+			{
+				$isbn = "";
+			}
+
+			if (isset($_POST["beschreibung"]) === true)
+			{
+				$beschreibung = stripslashes($_POST["beschreibung"]);
+			}
+			else
+			{
+				$beschreibung = "";
+			}
+		}
+
+		if (empty($id) === true)
+		{
+			echo "<form action=\"litmod.".$ext."?insert\" id=\"litaddform\" method=\"post\">";
+		}
+		else
+		{
+			echo "<form action=\"litmod.".$ext."?update\" id=\"litupdateform\" method=\"post\">";
+			echo form_input("hidden", "id", $id);
+		}
+	?>
+		<table id="litadd">
+			<tbody>
+				<tr>
+					<th scope="row">Titel:</th>	
+					<td><?=form_input("text", "titel", $titel, $error_titel);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Autor:</th>
+					<td><?=form_input("text", "autor", $autor, $error_autor);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Erscheinungsjahr:</th>	
+					<td><?=form_input("text", "jahr", $jahr, $error_jahr);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Stichworte:</th>	
+					<td><?=form_input("text", "stichworte", $stichworte);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Art:</th>	
+					<td><?=form_select(array("Anleitung", "Artikel", "Brosch?re", "Buch", "Diplomarbeit",
+						"Dissertation", "Protokoll", "Sonstiges", "Techn. Bericht", "Unver?ffentlicht"),
+						"art", $art);?>
+					</td>
+				</tr>
+				<tr>
+					<th scope="row">Verlag:</th>	
+					<td><?=form_input("text", "verlag", $verlag);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Verlagsort:</th>	
+					<td><?=form_input("text", "ort", $ort);?></td>
+				</tr>
+	
+				<tr>
+					<th scope="row">ISBN:</th>	
+					<td><?=form_input("text", "isbn", $isbn);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Bemerkung:</th>	
+					<td><textarea cols="20" rows="10" name="beschreibung" id="beschreibung"><?=htmlspecialchars($beschreibung);?></textarea></td>
+				</tr>
+				<tr>
+					<th scope="row">Aktionen:</th>	
+					<td><input type="submit" value="&Uuml;bernehmen"></td>
+				</tr>
+	
+			</tbody>
+		</table>
+		</form>
+	<?php
+	}
+	else
+	{
+		require_once("include/literatur.php");
+		if (isset($_GET["delete"]) === true)
+		{
+			/// \todo Hier erstmal nachfragen, ob ?berhaupt L?schen
+			
+			Literatur::Delete($_GET["id"]);
+		}
+		elseif  (isset($_GET["insert"]) === true)
+		{
+			/// \todo Hier erstmal schauen, ob Literatur mit Titel und Autor existiert und entsprechend Nachfragen
+			Literatur::Insert($_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+		}
+		elseif (isset($_GET["update"]) === true)
+		{
+			Literatur::Update($_POST["id"], $_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+		}
+	}
+?>
 </div>
 <?php	require_once("include/footer.php"); ?>
 

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/search.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,11 +3,11 @@
 
 	if (isset($_GET["suchbegriff"]) === true)
 	{
-		$title = "Suchergebnisse f&uuml;r \"".htmlspecialchars(addslashes($_GET["suchbegriff"]))."\"";
+		$title = "Suchergebnisse f&uuml;r \"".htmlspecialchars($_GET["suchbegriff"])."\"";
 	}
 	elseif (isset($_GET["autor"]) === true && isset($_GET["titel"]) === true)
 	{
-		$title = "Suchergebnisse f&uuml;r \"".htmlspecialchars(addslashes($_GET["autor"]))."\" und \"".htmlspecialchars(addslashes($_GET["titel"]))."\"";
+		$title = "Suchergebnisse f&uuml;r \"".htmlspecialchars($_GET["autor"])."\" und \"".htmlspecialchars($_GET["titel"])."\"";
 	}
 	else
 	{

Modified: trunk/searchmore.php
===================================================================
--- trunk/searchmore.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/searchmore.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -5,36 +5,49 @@
 	require_once("include/header.php");
 ?>
 <div id="cfront" class="content">
-	<h3>Autoren- und Titelsuche</h3>
-	<form action="search.<?=$ext;?>" id="searchform" method="get">
-	<table class="searchmore">
-		<tbody>
-			<tr>
-				<td scope=row><label for="autor">Autor:</label></td>
-				<td><input id="autor" name="autor"></td>
-				<td>&nbsp;</td>
-			</tr>
-			<tr>
-				<td scope=row><label for="titel">Titel:</label></td>
-				<td><input type="text" id="titel" name="titel"></td>
-				<td><input type="submit" value="Suche"></td>
-			</tr>
-		</tbody>
-	</table>
+
+	<form action="search.<?=$ext;?>" id="extrasearchform" method="get">
+	<fieldset>
+   		 <legend><b>Autoren- und Titelsuche</b></legend>
+	
+	
+		<table class="searchmore">
+			<tbody>
+				<tr>
+					<th scope=row><label for="autor">Autor:</label></th>
+					<td><input type="text" id="autor" name="autor"></td>
+				</tr>
+				<tr>
+					<th scope=row><label for="titel">Titel:</label></th>
+					<td><input type="text" id="titel" name="titel"></td>
+				</tr>
+				<tr>
+					<th></th>
+					<td><input type="submit" value="Suche"></td>
+				</tr>
+			</tbody>
+		</table>
+	</fieldset>
 	</form>
+
 	<hr>
 	
-	<h3>Volltextsuche</h3>
-	<form action="search.<?=$ext;?>" id="searchform" method="get">
-	<table class="searchmore">
-		<tbody>
-			<tr>
-				<td scope=row><label for="suchbegriff">Suchbegriff:</label></td>
-				<td><input type="text" id="suchbegriff" name="suchbegriff"></td>
-				<td><input type="submit" value="Suche"></td>
-			</tr>
-		</tbody>
-	</table>
+	<form action="search.<?=$ext;?>" id="fulltextform" method="get">
+	<fieldset>
+   		<legend><b>Volltextsuche</b></legend>
+		<table class="searchmore">
+			<tbody>
+				<tr>
+					<th scope=row><label for="suchbegriff">Suchbegriff:</label></th>
+					<td><input type="text" id="suchbegriff" name="suchbegriff"></td>
+				</tr>
+				<tr>
+					<th></th>
+					<td><input type="submit" value="Suche"></td>
+				</tr>
+			</tbody>
+		</table>
+	</fieldset>
 	</form>
 </div>
 <?php	require_once("include/footer.php"); ?>

Modified: trunk/user.php
===================================================================
--- trunk/user.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/user.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,6 +3,27 @@
 	//$extracss = "home.css";
 
 	require_once("include/header.php");
+	require_once("include/mitglied.php");
+
+	if ($login->IsMember() === false)
+	{
+		require_once("include/footer.php");
+		die();
+	}
+	elseif ($login->IsAdministrator() === false)
+	{
+		$_GET["id"] = $login->Nr;
+		$_POST["id"] = $login->Nr;
+	}
+
+	if (isset($_GET["id"]))
+	{
+		$mitglied = new Mitglied($_GET["id"]);
+	}
+	else
+	{
+		$mitglied = new Mitglied(0);
+	}
 ?>
 <div id="cfront" class="content">
 	<form action="usermod.php">
@@ -11,29 +32,43 @@
 		<tbody>
 			<tr>
 				<th scope="row">Login:</th>	
-				<td>siwu</td>
+				<td><?=htmlspecialchars($mitglied->Login);?></td>
 			</tr>
 			<tr>
 				<th scope="row">Vorname:</th>	
-				<td>Simon</td>
+				<td><?=htmlspecialchars($mitglied->Vorname);?></td>
 			</tr>
 			<tr>
 				<th scope="row">Nachname:</th>	
-				<td>Wunderlich</td>
+				<td><?=htmlspecialchars($mitglied->Nachname);?></td>
 			</tr>
 			<tr>
 				<th scope="row">Rechte:</th>	
-				<td>Administrator</td>
+				<td><?php
+					switch ($mitglied->Rechte)
+					{
+					case 2:
+						$rechte = "Administrator";
+						break;
+					default:
+					case 1:
+						$rechte = "Benutzer";
+						break;
+					}
+					echo htmlspecialchars($rechte);
+				?></td>
 			</tr>
 
 			<tr>
 				<th scope="row">E-Mail:</th>	
-				<td>siwu at hrz.tu-chemnitz.de</td>
+				<td><?=htmlspecialchars($mitglied->Email);?></td>
 			</tr>
 			<tr>
 				<th scope="row">Aktionen:</th>	
 				<td>
-				<input type="submit" value="Bearbeiten">
+					<form style="display:inline" action="usermod.<?=$ext;?>?id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+						<span><input type="submit" value="Bearbeiten"></span>
+					</form>
 				</td>
 			</tr>
 		</tbody>

Modified: trunk/userlist.php
===================================================================
--- trunk/userlist.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/userlist.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -5,7 +5,6 @@
 	require_once("include/header.php");
 ?>
 <div id="cfront" class="content">
-	<form action="usermod.php">
 	<table id="userlist">
 		<thead>
 			<tr>
@@ -34,11 +33,15 @@
 					<?php
 						if ($login->IsAdministrator() === true || $login->Nr == $cur->Nr)
 						{
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?id=".htmlspecialchars($cur->Nr)."\">";
 							echo "<input type=\"submit\" value=\"Bearbeiten\">";
+							echo "</form>";
 						}
-						else
+						if ($login->IsAdministrator() === true)
 						{
-							echo "<input type=\"submit\" value=\"Details\">";
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?delete=&id=".htmlspecialchars($cur->Nr)."\">";
+							echo "<input type=\"submit\" value=\"L?schen\">";
+							echo "</form>";
 						}
 					?>
 				</td>
@@ -48,7 +51,6 @@
 			?>
 		</tbody>
 	</table>
-	</form>
 
 	<?php
 		if ($login->IsAdministrator() === true)

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-05-30 20:27:01 UTC (rev 130)
+++ trunk/usermod.php	2006-06-04 13:37:50 UTC (rev 131)
@@ -3,44 +3,244 @@
 	//$extracss = "home.css";
 
 	require_once("include/header.php");
+
+	if ($login->IsMember() === false)
+	{
+		require_once("include/footer.php");
+		die();
+	}
+	elseif ($login->IsAdministrator() === false)
+	{
+		$_GET["id"] = $login->Nr;
+		$_POST["id"] = $login->Nr;
+	}
 ?>
 <div id="cfront" class="content">
-	
-	<form action="usermod.<?=$ext;?>?add" id="litaddform" method="post">
+<?php
+	$error_occurred = false; // Fehler beim Verarbeiten aufgetreten?
+	$error_benutzername = false;
+	$error_vorname = false;
+	$error_nachname = false;
+	$error_email = false;
+	$error_password = false;
+	$error_password_missing = false;
+	$error_password_different = false;
+
+	if (isset($_GET["insert"]) === true || isset($_GET["update"]) === true)
+	{
+		if (empty($_POST["benutzername"]) === true)
+		{
+			$error_benutzername = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["vorname"]) === true)
+		{
+			$error_vorname = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["nachname"]) === true)
+		{
+			$error_nachname = true;
+			$error_occurred = true;
+		}
+		
+		if (empty($_POST["email"]) === true)
+		{
+			$error_email = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["password"]) === true && isset($_GET["insert"]) === true)
+		{
+			$error_password = true;
+			$error_password_missing = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["password"]) === false || empty($_POST["password_check"]) === false)
+		{
+			if ($_POST["password"] != $_POST["password_check"])
+			{
+				$error_password = true;
+				$error_password_different = true;
+				$error_occurred = true;
+			}
+		}
+	}
+
+	if ($error_occurred == true)
+	{
+		echo "<div id=\"error_list\">Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:<ul>";
+		
+		if ($error_benutzername === true)
+		{
+			echo "<li>Sie m?ssen ein Login angeben</li>";
+		}
+		
+		if ($error_vorname === true)
+		{
+			echo "<li>Sie m?ssen einen Vornamen angeben</li>";
+		}
+		
+		if ($error_nachname === true)
+		{
+			echo "<li>Sie m?ssen ein Nachnamen angeben</li>";
+		}
+		
+		if ($error_email === true)
+		{
+			echo "<li>E-Mail scheint nicht korrekt zu sein</li>";
+		}
+		
+		if ($error_password_missing === true)
+		{
+			echo "<li>Sie m?ssen ein Passwort angeben</li>";
+		}
+		elseif ($error_password_different === true)
+		{
+			echo "<li>Passw?rter stimmen nicht ?berein</li>";
+		}
+
+		echo "</ul></div>";
+	}
+
+
+	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
+		|| $error_occurred === true)
+	{
+		require_once("include/form_helper.php");
+		if (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+		{
+			require_once("include/mitglied.php");
+
+			if (isset($_POST["id"]) === true)
+			{
+				$id = $_POST["id"];
+			}
+			else
+			{
+				$id = $_GET["id"];
+			}
+
+			$mitglied = new Mitglied($_GET["id"]);
+			$benutzername = $mitglied->Login;
+
+			if (isset($mitglied->Rechte) === true)
+			{
+				switch ($mitglied->Rechte)
+				{
+				case 2:
+					$rechte = "Administrator";
+					break;
+				default:
+				case 1:
+					$rechte = "Benutzer";
+					break;
+				}
+			}
+			else
+			{
+				$rechte = "Benutzer";
+			}
+
+			$vorname = $mitglied->Vorname;
+			$nachname = $mitglied->Nachname;
+			$email = $mitglied->Email;
+		}
+		else
+		{
+			if (isset($_POST["benutzername"]) === true)
+			{
+				$benutzername = stripslashes($_POST["benutzername"]);
+			}
+			else
+			{
+				$benutzername = "";
+			}
+
+			if (isset($_POST["rechte"]) === true)
+			{
+				$rechte = stripslashes($_POST["rechte"]);
+			}
+			else
+			{
+				$rechte = "Benutzer";
+			}
+
+			if (isset($_POST["vorname"]) === true)
+			{
+				$vorname = stripslashes($_POST["vorname"]);
+			}
+			else
+			{
+				$vorname = "";
+			}
+
+			if (isset($_POST["nachname"]) === true)
+			{
+				$nachname = stripslashes($_POST["nachname"]);
+			}
+			else
+			{
+				$nachname = "";
+			}
+
+			if (isset($_POST["email"]) === true)
+			{
+				$email = stripslashes($_POST["email"]);
+			}
+			else
+			{
+				$email = "";
+			}
+
+			$passwort = "";
+		}
+
+	if (empty($id) === true)
+	{
+		echo "<form action=\"usermod.".$ext."?insert\" id=\"useraddform\" method=\"post\">";
+	}
+	else
+	{
+		echo "<form action=\"usermod.".$ext."?update\" id=\"userupdateform\" method=\"post\">";
+		echo form_input("hidden", "id", $id);
+	}
+?>
 	<table id="bookdetails">
 		<tbody>
 			<tr>
 				<th scope="row">Login:</th>	
-				<td><input type="text" value="siwu" name="login" id="login"></td>
+				<td><?=form_input("text", "benutzername", $benutzername, $error_benutzername);?></td>
 			</tr>
 			<tr>
 				<th scope="row">Vorname:</th>	
-				<td><input type="text" value="Simon" name="vorname" id="vorname"></td>
+				<td><?=form_input("text", "vorname", $vorname, $error_vorname);?></td>
 			</tr>
 			<tr>
 				<th scope="row">Nachname:</th>	
-				<td><input type="text" value="Wunderlich" name="nachname" id="nachname"></td>
+				<td><?=form_input("text", "nachname", $nachname, $error_nachname);?></td>
 			</tr>
 			<tr>
 				<th scope="row">E-Mail:</th>	
-				<td><input type="text" value="siwu at hrz.tu-chemnitz.de" name="email" id="email"></td>
+				<td><?=form_input("text", "email", $email, $error_email);?></td>
 			</tr>
 			<tr>
 				<th scope="row" name="rechte" id="rechte">Rechte:</th>	
-				<td><select>
-				<option>Administrator</option>
-				<option>Mitarbeiter</option>
-				</select>
+				<td><?=form_select(array("Administrator", "Benutzer"),
+					"rechte", $rechte);?>
 				</td>
 			</tr>
 
 			<tr>
 				<th scope="row">Passwort:</th>	
-				<td><input type="password" value="password" name="passwort" id="passwort"></td>
+				<td><?=form_input("password", "password", "", $error_password);?></td>
 			</tr>
 			<tr>
 				<th scope="row">Passwort (wiederholen):</th>	
-				<td><input type="password" value="password" name="passwort_check" id="passwort_check"></td>
+				<td><?=form_input("password", "password_check", "", $error_password);?></td>
 			</tr>
 
 			<tr>
@@ -53,5 +253,27 @@
 		</tbody>
 	</table>
 	</form>
+<?php
+	}
+	else
+	{
+		require_once("include/mitglied.php");
+		if (isset($_GET["delete"]) === true)
+		{
+			/// \todo Hier erstmal nachfragen, ob ?berhaupt L?schen
+			Mitglied::Delete($_GET["id"]);
+		}
+		elseif  (isset($_GET["insert"]) === true)
+		{
+			/// \todo ?berhaupt die Rechte dazu?
+			Mitglied::Insert($_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]);
+		}
+		elseif (isset($_GET["update"]) === true)
+		{
+			/// \todo beide passw?rter gleich?
+			Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]);
+		}
+	}
+?>
 </div>
 <?php	require_once("include/footer.php"); ?>



From lazhur at berlios.de  Sun Jun  4 16:52:30 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sun, 4 Jun 2006 16:52:30 +0200
Subject: [Liman-svn] r132 - in trunk: . design include
Message-ID: <200606041452.k54EqUtt007314@sheep.berlios.de>

Author: lazhur
Date: 2006-06-04 16:52:30 +0200 (Sun, 04 Jun 2006)
New Revision: 132

Modified:
   trunk/design/liman.css
   trunk/include/header.php
   trunk/litmod.php
   trunk/login.php
   trunk/search.php
   trunk/userlist.php
   trunk/usermod.php
Log:
- Warnungen hinzugef?\195?\188gt
- Literaturverwaltung erweitert


Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-06-04 13:37:50 UTC (rev 131)
+++ trunk/design/liman.css	2006-06-04 14:52:30 UTC (rev 132)
@@ -54,7 +54,7 @@
 	list-style: none;
 }
 
-#search input, #loginform #login, #loginform #password {
+#search input, #loginform #benutzername, #loginform #password {
 	margin: 0 auto;
 	font-size: 1em;
 	width: 10.8em;
@@ -122,13 +122,18 @@
 	vertical-align: top;
 }
 
-#error_list {
+#error_list, #error {
 	padding: 0.5em;
 	border: 2px solid red;
 	margin: 0 auto;
 	margin-bottom: 1em;
 	background-color: #ffeaea;
 }
+
+#error, #warning {
+	text-align: center;
+}
+
 .input_failure {
 	border-color: red;
 	background-color: red;

Modified: trunk/include/header.php
===================================================================
--- trunk/include/header.php	2006-06-04 13:37:50 UTC (rev 131)
+++ trunk/include/header.php	2006-06-04 14:52:30 UTC (rev 132)
@@ -64,7 +64,7 @@
 					?>
 						<form action="login.<?=$ext;?>" id="loginform" method="post">
 							<div>
-							<label for="login">Login:</label><input id="login" name="login" value="" type="text">
+							<label for="benutzername">Login:</label><input id="benutzername" name="benutzername" value="" type="text">
 							<label for="password">Passwort:</label><input id="password" name="password" type="password">
 							<input type="submit" value="Login">
 							</div>

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-04 13:37:50 UTC (rev 131)
+++ trunk/litmod.php	2006-06-04 14:52:30 UTC (rev 132)
@@ -6,6 +6,7 @@
 
 	if ($login->IsMember() === false)
 	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
 		require_once("include/footer.php");
 		die();
 	}
@@ -262,21 +263,93 @@
 		require_once("include/literatur.php");
 		if (isset($_GET["delete"]) === true)
 		{
-			/// \todo Hier erstmal nachfragen, ob ?berhaupt L?schen
-			
-			Literatur::Delete($_GET["id"]);
+			if (isset($_POST["accept"]) === true)
+			{
+				Literatur::Delete($_POST["id"]);
+				echo "<p style=\"text-align: center\">Literatur wurde entfernt</p>";
+			}
+			else
+			{
+				require_once("include/form_helper.php");
+				echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+				echo "Trotzdem entfernen?";
+				echo "<form action=\"litmod.".$ext."?delete\" id=\"litupdateform\" method=\"post\">";
+				echo form_input("hidden", "id", $_GET["id"]);
+				echo form_input("hidden", "accept", "true");
+				echo "<input type=\"submit\" value=\"Best?tigen\">";
+				echo "</form></div>";
+			}
 		}
 		elseif  (isset($_GET["insert"]) === true)
 		{
-			/// \todo Hier erstmal schauen, ob Literatur mit Titel und Autor existiert und entsprechend Nachfragen
-			Literatur::Insert($_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+			if (isset($_POST["accept"]) === false)
+			{
+				require_once("include/suche.php");
+				$search = new Suche($_POST["titel"], $_POST["autor"]);
+				if (empty($search->Treffer) === false)
+				{
+				?>
+					Es wurde ?hnliche Literatur gefunden:
+					<table id="searchresult">
+				
+						<thead>
+							<tr>
+								<th scope="col">Titel</th>
+								<th scope="col">Autor</th>
+								<th scope="col">Verlag</th>
+								<th scope="col">ISBN</th>
+							</tr>
+						</thead>
+					<tbody>
+				<?php
+			
+					for ($i = 0; $i < count($search->Treffer); $i++)
+					{
+						$cur = $search->Treffer[$i];
+				?>
+					<tr>
+						<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+						<td><?=htmlspecialchars($cur->Autor);?></td>
+						<td><?=htmlspecialchars($cur->Verlag);?></td>
+						<td><?=htmlspecialchars($cur->ISBN);?></td>
+					</tr>
+				<?php
+					}
+				?>
+						</tbody>
+					</table>
+				<?php
+					require_once("include/form_helper.php");
+					echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+					echo "Trotzdem hinzuf?gen?";
+					echo "<form action=\"litmod.".$ext."?insert\" id=\"litupdateform\" method=\"post\">";
+					echo form_input("hidden", "accept", "true");
+					echo form_input("hidden", "titel", $_POST["titel"]);
+					echo form_input("hidden", "autor", $_POST["autor"]);
+					echo form_input("hidden", "jahr", $_POST["jahr"]);
+					echo form_input("hidden", "stichworte", $_POST["stichworte"]);
+					echo form_input("hidden", "art", $_POST["art"]);
+					echo form_input("hidden", "verlag", $_POST["verlag"]);
+					echo form_input("hidden", "ort", $_POST["ort"]);
+					echo form_input("hidden", "isbn", $_POST["isbn"]);
+					echo form_input("hidden", "beschreibung", $_POST["beschreibung"]);
+					echo "<input type=\"submit\" value=\"Best?tigen\">";
+					echo "</form></div>";
+				}
+			}
+
+			if (isset($_POST["accept"]) === true || empty($search->Treffer) === true)
+			{
+				Literatur::Insert($_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+				echo "<p style=\"text-align: center\">Literatur wurde hinzugef?gt</p>";
+			}
 		}
 		elseif (isset($_GET["update"]) === true)
 		{
 			Literatur::Update($_POST["id"], $_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+			echo "<p style=\"text-align: center\">Literatur wurde ge?ndert</p>";
 		}
 	}
 ?>
 </div>
 <?php	require_once("include/footer.php"); ?>
-

Modified: trunk/login.php
===================================================================
--- trunk/login.php	2006-06-04 13:37:50 UTC (rev 131)
+++ trunk/login.php	2006-06-04 14:52:30 UTC (rev 132)
@@ -5,11 +5,11 @@
 	
 	require_once("include/global.php");
 
-	if (!empty($_POST["login"]) && !empty($_POST["password"]))
+	if (empty($_POST["benutzername"]) === false && empty($_POST["password"]) === false)
 	{
-		$login = new Login($_POST["login"], $_POST["password"]);
+		$login = new Login($_POST["benutzername"], $_POST["password"]);
 	}
-	elseif (isset($_GET["logout"]))
+	elseif (isset($_GET["logout"]) === true)
 	{
 		$login->Logout();
 	}
@@ -17,5 +17,23 @@
 	require_once("include/header.php");
 ?>
 <div id="clogin" class="content">
+	<div style="text-align: center">
+	<?php
+		if (isset($_GET["logout"]) === true)
+		{
+			echo "Auf Wiedersehen";
+		}
+		elseif ($login->IsMember() === true)
+		{
+			require_once("include/mitglied.php");
+			$mitglied = new Mitglied($login->Nr);
+			echo "Willkommen ".$mitglied->Vorname." ".$mitglied->Nachname;
+		}
+		else
+		{
+			echo "<div id=\"error\">Login ist Fehlgeschlagen</div>";
+		}
+	?>
+	</div>
 </div>
 <?php	require_once("include/footer.php"); ?>

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-06-04 13:37:50 UTC (rev 131)
+++ trunk/search.php	2006-06-04 14:52:30 UTC (rev 132)
@@ -17,61 +17,73 @@
 	require_once("include/header.php");
 ?>
 <div id="cfront" class="content">
-	
-	<table id="searchresult">
-		<thead>
-			<tr>
-				<th scope="col">Titel</th>
-				<th scope="col">Autor</th>
-				<th scope="col">Verlag</th>
-				<th scope="col">ISBN</th>
-			</tr>
-		</thead>
-		<tbody>
-			<?php
-				require_once("include/suche.php");
+<?php
+	require_once("include/suche.php");
 
-				if (isset($_GET["suchbegriff"]) === true)
-				{
-					$search = new Suche($_GET["suchbegriff"]);
-				}
-				elseif (isset($_GET["autor"]) === true && isset($_GET["titel"]) === true)
-				{
-					$search = new Suche($_GET["titel"], $_GET["autor"]);
-				}
-				else
-				{
-					$search = new Suche();
-				}
+	if (isset($_GET["suchbegriff"]) === true)
+	{
+		$search = new Suche($_GET["suchbegriff"]);
+	}
+	elseif (isset($_GET["autor"]) === true && isset($_GET["titel"]) === true)
+	{
+		$search = new Suche($_GET["titel"], $_GET["autor"]);
+	}
+	else
+	{
+		$search = new Suche();
+	}
 
-				for ($i = 0; $i < count($search->Treffer); $i++)
-				{
-					$cur = $search->Treffer[$i];
-			?>
+	if (empty($search->Treffer) === false)
+	{
+	?>
+		<table id="searchresult">
+			<thead>
 				<tr>
-					<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
-					<td><?=htmlspecialchars($cur->Autor);?></td>
-					<td><?=htmlspecialchars($cur->Verlag);?></td>
-					<td><?=htmlspecialchars($cur->ISBN);?></td>
+					<th scope="col">Titel</th>
+					<th scope="col">Autor</th>
+					<th scope="col">Verlag</th>
+					<th scope="col">ISBN</th>
 				</tr>
-			<?php
-				}
-			?>
-		</tbody>
-	</table>
+			</thead>
+		<tbody>
+	<?php
 
-	<?php
-		if ($login->IsMember() === true)
+		for ($i = 0; $i < count($search->Treffer); $i++)
 		{
+			$cur = $search->Treffer[$i];
 	?>
-		<hr>
-		<form action="litmod.php">
-			<div>
-				<input type="submit" value="Literatur hinzuf&uuml;gen">
-			</div>
-		</form>
+		<tr>
+			<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+			<td><?=htmlspecialchars($cur->Autor);?></td>
+			<td><?=htmlspecialchars($cur->Verlag);?></td>
+			<td><?=htmlspecialchars($cur->ISBN);?></td>
+		</tr>
 	<?php
 		}
 	?>
+			</tbody>
+		</table>	
+	<?php
+	}
+	else
+	{
+		echo "<div id=\"warning\">Keine Treffern gefunden</div>";
+	}
+?>
+
+
+<?php
+	if ($login->IsMember() === true)
+	{
+?>
+	<hr>
+	<form action="litmod.php">
+		<div>
+			<input type="submit" value="Literatur hinzuf&uuml;gen">
+		</div>
+	</form>
+<?php
+	}
+?>
 </div>
 <?php	require_once("include/footer.php"); ?>

Modified: trunk/userlist.php
===================================================================
--- trunk/userlist.php	2006-06-04 13:37:50 UTC (rev 131)
+++ trunk/userlist.php	2006-06-04 14:52:30 UTC (rev 132)
@@ -66,11 +66,11 @@
 		}
 		elseif ($login->IsMember() === true)
 		{
-			echo "<p style=\"text-align: center\">Sie sind nicht berechtigt alle Nutzerinformationen einzusehen</p>";
+			echo "<p id=\"warning\">Sie sind nicht berechtigt alle Nutzerinformationen einzusehen</p>";
 		}
 		else
 		{
-			echo "<p style=\"text-align: center\">Sie sind nicht berechtigt Nutzerinformationen einzusehen</p>";
+			echo "<p id=\"warning\">Sie sind nicht berechtigt Nutzerinformationen einzusehen</p>";
 		}
 	?>
 

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-04 13:37:50 UTC (rev 131)
+++ trunk/usermod.php	2006-06-04 14:52:30 UTC (rev 132)
@@ -4,8 +4,12 @@
 
 	require_once("include/header.php");
 
-	if ($login->IsMember() === false)
+	if ($login->IsMember() === false
+		|| ($login->IsAdministrator() === false
+			&& (isset($_GET["delete"]) === true || isset($_GET["insert"]) === true)
+		))
 	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
 		require_once("include/footer.php");
 		die();
 	}
@@ -265,12 +269,12 @@
 		}
 		elseif  (isset($_GET["insert"]) === true)
 		{
-			/// \todo ?berhaupt die Rechte dazu?
+			/// \todo gab es den Login vielleicht schon?
 			Mitglied::Insert($_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]);
 		}
 		elseif (isset($_GET["update"]) === true)
 		{
-			/// \todo beide passw?rter gleich?
+			/// \todo gab es den Login vielleicht schon?
 			Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]);
 		}
 	}



From lazhur at berlios.de  Sun Jun  4 17:00:29 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sun, 4 Jun 2006 17:00:29 +0200
Subject: [Liman-svn] r133 - trunk
Message-ID: <200606041500.k54F0TZd009454@sheep.berlios.de>

Author: lazhur
Date: 2006-06-04 17:00:22 +0200 (Sun, 04 Jun 2006)
New Revision: 133

Modified:
   trunk/litmod.php
   trunk/usermod.php
Log:
- Mitgliederverwaltung erweitert
- L?\195?\182schbest?\195?\164tigung in Literaturverwaltung korrigiert


Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-04 14:52:30 UTC (rev 132)
+++ trunk/litmod.php	2006-06-04 15:00:22 UTC (rev 133)
@@ -272,7 +272,7 @@
 			{
 				require_once("include/form_helper.php");
 				echo "<div id=\"warning\" style=\"margin-top: 2em\">";
-				echo "Trotzdem entfernen?";
+				echo "Wollen sie die Literatur wirklich entfernen?";
 				echo "<form action=\"litmod.".$ext."?delete\" id=\"litupdateform\" method=\"post\">";
 				echo form_input("hidden", "id", $_GET["id"]);
 				echo form_input("hidden", "accept", "true");

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-04 14:52:30 UTC (rev 132)
+++ trunk/usermod.php	2006-06-04 15:00:22 UTC (rev 133)
@@ -264,18 +264,45 @@
 		require_once("include/mitglied.php");
 		if (isset($_GET["delete"]) === true)
 		{
-			/// \todo Hier erstmal nachfragen, ob ?berhaupt L?schen
-			Mitglied::Delete($_GET["id"]);
+			if (isset($_POST["accept"]) === true)
+			{
+				Mitglied::Delete($_POST["id"]);
+				echo "<p style=\"text-align: center\">Nutzer wurde entfernt</p>";
+			}
+			else
+			{
+				require_once("include/form_helper.php");
+				echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+				echo "Wollen sie den Nutzer wirklich entfernen?";
+				echo "<form action=\"usermod.".$ext."?delete\" id=\"userupdateform\" method=\"post\">";
+				echo form_input("hidden", "id", $_GET["id"]);
+				echo form_input("hidden", "accept", "true");
+				echo "<input type=\"submit\" value=\"Best?tigen\">";
+				echo "</form></div>";
+			}
 		}
 		elseif  (isset($_GET["insert"]) === true)
 		{
-			/// \todo gab es den Login vielleicht schon?
-			Mitglied::Insert($_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]);
+			if (Mitglied::Insert($_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
+			{
+				echo "<p style=\"text-align: center\">Nutzer wurde ge?ndert</p>";
+			}
+			else
+			{
+				
+				echo "<p id=\"warning\">Nutzer konnte nicht angelegt werden. Ist Login vielleicht schon vergeben?</p>";
+			}
 		}
 		elseif (isset($_GET["update"]) === true)
 		{
-			/// \todo gab es den Login vielleicht schon?
-			Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]);
+			if (Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
+			{
+				echo "<p style=\"text-align: center\">Nutzer wurde ge?ndert</p>";
+			}
+			else
+			{
+				echo "<p id=\"warning\">Nutzer konnte nicht ge?ndert werden. Ist Login vielleicht schon vergeben?</p>";
+			}
 		}
 	}
 ?>



From lazhur at berlios.de  Sun Jun  4 17:10:43 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sun, 4 Jun 2006 17:10:43 +0200
Subject: [Liman-svn] r134 - trunk
Message-ID: <200606041510.k54FAhfE010908@sheep.berlios.de>

Author: lazhur
Date: 2006-06-04 17:10:42 +0200 (Sun, 04 Jun 2006)
New Revision: 134

Modified:
   trunk/litmod.php
   trunk/usermod.php
Log:
Aussagekr?\195?\164ftigere ?\195?\156berschriften in Literatur- und Nutzerverwaltung


Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-04 15:00:22 UTC (rev 133)
+++ trunk/litmod.php	2006-06-04 15:10:42 UTC (rev 134)
@@ -1,5 +1,16 @@
 <?php
-	$title = "Literatur bearbeiten/hinzuf&uuml;gen";
+	if (isset($_GET["delete"]) === true)
+	{
+		$title = "Literatur l?schen";
+	}
+	elseif (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+	{
+		$title = "Literatur ?ndern";
+	}
+	else
+	{
+		$title = "Literatur hinzuf?gen";
+	}
 	//$extracss = "home.css";
 
 	require_once("include/header.php");

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-04 15:00:22 UTC (rev 133)
+++ trunk/usermod.php	2006-06-04 15:10:42 UTC (rev 134)
@@ -1,5 +1,16 @@
 <?php
-	$title = "Nutzer bearbeiten/hinzuf&uuml;gen";
+	if (isset($_GET["delete"]) === true)
+	{
+		$title = "Nutzer l?schen";
+	}
+	elseif (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+	{
+		$title = "Nutzer ?ndern";
+	}
+	else
+	{
+		$title = "Nutzer hinzuf?gen";
+	}
 	//$extracss = "home.css";
 
 	require_once("include/header.php");
@@ -55,6 +66,9 @@
 			$error_email = true;
 			$error_occurred = true;
 		}
+		elseif ()
+		{
+		}
 
 		if (empty($_POST["password"]) === true && isset($_GET["insert"]) === true)
 		{
@@ -285,7 +299,7 @@
 		{
 			if (Mitglied::Insert($_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
 			{
-				echo "<p style=\"text-align: center\">Nutzer wurde ge?ndert</p>";
+				echo "<p style=\"text-align: center\">Nutzer wurde angelegt</p>";
 			}
 			else
 			{



From lazhur at berlios.de  Sun Jun  4 17:13:40 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sun, 4 Jun 2006 17:13:40 +0200
Subject: [Liman-svn] r135 - trunk
Message-ID: <200606041513.k54FDenC011137@sheep.berlios.de>

Author: lazhur
Date: 2006-06-04 17:13:40 +0200 (Sun, 04 Jun 2006)
New Revision: 135

Modified:
   trunk/usermod.php
Log:
Entfernen einer unvollst?\195?\164ndigen ?\195?\132nderung in Nutzerverwaltung bei letzten Commit


Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-04 15:10:42 UTC (rev 134)
+++ trunk/usermod.php	2006-06-04 15:13:40 UTC (rev 135)
@@ -66,9 +66,6 @@
 			$error_email = true;
 			$error_occurred = true;
 		}
-		elseif ()
-		{
-		}
 
 		if (empty($_POST["password"]) === true && isset($_GET["insert"]) === true)
 		{



From lazhur at berlios.de  Mon Jun  5 09:39:42 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 5 Jun 2006 09:39:42 +0200
Subject: [Liman-svn] r136 - in trunk: . design include
Message-ID: <200606050739.k557dg3b003653@sheep.berlios.de>

Author: lazhur
Date: 2006-06-05 09:39:39 +0200 (Mon, 05 Jun 2006)
New Revision: 136

Modified:
   trunk/design/liman.css
   trunk/include/form_helper.php
   trunk/litmod.php
   trunk/user.php
   trunk/usermod.php
Log:
- IE6-Fixes


Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-06-04 15:13:40 UTC (rev 135)
+++ trunk/design/liman.css	2006-06-05 07:39:39 UTC (rev 136)
@@ -91,8 +91,8 @@
 	width: 20em;
 }
 
-#content input[type="text"],
-#content input[type="password"],
+#content .input_text,
+#content .input_password,
 #content form textarea {
 	width: 99%;
 }

Modified: trunk/include/form_helper.php
===================================================================
--- trunk/include/form_helper.php	2006-06-04 15:13:40 UTC (rev 135)
+++ trunk/include/form_helper.php	2006-06-05 07:39:39 UTC (rev 136)
@@ -8,7 +8,7 @@
 	 */
 	function form_input($type, $name, $value = "", $failure = false)
 	{
-		$str = "<input type=\"".htmlspecialchars($type)."\" name=\"".htmlspecialchars($name)."\" id=\"".htmlspecialchars($name)."\" ";
+		$str = "<input class=\"input_".$type."\" type=\"".htmlspecialchars($type)."\" name=\"".htmlspecialchars($name)."\" id=\"".htmlspecialchars($name)."\" ";
 
 		if (empty($value) === false)
 		{

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-04 15:13:40 UTC (rev 135)
+++ trunk/litmod.php	2006-06-05 07:39:39 UTC (rev 136)
@@ -76,21 +76,25 @@
 	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
 		|| $error_occurred === true)
 	{
+		if (isset($_POST["id"]) === true)
+		{
+			$id = $_POST["id"];
+		}
+		elseif (isset($_GET["id"]) === true)
+		{
+			$id = $_GET["id"];
+		}
+		else
+		{
+			unset($id);
+		}
+
 		require_once("include/form_helper.php");
-		if (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+		if ($error_occurred === false && (isset($_GET["id"]) === true || isset($_POST["id"]) === true))
 		{
 			require_once("include/literatur.php");
 
-			if (isset($_POST["id"]) === true)
-			{
-				$id = $_POST["id"];
-			}
-			else
-			{
-				$id = $_GET["id"];
-			}
-
-			$lit = new Literatur($_GET["id"]);
+			$lit = new Literatur($id);
 			$titel = $lit->Titel;
 			$autor = "";
 			$jahr = $lit->Jahr;

Modified: trunk/user.php
===================================================================
--- trunk/user.php	2006-06-04 15:13:40 UTC (rev 135)
+++ trunk/user.php	2006-06-05 07:39:39 UTC (rev 136)
@@ -66,8 +66,11 @@
 			<tr>
 				<th scope="row">Aktionen:</th>	
 				<td>
-					<form style="display:inline" action="usermod.<?=$ext;?>?id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
-						<span><input type="submit" value="Bearbeiten"></span>
+					<form style="display:inline" action="usermod.<?=$ext;?>" method="post">
+						<span>
+							<input type="hidden" id="id" name="id" value="<?=htmlspecialchars($_GET["id"]);?>">
+							<input type="submit" value="Bearbeiten">
+						</span>
 					</form>
 				</td>
 			</tr>

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-04 15:13:40 UTC (rev 135)
+++ trunk/usermod.php	2006-06-05 07:39:39 UTC (rev 136)
@@ -125,21 +125,24 @@
 	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
 		|| $error_occurred === true)
 	{
+		if (isset($_POST["id"]) === true)
+		{
+			$id = $_POST["id"];
+		}
+		elseif (isset($_GET["id"]) === true)
+		{
+			$id = $_GET["id"];
+		}
+		else
+		{
+			unset($id);
+		}
+
 		require_once("include/form_helper.php");
-		if (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+		if ($error_occurred === false && (isset($_GET["id"]) === true || isset($_POST["id"]) === true))
 		{
 			require_once("include/mitglied.php");
-
-			if (isset($_POST["id"]) === true)
-			{
-				$id = $_POST["id"];
-			}
-			else
-			{
-				$id = $_GET["id"];
-			}
-
-			$mitglied = new Mitglied($_GET["id"]);
+			$mitglied = new Mitglied($id);
 			$benutzername = $mitglied->Login;
 
 			if (isset($mitglied->Rechte) === true)



From lazhur at berlios.de  Mon Jun  5 12:11:36 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 5 Jun 2006 12:11:36 +0200
Subject: [Liman-svn] r137 - in trunk/docs/beleg2: . doxygen visio
Message-ID: <200606051011.k55ABaxo016201@sheep.berlios.de>

Author: lazhur
Date: 2006-06-05 12:11:30 +0200 (Mon, 05 Jun 2006)
New Revision: 137

Modified:
   trunk/docs/beleg2/LiMan_System.eps
   trunk/docs/beleg2/LiMan_System.pdf
   trunk/docs/beleg2/doxygen/classLiteratur.tex
   trunk/docs/beleg2/systemarchitektur.dot
   trunk/docs/beleg2/systemarchitektur.eps
   trunk/docs/beleg2/systemarchitektur.pdf
   trunk/docs/beleg2/visio/LiMan_System.vsd
Log:
- Suchen -> Suchsystem in Systemarchitektur
- InsertBibtex mit R?\195?\188ckgabewert ausgestattet


Modified: trunk/docs/beleg2/LiMan_System.eps
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg2/LiMan_System.pdf
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg2/doxygen/classLiteratur.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-05 07:39:39 UTC (rev 136)
+++ trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-05 10:11:30 UTC (rev 137)
@@ -134,8 +134,10 @@
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
-\item[\mbox{$\leftarrow$} {\em \$bibtex}]String mit Inhalt einer Bib\-Te\-X-Datei\end{description}
+\item[\mbox{$\leftarrow$} {\em \$bibtex}]String mit Inhalt einer Bib\-Te\-X-Datei \end{description}
 \end{Desc}
+\begin{Desc}
+\item[R\"{u}ckgabe:]Anzahl der importierten B?cher\end{Desc}
 \hypertarget{classLiteratur_11f6d1a4409c41638ff6693f65699ff3}{
 \index{Literatur@{Literatur}!ToBibtex@{ToBibtex}}
 \index{ToBibtex@{ToBibtex}!Literatur@{Literatur}}

Modified: trunk/docs/beleg2/systemarchitektur.dot
===================================================================
--- trunk/docs/beleg2/systemarchitektur.dot	2006-06-05 07:39:39 UTC (rev 136)
+++ trunk/docs/beleg2/systemarchitektur.dot	2006-06-05 10:11:30 UTC (rev 137)
@@ -21,7 +21,7 @@
 		Kommentarverwaltung
 		Mitgliedsverwaltung
 		Literaturinformation
-		Suchen
+		Suchsystem
 	}
 
 	subgraph Klassen
@@ -60,7 +60,7 @@
 	Literaturverwaltung -> Kommentarverwaltung
 	Literaturverwaltung -> Mitgliedsverwaltung
 	Literaturverwaltung -> Literaturinformation
-	Literaturverwaltung -> Suchen
+	Literaturverwaltung -> Suchsystem
 
 	// Prozesse zu Klassen
 	Bibliotheksverwaltung -> Literatur
@@ -71,7 +71,7 @@
 
 	Mitgliedsverwaltung -> Mitglied
 
-	Suchen -> Suche
+	Suchsystem -> Suche
 
 	// Klassen auf Datenbank
 	Autor -> SQLDB
@@ -79,4 +79,4 @@
 	Literatur -> SQLDB
 	Mitglied -> SQLDB
 	Suche -> SQLDB
-}
\ No newline at end of file
+}

Modified: trunk/docs/beleg2/systemarchitektur.eps
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg2/systemarchitektur.pdf
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg2/visio/LiMan_System.vsd
===================================================================
(Binary files differ)



From lazhur at berlios.de  Mon Jun  5 18:09:30 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 5 Jun 2006 18:09:30 +0200
Subject: [Liman-svn] r138 - in trunk: docs/beleg2/doxygen include
Message-ID: <200606051609.k55G9U7B018798@sheep.berlios.de>

Author: lazhur
Date: 2006-06-05 18:09:24 +0200 (Mon, 05 Jun 2006)
New Revision: 138

Modified:
   trunk/docs/beleg2/doxygen/classAutor.tex
   trunk/docs/beleg2/doxygen/classKommentar.tex
   trunk/docs/beleg2/doxygen/classLiteratur.tex
   trunk/docs/beleg2/doxygen/classLogin.tex
   trunk/docs/beleg2/doxygen/classMitglied.tex
   trunk/docs/beleg2/doxygen/classSQLDB.tex
   trunk/docs/beleg2/doxygen/classSuche.tex
   trunk/include/autor.php
   trunk/include/kommentar.php
   trunk/include/literatur.php
   trunk/include/login.php
   trunk/include/mitglied.php
   trunk/include/sqldb_mysql.php
   trunk/include/suche.php
Log:
Korrekturen f?\195?\188r zweiten Teilbeleg


Modified: trunk/docs/beleg2/doxygen/classAutor.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classAutor.tex	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/docs/beleg2/doxygen/classAutor.tex	2006-06-05 16:09:24 UTC (rev 138)
@@ -86,7 +86,7 @@
 
 Gibt Autoren zu bestimmter \hyperlink{classLiteratur}{Literatur} zur?ck. 
 
-Liest alle Autoren die einer \hyperlink{classLiteratur}{Literatur} (\$nr) zugeordnet sind aus Kommentare aus und gibt sie als Feld des Typs \hyperlink{classAutor}{Autor} zur?ck. \begin{Desc}
+Liest alle Autoren die einer \hyperlink{classLiteratur}{Literatur} (\$literatur\_\-nr) zugeordnet sind aus Kommentare aus und gibt sie als Feld des Typs \hyperlink{classAutor}{Autor} zur?ck. \begin{Desc}
 \item[Parameter:]
 \begin{description}
 \item[\mbox{$\leftarrow$} {\em \$literatur\_\-nr}]Nr einer \hyperlink{classLiteratur}{Literatur} mit Autoren \end{description}
@@ -104,7 +104,7 @@
 
 Legt neue Autoren aus kommagetrennter Liste an. 
 
-Teilt die kommagetrennte Liste von Autoren in einzelne Autorennamen ein und ?berpr?ft gegen Autorentabelle, ob diese schon in der Datenbank existieren. Sollten diese schon existieren, dann wird Autor\_\-Nr ausgelesen und zum Feld hinzugef?gt. Sollten diese noch nicht existieren, werden sie hinzugef?gt und die neuen Autor\_\-Nr zum Feld hinzugef?gt. Das komplette Feld vom Typ Autor\_\-Nr wird zur?ckgegeben. \begin{Desc}
+Teilt die kommagetrennte Liste von Autoren in einzelne Autorennamen ein und ?berpr?ft gegen Autorentabelle, ob diese schon in der Datenbank existieren. Sollten diese schon existieren, dann wird Autor\_\-Nr ausgelesen und zum Feld hinzugef?gt. Sollten diese noch nicht existieren, werden sie hinzugef?gt und die neuen Autor\_\-Nr zum Feld hinzugef?gt. Das komplette Feld mit Autor\_\-Nr wird zur?ckgegeben. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]

Modified: trunk/docs/beleg2/doxygen/classKommentar.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classKommentar.tex	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/docs/beleg2/doxygen/classKommentar.tex	2006-06-05 16:09:24 UTC (rev 138)
@@ -38,7 +38,7 @@
 \subsubsection{Ausf\"{u}hrliche Beschreibung}
 Verwaltet Kommentare. 
 
-Stellt Funktionen zum Anlegen, L?schen, Bearbeiten von Kommentaren bereit. Es k?nnen sowohl einzelne Kommentare oder nach Literatur- bzw. Mitgliederverbundenen Kommentaren gel?scht werden. \begin{Desc}
+Stellt Funktionen zum Anlegen, L?schen, Bearbeiten von Kommentaren bereit. Es k?nnen sowohl einzelne Kommentare oder Kommentare nach ihrer Verbindung zur \hyperlink{classLiteratur}{Literatur} bzw. Mitgliedern gel?scht werden. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Importiert:]\begin{itemize}
@@ -84,7 +84,9 @@
 L?scht \hyperlink{classKommentar}{Kommentar}. 
 
 L?scht einen \hyperlink{classKommentar}{Kommentar} aus Kommentare mit der Kommentar\_\-Nr \$nr. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+\hyperlink{classKommentar}{Kommentar} in Kommentare mit Kommentar\_\-Nr \$nr muss existieren \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
@@ -137,7 +139,7 @@
 
 Gibt Kommentare zu bestimmter \hyperlink{classLiteratur}{Literatur} zur?ck. 
 
-Liest alle Kommentare die einer \hyperlink{classLiteratur}{Literatur} (\$nr) zugeordnet sind aus Kommentare aus und gibt sie als Feld des Typs \hyperlink{classKommentar}{Kommentar} zur?ck. \begin{Desc}
+Liest alle Kommentare die einer \hyperlink{classLiteratur}{Literatur} (\$literatur\_\-nr) zugeordnet sind aus Kommentare aus und gibt sie als Feld des Typs \hyperlink{classKommentar}{Kommentar} zur?ck. \begin{Desc}
 \item[Parameter:]
 \begin{description}
 \item[\mbox{$\leftarrow$} {\em \$literatur\_\-nr}]Nr einer \hyperlink{classLiteratur}{Literatur} mit Kommentaren \end{description}
@@ -156,7 +158,9 @@
 Legt \hyperlink{classKommentar}{Kommentar} an. 
 
 Legt einen neuen \hyperlink{classKommentar}{Kommentar} mit Text (\$text) zu einer \hyperlink{classLiteratur}{Literatur} (\$literatur\_\-nr) vom einem Verfasser (\$verfasser\_\-nr) an. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+Text (\$text) darf nicht leer sein \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
@@ -174,14 +178,16 @@
 ?ndert einen \hyperlink{classKommentar}{Kommentar}. 
 
 ?ndert in Kommentare den Text des Kommentars mit \$nr in \$text. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+\hyperlink{classKommentar}{Kommentar} in Kommentare mit Kommentar\_\-Nr \$nr muss existieren \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
 \item[\mbox{$\leftarrow$} {\em \$nr}]Nummer des zu ver?ndernden Kommentars \item[\mbox{$\leftarrow$} {\em \$text}]neuer Text des Kommentars \end{description}
 \end{Desc}
 \begin{Desc}
-\item[Bemerkungen:]Ist das aktuelle \hyperlink{classMitglied}{Mitglied} kein Administrator, dann muss die aktuelle Nummer des Mitglieds gleich der Mitglieds\_\-Nr des Kommentars in Kommentare sein. Ist der Nutzer nicht eingeloggt, werden keine Operationen ausgef?hrt. \end{Desc}
+\item[Bemerkungen:]Ist das aktuelle \hyperlink{classMitglied}{Mitglied} kein Administrator, dann muss die aktuelle Nummer des Mitglieds gleich der Mitglieds\_\-Nr des Kommentars in Kommentare sein. Ist der Nutzer nicht eingeloggt, werden keine Operationen ausgef?hrt. Wird kein Text (\$text) angegeben, wird der \hyperlink{classKommentar}{Kommentar} mit \hyperlink{classKommentar_31c1fdfb4fb8f24e0016c8ddb98ddcdc}{Kommentar::Delete} gel?scht. \end{Desc}
 
 
 \subsubsection{Dokumentation der Datenelemente}

Modified: trunk/docs/beleg2/doxygen/classLiteratur.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-05 16:09:24 UTC (rev 138)
@@ -24,7 +24,7 @@
 \begin{CompactItemize}
 \item 
 \hyperlink{classLiteratur_036a682a93a5d50839c1ebc70a79d4b6}{\$Nr}
-\begin{CompactList}\small\item\em Buchidentifikationsnummer. \item\end{CompactList}\item 
+\begin{CompactList}\small\item\em Literaturidentifikationsnummer. \item\end{CompactList}\item 
 \hyperlink{classLiteratur_e30f9e9db9b396e6f87adfdb94e12ba0}{\$Titel}
 \begin{CompactList}\small\item\em Titel der \hyperlink{classLiteratur}{Literatur}. \item\end{CompactList}\item 
 \hyperlink{classLiteratur_2cb6f40a8757a0edd5da32385ad009c9}{\$Jahr}
@@ -75,7 +75,9 @@
 Liest \hyperlink{classLiteratur}{Literatur} ein. 
 
 Erstellt aus \hyperlink{classLiteratur}{Literatur} in Bibliothek mit Literatur\_\-Nr (\$nr) neues Literaturobjekt. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+\hyperlink{classLiteratur}{Literatur} in Bibliothek mit Literatur\_\-Nr \$nr muss existieren \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
@@ -94,7 +96,9 @@
 L?scht \hyperlink{classLiteratur}{Literatur}. 
 
 L?scht \hyperlink{classLiteratur}{Literatur} aus Bibliothek mit der Literatur\_\-Nr \$nr. Alle verbundenen Kommentare werden aus Kommentare gel?scht. Au?erdem werden alle nun nicht mehr gebrauchten Autoren in Autoren gel?scht. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+\hyperlink{classLiteratur}{Literatur} in Bibliothek mit Literatur\_\-Nr \$nr muss existieren \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
@@ -137,7 +141,7 @@
 \item[\mbox{$\leftarrow$} {\em \$bibtex}]String mit Inhalt einer Bib\-Te\-X-Datei \end{description}
 \end{Desc}
 \begin{Desc}
-\item[R\"{u}ckgabe:]Anzahl der importierten B?cher\end{Desc}
+\item[R\"{u}ckgabe:]Anzahl der importierten \hyperlink{classLiteratur}{Literatur}\end{Desc}
 \hypertarget{classLiteratur_11f6d1a4409c41638ff6693f65699ff3}{
 \index{Literatur@{Literatur}!ToBibtex@{ToBibtex}}
 \index{ToBibtex@{ToBibtex}!Literatur@{Literatur}}
@@ -161,7 +165,9 @@
 ?ndert \hyperlink{classLiteratur}{Literatur}. 
 
 Entfernt alle zur Literatur\_\-Nr (\$nr) geh?renden Verbindungen in Autor\_\-Literatur um danach die \hyperlink{classLiteratur}{Literatur} mit Literatur\_\-Nr \$nr zu den neuen Werten (\$art, \$titel, \$jahr, \$verlag, \$isbn, \$beschreibung, \$ort, \$stichworte) zu ?ndern. Danach werden die Autoren (\$autoren) in Autoren geschrieben und mit der Tabelle Literatur\_\-Autor der \hyperlink{classLiteratur}{Literatur} zugeordnet. Alle jetzt noch nicht zugeordneten Autoren in Autoren werden gel?scht. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+\hyperlink{classLiteratur}{Literatur} in Bibliothek mit Literatur\_\-Nr \$nr muss existieren \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
@@ -233,7 +239,7 @@
 \label{classLiteratur_036a682a93a5d50839c1ebc70a79d4b6}
 
 
-Buchidentifikationsnummer. 
+Literaturidentifikationsnummer. 
 
 \hypertarget{classLiteratur_da6c458bb229187efea8e8f144a1d279}{
 \index{Literatur@{Literatur}!$Ort@{\$Ort}}

Modified: trunk/docs/beleg2/doxygen/classLogin.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLogin.tex	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/docs/beleg2/doxygen/classLogin.tex	2006-06-05 16:09:24 UTC (rev 138)
@@ -27,7 +27,11 @@
 Verwaltet Logininformationen. 
 
 Verwaltet die aus der sich aktuellen Anmeldung ergebenen Session des Users und der damit entstehenden Rechte \begin{Desc}
-\item[Vorbedingung:]Das Loginobjekt muss vor einer ?bertragung von Inhaltsdaten zum User angelegt werden, um ein Cookie anlegen zu k?nnen. Es sollte kein zweites Objekt vom Typ \hyperlink{classLogin}{Login} existieren. Datenbankverbindung muss bestehen. \end{Desc}
+\item[Vorbedingung:]Das Loginobjekt muss vor einer ?bertragung von Inhaltsdaten zum User angelegt werden, um ein Cookie anlegen zu k?nnen. 
+
+Es sollte kein zweites Objekt vom Typ \hyperlink{classLogin}{Login} existieren. 
+
+Datenbankverbindung muss bestehen. \end{Desc}
 \begin{Desc}
 \item[Bemerkungen:]Sollte ein weiteres Objekt vom Typ \hyperlink{classLogin}{Login} existieren, in welche neue Logininformationen eingetragen werden, wird keine weitere Session angelegt, sondern die alten Informationen in der aktuellen Session ?berschrieben. \end{Desc}
 \begin{Desc}
@@ -53,16 +57,19 @@
 Liest bzw. Erstellt Session f?r Anmeldedaten. 
 
 Liest Daten aus der Session ein. Sollten keine vorhanden sein, dann wird eine neue, leere Session angelegt. Sollten Daten vorhanden sein, wird die Korrektheit ?ber die Datenbank (Mitglieder) und die Verbindungsinformationen gepr?ft. Nach dieser Pr?fung werden abh?ngig vom Ausgang die Rechteinformationen gesetzt.\par
- Werden keine Parameter ?bergeben, wird das Klartextpasswort mit \hyperlink{classMitglied_9b13db80866c22bf992e73f2eb75e369}{Mitglied::Password\-Hash} gehasht, um diese mit Benutzernamen (\$benutzer) gegen die Eintr?ge in Mitglieder zu pr?fen. Ist diese erfolgreich, wird eine neue Session mit gehashtem Passwort, Benuternamen und Verbindungsinformationen erstellt. Sollte irgendwo ein Fehler bei der Anmeldung auftreten, erh?lt er Nutzerrechte (wird also nicht zum \hyperlink{classMitglied}{Mitglied}). Sonst erh?lt er die Rechte und Mitglieds\_\-Nr aus dem gefundenem Eintrag in Mitglieder. \begin{Desc}
+ Werden keine Parameter ?bergeben, wird das Klartextpasswort mit \hyperlink{classMitglied_9b13db80866c22bf992e73f2eb75e369}{Mitglied::Password\-Hash} gehasht, um diese mit Benutzernamen (\$benutzer) gegen die Eintr?ge in Mitglieder zu pr?fen. Ist diese erfolgreich, wird eine neue Session mit gehashtem Passwort, Benutzernamen und Verbindungsinformationen erstellt. Sollte ein Fehler bei der Anmeldung auftreten, erh?lt er Nutzerrechte (wird also nicht zum \hyperlink{classMitglied}{Mitglied}). Sonst erh?lt er die Rechte und Mitglieds\_\-Nr aus dem gefundenem Eintrag in Mitglieder. \begin{Desc}
 \item[Parameter:]
 \begin{description}
 \item[\mbox{$\leftarrow$} {\em \$benutzer}]neuer Benutzername \item[\mbox{$\leftarrow$} {\em \$passwort}]Passwort in Klartext des Nutzers \end{description}
 \end{Desc}
 \begin{Desc}
-\item[Vorbedingung:]Eine Verbindung zur Datenbank muss bestehen. Der Konstruktor muss vor dem Senden von Inhaltsdaten aufgerufen werden, um ein Cookie erstellen zu k?nnen.\par
- Zum Einloggen mit Daten darf kein Parameter leer sein \end{Desc}
+\item[Vorbedingung:]Eine Verbindung zur Datenbank muss bestehen. 
 
+Der Konstruktor muss vor dem Senden von Inhaltsdaten aufgerufen werden, um ein Cookie erstellen zu k?nnen. 
 
+Zum Einloggen mit Daten darf kein Parameter leer sein \end{Desc}
+
+
 \subsubsection{Dokumentation der Elementfunktionen}
 \hypertarget{classLogin_6c120224aa6719f58c6ccd08acc28758}{
 \index{Login@{Login}!IsAdministrator@{IsAdministrator}}

Modified: trunk/docs/beleg2/doxygen/classMitglied.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classMitglied.tex	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/docs/beleg2/doxygen/classMitglied.tex	2006-06-05 16:09:24 UTC (rev 138)
@@ -86,7 +86,9 @@
 Entfernt \hyperlink{classMitglied}{Mitglied}. 
 
 Entfernt \hyperlink{classMitglied}{Mitglied} mit Mitgliedsnummer (\$nr) aus Mitglieder und l?scht zus?tzlich die Kommentare des Mitglieds in Kommentare \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+\hyperlink{classMitglied}{Mitglied} in Mitglieder mit Mitglieds\_\-Nr \$nr muss existieren \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
@@ -103,7 +105,7 @@
 
 R?ckgabe einer Liste der Mitglieder. 
 
-Liest alle Mitglieder mit Nr, \hyperlink{classLogin}{Login}, Vorname, Nachname und Email aus Mitgliedertabelle und gibt die ausgelesenen Objekte in einem Feld zur?ck \begin{Desc}
+Liest alle Mitglieder mit Nr, \hyperlink{classLogin}{Login}, Vorname, Nachname und Email aus Tabelle Mitglieder und gibt die ausgelesenen Objekte in einem Feld zur?ck \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[R\"{u}ckgabe:]Feld mit Objekten der Form\begin{itemize}
@@ -120,7 +122,7 @@
 
 Legt \hyperlink{classMitglied}{Mitglied} an. 
 
-F?gt neues \hyperlink{classMitglied}{Mitglied} mit Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder ein. Dazu wird das Passwort noch mit Mitglied::Passwort\-Hash gehasht. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
+F?gt neues \hyperlink{classMitglied}{Mitglied} mit Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder ein. Dazu wird das Passwort noch mit \hyperlink{classMitglied_9b13db80866c22bf992e73f2eb75e369}{Mitglied::Password\-Hash} gehasht. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]
@@ -159,8 +161,10 @@
 
 ?ndert ein \hyperlink{classMitglied}{Mitglied}. 
 
-?ndert die Daten das Mitglieds mit der Mitglieds\_\-Nr (\$nr), in neuen Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder. Wenn \$passwort nicht die L?nge 0 hat, wird es noch mit Mitglied::Passwort\-Hash gehasht. Andernfalls wird das alte Passwort in Mitglieder beibehalten. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+?ndert die Daten des Mitglieds mit der Mitglieds\_\-Nr (\$nr), in neuen Benutzernamen (\$loginname), Passwort (\$passwort), Benutzerrechten (\$rechte), Vorname (\$vorname), Nachname (\$nachname), E-Mail-Adresse (\$email) in Mitglieder. Wenn \$passwort nicht die L?nge 0 hat, wird es noch mit Mitglied::Passwort\-Hash gehasht. Andernfalls wird das alte Passwort in Mitglieder beibehalten. Sollte ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} existieren wird ein Fehler zur?ckgegeben, da die Datenbank nur ein \hyperlink{classMitglied}{Mitglied} mit gleichem \hyperlink{classLogin}{Login} erlaubt. \begin{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+\hyperlink{classMitglied}{Mitglied} in Mitglieder mit Mitglieds\_\-Nr \$nr muss existieren \end{Desc}
 \begin{Desc}
 \item[Parameter:]
 \begin{description}

Modified: trunk/docs/beleg2/doxygen/classSQLDB.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classSQLDB.tex	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/docs/beleg2/doxygen/classSQLDB.tex	2006-06-05 16:09:24 UTC (rev 138)
@@ -132,7 +132,7 @@
 Entfernt Datens?tze der letzten Anfrage und gibt deren Speicher frei. \begin{Desc}
 \item[Vorbedingung:]- \end{Desc}
 \begin{Desc}
-\item[Bemerkungen:]Funktion wird vor jedem query aufgerufen \end{Desc}
+\item[Bemerkungen:]Funktion wird vor jedem \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{Query()} aufgerufen \end{Desc}
 \hypertarget{classSQLDB_8f3c28ae4ed5941c043459d6204a887b}{
 \index{SQLDB@{SQLDB}!GetAffectedRows@{GetAffectedRows}}
 \index{GetAffectedRows@{GetAffectedRows}!SQLDB@{SQLDB}}
@@ -147,7 +147,7 @@
 \begin{Desc}
 \item[R\"{u}ckgabe:]Anzahl der Datens?tze \end{Desc}
 \begin{Desc}
-\item[Bemerkungen:]F?r gefundene Datens?tze sollte num\_\-rows() genutzt werden \end{Desc}
+\item[Bemerkungen:]F?r gefundene Datens?tze sollte \hyperlink{classSQLDB_15b181251b309ab55331be29fa33ac9f}{Get\-Num\-Rows()} genutzt werden \end{Desc}
 \hypertarget{classSQLDB_efc9afe11649d6cdae21575717ec3436}{
 \index{SQLDB@{SQLDB}!GetError@{GetError}}
 \index{GetError@{GetError}!SQLDB@{SQLDB}}
@@ -180,7 +180,7 @@
 \item[{\em false}]bei Misserfolg \end{description}
 \end{Desc}
 \begin{Desc}
-\item[Bemerkungen:]F?r ge?nderte Datens?tze sollte affected\_\-rows() genutzt werden \end{Desc}
+\item[Bemerkungen:]F?r ge?nderte Datens?tze sollte \hyperlink{classSQLDB_8f3c28ae4ed5941c043459d6204a887b}{Get\-Affected\-Rows()} genutzt werden \end{Desc}
 \hypertarget{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{
 \index{SQLDB@{SQLDB}!Query@{Query}}
 \index{Query@{Query}!SQLDB@{SQLDB}}

Modified: trunk/docs/beleg2/doxygen/classSuche.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classSuche.tex	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/docs/beleg2/doxygen/classSuche.tex	2006-06-05 16:09:24 UTC (rev 138)
@@ -20,7 +20,7 @@
 \subsubsection{Ausf\"{u}hrliche Beschreibung}
 \hyperlink{classSuche}{Suche} Literaturdaten. 
 
-Durchsucht die Literatur- und Autorentabelle ?ber Volltextsuche, nach \hyperlink{classAutor}{Autor} und Titel oder nach den 10 zuletzt hinzugef?gten Literatureintr?gen und speichert sie in \$Treffer zwischen. \begin{Desc}
+Durchsucht die Tabelle Bibliothek und Autoren ?ber Volltextsuche, nach \hyperlink{classAutor}{Autor} und Titel oder nach den 10 zuletzt hinzugef?gten Literatureintr?gen und speichert sie in \$Treffer zwischen. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Importiert:]\begin{itemize}
@@ -45,15 +45,15 @@
 Sucht \hyperlink{classLiteratur}{Literatur}. 
 
 Wenn keine Parameter ?bergeben werden:\begin{itemize}
-\item Sucht in Literaturtabelle nach den 10 zuletzt hinzugef?gten Literatureintr?gen und speichert Nr, Titel, \hyperlink{classAutor}{Autor}, Verlag und ISBN als als Objekt im Feld \$Treffer. Sollte ein Fehler auftreten oder bisher keine Eintr?ge vorhanden sein, dann wird \$Treffer ein Feld der L?nge 0.\end{itemize}
+\item Sucht in Tabelle Bibliothek nach den 10 zuletzt hinzugef?gten Literatureintr?gen und speichert Nr, Titel, \hyperlink{classAutor}{Autor}, Verlag und ISBN als Objekt im Feld \$Treffer. Sollte ein Fehler auftreten oder bisher keine Eintr?ge vorhanden sein, dann wird \$Treffer ein Feld der L?nge 0.\end{itemize}
 
 
 Wenn ein \$suchbegriff ?bergeben wird:\begin{itemize}
-\item Sucht in \hyperlink{classLiteratur}{Literatur} und Autortabelle nach dem Auftreten des ?bergebenen Textes in Literatureintr?gen und speichert Nr, Titel, \hyperlink{classAutor}{Autor}, Verlag und ISBN als als Objekt im Feld \$Treffer. Sollte ein Fehler auftreten oder keine passenden Eintr?ge vorhanden sein, dann wird \$Treffer ein Feld der L?nge 0.\end{itemize}
+\item Sucht in Tabelle \hyperlink{classLiteratur}{Literatur} und Autoren nach dem Auftreten des ?bergebenen Textes in Literatureintr?gen und speichert Nr, Titel, \hyperlink{classAutor}{Autor}, Verlag und ISBN als Objekt im Feld \$Treffer. Sollte ein Fehler auftreten oder keine passenden Eintr?ge vorhanden sein, dann wird \$Treffer ein Feld der L?nge 0.\end{itemize}
 
 
 Wenn \$suchbegriff und \$autor ?bergeben werden:\begin{itemize}
-\item Sucht in \hyperlink{classLiteratur}{Literatur} und Autortabelle nach dem Auftreten von \$autor in \hyperlink{classAutor}{Autor} und \$suchbegriff im Titel des Literatureintrags und speichert Nr, Titel, \hyperlink{classAutor}{Autor}, Verlag als als Objekt im Feld \$Treffer. Sollte ein Fehler auftreten und ISBN der Treffer oder keine passenden Eintr?ge vorhanden sein, dann wird \$Treffer ein Feld der L?nge 0.\item Wird eine kommagetrennte Liste von Autoren als \$autor ?bergeben, muss in Treffern nur einer der genannten Autoren auftreten.\end{itemize}
+\item Sucht in Tabelle Bibliothek und Autoren nach dem Auftreten von \$autor in \hyperlink{classAutor}{Autor} und \$suchbegriff im Titel des Literatureintrags und speichert Nr, Titel, \hyperlink{classAutor}{Autor}, Verlag als Objekt im Feld \$Treffer. Sollte ein Fehler auftreten und ISBN der Treffer oder keine passenden Eintr?ge vorhanden sein, dann wird \$Treffer ein Feld der L?nge 0.\item Wird eine kommagetrennte Liste von Autoren als \$autor ?bergeben, muss in Treffern nur einer der genannten Autoren auftreten.\end{itemize}
 
 
 \begin{Desc}

Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/include/autor.php	2006-06-05 16:09:24 UTC (rev 138)
@@ -57,9 +57,9 @@
 
 		/*! \brief Gibt Autoren zu bestimmter Literatur zur?ck
 		 *
-		 *  Liest alle Autoren die einer Literatur ($nr) zugeordnet
-		 *  sind aus Kommentare aus und gibt sie als Feld des Typs
-		 *  Autor zur?ck.
+		 *  Liest alle Autoren die einer Literatur ($literatur_nr)
+		 *  zugeordnet sind aus Kommentare aus und gibt sie als Feld des
+		 *  Typs Autor zur?ck.
 		 *  \param[in] $literatur_nr Nr einer Literatur mit Autoren
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \return Feld vom Typ Autor
@@ -90,7 +90,7 @@
 		 *  schon existieren, dann wird Autor_Nr ausgelesen und zum
 		 *  Feld hinzugef?gt. Sollten diese noch nicht existieren,
 		 *  werden sie hinzugef?gt und die neuen Autor_Nr zum Feld
-		 *  hinzugef?gt. Das komplette Feld vom Typ Autor_Nr wird
+		 *  hinzugef?gt. Das komplette Feld mit Autor_Nr wird
 		 *  zur?ckgegeben.
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren

Modified: trunk/include/kommentar.php
===================================================================
--- trunk/include/kommentar.php	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/include/kommentar.php	2006-06-05 16:09:24 UTC (rev 138)
@@ -4,8 +4,8 @@
 	/*! \brief Verwaltet Kommentare
 	 *
 	 *  Stellt Funktionen zum Anlegen, L?schen, Bearbeiten von Kommentaren
-	 *  bereit. Es k?nnen sowohl einzelne Kommentare oder nach Literatur-
-	 *  bzw. Mitgliederverbundenen Kommentaren gel?scht werden.
+	 *  bereit. Es k?nnen sowohl einzelne Kommentare oder Kommentare nach
+	 *  ihrer Verbindung zur Literatur bzw. Mitgliedern gel?scht werden.
 	 *  \pre Datenbankverbindung muss bestehen
 	 *  \sa
 	 *  - Login::IsAdministrator
@@ -48,6 +48,8 @@
 		 *  L?scht einen Kommentar aus Kommentare mit der Kommentar_Nr
 		 *  $nr.
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Kommentar in Kommentare mit Kommentar_Nr $nr muss
+		 *    existieren
 		 *  \param[in] $nr Nummer des zu l?schenden Kommentars
 		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
 		 *    werden keine Operationen ausgef?hrt, wenn Mitglieds_Nr
@@ -119,9 +121,9 @@
 
 		/*! \brief Gibt Kommentare zu bestimmter Literatur zur?ck
 		 *
-		 *  Liest alle Kommentare die einer Literatur ($nr) zugeordnet
-		 *  sind aus Kommentare aus und gibt sie als Feld des Typs
-		 *  Kommentar zur?ck.
+		 *  Liest alle Kommentare die einer Literatur ($literatur_nr)
+		 *  zugeordnet sind aus Kommentare aus und gibt sie als Feld des
+		 *  Typs Kommentar zur?ck.
 		 *  \param[in] $literatur_nr Nr einer Literatur mit Kommentaren
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \return Feld vom Typ Kommentar
@@ -151,6 +153,7 @@
 		 *  Literatur ($literatur_nr) vom einem Verfasser 
 		 *  ($verfasser_nr) an.
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Text ($text) darf nicht leer sein
 		 *  \param[in] $text Text des Kommentars
 		 *  \param[in] $verfasser_nr Mitglieds_Nr des Verfassers
 		 *  \param[in] $literatur_nr Nummer der Literatur
@@ -183,9 +186,12 @@
 
 					if (($cur = $sqldb->Fetch()) === false)
 					{
-						$sql = "INSERT INTO ".$db_config['prefix']."Kommentare
+						if (empty($text) === false)
+						{
+							$sql = "INSERT INTO ".$db_config['prefix']."Kommentare
 								VALUES (NULL, '$text', '$literatur_nr', '$verfasser_nr')";
-						$sqldb->Query($sql);
+							$sqldb->Query($sql);
+						}
 					}
 					else
 					{
@@ -200,33 +206,43 @@
 		 *  ?ndert in Kommentare den Text des Kommentars mit $nr
 		 *  in $text.
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Kommentar in Kommentare mit Kommentar_Nr $nr muss
+		 *    existieren
 		 *  \param[in] $nr Nummer des zu ver?ndernden Kommentars
 		 *  \param[in] $text neuer Text des Kommentars
 		 *  \remarks Ist das aktuelle Mitglied kein Administrator,
 		 *  dann muss die aktuelle Nummer des Mitglieds gleich der
 		 *  Mitglieds_Nr des Kommentars in Kommentare sein. Ist der
 		 *  Nutzer nicht eingeloggt, werden keine Operationen
-		 *  ausgef?hrt.
+		 *  ausgef?hrt. Wird kein Text ($text) angegeben, wird der
+		 *  Kommentar mit Kommentar::Delete gel?scht.
 		 */
 		function Update($nr, $text)
 		{
 			global $db_config, $sqldb, $login;
 
-			if ($login->IsAdministrator() === true)
+			if (empty($text) === true)
 			{
-				$sql = "UPDATE ".$db_config['prefix']."Kommentare
-						SET Kommentartext='$text'
-						WHERE Kommentar_Nr='$nr'
-						LIMIT 1";
-				$sqldb->Query($sql);
+				Kommentar::Delete($nr);
 			}
-			elseif ($login->IsMember() === true)
+			else
 			{
-				$sql = "UPDATE ".$db_config['prefix']."Kommentare
-						SET Kommentartext='$text'
-						WHERE Kommentar_Nr='$nr' AND Mitglieds_Nr='".$login->Nr."'
-						LIMIT 1";
-				$sqldb->Query($sql);
+				if ($login->IsAdministrator() === true)
+				{
+					$sql = "UPDATE ".$db_config['prefix']."Kommentare
+							SET Kommentartext='$text'
+							WHERE Kommentar_Nr='$nr'
+							LIMIT 1";
+					$sqldb->Query($sql);
+				}
+				elseif ($login->IsMember() === true)
+				{
+					$sql = "UPDATE ".$db_config['prefix']."Kommentare
+							SET Kommentartext='$text'
+							WHERE Kommentar_Nr='$nr' AND Mitglieds_Nr='".$login->Nr."'
+							LIMIT 1";
+					$sqldb->Query($sql);
+				}
 			}
 		}
 	}

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/include/literatur.php	2006-06-05 16:09:24 UTC (rev 138)
@@ -26,7 +26,7 @@
 	 */
 	class Literatur
 	{
-		var $Nr = 0; ///< Buchidentifikationsnummer
+		var $Nr = 0; ///< Literaturidentifikationsnummer
 		var $Titel = ""; ///< Titel der Literatur
 		var $Jahr = 0; ///< Erscheinungsjahr
 		var $Verlag = ""; ///< Verlag/Herausgeber
@@ -43,6 +43,8 @@
 		 *  Erstellt aus Literatur in Bibliothek mit Literatur_Nr
 		 *  ($nr) neues Literaturobjekt.
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
 		 *  \param[in] $nr Nummer der zu einlesenden Literatur
 		 */
 		function Literatur($nr)
@@ -135,6 +137,8 @@
 		 *  Au?erdem werden alle nun nicht mehr gebrauchten Autoren in
 		 *  Autoren gel?scht.
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
 		 *  \param[in] $nr Nummer der zu l?schenden Literatur
 		 *  \remarks Ist der Nutzer nicht als Mitglied angemeldet,
 		 *    werden keine Operationen ausgef?hrt
@@ -168,10 +172,12 @@
 		 *  in die Datenbank zu schreiben.
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \param[in] $bibtex String mit Inhalt einer BibTeX-Datei
+		 *  \return Anzahl der importierten Literatur
 		 */
 		function InsertBibTeX($bibtex)
 		{
 			/// \todo implementieren
+			return 0;
 		}
 
 		/*! \brief Legt Literatur an
@@ -232,6 +238,8 @@
 		 *  zugeordnet. Alle jetzt noch nicht zugeordneten Autoren in
 		 *  Autoren werden gel?scht.
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
 		 *  \param[in] $nr Nummer der zu ver?ndernden Literatur
 		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
 		 *  \param[in] $art neuer Bezeichner der Literaturart

Modified: trunk/include/login.php
===================================================================
--- trunk/include/login.php	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/include/login.php	2006-06-05 16:09:24 UTC (rev 138)
@@ -6,9 +6,9 @@
 	 *  Verwaltet die aus der sich aktuellen Anmeldung ergebenen Session
 	 *  des Users und der damit entstehenden Rechte
 	 *  \pre Das Loginobjekt muss vor einer ?bertragung von Inhaltsdaten zum 
-	 *    User angelegt werden, um ein Cookie anlegen zu k?nnen. Es sollte
-	 *    kein zweites Objekt vom Typ Login existieren.
-	 *    Datenbankverbindung muss bestehen.
+	 *    User angelegt werden, um ein Cookie anlegen zu k?nnen.
+	 *  \pre Es sollte kein zweites Objekt vom Typ Login existieren.
+	 *  \pre Datenbankverbindung muss bestehen.
 	 *  \remarks Sollte ein weiteres Objekt vom Typ Login existieren, in
 	 *    welche neue Logininformationen eingetragen werden, wird keine
 	 *    weitere Session angelegt, sondern die alten Informationen in
@@ -44,17 +44,17 @@
 		 *  mit Mitglied::PasswordHash gehasht, um diese mit
 		 *  Benutzernamen ($benutzer) gegen die Eintr?ge in Mitglieder
 		 *  zu pr?fen. Ist diese erfolgreich, wird eine neue Session
-		 *  mit gehashtem Passwort, Benuternamen und
-		 *  Verbindungsinformationen erstellt. Sollte irgendwo ein
-		 *  Fehler bei der Anmeldung auftreten, erh?lt er Nutzerrechte
+		 *  mit gehashtem Passwort, Benutzernamen und
+		 *  Verbindungsinformationen erstellt. Sollte ein Fehler 
+		 *  bei der Anmeldung auftreten, erh?lt er Nutzerrechte
 		 *  (wird also nicht zum Mitglied). Sonst erh?lt er die Rechte
 		 *  und Mitglieds_Nr aus dem gefundenem Eintrag in Mitglieder.
 		 *  \param[in] $benutzer neuer Benutzername
 		 *  \param[in] $passwort Passwort in Klartext des Nutzers
 		 *  \pre Eine Verbindung zur Datenbank muss bestehen.
-		 *    Der Konstruktor muss vor dem Senden von Inhaltsdaten
-		 *    aufgerufen werden, um ein Cookie erstellen zu k?nnen.\n
-		 *    Zum Einloggen mit Daten darf kein Parameter leer sein
+		 *  \pre Der Konstruktor muss vor dem Senden von Inhaltsdaten
+		 *    aufgerufen werden, um ein Cookie erstellen zu k?nnen.
+		 *  \pre Zum Einloggen mit Daten darf kein Parameter leer sein
 		 */
 		function Login($benutzer = "", $passwort = "")
 		{

Modified: trunk/include/mitglied.php
===================================================================
--- trunk/include/mitglied.php	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/include/mitglied.php	2006-06-05 16:09:24 UTC (rev 138)
@@ -85,6 +85,8 @@
 		 *  und l?scht zus?tzlich die Kommentare des Mitglieds in
 		 *  Kommentare
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Mitglied in Mitglieder mit Mitglieds_Nr $nr muss
+		 *    existieren
 		 *  \param[in] $nr Mitglieds_Nr des zu l?schenden Mitglieds
 		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
 		 *    werden keine Operationen ausgef?hrt
@@ -109,7 +111,7 @@
 		 *  F?gt neues Mitglied mit Benutzernamen ($loginname), Passwort
 		 *  ($passwort), Benutzerrechten ($rechte), Vorname ($vorname),
 		 *  Nachname ($nachname), E-Mail-Adresse ($email) in Mitglieder
-		 *  ein. Dazu wird das Passwort noch mit Mitglied::PasswortHash
+		 *  ein. Dazu wird das Passwort noch mit Mitglied::PasswordHash
 		 *  gehasht. Sollte ein Mitglied mit gleichem Login existieren
 		 *  wird ein Fehler zur?ckgegeben, da die Datenbank nur ein
 		 *  Mitglied mit gleichem Login erlaubt.
@@ -153,7 +155,7 @@
 		
 		/*! \brief ?ndert ein Mitglied
 		 *
-		 *  ?ndert die Daten das Mitglieds mit der Mitglieds_Nr ($nr),
+		 *  ?ndert die Daten des Mitglieds mit der Mitglieds_Nr ($nr),
 		 *  in neuen Benutzernamen ($loginname), Passwort ($passwort),
 		 *  Benutzerrechten ($rechte), Vorname ($vorname),
 		 *  Nachname ($nachname), E-Mail-Adresse ($email) in
@@ -164,6 +166,8 @@
 		 *  zur?ckgegeben, da die Datenbank nur ein Mitglied mit
 		 *  gleichem Login erlaubt.
 		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Mitglied in Mitglieder mit Mitglieds_Nr $nr muss
+		 *    existieren
 		 *  \param[in] $nr Mitglieds_Nr des zu ver?ndernden Mitglieds
 		 *  \param[in] $loginname neuer Benutzername des Mitglieds
 		 *  \param[in] $passwort neues Passwort des Mitglieds
@@ -225,7 +229,7 @@
 		/*! \brief R?ckgabe einer Liste der Mitglieder
 		 *
 		 *  Liest alle Mitglieder mit Nr, Login, Vorname, Nachname und
-		 *  Email aus Mitgliedertabelle und gibt die ausgelesenen
+		 *  Email aus Tabelle Mitglieder und gibt die ausgelesenen
 		 *  Objekte in einem Feld zur?ck
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \return Feld mit Objekten der Form

Modified: trunk/include/sqldb_mysql.php
===================================================================
--- trunk/include/sqldb_mysql.php	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/include/sqldb_mysql.php	2006-06-05 16:09:24 UTC (rev 138)
@@ -127,7 +127,7 @@
 		 *  Entfernt Datens?tze der letzten Anfrage und gibt deren
 		 *  Speicher frei.
 		 *  \pre -
-		 *  \remarks Funktion wird vor jedem query aufgerufen
+		 *  \remarks Funktion wird vor jedem Query() aufgerufen
 		 */
 		function FreeResult()
 		{
@@ -149,7 +149,7 @@
 		 *  Anweisung ge?nderten Datens?tze.
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \return Anzahl der Datens?tze
-		 *  \remarks F?r gefundene Datens?tze sollte num_rows() genutzt werden
+		 *  \remarks F?r gefundene Datens?tze sollte GetNumRows() genutzt werden
 		 */
 		function GetAffectedRows()
 		{
@@ -195,7 +195,7 @@
 		 *  \pre Datenbankverbindung muss mit einer Abfrage bestehen
 		 *  \return bei Erfolg Anzahl der Datens?tze
 		 *  \retval false bei Misserfolg
-		 *  \remarks F?r ge?nderte Datens?tze sollte affected_rows() genutzt werden
+		 *  \remarks F?r ge?nderte Datens?tze sollte GetAffectedRows() genutzt werden
 		 */
 		function GetNumRows()
 		{

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-06-05 10:11:30 UTC (rev 137)
+++ trunk/include/suche.php	2006-06-05 16:09:24 UTC (rev 138)
@@ -4,7 +4,7 @@
 
 	/*! \brief Suche Literaturdaten
 	 *
-	 *  Durchsucht die Literatur- und Autorentabelle ?ber Volltextsuche,
+	 *  Durchsucht die Tabelle Bibliothek und Autoren ?ber Volltextsuche,
 	 *  nach Autor und Titel oder nach den 10 zuletzt hinzugef?gten
 	 *  Literatureintr?gen und speichert sie in $Treffer zwischen.
 	 *  \pre Datenbankverbindung muss bestehen
@@ -31,9 +31,9 @@
 
 		/*! \brief Sucht zuletzt hinzugef?gte Literatur
 		 *
-		 *  Sucht in Literaturtabelle nach den 10 zuletzt hinzugef?gten
+		 *  Sucht in Tabelle Bibliothek nach den 10 zuletzt hinzugef?gten
 		 *  Literatureintr?gen und speichert Nr, Titel, Autor, Verlag
-		 *  und ISBN als als Objekt im Feld $Treffer. Sollte ein Fehler
+		 *  und ISBN als Objekt im Feld $Treffer. Sollte ein Fehler
 		 *  auftreten oder bisher keine Eintr?ge vorhanden sein, dann
 		 *  wird $Treffer ein Feld der L?nge 0.
 		 *  \pre Datenbankverbindung muss bestehen.
@@ -74,9 +74,9 @@
 
 		/*! \brief Sucht nach Literatur mit Suchbegriff
 		 *
-		 *  Sucht in Literatur und Autortabelle nach dem Auftreten
+		 *  Sucht in Tabelle Bibliothek und Autor nach dem Auftreten
 		 *  des ?bergebenen Textes in  Literatureintr?gen und speichert
-		 *  Nr, Titel, Autor, Verlag und ISBN als als Objekt im Feld
+		 *  Nr, Titel, Autor, Verlag und ISBN als Objekt im Feld
 		 *  $Treffer. Sollte ein Fehler auftreten oder keine passenden
 		 *  Eintr?ge vorhanden sein, dann wird $Treffer ein Feld der
 		 *  L?nge 0.
@@ -127,10 +127,10 @@
 		
 		/*! \brief Sucht Literatur mit Autor und Titel
 		 *
-		 *  Sucht in Literatur und Autortabelle nach dem Auftreten
+		 *  Sucht in Tabelle Bibliothek und Autoren nach dem Auftreten
 		 *  von $autor in Autor und $titel im Titel des Literatureintrags
 		 *  und speichert Nr, Titel, Autor, Verlag und ISBN der Treffer
-		 *  als als Objekt im Feld $Treffer. Sollte ein Fehler auftreten
+		 *  als Objekt im Feld $Treffer. Sollte ein Fehler auftreten
 		 *  oder keine passenden Eintr?ge vorhanden sein, dann wird
 		 *  $Treffer ein Feld der L?nge 0.
 		 *  \pre Datenbankverbindung muss bestehen.
@@ -202,25 +202,25 @@
 		/*! \brief Sucht Literatur
 		 *
 		 *  Wenn keine Parameter ?bergeben werden:
-		 *  - Sucht in Literaturtabelle nach den 10 zuletzt hinzugef?gten
-		 *    Literatureintr?gen und speichert Nr, Titel, Autor, Verlag
-		 *    und ISBN als als Objekt im Feld $Treffer. Sollte ein Fehler
-		 *    auftreten oder bisher keine Eintr?ge vorhanden sein, dann
-		 *    wird $Treffer ein Feld der L?nge 0.
+		 *  - Sucht in Tabelle Bibliothek nach den 10 zuletzt
+		 *    hinzugef?gten Literatureintr?gen und speichert Nr, Titel,
+		 *    Autor, Verlag und ISBN als Objekt im Feld $Treffer.
+		 *    Sollte ein Fehler auftreten oder bisher keine Eintr?ge
+		 *    vorhanden sein, dann wird $Treffer ein Feld der L?nge 0.
 		 *
 		 *  Wenn ein $suchbegriff ?bergeben wird:
-		 *  - Sucht in Literatur und Autortabelle nach dem Auftreten
+		 *  - Sucht in Tabelle Literatur und Autoren nach dem Auftreten
 		 *    des ?bergebenen Textes in  Literatureintr?gen und speichert
-		 *    Nr, Titel, Autor, Verlag und ISBN als als Objekt im Feld
+		 *    Nr, Titel, Autor, Verlag und ISBN als Objekt im Feld
 		 *    $Treffer. Sollte ein Fehler auftreten oder keine passenden
 		 *    Eintr?ge vorhanden sein, dann wird $Treffer ein Feld der
 		 *    L?nge 0.
 		 *
 		 *  Wenn $suchbegriff und $autor ?bergeben werden:
-		 *  - Sucht in Literatur und Autortabelle nach dem Auftreten
+		 *  - Sucht in Tabelle Bibliothek und Autoren nach dem Auftreten
 		 *    von $autor in Autor und $suchbegriff im Titel des 
 		 *    Literatureintrags und speichert Nr, Titel, Autor, Verlag
-		 *    als als Objekt im Feld $Treffer. Sollte ein Fehler auftreten
+		 *    als Objekt im Feld $Treffer. Sollte ein Fehler auftreten
 		 *    und ISBN der Treffer oder keine passenden Eintr?ge vorhanden
 		 *    sein, dann wird $Treffer ein Feld der L?nge 0.
 		 *  - Wird eine kommagetrennte Liste von Autoren als



From lazhur at berlios.de  Mon Jun  5 18:49:42 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 5 Jun 2006 18:49:42 +0200
Subject: [Liman-svn] r139 - in trunk/docs: . beleg3 beleg3/interfaces beleg3/sourcecodes beleg3/sourcecodes/include
Message-ID: <200606051649.k55GngIr027555@sheep.berlios.de>

Author: lazhur
Date: 2006-06-05 18:49:39 +0200 (Mon, 05 Jun 2006)
New Revision: 139

Added:
   trunk/docs/beleg3/
   trunk/docs/beleg3/Makefile
   trunk/docs/beleg3/anwenderdokumentation.tex
   trunk/docs/beleg3/arbeitsaufgaben.tex
   trunk/docs/beleg3/interfaces/
   trunk/docs/beleg3/interfaces/autor.php
   trunk/docs/beleg3/meta.tex
   trunk/docs/beleg3/programmdokumentation.tex
   trunk/docs/beleg3/sourcecodes/
   trunk/docs/beleg3/sourcecodes/include/
   trunk/docs/beleg3/sourcecodes/include/autor.php
   trunk/docs/beleg3/systemhandbuch.tex
   trunk/docs/beleg3/teilbeleg3.tex
   trunk/docs/beleg3/titel.tex
   trunk/docs/beleg3/tuclogo.eps
   trunk/docs/beleg3/tuclogo.pdf
   trunk/docs/beleg3/user.sty
Log:
Struktur f?\195?\188r dritten Teilbeleg


Added: trunk/docs/beleg3/Makefile
===================================================================
--- trunk/docs/beleg3/Makefile	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/Makefile	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,52 @@
+MAIN = teilbeleg3
+DEPENDS =	Makefile\
+		teilbeleg3.tex\
+		meta.tex\
+		titel.tex\
+		anwenderdokumentation.tex\
+		arbeitsaufgaben.tex\
+		programmdokumentation.tex\
+		systemhandbuch.tex
+
+# Standard pdf
+all: pdf
+
+# make pdf
+pdf: $(MAIN).pdf
+
+# make pdfthumb
+pdfthumb: $(MAIN).tpt
+
+# make ps
+ps : $(MAIN).ps
+
+# make dvi
+dvi: $(MAIN).dvi
+
+# Erzeuge pdf
+$(MAIN).pdf: $(DEPENDS)
+	pdflatex $(MAIN).tex
+
+# Erzeuge pdfthumb
+$(MAIN).tpt: $(DEPENDS) $(MAIN).pdf
+	thumbpdf $(MAIN).pdf
+
+# Erzeuge ps aus dvi
+$(MAIN).ps: $(MAIN).dvi
+	dvips -o $(MAIN).ps -Pcmz -Pamz $(MAIN).dvi
+
+# Erzeuge dvi
+$(MAIN).dvi: $(DEPENDS)
+	latex $(MAIN)
+
+clean:
+	@rm -f *.aux
+	@rm -f *.dvi
+	@rm -f *.log
+	@rm -f *.out
+	@rm -f *.toc
+	@rm -f *.backup
+	@rm -f $(MAIN).pdf
+	@rm -f $(MAIN).tpt # pdfthumb
+	@rm -f $(MAIN).ps
+	@rm -f $(MAIN).dvi

Added: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,8 @@
+\chapter{Anwenderdokumentation}
+\section{Produktzweck}
+
+\section{Basismaschine und Ressourcenanforderungen}
+
+\section{Nutzerklassen}
+
+\section{Bedienungsanleitung}

Added: trunk/docs/beleg3/arbeitsaufgaben.tex
===================================================================
--- trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1 @@
+ 

Added: trunk/docs/beleg3/interfaces/autor.php
===================================================================
--- trunk/docs/beleg3/interfaces/autor.php	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/interfaces/autor.php	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,70 @@
+<?php
+	/*! \brief Verwaltet Autoren
+	 *
+	 *  Stellt Funktionen zum Hinzuf?gen von Autoren und Bereinigen nicht
+	 *  mehr benutzter Autoren bereit.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class Autor
+	{
+		var $Nr = 0; ///< Identifikationsnummer des Autors
+		var $Name = 0; ///< Name des Autors
+		
+		/*! \brief Legt Autorenobjekt an
+		 *
+		 *  Legt ein neues Autorenobjekt aus einem Objekt mit den
+		 *  Attributen Nr und Name an.
+		 *  \pre -
+		 *  \param[in] $data Objekt mit Autorendaten der Form
+		 *    - Nr
+		 *    - Name
+		 */
+		function Autor($data);
+
+		/*! \brief Entfernt unn?tige Autoren
+		 *
+		 *  Entfernt aus Autoren alle Autoren, die keine Verbindung
+		 *  (Literatur_Autor-Tabelle) mehr mit Literatur haben.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \remarks Ist der Nutzer nicht eingeloggt, werden keine
+		 *    Operationen ausgef?hrt.
+		 */
+		function Clean();
+
+		/*! \brief Gibt Autoren zu bestimmter Literatur zur?ck
+		 *
+		 *  Liest alle Autoren die einer Literatur ($literatur_nr)
+		 *  zugeordnet sind aus Kommentare aus und gibt sie als Feld des
+		 *  Typs Autor zur?ck.
+		 *  \param[in] $literatur_nr Nr einer Literatur mit Autoren
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld vom Typ Autor
+		 */
+		function GetAll($literatur_nr);
+
+		/*! \brief Legt neue Autoren aus kommagetrennter Liste an
+		 *
+		 *  Teilt die kommagetrennte Liste von Autoren in einzelne
+		 *  Autorennamen ein und ?berpr?ft gegen Autorentabelle, ob
+		 *  diese schon in der Datenbank existieren. Sollten diese
+		 *  schon existieren, dann wird Autor_Nr ausgelesen und zum
+		 *  Feld hinzugef?gt. Sollten diese noch nicht existieren,
+		 *  werden sie hinzugef?gt und die neuen Autor_Nr zum Feld
+		 *  hinzugef?gt. Das komplette Feld mit Autor_Nr wird
+		 *  zur?ckgegeben.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
+		 *  \return Feld mit Autor_Nr der Autoren
+		 *  \remarks Ist der Nutzer nicht eingeloggt, werden keine
+		 *    Operationen ausgef?hrt.
+		 */
+		function Split($autoren);
+	}
+?>

Added: trunk/docs/beleg3/meta.tex
===================================================================
--- trunk/docs/beleg3/meta.tex	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/meta.tex	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,17 @@
+\newcommand{\dctitle}{Literaturverwaltung}
+\newcommand{\dcsubject}{Projektdokumentation}
+\newcommand{\dcsubtitle}{Teilbeleg 3}
+\newcommand{\dcauthor}{Simon Wunderlich}
+\newcommand{\dcdate}{\today}
+
+\ifpdf
+\hypersetup{%
+   pdfauthor={\dcsubject - \dcauthor}
+   pdftitle={\dctitle}
+   bookmarksnumbered=true,
+   pdfstartview={FitH},
+   colorlinks=true,
+   linkcolor=black,
+   plainpages = false
+}
+\fi

Added: trunk/docs/beleg3/programmdokumentation.tex
===================================================================
--- trunk/docs/beleg3/programmdokumentation.tex	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/programmdokumentation.tex	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,18 @@
+\chapter{Programmdokumentation}
+\section{Definition Klasseninterfaces}
+\subsection{Klasse Autor}
+\lstinputlisting{interfaces/autor.php}
+
+\section{Kommentierte Quelltexte}
+%nur ein Test
+\subsection{include/autor.php}
+\lstinputlisting{sourcecodes/include/autor.php}
+
+\section{Testplan}
+\subsection{Testf??lle}
+
+\subsection{Testmatrix}
+
+\section{Systemtest}
+
+\section{Abschlu??einsch??tzung}
\ No newline at end of file

Added: trunk/docs/beleg3/sourcecodes/include/autor.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/autor.php	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/sourcecodes/include/autor.php	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,137 @@
+<?php
+	/*! \brief Verwaltet Autoren
+	 *
+	 *  Stellt Funktionen zum Hinzuf?gen von Autoren und Bereinigen nicht
+	 *  mehr benutzter Autoren bereit.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class Autor
+	{
+		var $Nr = 0; ///< Identifikationsnummer des Autors
+		var $Name = 0; ///< Name des Autors
+		
+		/*! \brief Legt Autorenobjekt an
+		 *
+		 *  Legt ein neues Autorenobjekt aus einem Objekt mit den
+		 *  Attributen Nr und Name an.
+		 *  \pre -
+		 *  \param[in] $data Objekt mit Autorendaten der Form
+		 *    - Nr
+		 *    - Name
+		 */
+		function Autor($data)
+		{
+			$this->Nr = $data->Nr;
+			$this->Name = $data->Name;
+		}
+
+		/*! \brief Entfernt unn?tige Autoren
+		 *
+		 *  Entfernt aus Autoren alle Autoren, die keine Verbindung
+		 *  (Literatur_Autor-Tabelle) mehr mit Literatur haben.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \remarks Ist der Nutzer nicht eingeloggt, werden keine
+		 *    Operationen ausgef?hrt.
+		 */
+		function Clean()
+		{
+			global $db_config, $sqldb, $login;
+
+			if ($login->IsMember() === true)
+			{
+				$sql = "DELETE autoren, connect
+						FROM ".$db_config['prefix']."Autoren AS autoren
+						LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
+						ON autoren.Autor_Nr = connect.Autor_Nr
+						WHERE connect.Autor_Nr is NULL";
+				$sqldb->Query($sql);
+			}
+		}
+
+		/*! \brief Gibt Autoren zu bestimmter Literatur zur?ck
+		 *
+		 *  Liest alle Autoren die einer Literatur ($literatur_nr)
+		 *  zugeordnet sind aus Kommentare aus und gibt sie als Feld des
+		 *  Typs Autor zur?ck.
+		 *  \param[in] $literatur_nr Nr einer Literatur mit Autoren
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld vom Typ Autor
+		 */
+		function GetAll($literatur_nr)
+		{
+			global $db_config, $sqldb;
+
+			$authors = array();
+			$sql = "SELECT  autoren.Autor_Nr AS Nr, Autorname AS Name
+					FROM ".$db_config['prefix']."Literatur_Autor AS connect
+					INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
+					ON connect.Autor_Nr = autoren.Autor_Nr
+					WHERE Literatur_Nr = '$literatur_nr'";
+			$sqldb->Query($sql);
+			while ($cur = $sqldb->Fetch())
+			{
+				$authors[] = new Autor($cur);
+			}
+			return $authors;
+		}
+
+		/*! \brief Legt neue Autoren aus kommagetrennter Liste an
+		 *
+		 *  Teilt die kommagetrennte Liste von Autoren in einzelne
+		 *  Autorennamen ein und ?berpr?ft gegen Autorentabelle, ob
+		 *  diese schon in der Datenbank existieren. Sollten diese
+		 *  schon existieren, dann wird Autor_Nr ausgelesen und zum
+		 *  Feld hinzugef?gt. Sollten diese noch nicht existieren,
+		 *  werden sie hinzugef?gt und die neuen Autor_Nr zum Feld
+		 *  hinzugef?gt. Das komplette Feld mit Autor_Nr wird
+		 *  zur?ckgegeben.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
+		 *  \return Feld mit Autor_Nr der Autoren
+		 *  \remarks Ist der Nutzer nicht eingeloggt, werden keine
+		 *    Operationen ausgef?hrt.
+		 */
+		function Split($autoren)
+		{
+			global $db_config, $sqldb, $login;
+			
+			$authorNumbers = array();
+
+			if ($login->IsMember() === true)
+			{
+				$authorNames = array();
+				$authorNames = split( ",", $autoren );
+			
+				for( $i = 0; $i < count($authorNames); $i++ )
+				{
+					$sqlSelect = "SELECT Autor_Nr AS Nr FROM ".$db_config['prefix']."Autoren AS autoren
+							WHERE Autorname = '".trim($authorNames[$i])."'";
+					$sqldb->Query( $sqlSelect );
+					
+					if( $cur = $sqldb->Fetch() )
+					{
+						$authorNumbers[] = $cur->Nr;
+					}
+					else
+					{
+						$sqlInsert = "INSERT INTO ".$db_config['prefix']."Autoren VALUES (NULL, '".trim($authorNames[$i])."')";
+						$sqlIdentity = "SELECT @@IDENTITY AS Nr FROM ".$db_config['prefix']."Autoren";
+						$sqldb->Query( $sqlInsert );
+						$sqldb->Query( $sqlIdentity );
+						$line = $sqldb->Fetch();
+						$authorNumbers[] = $line->Nr;
+					}
+				}
+			}
+			
+			return $authorNumbers;
+		}
+	}
+?>

Added: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,6 @@
+\chapter{Systemhandbuch}
+\section{Installationsanleitung}
+
+\section{Programm-Filesystem}
+
+\section{Administrationsanleitung}
\ No newline at end of file

Added: trunk/docs/beleg3/teilbeleg3.tex
===================================================================
--- trunk/docs/beleg3/teilbeleg3.tex	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/teilbeleg3.tex	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,42 @@
+\documentclass[a4paper]{scrreprt}
+
+\usepackage[ngerman]{babel}
+\usepackage[utf8]{inputenc}
+\usepackage{pslatex}
+\usepackage{amssymb}
+\usepackage{textcomp}
+\usepackage{parskip}
+\usepackage{graphicx}
+\usepackage{txfonts}
+\usepackage[T1]{fontenc}
+\usepackage{user} % eigene Befehle
+\usepackage{longtable}
+\usepackage{floatflt}
+\usepackage{listings}
+
+\ifpdf
+  \usepackage[ps2pdf]{thumbpdf}
+  \usepackage[pdftex]{hyperref}
+\else
+  \usepackage[active]{srcltx}
+\fi
+
+% Einstellung f??r Listings
+\lstset{numbers=left, numberstyle=\tiny, numbersep=5pt, basicstyle=\scriptsize, showstringspaces=false}
+\lstset{language=PHP, inputencoding=latin1, breaklines=true, breakatwhitespace=true}
+
+\include{meta} % Metainformationen wie Titel, Autoren,...
+
+\begin{document}
+\include{titel} % Titel des Dokuments mit Informationen aus meta
+\cleardoublepage
+\tableofcontents
+\cleardoublepage
+
+%Kapitel
+\input{programmdokumentation}
+\input{systemhandbuch}
+\input{anwenderdokumentation}
+\input{arbeitsaufgaben}
+
+\end{document}

Added: trunk/docs/beleg3/titel.tex
===================================================================
--- trunk/docs/beleg3/titel.tex	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/titel.tex	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,43 @@
+% Momentan (schlecht) handgestrickt - wenn jemand es mit \maketitle und den
+% Autoren wie in Vorlage hinbekommt, bitte ??ndern
+
+\begin{titlepage}
+	\begin{center}\sffamily
+		\vspace{15mm}
+		\includegraphics{tuclogo}
+		\vfill
+		{% Kopf des Titels
+			\large Softwarepraktikum 2006\\[1.5ex]
+		}
+		\vfill \vfill
+
+		%Titel
+		\textbf{\Huge\dctitle}
+		\vspace{1.5cm}
+		
+		% Subjekt
+		\textbf{\Large\dcsubject}
+
+		% Untertitel
+		\textsc{\Large \dcsubtitle}
+		\vfill \vfill
+	\end{center}
+	
+	
+	{%Autoren
+		\begin{tabbing}
+			\hspace{4.5cm}\=\textbf{Teamleiter:}\hspace{0.5cm}\=Simon~Wunderlich\\[2.0ex]
+				\>\textbf{Mitglieder des Projektteams:}\\[1.5ex]
+				\>            \>Andreas~Tr??ger \\[1.5ex]
+				\>            \>Frank~Wilhelm \\[1.5ex]
+				\>            \>Florian~Scharl \\[1.5ex]
+				\>            \>Sven~Eckelmann \\[4.0ex]
+				\> \textbf{Praktikumsbetreuer:} Michael Rentzsch
+		\end{tabbing}
+	}
+	\vfill
+	
+	{%Betreuer
+		Chemnitz, den \dcdate
+	}
+\end{titlepage}

Added: trunk/docs/beleg3/tuclogo.eps
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/tuclogo.eps
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/tuclogo.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/tuclogo.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/user.sty
===================================================================
--- trunk/docs/beleg3/user.sty	2006-06-05 16:09:24 UTC (rev 138)
+++ trunk/docs/beleg3/user.sty	2006-06-05 16:49:39 UTC (rev 139)
@@ -0,0 +1,27 @@
+% Nummer auch vor subsubsection anzeigen
+\setcounter{secnumdepth}{3}
+
+% Zeilenumbruch nach paragraph
+\makeatletter
+\renewcommand{\paragraph}{\@startsection{paragraph}{4}{\z@} 
+               {3.25ex \@plus1ex \@minus.2ex} %
+               {1.5ex \@plus .2ex} %
+               {\setlength{\parfillskip}{\z@ \@plus 1fil}%
+               \raggedsection\normalfont\sectfont\nobreak\size at paragraph\nobreak}}
+\makeatother 
+
+% Hilfsfunktion f??r Erkennenung der Erzeugung von PDF
+\newif\ifpdf 
+\ifx\pdfoutput\undefined
+  \pdffalse
+\else
+  \ifx\pdfoutput\relax
+    \pdffalse
+  \else
+    \ifnum\pdfoutput>0
+      \pdftrue
+    \else
+      \pdffalse
+    \fi
+  \fi
+\fi



From lazhur at berlios.de  Wed Jun  7 17:55:05 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Wed, 7 Jun 2006 17:55:05 +0200
Subject: [Liman-svn] r140 - in trunk: . design docs/beleg2 docs/beleg2/doxygen docs/beleg2/visio include
Message-ID: <200606071555.k57Ft5JH011805@sheep.berlios.de>

Author: lazhur
Date: 2006-06-07 17:55:00 +0200 (Wed, 07 Jun 2006)
New Revision: 140

Modified:
   trunk/design/liman.css
   trunk/docs/beleg2/LiMan_System.eps
   trunk/docs/beleg2/LiMan_System.pdf
   trunk/docs/beleg2/doxygen/classAutor.tex
   trunk/docs/beleg2/doxygen/classLiteratur.tex
   trunk/docs/beleg2/doxygen/classSQLDB.tex
   trunk/docs/beleg2/visio/LiMan_System.vsd
   trunk/include/autor.php
   trunk/include/header.php
   trunk/include/literatur.php
   trunk/include/login.php
   trunk/include/sqldb_mysql.php
   trunk/include/suche.php
   trunk/login.php
Log:
- BerliOS-Workarounds (Erster Teil)
- SQLDB::GetInsertID hinzugef?\195?\188gt (wegen BerliOS)


Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/design/liman.css	2006-06-07 15:55:00 UTC (rev 140)
@@ -54,7 +54,7 @@
 	list-style: none;
 }
 
-#search input, #loginform #benutzername, #loginform #password {
+#search input, #loginform #loginname, #loginform #passwort {
 	margin: 0 auto;
 	font-size: 1em;
 	width: 10.8em;

Modified: trunk/docs/beleg2/LiMan_System.eps
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg2/LiMan_System.pdf
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg2/doxygen/classAutor.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classAutor.tex	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/docs/beleg2/doxygen/classAutor.tex	2006-06-07 15:55:00 UTC (rev 140)
@@ -32,12 +32,12 @@
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Importiert:]\begin{itemize}
-\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\end{itemize}
+\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\item \hyperlink{classSQLDB_094a5b811d412900f2435cabb2194fb8}{SQLDB::Get\-Insert\-ID}\end{itemize}
 \end{Desc}
 \begin{Desc}
 \item[Autor:]Frank Wilhelm \end{Desc}
 \begin{Desc}
-\item[?nderungsstand:]30.05.2006 \end{Desc}
+\item[?nderungsstand:]6.06.2006 \end{Desc}
 
 
 

Modified: trunk/docs/beleg2/doxygen/classLiteratur.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-07 15:55:00 UTC (rev 140)
@@ -54,12 +54,12 @@
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Importiert:]\begin{itemize}
-\item \hyperlink{classAutor_77b27af7e471abe5a404fc92c7319921}{Autor::Clean}\item \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Autor::Get\-All}\item \hyperlink{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{Autor::Split}\item \hyperlink{classKommentar_9903f1df98f71eefa3b44a81d6a8ee5c}{Kommentar::Delete\-All}\item \hyperlink{classKommentar_33d65db8c526c50017a5fa029bc04416}{Kommentar::Get\-All}\item \hyperlink{classLiteraturArt_b3312217430531ed7821a46a39c49af7}{Literatur\-Art::Literatur\-Art}\item Literatur\-Art::Get\-Bib\-Tex\-Text\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\end{itemize}
+\item \hyperlink{classAutor_77b27af7e471abe5a404fc92c7319921}{Autor::Clean}\item \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Autor::Get\-All}\item \hyperlink{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{Autor::Split}\item \hyperlink{classKommentar_9903f1df98f71eefa3b44a81d6a8ee5c}{Kommentar::Delete\-All}\item \hyperlink{classKommentar_33d65db8c526c50017a5fa029bc04416}{Kommentar::Get\-All}\item \hyperlink{classLiteraturArt_b3312217430531ed7821a46a39c49af7}{Literatur\-Art::Literatur\-Art}\item Literatur\-Art::Get\-Bib\-Tex\-Text\item \hyperlink{classLogin_70d2747b0aa454f4203a789afea25318}{Login::Is\-Member}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch}\item \hyperlink{classSQLDB_094a5b811d412900f2435cabb2194fb8}{SQLDB::Get\-Insert\-ID}\end{itemize}
 \end{Desc}
 \begin{Desc}
 \item[Autor:]Sven Eckelmann \end{Desc}
 \begin{Desc}
-\item[?nderungsstand:]30.05.2006 \end{Desc}
+\item[?nderungsstand:]06.06.2006 \end{Desc}
 
 
 

Modified: trunk/docs/beleg2/doxygen/classSQLDB.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classSQLDB.tex	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/docs/beleg2/doxygen/classSQLDB.tex	2006-06-07 15:55:00 UTC (rev 140)
@@ -22,6 +22,8 @@
 \begin{CompactList}\small\item\em Anzahl zuletzt ge?nderter Datens?tze. \item\end{CompactList}\item 
 \hyperlink{classSQLDB_efc9afe11649d6cdae21575717ec3436}{Get\-Error} ()
 \begin{CompactList}\small\item\em Liefert Fehlerinformationen. \item\end{CompactList}\item 
+\hyperlink{classSQLDB_094a5b811d412900f2435cabb2194fb8}{Get\-Insert\-ID} ()
+\begin{CompactList}\small\item\em Liefert die ID des letzten INSERTS. \item\end{CompactList}\item 
 \hyperlink{classSQLDB_15b181251b309ab55331be29fa33ac9f}{Get\-Num\-Rows} ()
 \begin{CompactList}\small\item\em Anzahl zuletzt gefundener Datens?tze. \item\end{CompactList}\item 
 \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{Query} (\$query)
@@ -43,7 +45,7 @@
 \begin{Desc}
 \item[Autor:]Sven Eckelmann \end{Desc}
 \begin{Desc}
-\item[?nderungsstand:]30.05.2006 \end{Desc}
+\item[?nderungsstand:]06.06.2006 \end{Desc}
 
 
 
@@ -161,6 +163,26 @@
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[R\"{u}ckgabe:]Feld mit feld\mbox{[}0\mbox{]} als Fehlernachricht und feld\mbox{[}1\mbox{]} als Fehlernummer \end{Desc}
+\hypertarget{classSQLDB_094a5b811d412900f2435cabb2194fb8}{
+\index{SQLDB@{SQLDB}!GetInsertID@{GetInsertID}}
+\index{GetInsertID@{GetInsertID}!SQLDB@{SQLDB}}
+\paragraph[GetInsertID]{\setlength{\rightskip}{0pt plus 5cm}SQLDB::Get\-Insert\-ID ()}\hfill}
+\label{classSQLDB_094a5b811d412900f2435cabb2194fb8}
+
+
+Liefert die ID des letzten INSERTS. 
+
+Liefert die ID des bei den letzten INSERT angelegten Datensatzes zur?ck \begin{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen 
+
+INSERT-Query muss gemacht worden sein \end{Desc}
+\begin{Desc}
+\item[R\"{u}ckgabe:]ID des zuletzt hinzugef?gten Datensatzes \end{Desc}
+\begin{Desc}
+\item[R\"{u}ckgabewerte:]
+\begin{description}
+\item[{\em bei}]Misserfolg \end{description}
+\end{Desc}
 \hypertarget{classSQLDB_15b181251b309ab55331be29fa33ac9f}{
 \index{SQLDB@{SQLDB}!GetNumRows@{GetNumRows}}
 \index{GetNumRows@{GetNumRows}!SQLDB@{SQLDB}}

Modified: trunk/docs/beleg2/visio/LiMan_System.vsd
===================================================================
(Binary files differ)

Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/include/autor.php	2006-06-07 15:55:00 UTC (rev 140)
@@ -8,9 +8,10 @@
 	 *  - Login::IsMember
 	 *  - SQLDB::Query
 	 *  - SQLDB::Fetch
+	 *  - SQLDB::GetInsertID
 	 *
 	 *  \author Frank Wilhelm
-	 *  \date 30.05.2006
+	 *  \date 6.06.2006
 	 */
 	class Autor
 	{
@@ -52,6 +53,8 @@
 						ON autoren.Autor_Nr = connect.Autor_Nr
 						WHERE connect.Autor_Nr is NULL";
 				$sqldb->Query($sql);
+				print_r($sqldb->GetError());
+				print_r($sql);
 			}
 		}
 
@@ -101,7 +104,6 @@
 		function Split($autoren)
 		{
 			global $db_config, $sqldb, $login;
-			
 			$authorNumbers = array();
 
 			if ($login->IsMember() === true)
@@ -122,11 +124,8 @@
 					else
 					{
 						$sqlInsert = "INSERT INTO ".$db_config['prefix']."Autoren VALUES (NULL, '".trim($authorNames[$i])."')";
-						$sqlIdentity = "SELECT @@IDENTITY AS Nr FROM ".$db_config['prefix']."Autoren";
 						$sqldb->Query( $sqlInsert );
-						$sqldb->Query( $sqlIdentity );
-						$line = $sqldb->Fetch();
-						$authorNumbers[] = $line->Nr;
+						$authorNumbers[] = $sqldb->GetInsertID();
 					}
 				}
 			}

Modified: trunk/include/header.php
===================================================================
--- trunk/include/header.php	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/include/header.php	2006-06-07 15:55:00 UTC (rev 140)
@@ -64,8 +64,8 @@
 					?>
 						<form action="login.<?=$ext;?>" id="loginform" method="post">
 							<div>
-							<label for="benutzername">Login:</label><input id="benutzername" name="benutzername" value="" type="text">
-							<label for="password">Passwort:</label><input id="password" name="password" type="password">
+							<label for="loginname">Login:</label><input id="loginname" name="loginname" value="" type="text">
+							<label for="passwort">Passwort:</label><input id="passwort" name="passwort" type="password">
 							<input type="submit" value="Login">
 							</div>
 						</form>

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/include/literatur.php	2006-06-07 15:55:00 UTC (rev 140)
@@ -20,9 +20,10 @@
 	 *  - Login::IsMember
 	 *  - SQLDB::Query
 	 *  - SQLDB::Fetch
+	 *  - SQLDB::GetInsertID
 	 *
 	 *  \author Sven Eckelmann
-	 *  \date 30.05.2006
+	 *  \date 06.06.2006
 	 */
 	class Literatur
 	{
@@ -210,12 +211,8 @@
 						VALUES (NULL, '$art', '$titel', '$jahr', '$verlag', '$isbn', '$beschreibung', '$ort', '$stichworte')";
 				$sqldb->Query($sql);
 
-				$sqlIdentity = "SELECT @@IDENTITY AS Nr FROM ".$db_config['prefix']."Bibliothek";
-				$sqldb->Query($sqlIdentity);
-
-				if ($identity = $sqldb->Fetch())
+				if ($nr = $sqldb->GetInsertID())
 				{
-					$nr = $identity->Nr;
 					$autorlist = Autor::Split($autoren);
 					for ($i = 0; $i < count($autorlist); $i++)
 					{

Modified: trunk/include/login.php
===================================================================
--- trunk/include/login.php	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/include/login.php	2006-06-07 15:55:00 UTC (rev 140)
@@ -68,30 +68,30 @@
 			// Neue Session starten?
 			if (empty($benutzer) === false && empty($passwort) === false)
 			{
-				session_register("benutzer");
-				session_register("passwort");
+				session_register("login_benutzer");
+				session_register("login_passwort");
 				session_register("ip");
 
-				$_SESSION["benutzer"] = $benutzer;
-				$_SESSION["passwort"] = Mitglied::PasswordHash($passwort);
+				$_SESSION["login_benutzer"] = $benutzer;
+				$_SESSION["login_passwort"] = Mitglied::PasswordHash($passwort);
 				$_SESSION["ip"] = $_SERVER['REMOTE_ADDR'];
 				
 			}
 
 			// Korrekt eingeloggt?
 			if (isset($_SESSION["ip"]) && $_SESSION["ip"] == $_SERVER['REMOTE_ADDR'] &&
-				!empty($_SESSION["benutzer"]) && !empty($_SESSION["passwort"]))
+				!empty($_SESSION["login_benutzer"]) && !empty($_SESSION["login_passwort"]))
 			{
 				// Hole, Nr, Passwort und Rechte zu Loginnamen
 				$sql = "SELECT Mitglieds_Nr AS Nr, Passwort AS passwort, Rechte
 					FROM ".$db_config['prefix']."Mitglieder AS members
-					WHERE members.Login = '".$_SESSION["benutzer"]."'
+					WHERE members.Login = '".$_SESSION["login_benutzer"]."'
 					LIMIT 1";
 			
 				$sqldb->Query($sql);
 				if ($line = $sqldb->Fetch())
 				{
-					if ($line->passwort === $_SESSION["passwort"])
+					if ($line->passwort === $_SESSION["login_passwort"])
 					{
 						$this->Nr = $line->Nr;
 						switch ($line->Rechte)

Modified: trunk/include/sqldb_mysql.php
===================================================================
--- trunk/include/sqldb_mysql.php	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/include/sqldb_mysql.php	2006-06-07 15:55:00 UTC (rev 140)
@@ -8,7 +8,7 @@
 	 *  \pre -
 	 *
 	 *  \author Sven Eckelmann
-	 *  \date 30.05.2006
+	 *  \date 06.06.2006
 	 */
 	class SQLDB
 	{
@@ -187,6 +187,27 @@
 
 			return $error;
 		}
+
+		/*! \brief Liefert die ID des letzten INSERTS
+		 *
+		 *  Liefert die ID des bei den letzten INSERT angelegten
+		 *  Datensatzes zur?ck
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre INSERT-Query muss gemacht worden sein
+		 *  \return ID des zuletzt hinzugef?gten Datensatzes
+		 *  \retval bei Misserfolg
+		 */
+		function GetInsertID()
+		{
+			if ($this->db_id !== false)
+			{
+				return @mysql_insert_id($this->db_id);
+			}
+			else
+			{
+				return false;
+			}
+		}
 		
 		/*! \brief Anzahl zuletzt gefundener Datens?tze
 		 *

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/include/suche.php	2006-06-07 15:55:00 UTC (rev 140)
@@ -98,8 +98,8 @@
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr
-						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext' IN BOOLEAN MODE)
-						OR MATCH (Autorname) AGAINST ('$volltext' IN BOOLEAN MODE)";
+						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext')
+						OR MATCH (Autorname) AGAINST ('$volltext')";
 				$sqldb->Query($sql);
 				
 				while ($cur = $sqldb->Fetch())
@@ -148,7 +148,7 @@
 
 			$titel = trim($titel);
 			$autor = trim($autor);
-			if (empty($titel) === false || !empty($autor) === false)
+			if (empty($titel) === false || empty($autor) === false)
 			{
 				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
 						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
@@ -158,7 +158,7 @@
 						ON connect.Autor_Nr = autoren.Autor_Nr
 						WHERE bibliothek.Titel like '%".$titel."%'";
 
-				if (empty($autor) !== false)
+				if (empty($autor) === false)
 				{
 					$sql .= " AND (";
 					$authors = array();

Modified: trunk/login.php
===================================================================
--- trunk/login.php	2006-06-05 16:49:39 UTC (rev 139)
+++ trunk/login.php	2006-06-07 15:55:00 UTC (rev 140)
@@ -5,9 +5,9 @@
 	
 	require_once("include/global.php");
 
-	if (empty($_POST["benutzername"]) === false && empty($_POST["password"]) === false)
+	if (empty($_POST["loginname"]) === false && empty($_POST["passwort"]) === false)
 	{
-		$login = new Login($_POST["benutzername"], $_POST["password"]);
+		$login = new Login($_POST["loginname"], $_POST["passwort"]);
 	}
 	elseif (isset($_GET["logout"]) === true)
 	{



From gregorian at berlios.de  Wed Jun  7 18:12:44 2006
From: gregorian at berlios.de (gregorian at BerliOS)
Date: Wed, 7 Jun 2006 18:12:44 +0200
Subject: [Liman-svn] r141 - trunk/docs/protokoll
Message-ID: <200606071612.k57GCikL016536@sheep.berlios.de>

Author: gregorian
Date: 2006-06-07 18:12:43 +0200 (Wed, 07 Jun 2006)
New Revision: 141

Added:
   trunk/docs/protokoll/2006_06_07.xhtml
Log:
Protokoll vom 07.06.2006

Added: trunk/docs/protokoll/2006_06_07.xhtml
===================================================================
--- trunk/docs/protokoll/2006_06_07.xhtml	2006-06-07 15:55:00 UTC (rev 140)
+++ trunk/docs/protokoll/2006_06_07.xhtml	2006-06-07 16:12:43 UTC (rev 141)
@@ -0,0 +1,80 @@
+?<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
+	<head>
+		<title>Protokoll Sitzung 26.04.2006</title>
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
+		<meta http-equiv="content-language" content="de" />
+		<style type="text/css">@import "./protokoll.css";</style>
+	</head>
+	<body>
+		<h1>Literaturverwaltung</h1>
+		<h2>Sitzungsprotokoll 07.06.2006</h2>
+
+		<h3>Anwesende</h3>
+		<ul>
+			<li>Simon Wunderlich</li>
+			<li>Andreas Tr?ger</li>
+			<li>Frank Wilhelm</li>
+			<li>Florian Scharl</li>
+			<li>Sven Eckelmann</li>
+		</ul>
+
+		<h3>Tagesordnung</h3>
+		<ol>
+			<li><a href="#aufteilung">Verteilung der Aufgaben zum 3. Teilbeleg</a></li>
+			<li><a href="#nextsitz">N?chste Sitzung</a></li>
+			<li><a href="#nextpk">N?chste Pflichtkonsultation mit Betreuer</a></li>
+		</ol>
+
+		<div id="content">
+			<h3 id="aufteilung">Verteilung der Aufgaben zum 3. Teilbeleg</h3>
+
+			<ul>
+			<li>1. Programmdokumentation</li>
+			<ul>
+			<li>1.1 Definition der Interfaces in der Implementierungssprache -- Sven Eckelmann u. Frank 			Wilhelm</li>
+			<li>1.2 Kommentierte Quelltexte -- Sven Eckelmann u. Frank Wilhelm</li>
+			<li>1.3 Testplan -- Sven Eckelmann u. Frank Wilhelm</li>
+			<li>1.4 Systemtest -- Sven Eckelmann u. Frank Wilhelm</li>
+			<li>1.5 Abschlusseinsch?tzung -- Sven Eckelmann u. Frank Wilhelm</li>
+			</ul> 
+			
+			<li>2. Systemhandbuch</li>
+			<ul>
+			<li>2.1 Installationsanleitung -- Simon Wunderlich</li>
+			<li>2.2 Programm-Filesystem -- Andreas Tr?ger</li>
+			<li>2.3 Administrationsanleitung -- Andreas Tr?ger</li>
+			</ul>
+			<li>3. Anwenderdokumentation</li>
+			<ul>
+			<li>3.1 Produktzweck -- Florian Scharl</li>
+			<li>3.2 Basismaschine und Ressourcenanforderungen -- Florian Scharl</li>
+			<li>3.3 Nutzerklassen -- Florian Scharl</li>
+			<li>3.4 Bedienungsanleitung -- Florian Scharl</li>
+			<li>3.5 Helpsystem -- Florian Scharl</li>
+			</ul>
+			<li>4. ?bersicht ?ber die Arbeitsaufgaben alle Teammitglieder w?hrend der gesamten Projektbearbeitung
+			inkl. der Festlegungsprotokolle	-- Simon Wunderlich</li>
+
+			</ul>
+			
+			<p>Bemerkung: Die endg?ltige Festlegung erfolgt in der n?chsten Sitzung nachdem jeder den Umfang 				seines Aufgabengebietes bzw. seiner Aufgabengebiete erschlossen hat.</p>
+			
+
+			<h3 id="nextsitz">N?chste Sitzung</h3>
+			<ul>
+			<li>Die n?chste Sitzung findet am <b>14.06.2006 um 15:15 Uhr im Raum 1/204 </b> statt.</li>
+			</ul>
+
+			<h3 id="nextpk">N?chste Pflichtkonsultation mit Betreuer</h3>
+			<ul>
+			<li>Die n?chste Pflichtkonsultation mit Herrn Rentzsch findet am <b>13.06.2006 um 13:10 Uhr im Raum 			1/B317 </b> statt.</li>
+			</ul>
+
+			<p>Chemnitz, 07.06.2006</p>
+			<dl>
+				<dt>Protokolant</dt><dd>Florian Scharl</dd>
+			</dl>
+		</div>
+	</body>
+</html>



From lazhur at berlios.de  Wed Jun  7 18:56:20 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Wed, 7 Jun 2006 18:56:20 +0200
Subject: [Liman-svn] r142 - in trunk: docs/beleg2/doxygen docs/protokoll include
Message-ID: <200606071656.k57GuKiv031544@sheep.berlios.de>

Author: lazhur
Date: 2006-06-07 18:56:17 +0200 (Wed, 07 Jun 2006)
New Revision: 142

Modified:
   trunk/docs/beleg2/doxygen/classSQLDB.tex
   trunk/docs/protokoll/2006_05_10.xhtml
   trunk/docs/protokoll/2006_06_07.xhtml
   trunk/include/sqldb_mysql.php
Log:
XHTML-Korrekturen


Modified: trunk/docs/beleg2/doxygen/classSQLDB.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classSQLDB.tex	2006-06-07 16:12:43 UTC (rev 141)
+++ trunk/docs/beleg2/doxygen/classSQLDB.tex	2006-06-07 16:56:17 UTC (rev 142)
@@ -181,7 +181,7 @@
 \begin{Desc}
 \item[R\"{u}ckgabewerte:]
 \begin{description}
-\item[{\em bei}]Misserfolg \end{description}
+\item[{\em false}]bei Misserfolg \end{description}
 \end{Desc}
 \hypertarget{classSQLDB_15b181251b309ab55331be29fa33ac9f}{
 \index{SQLDB@{SQLDB}!GetNumRows@{GetNumRows}}

Modified: trunk/docs/protokoll/2006_05_10.xhtml
===================================================================
--- trunk/docs/protokoll/2006_05_10.xhtml	2006-06-07 16:12:43 UTC (rev 141)
+++ trunk/docs/protokoll/2006_05_10.xhtml	2006-06-07 16:56:17 UTC (rev 142)
@@ -1,4 +1,4 @@
-?<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
 	<head>
 		<title>Protokoll Sitzung 10.05.2006</title>
@@ -33,7 +33,7 @@
 			<h3 id="aufteilung">Beleg2 Klassenaufteilung</h3>
 			<ul>
 					<li>Eine Klassenaufteilung wurde festgelegt:<br/>
-					<img src="2006_05_10.png" /></li>
+					<img src="2006_05_10.png" alt="Klassenaufteilung" /></li>
 					<li>Generierung mit Doxygen soweit m&ouml;glich</li>
 			</ul>
 

Modified: trunk/docs/protokoll/2006_06_07.xhtml
===================================================================
--- trunk/docs/protokoll/2006_06_07.xhtml	2006-06-07 16:12:43 UTC (rev 141)
+++ trunk/docs/protokoll/2006_06_07.xhtml	2006-06-07 16:56:17 UTC (rev 142)
@@ -1,4 +1,4 @@
-?<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
 	<head>
 		<title>Protokoll Sitzung 26.04.2006</title>
@@ -29,34 +29,36 @@
 		<div id="content">
 			<h3 id="aufteilung">Verteilung der Aufgaben zum 3. Teilbeleg</h3>
 
-			<ul>
-			<li>1. Programmdokumentation</li>
-			<ul>
-			<li>1.1 Definition der Interfaces in der Implementierungssprache -- Sven Eckelmann u. Frank 			Wilhelm</li>
-			<li>1.2 Kommentierte Quelltexte -- Sven Eckelmann u. Frank Wilhelm</li>
-			<li>1.3 Testplan -- Sven Eckelmann u. Frank Wilhelm</li>
-			<li>1.4 Systemtest -- Sven Eckelmann u. Frank Wilhelm</li>
-			<li>1.5 Abschlusseinsch?tzung -- Sven Eckelmann u. Frank Wilhelm</li>
-			</ul> 
+			<ol>
+			<li>Programmdokumentation
+			<ol>
+			<li>Definition der Interfaces in der Implementierungssprache -- Sven Eckelmann u. Frank 			Wilhelm</li>
+			<li>Kommentierte Quelltexte -- Sven Eckelmann u. Frank Wilhelm</li>
+			<li>Testplan -- Sven Eckelmann u. Frank Wilhelm</li>
+			<li>Systemtest -- Sven Eckelmann u. Frank Wilhelm</li>
+			<li>Abschlusseinsch?tzung -- Sven Eckelmann u. Frank Wilhelm</li>
+			</ol></li>
 			
-			<li>2. Systemhandbuch</li>
-			<ul>
-			<li>2.1 Installationsanleitung -- Simon Wunderlich</li>
-			<li>2.2 Programm-Filesystem -- Andreas Tr?ger</li>
-			<li>2.3 Administrationsanleitung -- Andreas Tr?ger</li>
-			</ul>
-			<li>3. Anwenderdokumentation</li>
-			<ul>
-			<li>3.1 Produktzweck -- Florian Scharl</li>
-			<li>3.2 Basismaschine und Ressourcenanforderungen -- Florian Scharl</li>
-			<li>3.3 Nutzerklassen -- Florian Scharl</li>
-			<li>3.4 Bedienungsanleitung -- Florian Scharl</li>
-			<li>3.5 Helpsystem -- Florian Scharl</li>
-			</ul>
-			<li>4. ?bersicht ?ber die Arbeitsaufgaben alle Teammitglieder w?hrend der gesamten Projektbearbeitung
+			<li>Systemhandbuch
+			<ol>
+			<li>Installationsanleitung -- Simon Wunderlich</li>
+			<li>Programm-Filesystem -- Andreas Tr?ger</li>
+			<li>Administrationsanleitung -- Andreas Tr?ger</li>
+			</ol></li>
+
+			<li>Anwenderdokumentation
+			<ol>
+			<li>Produktzweck -- Florian Scharl</li>
+			<li>Basismaschine und Ressourcenanforderungen -- Florian Scharl</li>
+			<li>Nutzerklassen -- Florian Scharl</li>
+			<li>Bedienungsanleitung -- Florian Scharl</li>
+			<li>Helpsystem -- Florian Scharl</li>
+			</ol></li>
+
+			<li>?bersicht ?ber die Arbeitsaufgaben alle Teammitglieder w?hrend der gesamten Projektbearbeitung
 			inkl. der Festlegungsprotokolle	-- Simon Wunderlich</li>
 
-			</ul>
+			</ol>
 			
 			<p>Bemerkung: Die endg?ltige Festlegung erfolgt in der n?chsten Sitzung nachdem jeder den Umfang 				seines Aufgabengebietes bzw. seiner Aufgabengebiete erschlossen hat.</p>
 			

Modified: trunk/include/sqldb_mysql.php
===================================================================
--- trunk/include/sqldb_mysql.php	2006-06-07 16:12:43 UTC (rev 141)
+++ trunk/include/sqldb_mysql.php	2006-06-07 16:56:17 UTC (rev 142)
@@ -195,7 +195,7 @@
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \pre INSERT-Query muss gemacht worden sein
 		 *  \return ID des zuletzt hinzugef?gten Datensatzes
-		 *  \retval bei Misserfolg
+		 *  \retval false bei Misserfolg
 		 */
 		function GetInsertID()
 		{



From fwilhelm at berlios.de  Wed Jun  7 20:18:26 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Wed, 7 Jun 2006 20:18:26 +0200
Subject: [Liman-svn] r143 - trunk/include
Message-ID: <200606071818.k57IIQIv032417@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-07 20:18:25 +0200 (Wed, 07 Jun 2006)
New Revision: 143

Modified:
   trunk/include/sqldb_mock.php
Log:
Fehlerbehandlung ge?\195?\164ndert (nach 1 Fehler Abbruch)

Modified: trunk/include/sqldb_mock.php
===================================================================
--- trunk/include/sqldb_mock.php	2006-06-07 16:56:17 UTC (rev 142)
+++ trunk/include/sqldb_mock.php	2006-06-07 18:18:25 UTC (rev 143)
@@ -1,7 +1,9 @@
 <?php
+	require_once("include/tests/framework.php");
+	
 	class SQLDB_Mock
 	{
-		var $query_result = false; ///< Identifikation der letzten Datenbankabfrage
+		var $query_result = false;
 		var $fetch_index = 0;
 		var $isOpen = false;
 		
@@ -98,7 +100,7 @@
 			}
 		}
 		
-		var $error_msgs = array();
+		var $error = false;
 		var $patterns = array();
 		var $results = array();
 		var $queryCounter = 0;
@@ -118,7 +120,7 @@
 		 */
 		function ExpectQuery( $pattern, $result )
 		{
-			if( !is_int($result) && !is_array($result) )
+			if( !is_int($result) && !is_array($result) && ($result !== false) )
 			{
 				$buff = $result;
 				$result = array();
@@ -131,42 +133,34 @@
 		
 		function Verify()
 		{
-			if( $this->queryCounter != count($this->results) )
+			$ret = $this->error;
+			if( $ret === false )
 			{
-				$this->error_msgs[] = "Nicht alle Queries wurden ausgef?hrt - erwartet: ".count($this->results)." tats?chlich: ".$this->queryCounter;
+				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
 			}
 			
-			$ret = $this->error_msgs;
-			
 			// reset
-			$this->error_msgs = array();
+			$this->error_msg = false;
 			$this->patterns = array();
 			$this->results = array();
 			$this->queryCounter = 0;
 			
-			if( count($ret) == 0)
-			{
-				return true;
-			}
-			else
-			{
-				return $ret;
-			}
+			return $ret;
 		}
 		
 		function Query($query)
 		{
-			if( $this->isOpen )
+			if( $this->isOpen && ($this->error_msg === false) )
 			{
 				if( count($this->patterns) <= $this->queryCounter )
 				{
 					$this->queryCounter++;
-					$this->error_msgs[] = "Unerwartete Anzahl an Queries - erwartet ".count($this->patterns)." tats?chlich: ".$this->queryCounter;
+					this->error = new ErrorMessage( null, null, "Anzahl an Queries", count($this->patterns), $this->queryCounter );
 					return false;
 				}
 				else if( !preg_match($this->patterns[$this->queryCounter],$query) )
 				{
-					$this->error_msgs[] = "Unerwartete Query - erwartet: ".$this->patterns[$this->queryCounter]." tats?chlich: ".$query;
+					this->error = new ErrorMessage( null, null, "Unerwartete Query", $this->patterns[$this->queryCounter], $query );
 					return false;
 				}
 				



From fwilhelm at berlios.de  Wed Jun  7 20:19:28 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Wed, 7 Jun 2006 20:19:28 +0200
Subject: [Liman-svn] r144 - trunk/docs/protokoll
Message-ID: <200606071819.k57IJSJL032699@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-07 20:19:16 +0200 (Wed, 07 Jun 2006)
New Revision: 144

Added:
   trunk/docs/protokoll/2006_05_03.xhtml
Log:
Protokoll f?\195?\188r Sitzung 03.05.2006 nachgereicht

Added: trunk/docs/protokoll/2006_05_03.xhtml
===================================================================
--- trunk/docs/protokoll/2006_05_03.xhtml	2006-06-07 18:18:25 UTC (rev 143)
+++ trunk/docs/protokoll/2006_05_03.xhtml	2006-06-07 18:19:16 UTC (rev 144)
@@ -0,0 +1,53 @@
+?<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
+	<head>
+		<title>Protokoll Sitzung 03.05.2006</title>
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
+		<meta http-equiv="content-language" content="de" />
+		<style type="text/css">@import "./protokoll.css";</style>
+	</head>
+	<body>
+		<h1>Literaturverwaltung</h1>
+		<h2>Sitzungsprotokoll 03.05.2006</h2>
+
+		<h3>Anwesende</h3>
+		<ul>
+			<li>Andreas Tr?ger</li>
+			<li>Frank Wilhelm</li>
+			<li>Florian Scharl</li>
+			<li>Sven Eckelmann</li>
+		</ul>
+
+		<h3>Tagesordnung</h3>
+		<ol>
+			<li><a href="#Korrekturen">Korrekturen zum 1. Teilbeleg</a></li>
+		</ol>
+
+		<div id="content">
+			<h3 id="Korrekturen">Korrekturen zum 1. Teilbeleg</h3>
+			<ul>
+				<li>Autoren Entit?t mit Relation zu Literatur hinzugef?gt (ERD und Datenkatalog)</li>
+				<li>Arten an Literatur im Datenkatalog definiert:
+					<ul>
+						<li>Buch</li>
+						<li>Artikel</li>
+						<li>Brosch?re</li>
+						<li>Protokoll</li>
+						<li>Anleitung</li>
+						<li>Diplomarbeit</li>
+						<li>Dissertation</li>
+						<li>Techn. Bericht</li>
+						<li>Unver?ffentlicht</li>
+						<li>Sonstiges</li>
+					</ul></li>
+				<li>Suche auf Titel und Autoren</li>
+				<li>?berarbeitung des Abschnitts 3.3 (Flexibilit?t)</li>
+			</ul>
+
+			<p>Chemnitz, 03.05.2006</p>
+			<dl>
+				<dt>Protokolant</dt><dd>Frank Wilhelm</dd>
+			</dl>
+		</div>
+	</body>
+</html>



From fwilhelm at berlios.de  Wed Jun  7 20:25:45 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Wed, 7 Jun 2006 20:25:45 +0200
Subject: [Liman-svn] r145 - in trunk/include: . tests
Message-ID: <200606071825.k57IPjbg001887@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-07 20:25:41 +0200 (Wed, 07 Jun 2006)
New Revision: 145

Added:
   trunk/include/tests/
   trunk/include/tests/errormessage.php
   trunk/include/tests/suche.php
Log:
ErrorMessage f?\195?\188r UnitTests,
UnitTest f?\195?\188r Suche

Added: trunk/include/tests/errormessage.php
===================================================================
--- trunk/include/tests/errormessage.php	2006-06-07 18:19:16 UTC (rev 144)
+++ trunk/include/tests/errormessage.php	2006-06-07 18:25:41 UTC (rev 145)
@@ -0,0 +1,40 @@
+<?php
+	class ErrorMessage
+	{
+		var $Unit = false;
+		var $Test = false;
+		var $Message;
+		var $Expected;
+		var $Actual;
+		
+		function ErrorMessage( $unit, $test, $message, $expected, $actual )
+		{
+			if( $unit != null )
+				$this->Unit = $unit;
+			if( $test != null )
+				$this->Test = $test;
+			$this->Message = $message;
+			$this->Expected = $expected;
+			$this->Actual = $actual; 
+		}
+		
+		function ToString()
+		{
+			$testcase = "";
+			if( $this->Test !== false )
+			{
+				if( $this->Unit !== false )
+				{
+					$testcase = " von ".$this->Unit.".".$this->Test;
+				}
+				else
+				{
+					$testcase = " von ".$this->Test;
+				}
+			}
+			
+			return "Test".$testcase." Fehlgeschlagen. Grund: ".$this->Message.
+			       " - Erwartet: <".$this->Expected."> Ist: <".$this->Actual.">";
+		}
+	}
+?>

Added: trunk/include/tests/suche.php
===================================================================
--- trunk/include/tests/suche.php	2006-06-07 18:19:16 UTC (rev 144)
+++ trunk/include/tests/suche.php	2006-06-07 18:25:41 UTC (rev 145)
@@ -0,0 +1,146 @@
+<?php
+	require_once("include/tests/errormessage.php");
+	
+	
+	class SucheTest
+	{
+		var $suche;
+		
+		function Setup()
+		{
+			$suche = new Suche();
+		}
+		
+		function TearDown()
+		{
+			global $sqldb;
+			
+			$sqldb->Verify();
+		}
+		
+		function LetzteLiteratur()
+		{
+			global $sqldb;
+			
+			$testHits = array();
+			$testHits[] = 1;
+			$testHits[] = 2;
+			$sqldb->ExpectQuery( '.*SELECT Literatur_Nr.*Bibliothek.*LIMIT.*', $testHits );
+			
+			// keine Autoren, Autor::GetAll soll in Autor Unit getestet werden
+			for( $i = 0; $i < count($testHits); $i++ )
+			{
+				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
+			}
+			
+			$this->suche->LetzteLiteratur();
+			
+			$result = $sqldb->Verify();
+			
+			if( $result !== true )
+			{
+				$result->Unit = "Suche";
+				$result->Test = "LetzteLiteratur";
+				return $result;
+			}
+			
+			if( count($testHits) != count($this->suche->Treffer) )
+				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($testHits), count($this->suche->Treffer) );
+			
+			for( $i = 0; $i < count($testHits); $i++ )
+			{
+				if( $testHits[$i] != $this->suche->Treffer[$i] )
+				{
+					return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", $testHits[$i], $this->suche->Treffer[$i] );
+				}
+			}
+			
+			return true;
+		}
+		
+		function VolltextSuche()
+		{
+			global $sqldb;
+			
+			$volltext = 'Pr?dikat';
+			
+			$testHits = array();
+			$testHits[] = 1;
+			$testHits[] = 2;
+			
+			$sqldb->ExpectQuery( '.*SELECT.*Bibliothek.*WHERE.*MATCH.*AGAINST.*', $testHits );
+			
+			for( $i = 0; $i < count($testHits); $i++ )
+			{
+				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
+			}
+			
+			$suche->VolltextSuche( $volltext );
+			
+			$result = $sqldb->Verify();
+			
+			if( $result !== true )
+			{
+				$result->Unit = "Suche";
+				$result->Test = "LetzteLiteratur";
+				return $result;
+			}
+			
+			if( count($testHits) != count($this->suche->Treffer) )
+				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($testHits), count($this->suche->Treffer) );
+			
+			for( $i = 0; $i < count($testHits); $i++ )
+			{
+				if( $testHits[$i] != $this->suche->Treffer[$i] )
+				{
+					return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", $testHits[$i], $this->suche->Treffer[$i] );
+				}
+			}
+			
+			return true;
+		}
+		
+		function AutorTitelSuche()
+		{
+			global $sqldb;
+			
+			$titel = 'Ein Titel';
+			$autor = 'Niemand';
+			
+			$testHits = array();
+			$testHits[] = 1;
+			$testHits[] = 2;
+			
+			$sqldb->ExpectQuery( '.*SELECT.*Bibliothek.*WHERE.*LIKE.*', $testHits );
+			
+			for( $i = 0; $i < count($testHits); $i++ )
+			{
+				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
+			}
+				
+			$suche->AutorTitelSuche( $titel, $autor );
+			
+			$result = $sqldb->Verify();
+			
+			if( $result !== true )
+			{
+				$result->Unit = "Suche";
+				$result->Test = "LetzteLiteratur";
+				return $result;
+			}
+			
+			if( count($testHits) != count($this->suche->Treffer) )
+				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($testHits), count($this->suche->Treffer) );
+			
+			for( $i = 0; $i < count($testHits); $i++ )
+			{
+				if( $testHits[$i] != $this->suche->Treffer[$i] )
+				{
+					return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", $testHits[$i], $this->suche->Treffer[$i] );
+				}
+			}
+			
+			return true;
+		}
+	}
+?>



From fwilhelm at berlios.de  Wed Jun  7 20:28:16 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Wed, 7 Jun 2006 20:28:16 +0200
Subject: [Liman-svn] r146 - in trunk/include: . tests
Message-ID: <200606071828.k57ISGfN003109@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-07 20:28:06 +0200 (Wed, 07 Jun 2006)
New Revision: 146

Added:
   trunk/include/tests/sqldb_mock.php
Removed:
   trunk/include/sqldb_mock.php
Log:
sqldb_mock.php in UnitTest Verzeichnis (tests) verschoben

Deleted: trunk/include/sqldb_mock.php
===================================================================
--- trunk/include/sqldb_mock.php	2006-06-07 18:25:41 UTC (rev 145)
+++ trunk/include/sqldb_mock.php	2006-06-07 18:28:06 UTC (rev 146)
@@ -1,177 +0,0 @@
-<?php
-	require_once("include/tests/framework.php");
-	
-	class SQLDB_Mock
-	{
-		var $query_result = false;
-		var $fetch_index = 0;
-		var $isOpen = false;
-		
-		function SQLDB_Mock()
-		{
-			$this->isOpen = true;
-		}
-		
-		function Close()
-		{
-			$this->isOpen = false;
-		}
-		
-		function DataSeek($row_number)
-		{
-			if( $this->isOpen && is_array($this->query_result) && ($row_number < count($this->query_result)) )
-			{
-				return $this->query_result[$this->fetch_index];
-			}
-			else
-			{
-				return false;
-			}
-		}
-		
-		function Fetch()
-		{
-			if( $this->isOpen && is_array($this->query_result) && ( $this->fetch_index < count($this->query_result) ) )
-			{
-				return $this->query_result[$this->fetch_index++];
-			}
-			else
-			{
-				return false;
-			}
-		}
-		
-		function FreeResult()
-		{
-			if ($this->query_result !== false)
-			{
-				$this->query_result = false;
-				$this->fetch_index = 0;
-			}
-			
-			return true;
-		}
-		
-		function GetAffectedRows()
-		{
-			if ($this->isOpen)
-			{
-				if($this->query_result === false )
-				{
-					return 0;
-				}
-				
-				if( is_int( $this->query_result ) )
-				{
-					return $this->query_result;
-				}
-				
-				if( is_array($this->query_result) )
-				{
-					return count($this->query_result);
-				}
-				
-				return false;
-			}
-			else
-			{
-				return false;
-			}
-		}
-		
-		function GetError()
-		{
-			$error = array();
-
-			// was k?nnte hier rein?
-
-			return $error;
-		}
-		
-		function GetNumRows()
-		{
-			if ($this->db_id !== false && is_array($this->query_result) )
-			{
-				return count($this->query_result);
-			}
-			else
-			{
-				return false;
-			}
-		}
-		
-		var $error = false;
-		var $patterns = array();
-		var $results = array();
-		var $queryCounter = 0;
-		
-		/*! \brief 
-		 *
-		 *  TODO
-		 *  \pre -
-		 *  \param[in] $pattern Regul?rer Ausdruck mit dem die Query verglichen wird
-		 *  \param[in] $result Ergebnis der Abfrage
-		 *  \remarks
-		 *  Der Regul?re Ausdruck dient nur der Identifikation der Query, nicht der zur Verifikation.
-		 *  Die Query muss seperat auf ihre Funktion getestet werden.
-		 * 
-		 *  Wird als Ergebnis ein Integer angegeben, wird das als Zahl der betroffenen Zeilen interpretiert.
-		 *  Wird als Ergebnis ein Array angegeben, so wird es als mehrzeiliges Ergebnis gewertet.
-		 */
-		function ExpectQuery( $pattern, $result )
-		{
-			if( !is_int($result) && !is_array($result) && ($result !== false) )
-			{
-				$buff = $result;
-				$result = array();
-				$result[] = $buff;
-			}
-			
-			$this->patterns[] = $pattern;
-			$this->results[] = $result;
-		}
-		
-		function Verify()
-		{
-			$ret = $this->error;
-			if( $ret === false )
-			{
-				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
-			}
-			
-			// reset
-			$this->error_msg = false;
-			$this->patterns = array();
-			$this->results = array();
-			$this->queryCounter = 0;
-			
-			return $ret;
-		}
-		
-		function Query($query)
-		{
-			if( $this->isOpen && ($this->error_msg === false) )
-			{
-				if( count($this->patterns) <= $this->queryCounter )
-				{
-					$this->queryCounter++;
-					this->error = new ErrorMessage( null, null, "Anzahl an Queries", count($this->patterns), $this->queryCounter );
-					return false;
-				}
-				else if( !preg_match($this->patterns[$this->queryCounter],$query) )
-				{
-					this->error = new ErrorMessage( null, null, "Unerwartete Query", $this->patterns[$this->queryCounter], $query );
-					return false;
-				}
-				
-				$this->FreeResult();
-				$this->query_result = $this->results[$this->queryCounter++];
-				return true;
-			}
-			else
-			{
-				return false;
-			}
-		}
-	}
-?>

Copied: trunk/include/tests/sqldb_mock.php (from rev 143, trunk/include/sqldb_mock.php)
===================================================================
--- trunk/include/sqldb_mock.php	2006-06-07 18:18:25 UTC (rev 143)
+++ trunk/include/tests/sqldb_mock.php	2006-06-07 18:28:06 UTC (rev 146)
@@ -0,0 +1,177 @@
+?<?php
+	require_once("include/tests/errormessage.php");
+	
+	class SQLDB_Mock
+	{
+		var $query_result = false;
+		var $fetch_index = 0;
+		var $isOpen = false;
+		
+		function SQLDB_Mock()
+		{
+			$this->isOpen = true;
+		}
+		
+		function Close()
+		{
+			$this->isOpen = false;
+		}
+		
+		function DataSeek($row_number)
+		{
+			if( $this->isOpen && is_array($this->query_result) && ($row_number < count($this->query_result)) )
+			{
+				return $this->query_result[$this->fetch_index];
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		function Fetch()
+		{
+			if( $this->isOpen && is_array($this->query_result) && ( $this->fetch_index < count($this->query_result) ) )
+			{
+				return $this->query_result[$this->fetch_index++];
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		function FreeResult()
+		{
+			if ($this->query_result !== false)
+			{
+				$this->query_result = false;
+				$this->fetch_index = 0;
+			}
+			
+			return true;
+		}
+		
+		function GetAffectedRows()
+		{
+			if ($this->isOpen)
+			{
+				if($this->query_result === false )
+				{
+					return 0;
+				}
+				
+				if( is_int( $this->query_result ) )
+				{
+					return $this->query_result;
+				}
+				
+				if( is_array($this->query_result) )
+				{
+					return count($this->query_result);
+				}
+				
+				return false;
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		function GetError()
+		{
+			$error = array();
+
+			// was k?nnte hier rein?
+
+			return $error;
+		}
+		
+		function GetNumRows()
+		{
+			if ($this->db_id !== false && is_array($this->query_result) )
+			{
+				return count($this->query_result);
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		var $error = false;
+		var $patterns = array();
+		var $results = array();
+		var $queryCounter = 0;
+		
+		/*! \brief 
+		 *
+		 *  TODO
+		 *  \pre -
+		 *  \param[in] $pattern Regul?rer Ausdruck mit dem die Query verglichen wird
+		 *  \param[in] $result Ergebnis der Abfrage
+		 *  \remarks
+		 *  Der Regul?re Ausdruck dient nur der Identifikation der Query, nicht der zur Verifikation.
+		 *  Die Query muss seperat auf ihre Funktion getestet werden.
+		 * 
+		 *  Wird als Ergebnis ein Integer angegeben, wird das als Zahl der betroffenen Zeilen interpretiert.
+		 *  Wird als Ergebnis ein Array angegeben, so wird es als mehrzeiliges Ergebnis gewertet.
+		 */
+		function ExpectQuery( $pattern, $result )
+		{
+			if( !is_int($result) && !is_array($result) && ($result !== false) )
+			{
+				$buff = $result;
+				$result = array();
+				$result[] = $buff;
+			}
+			
+			$this->patterns[] = $pattern;
+			$this->results[] = $result;
+		}
+		
+		function Verify()
+		{
+			$ret = $this->error;
+			if( $ret === false )
+			{
+				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
+			}
+			
+			// reset
+			$this->error_msg = false;
+			$this->patterns = array();
+			$this->results = array();
+			$this->queryCounter = 0;
+			
+			return $ret;
+		}
+		
+		function Query($query)
+		{
+			if( $this->isOpen && ($this->error_msg === false) )
+			{
+				if( count($this->patterns) <= $this->queryCounter )
+				{
+					$this->queryCounter++;
+					this->error = new ErrorMessage( null, null, "Anzahl an Queries", count($this->patterns), $this->queryCounter );
+					return false;
+				}
+				else if( !preg_match($this->patterns[$this->queryCounter],$query) )
+				{
+					this->error = new ErrorMessage( null, null, "Unerwartete Query", $this->patterns[$this->queryCounter], $query );
+					return false;
+				}
+				
+				$this->FreeResult();
+				$this->query_result = $this->results[$this->queryCounter++];
+				return true;
+			}
+			else
+			{
+				return false;
+			}
+		}
+	}
+?>



From fwilhelm at berlios.de  Thu Jun  8 10:51:21 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Thu, 8 Jun 2006 10:51:21 +0200
Subject: [Liman-svn] r147 - trunk/include/tests
Message-ID: <200606080851.k588pLrl027177@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-08 10:51:20 +0200 (Thu, 08 Jun 2006)
New Revision: 147

Added:
   trunk/include/tests/autor.php
Modified:
   trunk/include/tests/suche.php
Log:
Query Ergebnisse bei Suche korregiert (von int zu object mit Nr),
UnitTest f?\195?\188r Autor

Added: trunk/include/tests/autor.php
===================================================================
--- trunk/include/tests/autor.php	2006-06-07 18:28:06 UTC (rev 146)
+++ trunk/include/tests/autor.php	2006-06-08 08:51:20 UTC (rev 147)
@@ -0,0 +1,104 @@
+<?php
+	require_once("include/tests/errormessage.php");
+	
+	class AutorTest
+	{
+		function Setup()
+		{
+		}
+		
+		function TearDown()
+		{
+			global $sqldb;
+			
+			$sqldb->Verify();
+		}
+		
+		function ConstructorTest()
+		{
+			$data = new stdClass();
+			$data->Name = "Nur ein Mensch";
+			$data->Nr = 127;
+			
+			$autor = new Autor( $data );
+			
+			if( $data->Nr != $autor->Nr )
+				return new ErrorMessage( "Autor", "ctor", "Nummer", $data->Nr, $autor->Nr );
+				
+			if( $data->Name != $autor->Name )
+				return new ErrorMessage( "Autor", "ctor", "Nummer", $data->Name, $autor->Name );
+				
+			return true;
+		}
+		
+		function GetAll()
+		{
+			global $sqldb;
+			
+			$testAutoren = array();
+			for( $i = 0; $i < 3; $i++ )
+			{
+				$autor = new stdObject();
+				$autor->Nr = $i;
+				$autor->Name = "Autor $i";
+				$testAutoren[] = $autor;
+			}
+			
+			$sqldb->ExpectQuery( '', $testAutoren );
+			
+			$resultAutoren = Autor::GetAll( 123 );
+			
+			$result = $sqldb->Verify();
+			
+			if( $result !== true )
+			{
+				$result->Unit = "Autor";
+				$result->Test = "GetAll";
+				return $result;
+			}
+			
+			for( $i = 0; $i < 3; $i++ )
+			{
+				if( $testAutoren[$i]->Nr != $resultAutoren[$i]->Nr )
+					return new ErrorMessage( "Autor", "GetAll", "Nummer von Autor $i falsch", $testAutoren[$i]->Nr, $resultAutoren[$i]->Nr );
+				
+				if( $testAutoren[$i]->Name != $resultAutoren[$i]->Name )
+					return new ErrorMessage( "Autor", "GetAll", "Name von Autor $i falsch", $testAutoren[$i]->Name, $resultAutoren[$i]->Name );
+			}
+			
+			return true;
+		}
+		
+		function Split()
+		{
+			global $sqldb;
+			
+			$testAutorNamen = "Schon Vorhanden, Wird Hinzugef?gt";
+			
+			$testAutoren = array();
+			$testAutoren[] = new stdObject();
+			$testAutoren[] = new stdObject();
+			
+			$testAutoren[0]->Nr = 1;
+			$testAutoren[1]->Nr = 2;
+			 
+			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', $testAutoren[0] );
+			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', false  );
+			$sqldb->ExpectQuery( 'INSERT INTO.*', 1 );
+			$sqldb->ExpectQuery( 'SELECT @@IDENTITY.*', $testAutoren[1] );
+			
+			$autoren = Autor::Split( $testAutorNamen );
+			
+			if( count($autoren) != count($testAutoren) )
+				return new ErrorMessage( 'Autor', 'Split', 'Anzahl Autoren', count($testAutoren), count($autoren) );
+				
+			for( $i = 0; $i < count($autoren); $i++ )
+			{
+				if( $autoren[$i]->Nr != $testAutoren[$i]->Nr )
+					return new ErrorMessage( 'Autor', 'Split', "Autor[$i]->Nr", $testAutoren[$i]->Nr, $autoren[$i]->Nr );
+			}
+			
+			return true;
+		}
+	}
+?>

Modified: trunk/include/tests/suche.php
===================================================================
--- trunk/include/tests/suche.php	2006-06-07 18:28:06 UTC (rev 146)
+++ trunk/include/tests/suche.php	2006-06-08 08:51:20 UTC (rev 147)
@@ -5,10 +5,36 @@
 	class SucheTest
 	{
 		var $suche;
+		var $testHits;
 		
+		function CreateResult( $nr, $titel, $verlag, $isbn )
+		{
+			$result = new stdObject();
+			$result->Nr = $nr;
+			$result->Titel = $titel;
+			$result->Verlag = $verlag;
+			$result->ISBN = $isbn;
+			return $result;
+		}
+		
+		function CompareResults( $realHits )
+		{
+			if( count($realHits) != count($this->testHits) )
+				return new ErrorMessage( 'Suche', null, 'Anzahl Treffer', count($this->testHits), count($realHits) );
+			
+			for( $i = 0; $i < count($this->testHits); $i++ )
+			{
+				
+			}
+		}
+		
 		function Setup()
 		{
 			$suche = new Suche();
+			
+			$this->testHits = array();
+			$this->testHits[] = CreateResult( 1, 'Nachtvogel', 'Blanvalet', '3-442-24258-4' );
+			$this->testHits[] = CreateResult( 2, 'D?monensommer', 'Blanvalet', '3-422-24257-6' );
 		}
 		
 		function TearDown()
@@ -22,13 +48,10 @@
 		{
 			global $sqldb;
 			
-			$testHits = array();
-			$testHits[] = 1;
-			$testHits[] = 2;
-			$sqldb->ExpectQuery( '.*SELECT Literatur_Nr.*Bibliothek.*LIMIT.*', $testHits );
+			$sqldb->ExpectQuery( '.*SELECT Literatur_Nr.*Bibliothek.*LIMIT.*', $this->testHits );
 			
 			// keine Autoren, Autor::GetAll soll in Autor Unit getestet werden
-			for( $i = 0; $i < count($testHits); $i++ )
+			for( $i = 0; $i < count($this->testHits); $i++ )
 			{
 				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
 			}
@@ -44,17 +67,9 @@
 				return $result;
 			}
 			
-			if( count($testHits) != count($this->suche->Treffer) )
-				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($testHits), count($this->suche->Treffer) );
+			if( count($this->testHits) != count($this->suche->Treffer) )
+				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($this->testHits), count($this->suche->Treffer) );
 			
-			for( $i = 0; $i < count($testHits); $i++ )
-			{
-				if( $testHits[$i] != $this->suche->Treffer[$i] )
-				{
-					return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", $testHits[$i], $this->suche->Treffer[$i] );
-				}
-			}
-			
 			return true;
 		}
 		
@@ -64,13 +79,9 @@
 			
 			$volltext = 'Pr?dikat';
 			
-			$testHits = array();
-			$testHits[] = 1;
-			$testHits[] = 2;
+			$sqldb->ExpectQuery( '.*SELECT.*Bibliothek.*WHERE.*MATCH.*AGAINST.*', $this->testHits );
 			
-			$sqldb->ExpectQuery( '.*SELECT.*Bibliothek.*WHERE.*MATCH.*AGAINST.*', $testHits );
-			
-			for( $i = 0; $i < count($testHits); $i++ )
+			for( $i = 0; $i < count($this->testHits); $i++ )
 			{
 				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
 			}
@@ -86,16 +97,9 @@
 				return $result;
 			}
 			
-			if( count($testHits) != count($this->suche->Treffer) )
-				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($testHits), count($this->suche->Treffer) );
+			if( count($this->testHits) != count($this->suche->Treffer) )
+				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($this->testHits), count($this->suche->Treffer) );
 			
-			for( $i = 0; $i < count($testHits); $i++ )
-			{
-				if( $testHits[$i] != $this->suche->Treffer[$i] )
-				{
-					return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", $testHits[$i], $this->suche->Treffer[$i] );
-				}
-			}
 			
 			return true;
 		}
@@ -107,13 +111,9 @@
 			$titel = 'Ein Titel';
 			$autor = 'Niemand';
 			
-			$testHits = array();
-			$testHits[] = 1;
-			$testHits[] = 2;
+			$sqldb->ExpectQuery( '.*SELECT.*Bibliothek.*WHERE.*LIKE.*', $this->testHits );
 			
-			$sqldb->ExpectQuery( '.*SELECT.*Bibliothek.*WHERE.*LIKE.*', $testHits );
-			
-			for( $i = 0; $i < count($testHits); $i++ )
+			for( $i = 0; $i < count($this->testHits); $i++ )
 			{
 				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
 			}
@@ -129,17 +129,9 @@
 				return $result;
 			}
 			
-			if( count($testHits) != count($this->suche->Treffer) )
-				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($testHits), count($this->suche->Treffer) );
+			if( count($this->testHits) != count($this->suche->Treffer) )
+				return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", count($this->testHits), count($this->suche->Treffer) );
 			
-			for( $i = 0; $i < count($testHits); $i++ )
-			{
-				if( $testHits[$i] != $this->suche->Treffer[$i] )
-				{
-					return new ErrorMessage( "Suche", "LetzteLiteratur", "Zahl der Treffer", $testHits[$i], $this->suche->Treffer[$i] );
-				}
-			}
-			
 			return true;
 		}
 	}



From lazhur at berlios.de  Thu Jun  8 15:08:30 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Thu, 8 Jun 2006 15:08:30 +0200
Subject: [Liman-svn] r148 - trunk/include
Message-ID: <200606081308.k58D8UK2021367@sheep.berlios.de>

Author: lazhur
Date: 2006-06-08 15:08:26 +0200 (Thu, 08 Jun 2006)
New Revision: 148

Modified:
   trunk/include/autor.php
Log:
- BerliOS-Workaround (Teil zwei)


Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-06-08 08:51:20 UTC (rev 147)
+++ trunk/include/autor.php	2006-06-08 13:08:26 UTC (rev 148)
@@ -52,9 +52,34 @@
 						LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
 						ON autoren.Autor_Nr = connect.Autor_Nr
 						WHERE connect.Autor_Nr is NULL";
-				$sqldb->Query($sql);
-				print_r($sqldb->GetError());
-				print_r($sql);
+
+				if ($sqldb->Query($sql) === false)
+				{
+					// Workaround f?r MySQL < 4
+					$sql = "SELECT autoren.Autor_Nr AS Nr
+							FROM ".$db_config['prefix']."Autoren AS autoren
+							LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
+							ON autoren.Autor_Nr = connect.Autor_Nr
+							WHERE connect.Autor_Nr is NULL";
+					$sqldb->Query($sql);
+					
+					if (($numrows = $sqldb->GetNumRows()) >= 1)
+					{
+						$sqlDelete = "DELETE FROM ".$db_config['prefix']."Autoren
+								WHERE ";
+						for ($i = 1; $i <= $numrows; $i++)
+						{
+							$line = $sqldb->Fetch();
+							$sqlDelete .= "Autor_Nr = '".$line->Nr."' ";
+
+							if ($i < $numrows)
+							{
+								$sqlDelete .= " OR ";
+							}
+						}
+						$sqldb->Query($sqlDelete);
+					}
+				}
 			}
 		}
 



From lazhur at berlios.de  Fri Jun  9 10:41:19 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Fri, 9 Jun 2006 10:41:19 +0200
Subject: [Liman-svn] r149 - in trunk: . include
Message-ID: <200606090841.k598fJNm003947@sheep.berlios.de>

Author: lazhur
Date: 2006-06-09 10:41:16 +0200 (Fri, 09 Jun 2006)
New Revision: 149

Added:
   trunk/commentmod.php
Modified:
   trunk/include/form_helper.php
   trunk/include/kommentar.php
   trunk/lit.php
Log:
- Kommentarverwaltung angelegt
- Berlios-Workaround in Kommentare::Insert (Teil drei)


Added: trunk/commentmod.php
===================================================================
--- trunk/commentmod.php	2006-06-08 13:08:26 UTC (rev 148)
+++ trunk/commentmod.php	2006-06-09 08:41:16 UTC (rev 149)
@@ -0,0 +1,85 @@
+<?php
+	if (isset($_GET["delete"]) === true)
+	{
+		$title = "Kommentar l?schen";
+	}
+	elseif (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+	{
+		$title = "Kommentar ?ndern";
+	}
+	else
+	{
+		$title = "Kommentar hinzuf?gen";
+	}
+	//$extracss = "home.css";
+
+	require_once("include/header.php");
+
+	if ($login->IsMember() === false)
+	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
+		require_once("include/footer.php");
+		die();
+	}
+	elseif ($login->IsAdministrator() === false)
+	{
+		$_GET["userid"] = $login->Nr;
+		$_POST["userid"] = $login->Nr;
+	}
+?>
+<div id="cfront" class="content">
+<?php
+	require_once("include/kommentar.php");
+	require_once("include/form_helper.php");
+	if (isset($_GET["delete"]) === true)
+	{
+		if (isset($_POST["accept"]) === true)
+		{
+			Kommentar::Delete($_POST["id"]);
+			echo "<p style=\"text-align: center\">Kommentar wurde entfernt</p>";
+
+			if (empty($_POST["litid"]) === false)
+			{
+				echo form_back("lit.$ext", $_POST["litid"]);
+			}
+		}
+		else
+		{
+			require_once("include/form_helper.php");
+			echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+			echo "Wollen sie den Kommentar wirklich entfernen?";
+			echo "<form action=\"commentmod.".$ext."?delete\" id=\"commentupdateform\" method=\"post\">";
+			echo form_input("hidden", "id", $_GET["id"]);
+			echo form_input("hidden", "accept", "true");
+			if (empty($_GET["litid"]) === false)
+			{
+				echo form_input("hidden", "litid", $_GET["litid"]);
+			}
+
+			echo "<input type=\"submit\" value=\"Best?tigen\">";
+			echo "</form></div>";
+		}
+	}
+	elseif  (isset($_GET["insert"]) === true)
+	{
+		Kommentar::Insert($_POST["text"], $_POST["userid"], $_POST["litid"]);
+		echo "<p style=\"text-align: center\">Kommentar wurde angelegt</p>";
+
+		if (empty($_POST["litid"]) === false)
+		{
+			echo form_back("lit.$ext", $_POST["litid"]);
+		}
+	}
+	elseif (isset($_GET["update"]) === true)
+	{
+		Kommentar::Update($_POST["id"], $_POST["text"]);
+		echo "<p style=\"text-align: center\">Kommentar wurde ge?ndert</p>";
+
+		if (empty($_POST["litid"]) === false)
+		{
+			echo form_back("lit.$ext", $_POST["litid"]);
+		}
+	}
+?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Modified: trunk/include/form_helper.php
===================================================================
--- trunk/include/form_helper.php	2006-06-08 13:08:26 UTC (rev 148)
+++ trunk/include/form_helper.php	2006-06-09 08:41:16 UTC (rev 149)
@@ -5,6 +5,7 @@
 	 *  \param[in] $name ID und Name des Inputfeldes
 	 *  \param[in] $value Inhalt des Feldes
 	 *  \param[in] $failure ob Feld als fehlerhaft markiert werden soll
+	 *  \return String mit HTML-Form-Input
 	 */
 	function form_input($type, $name, $value = "", $failure = false)
 	{
@@ -31,6 +32,7 @@
 	 *  \param[in] $name ID und Name der Auswahlfeldes
 	 *  \param[in] $value aktuell ausgew?hltes Element der Auswahl
 	 *  \param[in] $failure ob Auswahl als fehlerhaft markiert werden soll
+	 *  \return String mit HTML-Form-Select
 	 */
 	function form_select($options, $name, $value="", $failure = false)
 	{
@@ -54,4 +56,28 @@
 
 		return $str;
 	}
+
+	/*! \brief Gibt Formular mit Zur?ckknopf zur?ck
+	 *
+	 *  Erzeugt ein einfaches GET-Formular, dass nur aus einem Zur?ckbutton
+	 *  besteht, der entweder auf eine Seite oder einer Seite mit ID
+	 *  verweist. Die ID wird dabei einfach per verstecktem Feld
+	 *  mit dem Namen id ?bergeben.
+	 *  \param[in] $url Seite auf die der Knopf zeigt
+	 *  \param[in] $id ID f?r aufzurufende Seite
+	 *  \return String mit Zur?ck-Button im HTML-Form
+	 */
+	function form_back($url, $id="")
+	{
+		$str = "<form action=\"".htmlspecialchars($url)."\" method=\"get\"><span>";
+
+		if (func_num_args() == 2)
+		{
+			$str .= form_input("hidden", "id", $id);
+		}
+		
+		$str .= "<input type=\"submit\" value=\"Zur?ck\"></span></form>";
+
+		return $str;
+	}
 ?>
\ No newline at end of file

Modified: trunk/include/kommentar.php
===================================================================
--- trunk/include/kommentar.php	2006-06-08 13:08:26 UTC (rev 148)
+++ trunk/include/kommentar.php	2006-06-09 08:41:16 UTC (rev 149)
@@ -137,7 +137,8 @@
 					FROM ".$db_config['prefix']."Kommentare AS kommentare
 					INNER JOIN  ".$db_config['prefix']."Mitglieder AS mitglieder
 					ON kommentare.Mitglieds_Nr = mitglieder.Mitglieds_Nr
-					WHERE Literatur_Nr = '$literatur_nr'";
+					WHERE Literatur_Nr = '$literatur_nr'
+					ORDER BY Nr ASC";
 			$sqldb->Query($sql);
 
 			while ($cur = $sqldb->Fetch())
@@ -184,7 +185,8 @@
 							WHERE Literatur_Nr='$literatur_nr' AND Mitglieds_Nr='$verfasser_nr'";
 					$sqldb->Query($sqlAlready);
 
-					if (($cur = $sqldb->Fetch()) === false)
+					$cur = $sqldb->Fetch();
+					if ($cur === false)
 					{
 						if (empty($text) === false)
 						{

Modified: trunk/lit.php
===================================================================
--- trunk/lit.php	2006-06-08 13:08:26 UTC (rev 148)
+++ trunk/lit.php	2006-06-09 08:41:16 UTC (rev 149)
@@ -87,13 +87,16 @@
 	<table id="litkommentare">
 		<tbody>
 			<?php
-				$nocomment = false; // hat der user schon etwas kommentiert?
+				require_once("include/form_helper.php");
+				$owncomment = ""; // hat der user schon etwas kommentiert?
 				for ($i = 0; $i < count($literatur->Kommentare); $i++)
 				{
 					$cur = $literatur->Kommentare[$i];
 					if ($login->Nr == $cur->Verfasser_Nr)
 					{
-						$nocomment = true;
+						$owncomment->Text = $cur->Text;
+						$owncomment->Nr = $cur->Nr;
+						
 					}
 			?>
 				<tr>
@@ -103,30 +106,75 @@
 						// Darf der User l?schen?
 						if ($login->Nr == $cur->Verfasser_Nr || $login->IsAdministrator() === true)
 						{
-							echo "<span style=\"font-size: xx-small\"><a href=\"loeschen.php?id=".$cur->Nr."\">(loeschen)</a></span>";
+							echo "<span style=\"font-size: xx-small\">";
+							echo "<a href=\"commentmod.php?delete&amp;id=".$cur->Nr."&amp;litid=".htmlspecialchars($_GET["id"])."\">(l?schen)</a></span>";
 						}
 					?></td>
 				</tr>
-			<?
-				}
-
-				// Soll Kommentar-Hinzuf?gen-Box erscheinen?
-				if ($login->IsMember() === true && 
-					($login->IsAdministrator() === true || $nocomment === false))
-				{
-			?>
-				<tr>
-					<th scope="row">Neuer Kommentar:</th>	
-					<td>
-					<textarea cols=40 rows=10></textarea><br>
-					<input type="submit" value="Kommentar senden"></td>
-					<td>&nbsp;</td>
-				</tr>
 			<?php
 				}
 			?>
-
 		</tbody>
 	</table>
+
+	<?php
+		if ($login->IsMember() === true)
+		{
+			require_once("include/form_helper.php");
+			// Soll Kommentar-Hinzuf?gen-Box erscheinen oder Update-Box?
+			if (empty($owncomment) === true)
+			{
+		?>
+			<form action="commentmod.<?=$ext;?>?insert=" method="post">
+			<span>
+				<?=form_input("hidden", "litid", $_GET["id"]);?>
+				<?=form_input("hidden", "userid", $login->Nr);?>
+			</span>
+			<table id="litkommentaradd">
+				<tbody>
+					<tr>
+						<th scope="row">Neuer Kommentar:</th>	
+						<td>
+							<textarea id="text" name="text" cols=40 rows=10></textarea>
+						</td>
+					</tr>
+					<tr>
+						<th scope="row"></th>
+						<td><input type="submit" value="Kommentar senden"></td>
+						
+					</tr>
+				</tbody>
+			</table>
+			</form>
+		<?php
+			}
+			else
+			{
+		?>
+			<form action="commentmod.<?=$ext;?>?update" method="post">
+			<span>
+				<?=form_input("hidden", "litid", $_GET["id"]);?>
+				<?=form_input("hidden", "id", $owncomment->Nr);?>
+			</span>
+			<table id="litkommentarmod">
+				<tbody>
+					<tr>
+						<th scope="row"><label for="text">Kommentar ?ndern:</label></th>	
+						<td>
+							<textarea id="text" name="text" cols=40 rows=10><?=htmlspecialchars($owncomment->Text);?></textarea>
+						</td>
+					</tr>
+					<tr>
+						<th scope="row"></th>
+						<td><input type="submit" value="Kommentar senden"></td>
+						
+					</tr>
+				</tbody>
+			</table>
+			</form>
+		<?php
+			}
+		}
+	?>
 </div>
 <?php	require_once("include/footer.php"); ?>



From lazhur at berlios.de  Fri Jun  9 17:24:18 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Fri, 9 Jun 2006 17:24:18 +0200
Subject: [Liman-svn] r150 - in trunk: . design include/tests
Message-ID: <200606091524.k59FOIae025571@sheep.berlios.de>

Author: lazhur
Date: 2006-06-09 17:24:16 +0200 (Fri, 09 Jun 2006)
New Revision: 150

Added:
   trunk/design/unittest.css
   trunk/test.php
Modified:
   trunk/include/tests/autor.php
   trunk/include/tests/sqldb_mock.php
   trunk/include/tests/suche.php
Log:
- Tabelle f?\195?\188r die ersten Resultate des Unittests


Added: trunk/design/unittest.css
===================================================================
--- trunk/design/unittest.css	2006-06-09 08:41:16 UTC (rev 149)
+++ trunk/design/unittest.css	2006-06-09 15:24:16 UTC (rev 150)
@@ -0,0 +1,20 @@
+#testresults {
+	width: 99%;
+	border: 1px solid black;
+	border-collapse: collapse;
+}
+
+#testresults td {
+	width: 49%;
+	border: 1px solid black;
+	text-align: center;
+}
+
+.uniterror {
+	color: red;
+}
+
+.unitcorrect {
+	color: green;
+	font-weight: bold;
+}
\ No newline at end of file

Modified: trunk/include/tests/autor.php
===================================================================
--- trunk/include/tests/autor.php	2006-06-09 08:41:16 UTC (rev 149)
+++ trunk/include/tests/autor.php	2006-06-09 15:24:16 UTC (rev 150)
@@ -38,7 +38,7 @@
 			$testAutoren = array();
 			for( $i = 0; $i < 3; $i++ )
 			{
-				$autor = new stdObject();
+				$autor = new stdClass();
 				$autor->Nr = $i;
 				$autor->Name = "Autor $i";
 				$testAutoren[] = $autor;
@@ -76,8 +76,8 @@
 			$testAutorNamen = "Schon Vorhanden, Wird Hinzugef?gt";
 			
 			$testAutoren = array();
-			$testAutoren[] = new stdObject();
-			$testAutoren[] = new stdObject();
+			$testAutoren[] = new stdClass();
+			$testAutoren[] = new stdClass();
 			
 			$testAutoren[0]->Nr = 1;
 			$testAutoren[1]->Nr = 2;
@@ -85,7 +85,7 @@
 			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', $testAutoren[0] );
 			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', false  );
 			$sqldb->ExpectQuery( 'INSERT INTO.*', 1 );
-			$sqldb->ExpectQuery( 'SELECT @@IDENTITY.*', $testAutoren[1] );
+			$sqldb->ExpectQuery( 'SELECT @@IDENTITY.*', $testAutoren[1] ); /// \todo Das funktioniert weg MySQL3 nicht -> GetInsertID
 			
 			$autoren = Autor::Split( $testAutorNamen );
 			

Modified: trunk/include/tests/sqldb_mock.php
===================================================================
--- trunk/include/tests/sqldb_mock.php	2006-06-09 08:41:16 UTC (rev 149)
+++ trunk/include/tests/sqldb_mock.php	2006-06-09 15:24:16 UTC (rev 150)
@@ -1,4 +1,4 @@
-?<?php
+<?php
 	require_once("include/tests/errormessage.php");
 	
 	class SQLDB_Mock
@@ -6,6 +6,7 @@
 		var $query_result = false;
 		var $fetch_index = 0;
 		var $isOpen = false;
+		var $error_msg = false;
 		
 		function SQLDB_Mock()
 		{
@@ -87,6 +88,18 @@
 
 			return $error;
 		}
+
+		function GetInsertID()
+		{
+			if ($this->isOpen)
+			{
+				return rand();
+			}
+			else
+			{
+				return false;
+			}
+		}
 		
 		function GetNumRows()
 		{
@@ -126,7 +139,6 @@
 				$result = array();
 				$result[] = $buff;
 			}
-			
 			$this->patterns[] = $pattern;
 			$this->results[] = $result;
 		}
@@ -134,6 +146,7 @@
 		function Verify()
 		{
 			$ret = $this->error;
+			/// \todo: Wieso darf man nicht auch mal ohne Fehlermeldung auskommen? :(
 			if( $ret === false )
 			{
 				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
@@ -155,12 +168,12 @@
 				if( count($this->patterns) <= $this->queryCounter )
 				{
 					$this->queryCounter++;
-					this->error = new ErrorMessage( null, null, "Anzahl an Queries", count($this->patterns), $this->queryCounter );
+					$this->error = new ErrorMessage( null, null, "Anzahl an Queries", count($this->patterns), $this->queryCounter );
 					return false;
 				}
-				else if( !preg_match($this->patterns[$this->queryCounter],$query) )
+				elseif( preg_match("/".$this->patterns[$this->queryCounter]."/",$query) === false)
 				{
-					this->error = new ErrorMessage( null, null, "Unerwartete Query", $this->patterns[$this->queryCounter], $query );
+					$this->error = new ErrorMessage( null, null, "Unerwartete Query", $this->patterns[$this->queryCounter], $query );
 					return false;
 				}
 				

Modified: trunk/include/tests/suche.php
===================================================================
--- trunk/include/tests/suche.php	2006-06-09 08:41:16 UTC (rev 149)
+++ trunk/include/tests/suche.php	2006-06-09 15:24:16 UTC (rev 150)
@@ -9,7 +9,7 @@
 		
 		function CreateResult( $nr, $titel, $verlag, $isbn )
 		{
-			$result = new stdObject();
+			$result = new stdClass();
 			$result->Nr = $nr;
 			$result->Titel = $titel;
 			$result->Verlag = $verlag;
@@ -30,11 +30,9 @@
 		
 		function Setup()
 		{
-			$suche = new Suche();
-			
 			$this->testHits = array();
-			$this->testHits[] = CreateResult( 1, 'Nachtvogel', 'Blanvalet', '3-442-24258-4' );
-			$this->testHits[] = CreateResult( 2, 'D?monensommer', 'Blanvalet', '3-422-24257-6' );
+			$this->testHits[] = SucheTest::CreateResult( 1, 'Nachtvogel', 'Blanvalet', '3-442-24258-4' );
+			$this->testHits[] = SucheTest::CreateResult( 2, 'D?monensommer', 'Blanvalet', '3-422-24257-6' );
 		}
 		
 		function TearDown()
@@ -56,7 +54,7 @@
 				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
 			}
 			
-			$this->suche->LetzteLiteratur();
+			$this->suche = new Suche();
 			
 			$result = $sqldb->Verify();
 			
@@ -86,7 +84,7 @@
 				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
 			}
 			
-			$suche->VolltextSuche( $volltext );
+			$this->suche = new Suche($volltext);
 			
 			$result = $sqldb->Verify();
 			
@@ -118,7 +116,7 @@
 				$sqldb->ExpectQuery( '.*SELECT.*Autor_Nr.*Autorname.*Literatur_Autor.*', false );
 			}
 				
-			$suche->AutorTitelSuche( $titel, $autor );
+			$this->suche = new Suche($titel, $autor);
 			
 			$result = $sqldb->Verify();
 			

Added: trunk/test.php
===================================================================
--- trunk/test.php	2006-06-09 08:41:16 UTC (rev 149)
+++ trunk/test.php	2006-06-09 15:24:16 UTC (rev 150)
@@ -0,0 +1,88 @@
+<?php
+	$title = "Unittest";
+	$extracss = "unittest.css";
+
+	require_once("include/header.php");
+
+	require_once("include/tests/sqldb_mock.php");
+	$sqldb = new SQLDB_Mock();
+
+	function PrintTestResults($results)
+	{
+		if ($results === true)
+		{
+			echo "<td class=\"unitcorrect\">OK</td>";
+		}
+		else
+		{
+			echo "<td class=\"uniterror\">";
+			echo nl2br(htmlspecialchars($results->ToString()));
+			echo "</td>";
+		}
+	}
+?>
+<div id="cfront" class="content">
+	
+	<table id="testresults">
+		<thead>
+			<tr>
+				<th scope="col">Funktion</th>
+				<th scope="col">Resultat</th>
+			</tr>
+		</thead>
+		<tbody>
+			<?php
+				$login->Level = 2;
+
+				// Autor
+				require_once("include/autor.php");
+				require_once("include/tests/autor.php");
+				$autortest = new AutorTest();
+
+				echo "<tr><td>Autor::Autor()</td>";
+				$autortest->Setup();
+				PrintTestResults($autortest->ConstructorTest());
+				$autortest->TearDown();
+				echo "</tr>";
+
+				echo "<tr><td>Autor::GetAll()</td>";
+				$autortest->Setup();
+				PrintTestResults($autortest->GetAll());
+				$autortest->TearDown();
+				echo "</tr>";
+
+				echo "<tr><td>Autor::Split()</td>";
+				$autortest->Setup();
+				PrintTestResults($autortest->Split());
+				$autortest->TearDown();
+				echo "</tr>";
+
+
+				// Suche
+				require_once("include/suche.php");
+				require_once("include/tests/suche.php");
+				$searchtest = new SucheTest();
+
+				echo "<tr><td>Suche::LetzteLiteratur()</td>";
+				$searchtest->Setup();
+				PrintTestResults($searchtest->LetzteLiteratur());
+				$searchtest->TearDown();
+				echo "</tr>";
+
+				echo "<tr><td>Suche::VolltextSuche()</td>";
+				$searchtest->Setup();
+				PrintTestResults($searchtest->VolltextSuche());
+				$searchtest->TearDown();
+				echo "</tr>";
+
+				echo "<tr><td>Suche::AutorTitelSuche()</td>";
+				$searchtest->Setup();
+				PrintTestResults($searchtest->AutorTitelSuche());
+				$searchtest->TearDown();
+				echo "</tr>";
+				
+			?>
+		</tbody>
+	</table>
+</div>
+<?php	require_once("include/footer.php"); ?>



From lazhur at berlios.de  Fri Jun  9 18:00:29 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Fri, 9 Jun 2006 18:00:29 +0200
Subject: [Liman-svn] r151 - trunk
Message-ID: <200606091600.k59G0TiC028822@sheep.berlios.de>

Author: lazhur
Date: 2006-06-09 18:00:19 +0200 (Fri, 09 Jun 2006)
New Revision: 151

Modified:
   trunk/commentmod.php
   trunk/litmod.php
   trunk/usermod.php
Log:
- Test auf Vorhandensein der Parameter in Kommentar-, Nutzer- und Bibliotheksverwaltung


Modified: trunk/commentmod.php
===================================================================
--- trunk/commentmod.php	2006-06-09 15:24:16 UTC (rev 150)
+++ trunk/commentmod.php	2006-06-09 16:00:19 UTC (rev 151)
@@ -35,8 +35,15 @@
 	{
 		if (isset($_POST["accept"]) === true)
 		{
-			Kommentar::Delete($_POST["id"]);
-			echo "<p style=\"text-align: center\">Kommentar wurde entfernt</p>";
+			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+			{
+				echo "<p id=\"error\">Kommentar konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
+			}
+			else
+			{
+				Kommentar::Delete($_POST["id"]);
+				echo "<p style=\"text-align: center\">Kommentar wurde entfernt</p>";
+			}
 
 			if (empty($_POST["litid"]) === false)
 			{
@@ -62,8 +69,17 @@
 	}
 	elseif  (isset($_GET["insert"]) === true)
 	{
-		Kommentar::Insert($_POST["text"], $_POST["userid"], $_POST["litid"]);
-		echo "<p style=\"text-align: center\">Kommentar wurde angelegt</p>";
+		if (isset($_POST["text"]) === false ||
+			empty($_POST["userid"]) === true || is_numeric($_POST["userid"]) === false ||
+			empty($_POST["litid"]) === true || is_numeric($_POST["litid"]) === false)
+		{
+			echo "<p id=\"error\">Kommentar konnte nicht angelegt werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
+		}
+		else
+		{
+			Kommentar::Insert($_POST["text"], $_POST["userid"], $_POST["litid"]);
+			echo "<p style=\"text-align: center\">Kommentar wurde angelegt</p>";
+		}
 
 		if (empty($_POST["litid"]) === false)
 		{
@@ -72,8 +88,16 @@
 	}
 	elseif (isset($_GET["update"]) === true)
 	{
-		Kommentar::Update($_POST["id"], $_POST["text"]);
-		echo "<p style=\"text-align: center\">Kommentar wurde ge?ndert</p>";
+		if (isset($_POST["text"]) === false ||
+			empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+		{
+			echo "<p id=\"error\">Kommentar konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
+		}
+		else
+		{
+			Kommentar::Update($_POST["id"], $_POST["text"]);
+			echo "<p style=\"text-align: center\">Kommentar wurde ge?ndert</p>";
+		}
 
 		if (empty($_POST["litid"]) === false)
 		{

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-09 15:24:16 UTC (rev 150)
+++ trunk/litmod.php	2006-06-09 16:00:19 UTC (rev 151)
@@ -280,8 +280,15 @@
 		{
 			if (isset($_POST["accept"]) === true)
 			{
-				Literatur::Delete($_POST["id"]);
-				echo "<p style=\"text-align: center\">Literatur wurde entfernt</p>";
+				if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+				{
+					echo "<p id=\"error\">Literatur konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
+				}
+				else
+				{
+					Literatur::Delete($_POST["id"]);
+					echo "<p style=\"text-align: center\">Literatur wurde entfernt</p>";
+				}
 			}
 			else
 			{
@@ -355,14 +362,33 @@
 
 			if (isset($_POST["accept"]) === true || empty($search->Treffer) === true)
 			{
-				Literatur::Insert($_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
-				echo "<p style=\"text-align: center\">Literatur wurde hinzugef?gt</p>";
+				if (isset($_POST["art"]) === false || isset($_POST["verlag"]) === false ||
+					isset($_POST["isbn"]) === false || isset($_POST["beschreibung"]) === false ||
+					isset($_POST["ort"]) === false || isset($_POST["stichworte"]) === false)
+				{
+					echo "<p id=\"error\">Literatur konnte nicht angelegt werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
+				}
+				else
+				{
+					Literatur::Insert($_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+					echo "<p style=\"text-align: center\">Literatur wurde hinzugef?gt</p>";
+				}
 			}
 		}
 		elseif (isset($_GET["update"]) === true)
 		{
-			Literatur::Update($_POST["id"], $_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
-			echo "<p style=\"text-align: center\">Literatur wurde ge?ndert</p>";
+			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false ||
+				isset($_POST["art"]) === false || isset($_POST["verlag"]) === false ||
+				isset($_POST["isbn"]) === false || isset($_POST["beschreibung"]) === false ||
+				isset($_POST["ort"]) === false || isset($_POST["stichworte"]) === false)
+			{
+					echo "<p id=\"error\">Literatur konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
+			}
+			else
+			{
+				Literatur::Update($_POST["id"], $_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+				echo "<p style=\"text-align: center\">Literatur wurde ge?ndert</p>";
+			}
 		}
 	}
 ?>

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-09 15:24:16 UTC (rev 150)
+++ trunk/usermod.php	2006-06-09 16:00:19 UTC (rev 151)
@@ -280,8 +280,15 @@
 		{
 			if (isset($_POST["accept"]) === true)
 			{
-				Mitglied::Delete($_POST["id"]);
-				echo "<p style=\"text-align: center\">Nutzer wurde entfernt</p>";
+				if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+				{
+					echo "<p id=\"error\">Nutzer konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen des Nutzers gab</p>";
+				}
+				else
+				{
+					Mitglied::Delete($_POST["id"]);
+					echo "<p style=\"text-align: center\">Nutzer wurde entfernt</p>";
+				}
 			}
 			else
 			{
@@ -309,8 +316,12 @@
 		}
 		elseif (isset($_GET["update"]) === true)
 		{
-			if (Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
+			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
 			{
+				echo "<p id=\"error\">Nutzer konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen des Nutzers gab</p>";
+			}
+			elseif (Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
+			{
 				echo "<p style=\"text-align: center\">Nutzer wurde ge?ndert</p>";
 			}
 			else



From lazhur at berlios.de  Fri Jun  9 20:52:53 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Fri, 9 Jun 2006 20:52:53 +0200
Subject: [Liman-svn] r152 - in trunk: . design include
Message-ID: <200606091852.k59IqrM4010046@sheep.berlios.de>

Author: lazhur
Date: 2006-06-09 20:52:19 +0200 (Fri, 09 Jun 2006)
New Revision: 152

Added:
   trunk/bibtex.php
Removed:
   trunk/include/bibtex.php
Modified:
   trunk/design/liman.css
   trunk/include/literatur.php
   trunk/index.php
   trunk/search.php
   trunk/searchmore.php
Log:
- BibTeX-Importer aus BibTeX-Klasse eingebaut
- alte BibTeX-Klasse entfernt
- flexibel skalierende Suchfelder in erweiterter Suche


Added: trunk/bibtex.php
===================================================================
--- trunk/bibtex.php	2006-06-09 16:00:19 UTC (rev 151)
+++ trunk/bibtex.php	2006-06-09 18:52:19 UTC (rev 152)
@@ -0,0 +1,96 @@
+<?php
+	$title = "BibTeX Importieren";
+	//$extracss = "home.css";
+
+	require_once("include/header.php");
+
+	if ($login->IsMember() === false)
+	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
+		require_once("include/footer.php");
+		die();
+	}
+?>
+<div id="cfront" class="content">
+<?php
+	if (empty($_FILES["bibtexfile"]) === true && empty($_POST["bibtextext"]) === true)
+	{
+	?>
+	<form action="bibtex.<?=$ext;?>" id="bibtexfileform" method="post" enctype="multipart/form-data">
+	<fieldset>
+   		 <legend><b>BibTeX-Datei importieren</b></legend>
+	
+	
+		<table class="bibteximport">
+			<tbody>
+				<tr>
+					<th scope=row><label for="bibtextext">Datei:</label></th>
+					<td><input class="input_file" type="file" id="bibtexfile" name="bibtexfile"></td>
+				</tr>
+				<tr>
+					<th></th>
+					<td><input type="submit" value="Importieren"></td>
+				</tr>
+			</tbody>
+		</table>
+	</fieldset>
+	</form>
+
+	<hr>
+	
+	<form action="bibtex.<?=$ext;?>" id="bibtextextform" method="post">
+	<fieldset>
+   		<legend><b>BibTeX importieren</b></legend>
+		<table class="bibteximport">
+			<tbody>
+				<tr>
+					<th scope=row><label for="bibtextext">BibTeX:</label></th>
+					<td><textarea cols="20" rows="10" name="bibtextext" id="bibtextext"></textarea></td>
+				</tr>
+				<tr>
+					<th></th>
+					<td><input type="submit" value="Importieren"></td>
+				</tr>
+			</tbody>
+		</table>
+	</fieldset>
+	</form>
+	<?php
+	}
+	else
+	{
+		$bibtex = "";
+		if (empty($_FILES["bibtexfile"]) === false)
+		{
+			$bibtex = file_get_contents($_FILES["bibtexfile"]["tmp_name"]);
+		}
+		elseif (empty($_POST["bibtextext"]) === false)
+		{
+			$bibtex = stripslashes($_POST["bibtextext"]);
+		}
+
+		if ($bibtex === false || empty($bibtex) === true)
+		{
+			echo "<div id=\"error\">Konnte nichts zum importieren lesen</div>";
+		}
+		else
+		{
+			require_once("include/literatur.php");
+			$imported = Literatur::InsertBibTeX($bibtex);
+
+			switch ($imported)
+			{
+			case 0:
+				echo "<p style=\"text-align: center\">Keine Literatur wurde importiert</p>";
+				break;
+			case 1:
+				echo "<p style=\"text-align: center\">Ein Literatureintrag wurde importiert</p>";
+				break;
+			default:
+				echo "<p style=\"text-align: center\">$imported Literatureintr?ge wurden importiert</p>";
+			}
+		}
+	}
+	?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-06-09 16:00:19 UTC (rev 151)
+++ trunk/design/liman.css	2006-06-09 18:52:19 UTC (rev 152)
@@ -92,6 +92,7 @@
 }
 
 #content .input_text,
+#content .input_file,
 #content .input_password,
 #content form textarea {
 	width: 99%;

Deleted: trunk/include/bibtex.php
===================================================================
--- trunk/include/bibtex.php	2006-06-09 16:00:19 UTC (rev 151)
+++ trunk/include/bibtex.php	2006-06-09 18:52:19 UTC (rev 152)
@@ -1,218 +0,0 @@
-<?php
-	/*! \brief Gib $string bis zum ersten Auftreten von $needle aus
-	 *
-	 *  TODO
-	 *  \pre TODO
-	 *  \param[in] $string zu lesende String
-	 *  \param[in] $needle zu findende String
-	 *  \param[in] $offset Offset des als erstes zu bearbeidende Buchstabens
-	 *  \return Array aus Position des Fundes und Teilstring bis (aber nicht einschlie?lich) gefundenem $needle
-	 *  \remarks Gibt boolean false zur?ck, wenn needle nicht gefunden werden kann
-	 */
-	function strtill($string, $needle , $offset = 0)
-	{
-		if (($pos = strpos($string, $needle, $offset)) !== false)
-		{
-			return array($pos, substr($string, $offset, $pos-$offset));
-		}
-		else
-		{
-			return false;
-		}
-	}
-
-	/*! \brief BibTeX Parser und Exporter
-	 *
-	 *  TODO
-	 *  \pre TODO
-	 *  \note Das sollte mit Buch verschmolzen werden
-	 */
-	class BibTeX
-	{
-		var $type; ///< Typ der Literatur
-		var $id; ///< Buchidentifikationsnummer
-		var $title; ///< Titel der Literatur
-		var $author; ///< Autoren der Literatur
-		var $year; ///< Erscheinungsjahr
-		var $publisher; ///< Verlag/Herausgeber
-		var $isbn; ///< ISBN der Literatur
-		var $annote; ///< Bemerkung zur Literatur
-		
-		
-		/*! \brief Konstruktor
-		 * 
-		 *  Erstellt eine leere Literaturangabe
-		 *  \pre TODO
-		 */
-		function BibTeX()
-		{
-			$type = "book";
-			$id = "";
-			$title = "";
-			$author = "";
-			$year = "";
-			$publisher = "";
-			$isbn = "";
-			$annote = "";
-		}
-
-		/*! \brief Parser f?r BibTeX
-		 *
-		 *  TODO
-		 *  \pre TODO
-		 *  \param[in] $string Zu "parsende" String
-		 *  \return Array von BibTeX
-		 *  \remarks $string wird nicht exakt auf Fehler untersucht und gegebenenfalls versuchen zu ignorieren
-		 *  \remarks Gibt boolean false zur?ck, wenn nichts gefunden werden kann
-		 */
-		function parse($string)
-		{
-			$allowed_entries = array('book', 'article', 'booklet',
-					'conference', 'inbook', 'incollection', 'inproceedings', 'manual',
-					'mastersthesis', 'misc', 'phdthesis', 'proceedings', 'techreport',
-					'unpublished');
-			$allowed_fields = array('author', 'title', 'publisher', 'year', 'ISBN');
-
-			// Funktioniert nicht bei Argumenten ?ber mehrere Zeilen
-			if (preg_match_all('/@[\w]+[\s]*\{[\s]*[-\d\w]+([\s]*,[\s]*[\w]*[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*)+\}/', $string, $regexp_entries) !== false)
-			{
-				$num_entries = sizeof($regexp_entries[0]);
-			}
-			else
-			{
-				$num_entries = 0;
-			}
-
-			$entries = false;
-			$curpos = 0;
-			
-			for ($i = 0; $i < $num_entries; $i++)
-			{
-				$cur = new BibTeX;
-				$curpos = 1; // ohne @ lesen
-				// Lese Typ vom Eintrag
-				if (($substr = strtill($regexp_entries[0][$i], '{', $curpos)) !== false)
-				{
-					$cur->type = strtolower(trim($substr[1]));
-					$curpos = $substr[0]+1;
-				}
-				else
-				{
-					break; // Fehler beim Lesen -> Abbruch
-				}
-
-				
-				// Haben wir ?berhaupt den Anfang eines Eintrags gefunden?
-				if (in_array($cur->type, $allowed_entries) === false)
-				{
-					continue;
-				}
-				
-
-				// Lese K?rzel
-				if (($substr = strtill($regexp_entries[0][$i], ',', $curpos)) !== false)
-				{
-					$cur->id = trim($substr[1]);
-					$curpos = $substr[0]+1;
-				}
-				else
-				{
-					continue; // Fehler beim Lesen -> Abbruch
-				}
-
-				// Extrahiere "Optionen"
-				if (preg_match_all('/([\w]*[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*(,|\}))+/', $regexp_entries[0][$i], $regexp_options) !== false)
-				{
-					$num_options = sizeof($regexp_options[0]);
-					for ($j = 0; $j < $num_options; $j++)
-					{
-						// Name der "Option" auslesen
-						$option = strtill($regexp_options[0][$j], "=");
-						
-						// Name des Arguments der "Option" auslesen und bereinigen
-						$argument = substr($regexp_options[0][$j], $option[0]+1, strlen($regexp_options[0][$j])-$option[0]-2);
-						$argument = trim($argument);
-
-						if ($argument[0] == "{" && $argument[strlen($argument)-1] == "}")
-						{
-							$argument = substr($argument, 1, strlen($argument)-2);
-						}
-						if ($argument[0] == "\"" && $argument[strlen($argument)-1] == "\"")
-						{
-							$argument = substr($argument, 1, strlen($argument)-2);
-						}
-
-						switch (strtolower(trim($option[1])))
-						{
-						case "title":
-							$cur->title = $argument;
-							break;
-						case "author":
-							$cur->author = $argument;
-							break;
-						case "year":
-							$cur->year = $argument;
-							break;
-						case "publisher":
-							$cur->publisher = $argument;
-							break;
-						case "isbn":
-							$cur->isbn = $argument;
-							break;
-						case "annote":
-							$cur->annote = $argument;
-							break;
-						}
-					}
-				}
-				else
-				{
-					continue;
-				}
-				
-				// Erzeuge array, wenn noch nicht geschehen
-				if ($entries === false)
-				{
-					$entries = array();
-				}
-				$entries[] = $cur;
-			}
-
-			return $entries;
-		}
-
-		/*! \brief Konvertiert BibTeX-Eintrag in String
-		 *
-		 *  TODO
-		 *  \pre TODO
-		 *  \return String mit BibTeX-Informationen
-		 *  \remarks Gibt boolean false zur?ck, wenn zu wenig Informationen vorhanden sind
-		 */
-		function toString()
-		{
-			if (!empty($this->type) && !empty($this->id))
-			{
-				$str = "@".$this->type."{".$this->id;
-				
-				if (!empty($this->title))
-					$str .= ",\n\ttitle = \"".$this->title."\"";
-				if (!empty($this->author))
-					$str .= ",\n\tauthor = \"".$this->author."\"";
-				if (!empty($this->year))
-					$str .= ",\n\tyear = \"".$this->year."\"";
-				if (!empty($this->publisher))
-					$str .= ",\n\tpublisher = \"".$this->publisher."\"";
-				if (!empty($this->isbn))
-					$str .= ",\n\tisbn = \"".$this->isbn."\"";
-				if (!empty($this->annote))
-					$str .= ",\n\tannote = \"".$this->$annote."\"";
-				
-				$str .= "\n}\n";
-				return $str;
-			}
-			else
-				return false;
-			
-		}
-	}
-?>

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-06-09 16:00:19 UTC (rev 151)
+++ trunk/include/literatur.php	2006-06-09 18:52:19 UTC (rev 152)
@@ -177,8 +177,127 @@
 		 */
 		function InsertBibTeX($bibtex)
 		{
-			/// \todo implementieren
-			return 0;
+			$allowed_entries = array('book', 'article', 'booklet',
+					'conference', 'inbook', 'incollection', 'inproceedings', 'manual',
+					'mastersthesis', 'misc', 'phdthesis', 'proceedings', 'techreport',
+					'unpublished');
+
+			// Funktioniert nicht bei Argumenten ?ber mehrere Zeilen
+			if (preg_match_all('/@([\w]+[\s]*)\{[\s]*([-\d\w]+)(([\s]*,[\s]*[\w]*[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*)+)\}/', $bibtex, $regexp_entries) !== false)
+			{
+				$num_entries = sizeof($regexp_entries[0]);
+			}
+			else
+			{
+				$num_entries = 0;
+			}
+
+			$entries = false;
+			
+			for ($i = 0; $i < $num_entries; $i++)
+			{
+				$cur = new stdClass;
+				$cur->autoren = "";
+				$cur->art = new LiteraturArt("book");
+				$cur->titel = "";
+				$cur->jahr = date("Y");
+				$cur->verlag = "";
+				$cur->isbn = "";
+				$cur->beschreibung = "";
+				$cur->ort = "";
+
+				// Lese Typ vom Eintrag
+				$type = trim($regexp_entries[1][$i]);
+				
+				// Haben wir ?berhaupt den Anfang eines Eintrags gefunden?
+				if (in_array($type, $allowed_entries) === false)
+				{
+					continue;
+				}
+				else
+				{
+					$cur->art = new LiteraturArt($type);
+				}
+				
+
+				// Lese K?rzel
+				$cur->id = trim($regexp_entries[2][$i]);
+
+				// Extrahiere "Optionen"
+				if (preg_match_all('/(([\w]*)[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*(,|\}))+/', $regexp_entries[3][$i], $regexp_options) !== false)
+				{
+					$num_options = sizeof($regexp_options[0]);
+					for ($j = 0; $j < $num_options; $j++)
+					{
+						// Name des Arguments der "Option" auslesen und bereinigen
+						$argument = trim($regexp_options[3][$j]);
+
+						if ($argument[0] == "{" && $argument[strlen($argument)-1] == "}")
+						{
+							$argument = substr($argument, 1, strlen($argument)-2);
+						}
+						if ($argument[0] == "\"" && $argument[strlen($argument)-1] == "\"")
+						{
+							$argument = substr($argument, 1, strlen($argument)-2);
+						}
+
+						switch (strtolower(trim($regexp_options[2][$j])))
+						{
+						case "title":
+							$cur->titel = $argument;
+							break;
+						case "author":
+							$cur->autoren = preg_replace("/ AND /i", ", ", $argument);
+							break;
+						case "year":
+							$cur->jahr = $argument;
+							break;
+						case "publisher":
+							$cur->verlag = $argument;
+							break;
+						case "isbn":
+							$cur->isbn = $argument;
+							break;
+						case "address":
+							$cur->ort = $argument;
+							break;
+						case "note":
+						case "annote":
+							$cur->beschreibung = $argument;
+							break;
+						}
+					}
+				}
+				else
+				{
+					continue;
+				}
+				
+				// Erzeuge array, wenn noch nicht geschehen
+				if ($entries === false)
+				{
+					$entries = array();
+				}
+				$entries[] = $cur;
+			}
+
+
+			$imported = 0;
+			if ($entries !== false && empty($entries) === false)
+			{
+				foreach ($entries as $entry)
+				{
+					if (empty($entry->titel) === false && empty($entry->autoren) === false)
+					{
+						$imported++;
+						Literatur::Insert($entry->autoren, $entry->art->GetDisplayText(),
+							$entry->titel, $entry->jahr, $entry->verlag, $entry->isbn,
+							$entry->beschreibung, $entry->ort, "");
+					}
+				}
+			}
+
+			return $imported;
 		}
 
 		/*! \brief Legt Literatur an

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-06-09 16:00:19 UTC (rev 151)
+++ trunk/index.php	2006-06-09 18:52:19 UTC (rev 152)
@@ -39,11 +39,16 @@
 		{
 	?>
 		<hr>
-		<form action="litmod.php">
-			<div>
+		<form style="display:inline" action="litmod.php">
+			<span>
 				<input type="submit" value="Literatur hinzuf&uuml;gen">
-			</div>
+			</span>
 		</form>
+		<form style="display:inline" action="bibtex.php">
+			<span>
+				<input type="submit" value="BibTeX importieren">
+			</span>
+		</form>
 	<?php
 		}
 	?>

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-06-09 16:00:19 UTC (rev 151)
+++ trunk/search.php	2006-06-09 18:52:19 UTC (rev 152)
@@ -77,11 +77,16 @@
 	{
 ?>
 	<hr>
-	<form action="litmod.php">
-		<div>
+	<form style="display:inline" action="litmod.php">
+		<span>
 			<input type="submit" value="Literatur hinzuf&uuml;gen">
-		</div>
+		</span>
 	</form>
+	<form style="display:inline" action="bibtex.php">
+		<span>
+			<input type="submit" value="BibTeX importieren">
+		</span>
+	</form>
 <?php
 	}
 ?>

Modified: trunk/searchmore.php
===================================================================
--- trunk/searchmore.php	2006-06-09 16:00:19 UTC (rev 151)
+++ trunk/searchmore.php	2006-06-09 18:52:19 UTC (rev 152)
@@ -15,11 +15,11 @@
 			<tbody>
 				<tr>
 					<th scope=row><label for="autor">Autor:</label></th>
-					<td><input type="text" id="autor" name="autor"></td>
+					<td><input class="input_text" type="text" id="autor" name="autor"></td>
 				</tr>
 				<tr>
 					<th scope=row><label for="titel">Titel:</label></th>
-					<td><input type="text" id="titel" name="titel"></td>
+					<td><input class="input_text" type="text" id="titel" name="titel"></td>
 				</tr>
 				<tr>
 					<th></th>
@@ -39,7 +39,7 @@
 			<tbody>
 				<tr>
 					<th scope=row><label for="suchbegriff">Suchbegriff:</label></th>
-					<td><input type="text" id="suchbegriff" name="suchbegriff"></td>
+					<td><input class="input_text" type="text" id="suchbegriff" name="suchbegriff"></td>
 				</tr>
 				<tr>
 					<th></th>



From lazhur at berlios.de  Fri Jun  9 21:09:14 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Fri, 9 Jun 2006 21:09:14 +0200
Subject: [Liman-svn] r153 - in trunk/docs: beleg2/doxygen beleg3 beleg3/interfaces
Message-ID: <200606091909.k59J9E47014425@sheep.berlios.de>

Author: lazhur
Date: 2006-06-09 21:09:10 +0200 (Fri, 09 Jun 2006)
New Revision: 153

Added:
   trunk/docs/beleg3/interfaces/kommentar.php
   trunk/docs/beleg3/interfaces/literatur.php
   trunk/docs/beleg3/interfaces/literaturart.php
   trunk/docs/beleg3/interfaces/login.php
   trunk/docs/beleg3/interfaces/mitglied.php
   trunk/docs/beleg3/interfaces/sqldb_mysql.php
   trunk/docs/beleg3/interfaces/suche.php
Modified:
   trunk/docs/beleg2/doxygen/classLiteratur.tex
   trunk/docs/beleg2/doxygen/classLiteraturArt.tex
   trunk/docs/beleg3/interfaces/autor.php
   trunk/docs/beleg3/programmdokumentation.tex
Log:
- Programminterfaces in 3. Beleg eingef?\195?\188gt
- Fehlende Verkn?\195?\188pfung zu BibTeX-Klasse aus 2. Beleg entfernt


Modified: trunk/docs/beleg2/doxygen/classLiteratur.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-06-09 19:09:10 UTC (rev 153)
@@ -11,11 +11,11 @@
 \hyperlink{classLiteratur_55626b912da4c041eaf981781ed6c640}{Literatur} (\$nr)
 \begin{CompactList}\small\item\em Liest \hyperlink{classLiteratur}{Literatur} ein. \item\end{CompactList}\item 
 \hyperlink{classLiteratur_11f6d1a4409c41638ff6693f65699ff3}{To\-Bibtex} ()
-\begin{CompactList}\small\item\em Exportiert \hyperlink{classLiteratur}{Literatur} nach \hyperlink{classBibTeX}{Bib\-Te\-X}. \item\end{CompactList}\item 
+\begin{CompactList}\small\item\em Exportiert \hyperlink{classLiteratur}{Literatur} nach Bib\-Te\-X. \item\end{CompactList}\item 
 \hyperlink{classLiteratur_f5b265d349df2a9d17079b81d808fa89}{Delete} (\$nr)
 \begin{CompactList}\small\item\em L??scht \hyperlink{classLiteratur}{Literatur}. \item\end{CompactList}\item 
 \hyperlink{classLiteratur_d466a307b1971ee736e1d4ba9342dc55}{Insert\-Bib\-Te\-X} (\$bibtex)
-\begin{CompactList}\small\item\em Importiert \hyperlink{classBibTeX}{Bib\-Te\-X}. \item\end{CompactList}\item 
+\begin{CompactList}\small\item\em Importiert Bib\-Te\-X. \item\end{CompactList}\item 
 \hyperlink{classLiteratur_3347551316e8f73659fc6f32ac6095df}{Insert} (\$autoren, \$art, \$titel, \$jahr, \$verlag, \$isbn, \$beschreibung, \$ort, \$stichworte)
 \begin{CompactList}\small\item\em Legt \hyperlink{classLiteratur}{Literatur} an. \item\end{CompactList}\item 
 \hyperlink{classLiteratur_b613c28476ea28058f8fc2bccb57c923}{Update} (\$nr, \$autoren, \$art, \$titel, \$jahr, \$verlag, \$isbn, \$beschreibung, \$ort, \$stichworte)
@@ -131,7 +131,7 @@
 \label{classLiteratur_d466a307b1971ee736e1d4ba9342dc55}
 
 
-Importiert \hyperlink{classBibTeX}{Bib\-Te\-X}. 
+Importiert Bib\-Te\-X. 
 
 Importiert \hyperlink{classLiteratur}{Literatur} nach Bibliothek aus einem Bib\-Te\-X-formatierten String. Alle Eintr??ge werden dazu nacheinandere eingelesen und umgewandelt, um diese dann in die Datenbank zu schreiben. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
@@ -141,7 +141,7 @@
 \item[\mbox{$\leftarrow$} {\em \$bibtex}]String mit Inhalt einer Bib\-Te\-X-Datei \end{description}
 \end{Desc}
 \begin{Desc}
-\item[R\"{u}ckgabe:]Anzahl der importierten \hyperlink{classLiteratur}{Literatur}\end{Desc}
+\item[R\"{u}ckgabe:]Anzahl der importierten \hyperlink{classLiteratur}{Literatur} \end{Desc}
 \hypertarget{classLiteratur_11f6d1a4409c41638ff6693f65699ff3}{
 \index{Literatur@{Literatur}!ToBibtex@{ToBibtex}}
 \index{ToBibtex@{ToBibtex}!Literatur@{Literatur}}
@@ -149,7 +149,7 @@
 \label{classLiteratur_11f6d1a4409c41638ff6693f65699ff3}
 
 
-Exportiert \hyperlink{classLiteratur}{Literatur} nach \hyperlink{classBibTeX}{Bib\-Te\-X}. 
+Exportiert \hyperlink{classLiteratur}{Literatur} nach Bib\-Te\-X. 
 
 Exportiert die aktuellen Informationen im Literaturobjekt in das Bib\-Te\-X-Format. \begin{Desc}
 \item[Vorbedingung:]- \end{Desc}

Modified: trunk/docs/beleg2/doxygen/classLiteraturArt.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteraturArt.tex	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg2/doxygen/classLiteraturArt.tex	2006-06-09 19:09:10 UTC (rev 153)
@@ -13,7 +13,7 @@
 \hyperlink{classLiteraturArt_43f747a6c5d840a22ddcd7e46d27cba0}{Get\-Display\-Text} ()
 \begin{CompactList}\small\item\em Liefert Bezeichner f??r Datenbank/Benutzeroberfl??che. \item\end{CompactList}\item 
 \hyperlink{classLiteraturArt_01e1a2acd95df1ae0bb22e57b70a63de}{Get\-Bibtex\-Text} ()
-\begin{CompactList}\small\item\em Liefert Bezeichner f??r \hyperlink{classBibTeX}{Bib\-Te\-X}. \item\end{CompactList}\end{CompactItemize}
+\begin{CompactList}\small\item\em Liefert Bezeichner f??r Bib\-Te\-X. \item\end{CompactList}\end{CompactItemize}
 
 
 \subsubsection{Ausf\"{u}hrliche Beschreibung}
@@ -44,7 +44,7 @@
 \begin{Desc}
 \item[Parameter:]
 \begin{description}
-\item[\mbox{$\leftarrow$} {\em \$text}]\hyperlink{classBibTeX}{Bib\-Te\-X} oder interner Bezeichner einer Literaturart \end{description}
+\item[\mbox{$\leftarrow$} {\em \$text}]Bib\-Te\-X oder interner Bezeichner einer Literaturart \end{description}
 \end{Desc}
 \begin{Desc}
 \item[Bemerkungen:]Ist der Bezeichner unbekannt, erh??lt die \hyperlink{classLiteratur}{Literatur} die Art \char`\"{}Sonstiges\char`\"{} \end{Desc}
@@ -58,9 +58,9 @@
 \label{classLiteraturArt_01e1a2acd95df1ae0bb22e57b70a63de}
 
 
-Liefert Bezeichner f??r \hyperlink{classBibTeX}{Bib\-Te\-X}. 
+Liefert Bezeichner f??r Bib\-Te\-X. 
 
-Je nach der bei der Erstellung des Objekts gew??hlten Art, wird der dazugeh??rige Bezeichner f??r die Literaturart in \hyperlink{classBibTeX}{Bib\-Te\-X} herausgesucht. \begin{Desc}
+Je nach der bei der Erstellung des Objekts gew??hlten Art, wird der dazugeh??rige Bezeichner f??r die Literaturart in Bib\-Te\-X herausgesucht. \begin{Desc}
 \item[Vorbedingung:]- \end{Desc}
 \begin{Desc}
 \item[R\"{u}ckgabe:]String mit Bezeichner der Literaturart in Bib\-Te\-X-Darstellung \end{Desc}

Modified: trunk/docs/beleg3/interfaces/autor.php
===================================================================
--- trunk/docs/beleg3/interfaces/autor.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/autor.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -8,9 +8,10 @@
 	 *  - Login::IsMember
 	 *  - SQLDB::Query
 	 *  - SQLDB::Fetch
+	 *  - SQLDB::GetInsertID
 	 *
 	 *  \author Frank Wilhelm
-	 *  \date 30.05.2006
+	 *  \date 6.06.2006
 	 */
 	class Autor
 	{

Added: trunk/docs/beleg3/interfaces/kommentar.php
===================================================================
--- trunk/docs/beleg3/interfaces/kommentar.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/kommentar.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -0,0 +1,129 @@
+<?php
+	require_once("include/login.php");
+
+	/*! \brief Verwaltet Kommentare
+	 *
+	 *  Stellt Funktionen zum Anlegen, L?schen, Bearbeiten von Kommentaren
+	 *  bereit. Es k?nnen sowohl einzelne Kommentare oder Kommentare nach
+	 *  ihrer Verbindung zur Literatur bzw. Mitgliedern gel?scht werden.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Login::IsAdministrator
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class Kommentar
+	{
+		var $Nr = 0; ///< Identifikationsnummer des Kommentars
+		var $Text = 0; ///< Kommentartext
+		var $Verfasser_Nr = 0; ///< Mitglieds_Nr des Verfassers
+		var $Verfasser_Name = 0; ///< Name des Verfassers (Vor- und Nachname)
+		
+		/*! \brief Legt Kommentarobjekt an
+		 *
+		 *  Legt ein neues Kommentarobjekt aus einem Objekt mit den
+		 *  Attributen Nr, Text, Verfasser_Nr und Verfasser_Name an.
+		 *  \pre -
+		 *  \param[in] $data Objekt mit Kommentardaten der Form
+		 *    - Nr
+		 *    - Text
+		 *    - Mitglieds_Nr
+		 *    - Vorname
+		 *    - Nachname
+		 */
+		function Kommentar($data);
+		
+		/*! \brief L?scht Kommentar
+		 *
+		 *  L?scht einen Kommentar aus Kommentare mit der Kommentar_Nr
+		 *  $nr.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Kommentar in Kommentare mit Kommentar_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer des zu l?schenden Kommentars
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt, wenn Mitglieds_Nr
+		 *    des Kommentars ungleich der eigenen Mitglieds_Nr ist.
+		 *    Ist der Nutzer nicht angemeldet, werden keine Operationen
+		 *    ausgef?hrt
+		 */
+		function Delete($nr);
+		
+		/*! \brief L?scht alle zu einer Literatur geh?renden Kommentare
+		 *
+		 *  L?scht alle Kommentare aus Kommentare, die mit Literatur
+		 *  mit der Literaturnummer ($literatur_nr) verbunden sind.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $literatur_nr Nummer der Literatur
+		 *  \remarks Ist Nutzer nicht eingeloggt, werden keine
+		 *    Operationen ausgef?hrt.
+		 */
+		function DeleteAll($literatur_nr);
+
+		/*! \brief L?scht alle zu einem Mitglied geh?renden Kommentare
+		 *
+		 *  L?scht alle Kommentare aus Kommentare, die mit Mitglieder
+		 *  mit der Mitglieds_Nr ($member_nr) verbunden sind.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $member_nr Nummer eines Mitglieds
+		 *  \remarks Ist der Nutzer nicht als Administrator eingeloggt,
+		 *    werden keine Operationen ausgef?hrt.
+		 */
+		function DeleteAllMember($member_nr);
+
+		/*! \brief Gibt Kommentare zu bestimmter Literatur zur?ck
+		 *
+		 *  Liest alle Kommentare die einer Literatur ($literatur_nr)
+		 *  zugeordnet sind aus Kommentare aus und gibt sie als Feld des
+		 *  Typs Kommentar zur?ck.
+		 *  \param[in] $literatur_nr Nr einer Literatur mit Kommentaren
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld vom Typ Kommentar
+		 */
+		function GetAll($literatur_nr);
+		
+		/*! \brief Legt Kommentar an
+		 *
+		 *  Legt einen neuen Kommentar mit Text ($text) zu einer
+		 *  Literatur ($literatur_nr) vom einem Verfasser 
+		 *  ($verfasser_nr) an.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Text ($text) darf nicht leer sein
+		 *  \param[in] $text Text des Kommentars
+		 *  \param[in] $verfasser_nr Mitglieds_Nr des Verfassers
+		 *  \param[in] $literatur_nr Nummer der Literatur
+		 *  \remarks Ist das aktuelle Mitglied kein 
+		 *  Administrator, dann muss $verfasser_nr gleich der aktuellen
+		 *  Nummer des Logins sein. Ist der Nutzer nicht eingeloggt,
+		 *  werden keine Operationen ausgef?hrt. Ist keine passende
+		 *  Literatur mit der Literatur_Nr $literatur_nr vorhanden,
+		 *  wird kein Kommentar angelegt. Existiert schon ein Kommentar
+		 *  zu Literatur mit $literatur_nr von Mitglied mit Mitglieds_Nr
+		 *  $verfasser_nr, wird nur der Text des Kommentars mit
+		 *  Kommentar::Update ge?ndert.
+		 */
+		function Insert($text, $verfasser_nr, $literatur_nr);
+		
+		/*! \brief ?ndert einen Kommentar
+		 *
+		 *  ?ndert in Kommentare den Text des Kommentars mit $nr
+		 *  in $text.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Kommentar in Kommentare mit Kommentar_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer des zu ver?ndernden Kommentars
+		 *  \param[in] $text neuer Text des Kommentars
+		 *  \remarks Ist das aktuelle Mitglied kein Administrator,
+		 *  dann muss die aktuelle Nummer des Mitglieds gleich der
+		 *  Mitglieds_Nr des Kommentars in Kommentare sein. Ist der
+		 *  Nutzer nicht eingeloggt, werden keine Operationen
+		 *  ausgef?hrt. Wird kein Text ($text) angegeben, wird der
+		 *  Kommentar mit Kommentar::Delete gel?scht.
+		 */
+		function Update($nr, $text);
+	}
+?>

Added: trunk/docs/beleg3/interfaces/literatur.php
===================================================================
--- trunk/docs/beleg3/interfaces/literatur.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/literatur.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -0,0 +1,139 @@
+<?php
+	require_once("include/login.php");
+	require_once("include/kommentar.php");
+	require_once("include/literaturart.php");
+	require_once("include/autor.php");
+
+	/*! \brief Verwaltet Literatur
+	 *
+	 *  Stellt Funktionen zum Abruf, Exportieren, L?schen, Importieren,
+	 *  Hinzuf?gen und ?ndern von Literatur in Bibliothek zur Verf?gung.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Autor::Clean
+	 *  - Autor::GetAll
+	 *  - Autor::Split
+	 *  - Kommentar::DeleteAll
+	 *  - Kommentar::GetAll
+	 *  - LiteraturArt::LiteraturArt
+	 *  - LiteraturArt::GetBibTexText
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *  - SQLDB::GetInsertID
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 06.06.2006
+	 */
+	class Literatur
+	{
+		var $Nr = 0; ///< Literaturidentifikationsnummer
+		var $Titel = ""; ///< Titel der Literatur
+		var $Jahr = 0; ///< Erscheinungsjahr
+		var $Verlag = ""; ///< Verlag/Herausgeber
+		var $ISBN = ""; ///< ISBN der Literatur
+		var $Beschreibung = ""; ///< Bemerkung zur Literatur
+		var $Ort = ""; ///< Herausgabeort
+		var $Stichworte = ""; ///< Stichworte zum Inhalt der Literatur
+		var $Art; ///< Typ der Literatur
+		var $Autoren = array(); ///< Feld mit Autoren der Literatur
+		var $Kommentare = array(); ///< Feld mit Kommentaren der Literatur
+		
+		/*! \brief Liest Literatur ein
+		 *
+		 *  Erstellt aus Literatur in Bibliothek mit Literatur_Nr
+		 *  ($nr) neues Literaturobjekt.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer der zu einlesenden Literatur
+		 */
+		function Literatur($nr);
+
+		/*! \brief Exportiert Literatur nach BibTeX
+		 *
+		 *  Exportiert die aktuellen Informationen im Literaturobjekt
+		 *  in das BibTeX-Format.
+		 *  \pre -
+		 *  \return $string mit BibTeX-Eintrag
+		 */
+		function ToBibtex();
+
+		/*! \brief L?scht Literatur
+		 *
+		 *  L?scht Literatur aus Bibliothek mit der Literatur_Nr $nr.
+		 *  Alle verbundenen Kommentare werden aus Kommentare gel?scht.
+		 *  Au?erdem werden alle nun nicht mehr gebrauchten Autoren in
+		 *  Autoren gel?scht.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer der zu l?schenden Literatur
+		 *  \remarks Ist der Nutzer nicht als Mitglied angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Delete($nr);
+
+		/*! \brief Importiert BibTeX
+		 *
+		 *  Importiert Literatur nach Bibliothek aus einem
+		 *  BibTeX-formatierten String. Alle Eintr?ge werden dazu
+		 *  nacheinandere eingelesen und umgewandelt, um diese dann
+		 *  in die Datenbank zu schreiben.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $bibtex String mit Inhalt einer BibTeX-Datei
+		 *  \return Anzahl der importierten Literatur
+		 */
+		function InsertBibTeX($bibtex);
+
+		/*! \brief Legt Literatur an
+		 *
+		 *  Legt neue Literatur in Bibliothek mit den ?bergebenen
+		 *  Parametern ($art, $titel, $jahr, $verlag, $isbn,
+		 *  $beschreibung, $ort, $stichworte) an. Danach werden die
+		 *  Autoren ($autoren) in Autoren geschrieben und mit der
+		 *  Tabelle Literatur_Autor der Literatur zugeordnet.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
+		 *  \param[in] $art Bezeichner der Literaturart
+		 *  \param[in] $titel Titel der Literatur
+		 *  \param[in] $jahr Erscheinungsjahr der Literatur
+		 *  \param[in] $verlag Verlag der Literatur
+		 *  \param[in] $isbn ISBN der Literatur
+		 *  \param[in] $beschreibung Beschreibung der Literatur
+		 *  \param[in] $ort Erscheinungsort
+		 *  \param[in] $stichworte Stichworte
+		 *  \remarks Ist der Nutzer nicht als Mitglied angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Insert($autoren, $art, $titel, $jahr, $verlag, $isbn, $beschreibung, $ort, $stichworte);
+
+		/*! \brief ?ndert Literatur
+		 *
+		 *  Entfernt alle zur Literatur_Nr ($nr) geh?renden
+		 *  Verbindungen in Autor_Literatur um danach die Literatur mit
+		 *  Literatur_Nr $nr zu den neuen Werten ($art, $titel, $jahr,
+		 *  $verlag, $isbn, $beschreibung, $ort, $stichworte) zu ?ndern.
+		 *  Danach werden die Autoren ($autoren) in Autoren geschrieben
+		 *  und mit der Tabelle Literatur_Autor der Literatur
+		 *  zugeordnet. Alle jetzt noch nicht zugeordneten Autoren in
+		 *  Autoren werden gel?scht.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer der zu ver?ndernden Literatur
+		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
+		 *  \param[in] $art neuer Bezeichner der Literaturart
+		 *  \param[in] $titel neuer Titel der Literatur
+		 *  \param[in] $jahr neues Erscheinungsjahr der Literatur
+		 *  \param[in] $verlag neuer Verlag der Literatur
+		 *  \param[in] $isbn neue ISBN der Literatur
+		 *  \param[in] $beschreibung neue Beschreibung der Literatur
+		 *  \param[in] $ort neuer Erscheinungsort
+		 *  \param[in] $stichworte neue Stichworte
+		 *  \remarks Ist der Nutzer nicht als Mitglied angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Update($nr, $autoren, $art, $titel, $jahr, $verlag, $isbn, $beschreibung, $ort, $stichworte);
+	}
+?>

Added: trunk/docs/beleg3/interfaces/literaturart.php
===================================================================
--- trunk/docs/beleg3/interfaces/literaturart.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/literaturart.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -0,0 +1,53 @@
+<?php
+	/*! \brief Verwaltet Literaturarten
+	 *
+	 *  Verwaltet die aus der Datenbank oder BibTeX-Datei erhaltenen
+	 *  Informationen zur Art einer Literatur. Enthaltene Informationen
+	 *  k?nnen wieder als BibTeX- oder als der in Datenbank/Benutzeroberfl?che
+	 *  verwendeten Namen zur?ckgegeben werden.
+	 *  \pre -
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class LiteraturArt
+	{
+		/*! \brief Importiert BibTeX- bzw. interne Namen
+		 *
+		 *  Importiert die in BibTeX-Dateien oder in der
+		 *  Datenbank/Benutzeroberfl?chen verwendeten Bezeichner f?r
+		 *  Literaturarten und weist sie einen internen Wert zu.
+		 *  \pre -
+		 *  \param[in] $text BibTeX oder interner Bezeichner einer Literaturart
+		 *  \remarks Ist der Bezeichner unbekannt, erh?lt die Literatur
+		 *    die Art "Sonstiges"
+		 */
+		function LiteraturArt($text);
+		
+		/*! \brief Liefert Bezeichner f?r Datenbank/Benutzeroberfl?che
+		 *
+		 *  Je nach der bei der Erstellung des Objekts gew?hlten Art,
+		 *  wird der dazugeh?rige Bezeichner f?r die Literaturart
+		 *  in der Datenbank/Benutzeroberfl?che herausgesucht.
+		 *  \pre -
+		 *  \return String mit Bezeichner der Literaturart in
+		 *    Datenbank/Benutzeroberfl?chendarstellung
+		 *  \remarks Sollte der Wert der Literatur nicht bekannt sein
+		 *    wird "Sonstiges" zur?ckgegeben
+		 */
+		function GetDisplayText();
+		
+		/*! \brief Liefert Bezeichner f?r BibTeX
+		 *
+		 *  Je nach der bei der Erstellung des Objekts gew?hlten Art,
+		 *  wird der dazugeh?rige Bezeichner f?r die Literaturart
+		 *  in BibTeX herausgesucht.
+		 *  \pre -
+		 *  \return String mit Bezeichner der Literaturart in
+		 *    BibTeX-Darstellung
+		 *  \remarks Sollte der Wert der Literatur nicht bekannt sein
+		 *    wird "Sonstiges" zur?ckgegeben
+		 */
+		function GetBibtexText();
+	}
+?>

Added: trunk/docs/beleg3/interfaces/login.php
===================================================================
--- trunk/docs/beleg3/interfaces/login.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/login.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -0,0 +1,88 @@
+<?php
+	require_once("include/mitglied.php");
+
+	/*! \brief Verwaltet Logininformationen
+	 *
+	 *  Verwaltet die aus der sich aktuellen Anmeldung ergebenen Session
+	 *  des Users und der damit entstehenden Rechte
+	 *  \pre Das Loginobjekt muss vor einer ?bertragung von Inhaltsdaten zum 
+	 *    User angelegt werden, um ein Cookie anlegen zu k?nnen.
+	 *  \pre Es sollte kein zweites Objekt vom Typ Login existieren.
+	 *  \pre Datenbankverbindung muss bestehen.
+	 *  \remarks Sollte ein weiteres Objekt vom Typ Login existieren, in
+	 *    welche neue Logininformationen eingetragen werden, wird keine
+	 *    weitere Session angelegt, sondern die alten Informationen in
+	 *    der aktuellen Session ?berschrieben.
+	 *  \sa
+	 *  - Mitglied::PasswordHash
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class Login
+	{
+		var $Nr = 0; ///< Mitglieds_Nr f?r angemeldetes Mitglied (sonst 0)
+		
+		/*! \brief Liest bzw. Erstellt Session f?r Anmeldedaten
+		 *
+		 *  Liest Daten aus der Session ein. Sollten keine vorhanden
+		 *  sein, dann wird eine neue, leere Session angelegt. Sollten
+		 *  Daten vorhanden sein, wird die Korrektheit ?ber die
+		 *  Datenbank (Mitglieder) und die Verbindungsinformationen
+		 *  gepr?ft. Nach dieser Pr?fung werden abh?ngig vom Ausgang
+		 *  die Rechteinformationen gesetzt.\n
+		 *  Werden keine Parameter ?bergeben, wird das Klartextpasswort
+		 *  mit Mitglied::PasswordHash gehasht, um diese mit
+		 *  Benutzernamen ($benutzer) gegen die Eintr?ge in Mitglieder
+		 *  zu pr?fen. Ist diese erfolgreich, wird eine neue Session
+		 *  mit gehashtem Passwort, Benutzernamen und
+		 *  Verbindungsinformationen erstellt. Sollte ein Fehler 
+		 *  bei der Anmeldung auftreten, erh?lt er Nutzerrechte
+		 *  (wird also nicht zum Mitglied). Sonst erh?lt er die Rechte
+		 *  und Mitglieds_Nr aus dem gefundenem Eintrag in Mitglieder.
+		 *  \param[in] $benutzer neuer Benutzername
+		 *  \param[in] $passwort Passwort in Klartext des Nutzers
+		 *  \pre Eine Verbindung zur Datenbank muss bestehen.
+		 *  \pre Der Konstruktor muss vor dem Senden von Inhaltsdaten
+		 *    aufgerufen werden, um ein Cookie erstellen zu k?nnen.
+		 *  \pre Zum Einloggen mit Daten darf kein Parameter leer sein
+		 */
+		function Login($benutzer = "", $passwort = "");
+
+		/*! \brief Entfernt Session
+		 *
+		 *  Die Anmeldedaten und Verbindungsdaten werden in der
+		 *  Session entfernt. Au?erdem werden die Rechte auf Nutzer (0)
+		 *  und Nr auf 0 gesetzt.
+		 *  \pre -
+		 */
+		function Logout();
+
+		/*! \brief Ermittelt ob Administratorrechte vorliegen
+		 *
+		 *  Vergleicht ob die bei der Erstellung des Loginobjekts
+		 *  ermittelten Rechte mindestens den Wert f?r
+		 *  Administratorrechte (>=2) haben.
+		 *  \pre -
+		 *  \retval true wenn Administratorrechte vorliegen
+		 *  \retval false wenn Nutzer- oder Mitgliedsrechte vorliegen
+		 */
+		function IsAdministrator();
+
+		/*! \brief Ermittelt ob mindestens Mitgliedsrechte vorliegen
+		 *
+		 *  Vergleicht ob die bei der Erstellung des Loginobjekts
+		 *  ermittelten Rechte mindestens den Wert f?r
+		 *  Mitgliedsrechte (>=1) haben.
+		 *  \pre -
+		 *  \retval true wenn mindestens Mitgliedsrechte vorliegen
+		 *  \retval false wenn Nutzerrechte vorliegen
+		 */
+		function IsMember();
+	}
+
+	// Globales Loginobjekt erstellen
+	$login = new Login();
+?>

Added: trunk/docs/beleg3/interfaces/mitglied.php
===================================================================
--- trunk/docs/beleg3/interfaces/mitglied.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/mitglied.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -0,0 +1,137 @@
+<?php
+	require_once("include/login.php");
+	require_once("include/kommentar.php");
+
+	/*! \brief Verwaltet Mitglieder
+	 *
+	 *  Stellt Funktionen zum Entfernen, Hinzuf?gen, ?ndern und Auflisten
+	 *  von Mitgliedern bereit.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Kommentar::DeleteAllMember
+	 *  - Login::IsAdministrator
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 30.05.2006
+	 */
+	class Mitglied
+	{
+		var $Nr = 0; ///< Identifikationsnummer des Mitglieds
+		var $Login = ""; ///< Benutzername des Mitglieds
+		var $Passwort = ""; ///< Passworthash des Benutzerpassworts
+		var $Rechte = 0; ///< Rechte des Mitglieds (0 - Gast, 1 - Mitglied, 2 - Administrator)
+		var $Vorname = ""; ///< Vorname des Mitglieds
+		var $Nachname = ""; ///< Nachname des Mitglieds
+		var $Email = ""; ///< E-Mail-Adresse des Mitglieds
+		
+		/*! \brief Liest Mitglied ein
+		 *
+		 *  Liest Mitglied mit Mitglied_Nr ($nr)
+		 *  und setzt Felder entsprechend den Daten.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $nr Nummer der zu einlesenden Literatur
+		 */
+		function Mitglied($nr);
+		
+		/*! \brief Generiert Passworthash
+		 *
+		 *  Aus ?bergebenes Klartextpasswort wird ein 40 Byte gro?er
+		 *  hexkodierter Hash generiert. Als Hashingalgorithmus wird
+		 *  SHA-1 genutzt
+		 *  \pre -
+		 *  \param[in] $pass zu hashendes Klartextpasswort
+		 */
+		function PasswordHash($pass);
+		
+		/*! \brief Entfernt Mitglied
+		 *
+		 *  Entfernt Mitglied mit Mitgliedsnummer ($nr) aus Mitglieder
+		 *  und l?scht zus?tzlich die Kommentare des Mitglieds in
+		 *  Kommentare
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Mitglied in Mitglieder mit Mitglieds_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Mitglieds_Nr des zu l?schenden Mitglieds
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Delete($nr);
+		
+		/*! \brief Legt  Mitglied an
+		 *
+		 *  F?gt neues Mitglied mit Benutzernamen ($loginname), Passwort
+		 *  ($passwort), Benutzerrechten ($rechte), Vorname ($vorname),
+		 *  Nachname ($nachname), E-Mail-Adresse ($email) in Mitglieder
+		 *  ein. Dazu wird das Passwort noch mit Mitglied::PasswordHash
+		 *  gehasht. Sollte ein Mitglied mit gleichem Login existieren
+		 *  wird ein Fehler zur?ckgegeben, da die Datenbank nur ein
+		 *  Mitglied mit gleichem Login erlaubt.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $loginname Benutzername des neuen Mitglieds
+		 *  \param[in] $passwort Benutzerpasswort des neuen Mitglieds
+		 *  \param[in] $rechte Rechte des neuen Mitglieds
+		 *     (Benutzer, Administrator)
+		 *  \param[in] $vorname Vorname des neuen Mitglieds
+		 *  \param[in] $nachname Nachname des neuen Mitglieds
+		 *  \param[in] $email E-Mail-Adresse des neuen Mitglieds
+		 *  \retval true Mitglied wurde eingef?gt
+		 *  \retval false Mitglied konnte nicht hinzugef?gt werden
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt.
+		 */
+		function Insert($loginname, $passwort, $rechte, $vorname, $nachname, $email);
+		
+		/*! \brief ?ndert ein Mitglied
+		 *
+		 *  ?ndert die Daten des Mitglieds mit der Mitglieds_Nr ($nr),
+		 *  in neuen Benutzernamen ($loginname), Passwort ($passwort),
+		 *  Benutzerrechten ($rechte), Vorname ($vorname),
+		 *  Nachname ($nachname), E-Mail-Adresse ($email) in
+		 *  Mitglieder. Wenn $passwort nicht die L?nge 0 hat, wird es 
+		 *  noch mit Mitglied::PasswortHash gehasht. Andernfalls wird
+		 *  das alte Passwort in Mitglieder beibehalten. Sollte ein
+		 *  Mitglied mit gleichem Login existieren wird ein Fehler
+		 *  zur?ckgegeben, da die Datenbank nur ein Mitglied mit
+		 *  gleichem Login erlaubt.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Mitglied in Mitglieder mit Mitglieds_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Mitglieds_Nr des zu ver?ndernden Mitglieds
+		 *  \param[in] $loginname neuer Benutzername des Mitglieds
+		 *  \param[in] $passwort neues Passwort des Mitglieds
+		 *  \param[in] $rechte neuen Rechte des Mitglieds
+		 *    (Benutzer, Administrator)
+		 *  \param[in] $vorname neuer Vorname des Mitglieds
+		 *  \param[in] $nachname neuer Nachname des Mitglieds
+		 *  \param[in] $email neue E-Mail-Adresse des Mitglieds
+		 *  \retval true Mitglied wurde ge?ndert
+		 *  \retval false Mitglied konnte nicht ge?ndert werden
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt, wenn $nr ungleich
+		 *    der eigenen Mitglieds_Nr is.
+		 */
+		function Update($nr, $loginname, $passwort, $rechte, $vorname, $nachname, $email);
+		
+		/*! \brief R?ckgabe einer Liste der Mitglieder
+		 *
+		 *  Liest alle Mitglieder mit Nr, Login, Vorname, Nachname und
+		 *  Email aus Tabelle Mitglieder und gibt die ausgelesenen
+		 *  Objekte in einem Feld zur?ck
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld mit Objekten der Form
+		 *    - Nr
+		 *    - Login
+		 *    - Vorname
+		 *    - Nachname
+		 *    - Email
+		 *  \remarks Ist der Nutzer nicht als Administrator, sondern
+		 *    als Mitglied angemeldet, wird nur der eigene Eintrag
+		 *    zur?ckgegeben. Ist der Nutzer nicht angemeldet werden
+		 *    keine Operationen ausgef?hrt.
+		 */
+		function GetAll();
+	}
+?>

Added: trunk/docs/beleg3/interfaces/sqldb_mysql.php
===================================================================
--- trunk/docs/beleg3/interfaces/sqldb_mysql.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/sqldb_mysql.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -0,0 +1,128 @@
+<?php
+	define("SQLDB", "mysql");
+
+	/*! \brief Datenbankzugriff ?ber MySQL
+	 *
+	 *  Erlaubt den abstrahierten Zugriff ?ber SQL auf eine
+	 *  Datenbank (hier MySQL).
+	 *  \pre -
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 06.06.2006
+	 */
+	class SQLDB
+	{
+		var $db_id = false; ///< Identifikation der aktuellen Datenbankverbindung
+		var $query_result = false; ///< Identifikation der letzten Datenbankabfrage
+		
+
+		/*! \brief ?ffnet eine Datenbankverbindung
+		 *
+		 *  Startet eine Verbindung zum Datenbanksystem, je nach
+		 *  gew?hlter Art ($persist), und w?hlt nach erfolgreichem
+		 *  Aufbau eine Datenbank. Treten Fehler beim Aufbau auf, wird
+		 *  SQLDB::$db_id auf false gesetzt.
+		 *  \pre -
+		 *  \param[in] $host Adresse oder IP des MySQL-Servers
+		 *  \param[in] $user Benutzernamen f?r MySQL-Zugriff
+		 *  \param[in] $password Benutzerpasswort f?r MySQL-Zugriff
+		 *  \param[in] $database Auszuw?hlende Datenbank
+		 *  \param[in] $persist Aufbau einer persistenten (geteilten) Verbindung
+		 */
+		function SQLDB($host, $user, $password, $database, $persist = true);
+		
+		/*! \brief Beendet Verbindung
+		 *
+		 *  Beendet die Verbindung zum Datenbankserver, wenn eine nicht
+		 *  persistende Verbindung besteht.
+		 *  \pre -
+		 *  \retval true bei Erfolg
+		 *  \retval false bei Misserfolg
+		 *  \remarks Persistente Verbindungen werden nicht geschlossen
+		 */
+		function Close();
+		
+		/*! \brief Springt auf Datensatz
+		 *
+		 *  L?sst den internen Zeiger auf angegebenen Datensatz der
+		 *  letzten Anfrage zeigen. Der Datensatz l?sst sich danach mit
+		 *  Fetch abfragen.
+		 *  \pre Datenbankverbindung muss mit einer Abfrage bestehen
+		 *  \retval true bei Erfolg
+		 *  \retval false bei Misserfolg
+		 */
+		function DataSeek($row_number);
+		
+		/*! \brief Liefert Datensatz als Objekt
+		 *
+		 *  Wandelt aktuellen Datensatz in Objekt um und gibt ihn
+		 *  zur?ck. Nach erfolgreicher Operation wird der
+		 *  interne Zeiger eine Stelle weiter ger?ckt.
+		 *  \pre Datenbankverbindung muss mit einer Abfrage bestehen
+		 *  \return bei Erfolg Datensatz als Objekt
+		 *  \retval false bei Misserfolg
+		 */
+		function Fetch();
+		
+		/*! \brief Entfernt Ergebnisse
+		 *
+		 *  Entfernt Datens?tze der letzten Anfrage und gibt deren
+		 *  Speicher frei.
+		 *  \pre -
+		 *  \remarks Funktion wird vor jedem Query() aufgerufen
+		 */
+		function FreeResult();
+		
+		/*! \brief Anzahl zuletzt ge?nderter Datens?tze
+		 *
+		 *  Gibt Anzahl der bei der letzten INSERT, UPDATE bzw. DELETE
+		 *  Anweisung ge?nderten Datens?tze.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Anzahl der Datens?tze
+		 *  \remarks F?r gefundene Datens?tze sollte GetNumRows() genutzt werden
+		 */
+		function GetAffectedRows();
+		
+		/*! \brief Liefert Fehlerinformationen
+		 *
+		 *  Liefert Feld mit Fehlernachricht und interner Fehlernummer
+		 *  zur?ck.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld mit feld[0] als Fehlernachricht und feld[1] als Fehlernummer
+		 */
+		function GetError();
+
+		/*! \brief Liefert die ID des letzten INSERTS
+		 *
+		 *  Liefert die ID des bei den letzten INSERT angelegten
+		 *  Datensatzes zur?ck
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre INSERT-Query muss gemacht worden sein
+		 *  \return ID des zuletzt hinzugef?gten Datensatzes
+		 *  \retval false bei Misserfolg
+		 */
+		function GetInsertID();
+		
+		/*! \brief Anzahl zuletzt gefundener Datens?tze
+		 *
+		 *  Gibt Anzahl der bei der letzten SELECT-Anweisung
+		 *  gefundenen Datens?tze.
+		 *  \pre Datenbankverbindung muss mit einer Abfrage bestehen
+		 *  \return bei Erfolg Anzahl der Datens?tze
+		 *  \retval false bei Misserfolg
+		 *  \remarks F?r ge?nderte Datens?tze sollte GetAffectedRows() genutzt werden
+		 */
+		function GetNumRows();
+		
+		/*! \brief Sendet Anfrage an Server
+		 *
+		 *  Sendet eine Anfrage an die aktive Datenbank.
+		 *  Erhaltene Datens?tze der Anfrage k?nnen mit Fetch abgefragt
+		 *  werden.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $query SQL-Anfrage an den Datenbankserver
+		 *  \retval false wenn ein Fehler in der Anfrage aufgetreten ist
+		 */
+		function Query($query);
+	}
+?>

Added: trunk/docs/beleg3/interfaces/suche.php
===================================================================
--- trunk/docs/beleg3/interfaces/suche.php	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/interfaces/suche.php	2006-06-09 19:09:10 UTC (rev 153)
@@ -0,0 +1,67 @@
+<?php
+	require_once("include/autor.php");
+	require_once("include/literatur.php");
+
+	/*! \brief Suche Literaturdaten
+	 *
+	 *  Durchsucht die Tabelle Bibliothek und Autoren ?ber Volltextsuche,
+	 *  nach Autor und Titel oder nach den 10 zuletzt hinzugef?gten
+	 *  Literatureintr?gen und speichert sie in $Treffer zwischen.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Autor::GetAll
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 30.05.2006
+	 */
+	class Suche
+	{
+		/*! \brief gefundene Treffer
+		 *
+		 *  Feld aus gefundenen Trefferobjekten mit Attributen
+		 *   - Nr
+		 *   - Titel
+		 *   - Autor
+		 *   - Verlag
+		 *   - ISBN
+		 */
+		var $Treffer = array();
+
+		/*! \brief Sucht Literatur
+		 *
+		 *  Wenn keine Parameter ?bergeben werden:
+		 *  - Sucht in Tabelle Bibliothek nach den 10 zuletzt
+		 *    hinzugef?gten Literatureintr?gen und speichert Nr, Titel,
+		 *    Autor, Verlag und ISBN als Objekt im Feld $Treffer.
+		 *    Sollte ein Fehler auftreten oder bisher keine Eintr?ge
+		 *    vorhanden sein, dann wird $Treffer ein Feld der L?nge 0.
+		 *
+		 *  Wenn ein $suchbegriff ?bergeben wird:
+		 *  - Sucht in Tabelle Literatur und Autoren nach dem Auftreten
+		 *    des ?bergebenen Textes in  Literatureintr?gen und speichert
+		 *    Nr, Titel, Autor, Verlag und ISBN als Objekt im Feld
+		 *    $Treffer. Sollte ein Fehler auftreten oder keine passenden
+		 *    Eintr?ge vorhanden sein, dann wird $Treffer ein Feld der
+		 *    L?nge 0.
+		 *
+		 *  Wenn $suchbegriff und $autor ?bergeben werden:
+		 *  - Sucht in Tabelle Bibliothek und Autoren nach dem Auftreten
+		 *    von $autor in Autor und $suchbegriff im Titel des 
+		 *    Literatureintrags und speichert Nr, Titel, Autor, Verlag
+		 *    als Objekt im Feld $Treffer. Sollte ein Fehler auftreten
+		 *    und ISBN der Treffer oder keine passenden Eintr?ge vorhanden
+		 *    sein, dann wird $Treffer ein Feld der L?nge 0.
+		 *  - Wird eine kommagetrennte Liste von Autoren als
+		 *    $autor ?bergeben, muss in Treffern nur einer der
+		 *    genannten Autoren auftreten.
+		 *
+		 *  \pre Datenbankverbindung muss bestehen.
+		 *  \param[in] $autor String mit Autorname
+		 *  \param[in] $suchbegriff String mit Literaturtitel bzw. wenn
+		 *     einzeln ?bergeben Suchtext f?r Volltextsuche
+		 */
+		function Suche($suchbegriff="", $autor="");
+	}
+?>

Modified: trunk/docs/beleg3/programmdokumentation.tex
===================================================================
--- trunk/docs/beleg3/programmdokumentation.tex	2006-06-09 18:52:19 UTC (rev 152)
+++ trunk/docs/beleg3/programmdokumentation.tex	2006-06-09 19:09:10 UTC (rev 153)
@@ -3,8 +3,30 @@
 \subsection{Klasse Autor}
 \lstinputlisting{interfaces/autor.php}
 
+\subsection{Klasse Kommentar}
+\lstinputlisting{interfaces/kommentar.php}
+
+\subsection{Klasse LiteraturArt}
+\lstinputlisting{interfaces/literaturart.php}
+
+\subsection{Klasse Literatur}
+\lstinputlisting{interfaces/literatur.php}
+
+\subsection{Klasse Login}
+\lstinputlisting{interfaces/login.php}
+
+\subsection{Klasse Mitglied}
+\lstinputlisting{interfaces/mitglied.php}
+
+\subsection{Klasse SQLDB}
+\lstinputlisting{interfaces/sqldb_mysql.php}
+
+\subsection{Klasse Suche}
+\lstinputlisting{interfaces/suche.php}
+
+
+
 \section{Kommentierte Quelltexte}
-%nur ein Test
 \subsection{include/autor.php}
 \lstinputlisting{sourcecodes/include/autor.php}
 



From lazhur at berlios.de  Sat Jun 10 12:34:18 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sat, 10 Jun 2006 12:34:18 +0200
Subject: [Liman-svn] r154 - in trunk: . design include
Message-ID: <200606101034.k5AAYI9D015537@sheep.berlios.de>

Author: lazhur
Date: 2006-06-10 12:34:12 +0200 (Sat, 10 Jun 2006)
New Revision: 154

Modified:
   trunk/design/liman.css
   trunk/include/autor.php
   trunk/include/literatur.php
   trunk/include/suche.php
   trunk/index.php
   trunk/lit.php
   trunk/litmod.php
   trunk/search.php
   trunk/userlist.php
Log:
- an einigen Stellen for auf foreach umgestellt
- Autor::Clean-Workaround mit kompakten ID-Vergleich


Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/design/liman.css	2006-06-10 10:34:12 UTC (rev 154)
@@ -123,6 +123,10 @@
 	vertical-align: top;
 }
 
+#litkommentare .kommentar {
+	width: 99%;
+}
+
 #error_list, #error {
 	padding: 0.5em;
 	border: 2px solid red;

Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/include/autor.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -62,21 +62,20 @@
 							ON autoren.Autor_Nr = connect.Autor_Nr
 							WHERE connect.Autor_Nr is NULL";
 					$sqldb->Query($sql);
-					
-					if (($numrows = $sqldb->GetNumRows()) >= 1)
+
+					$authorid = array();
+					while ($line = $sqldb->Fetch())
 					{
+						$authorid[] = $line->Nr;
+					}
+
+					if (empty($authorid) === false)
+					{
 						$sqlDelete = "DELETE FROM ".$db_config['prefix']."Autoren
-								WHERE ";
-						for ($i = 1; $i <= $numrows; $i++)
-						{
-							$line = $sqldb->Fetch();
-							$sqlDelete .= "Autor_Nr = '".$line->Nr."' ";
+								WHERE Autor_Nr IN (";
+						$idlist = implode(", ", $authorid);
+						$sqlDelete .= $idlist.")";
 
-							if ($i < $numrows)
-							{
-								$sqlDelete .= " OR ";
-							}
-						}
 						$sqldb->Query($sqlDelete);
 					}
 				}

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/include/literatur.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -91,18 +91,15 @@
 					$str .= ",\n\ttitle = \"".addslashes($this->Titel)."\"";
 				}
 	
-				if (count($this->Autoren) > 0)
+				if (empty($this->Autoren) === false)
 				{
-					$autorlist = "";
-					for ($j = 0; $j < count($this->Autoren); $j++)
+					$autornamen = array();
+					foreach ($this->Autoren as $autor)
 					{
-						if ($j != 0)
-						{
-							$autorlist .= " and ";
-						}
-						$autorlist .= $this->Autoren[$j]->Name;
+						$autornamen[] = $autor->Name;
 					}
-	
+
+					$autorlist = implode(" and ", $autornamen);
 					$str .= ",\n\tauthor = \"".addslashes($autorlist)."\"";
 				}
 	
@@ -333,10 +330,10 @@
 				if ($nr = $sqldb->GetInsertID())
 				{
 					$autorlist = Autor::Split($autoren);
-					for ($i = 0; $i < count($autorlist); $i++)
+					foreach ($autorlist as $cur)
 					{
 						$sql = "INSERT INTO ".$db_config['prefix']."Literatur_Autor
-							VALUES ('".$autorlist[$i]."', '$nr')";
+							VALUES ('".$cur."', '$nr')";
 						$sqldb->Query($sql);
 					}
 				}
@@ -386,10 +383,10 @@
 				$sqldb->Query($sql);
 
 				$autorlist = Autor::Split($autoren);
-				for ($i = 0; $i < count($autorlist); $i++)
+				foreach ($autorlist as $cur)
 				{
 					$sql = "INSERT INTO ".$db_config['prefix']."Literatur_Autor
-						VALUES ('".$autorlist[$i]."', '$nr')";
+						VALUES ('".$cur."', '$nr')";
 					$sqldb->Query($sql);
 				}
 

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/include/suche.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -59,14 +59,17 @@
 			{
 				// Kommagetrennte Autorenliste erstellen
 				$authors = Autor::GetAll($this->Treffer[$i]->Nr);
+
 				$autorlist = "";
-				for ($j = 0; $j < count($authors); $j++)
+				if (empty($authors) === false)
 				{
-					if ($j != 0)
+					$autornamen = array();
+					foreach ($authors as $cur)
 					{
-						$autorlist .= ", ";
+						$autornamen[] = $cur->Name;
 					}
-					$autorlist .= $authors[$j]->Name;
+	
+					$autorlist = implode(", ", $autornamen);
 				}
 				$this->Treffer[$i]->Autor = $autorlist;
 			}
@@ -111,14 +114,17 @@
 				{
 					// Kommagetrennte Autorenliste erstellen
 					$authors = Autor::GetAll($this->Treffer[$i]->Nr);
+	
 					$autorlist = "";
-					for ($j = 0; $j < count($authors); $j++)
+					if (empty($authors) === false)
 					{
-						if ($j != 0)
+						$autornamen = array();
+						foreach ($authors as $cur)
 						{
-							$autorlist .= ", ";
+							$autornamen[] = $cur->Name;
 						}
-						$autorlist .= $authors[$j]->Name;
+		
+						$autorlist = implode(", ", $autornamen);
 					}
 					$this->Treffer[$i]->Autor = $autorlist;
 				}
@@ -184,14 +190,17 @@
 				{
 					// Kommagetrennte Autorenliste erstellen
 					$authors = Autor::GetAll($this->Treffer[$i]->Nr);
+	
 					$autorlist = "";
-					for ($j = 0; $j < count($authors); $j++)
+					if (empty($authors) === false)
 					{
-						if ($j != 0)
+						$autornamen = array();
+						foreach ($authors as $cur)
 						{
-							$autorlist .= ", ";
+							$autornamen[] = $cur->Name;
 						}
-						$autorlist .= $authors[$j]->Name;
+		
+						$autorlist = implode(", ", $autornamen);
 					}
 					$this->Treffer[$i]->Autor = $autorlist;
 				}

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/index.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -19,9 +19,8 @@
 			<?php
 				require_once("include/suche.php");
 				$search = new Suche();
-				for ($i = 0; $i < count($search->Treffer); $i++)
+				foreach ($search->Treffer as $cur)
 				{
-					$cur = $search->Treffer[$i];
 			?>
 				<tr>
 					<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>

Modified: trunk/lit.php
===================================================================
--- trunk/lit.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/lit.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -26,13 +26,16 @@
 				<th scope="row">Autor:</th>	
 				<td><?php
 					$autorlist = "";
-					for ($j = 0; $j < count($literatur->Autoren); $j++)
+
+					if (count($literatur->Autoren) > 0)
 					{
-						if ($j != 0)
+						$autornamen = array();
+						foreach ($literatur->Autoren as $autor)
 						{
-							$autorlist .= ", ";
+							$autornamen[] = $autor->Name;
 						}
-						$autorlist .= $literatur->Autoren[$j]->Name;
+	
+						$autorlist = implode(", ", $autornamen);
 					}
 					echo htmlspecialchars($autorlist);
 				?></td>
@@ -89,9 +92,8 @@
 			<?php
 				require_once("include/form_helper.php");
 				$owncomment = ""; // hat der user schon etwas kommentiert?
-				for ($i = 0; $i < count($literatur->Kommentare); $i++)
+				foreach ($literatur->Kommentare as $cur)
 				{
-					$cur = $literatur->Kommentare[$i];
 					if ($login->Nr == $cur->Verfasser_Nr)
 					{
 						$owncomment->Text = $cur->Text;
@@ -101,7 +103,7 @@
 			?>
 				<tr>
 					<th scope="row"><?=htmlspecialchars($cur->Verfasser_Name);?>:</th>	
-					<td><?=htmlspecialchars($cur->Text);?></td>
+					<td class="kommentar"><?=htmlspecialchars($cur->Text);?></td>
 					<td><?php
 						// Darf der User l?schen?
 						if ($login->Nr == $cur->Verfasser_Nr || $login->IsAdministrator() === true)

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/litmod.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -110,16 +110,15 @@
 			}
 
 			$autor = "";
-			if (isset($lit->Autoren) === true)
+			if (empty($lit->Autoren) === false)
 			{
-				for ($j = 0; $j < count($lit->Autoren); $j++)
+				$autornamen = array();
+				foreach ($lit->Autoren as $cur)
 				{
-					if ($j != 0)
-					{
-						$autor .= ", ";
-					}
-					$autor .= $lit->Autoren[$j]->Name;
+					$autornamen[] = $cur->Name;
 				}
+
+				$autor = implode(", ", $autornamen);
 			}
 
 			$verlag = $lit->Verlag;
@@ -153,7 +152,7 @@
 			}
 			else
 			{
-				$jahr = "";
+				$jahr = date("Y");
 			}
 
 			if (isset($_POST["stichworte"]) === true)
@@ -325,9 +324,8 @@
 					<tbody>
 				<?php
 			
-					for ($i = 0; $i < count($search->Treffer); $i++)
+					foreach ($search->Treffer as $cur)
 					{
-						$cur = $search->Treffer[$i];
 				?>
 					<tr>
 						<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/search.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -48,9 +48,8 @@
 		<tbody>
 	<?php
 
-		for ($i = 0; $i < count($search->Treffer); $i++)
+		foreach ($search->Treffer as $cur)
 		{
-			$cur = $search->Treffer[$i];
 	?>
 		<tr>
 			<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>

Modified: trunk/userlist.php
===================================================================
--- trunk/userlist.php	2006-06-09 19:09:10 UTC (rev 153)
+++ trunk/userlist.php	2006-06-10 10:34:12 UTC (rev 154)
@@ -17,12 +17,10 @@
 		</thead>
 		<tbody>
 			<?php
-				/// \todo richtig implementieren
 				require_once("include/mitglied.php");
 				$members = Mitglied::GetAll();
-				for ($i = 0; $i < count($members); $i++)
+				foreach ($members as $cur)
 				{
-					$cur = $members[$i];
 			?>
 			<tr>
 				<td><a href="user.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr); ?>"><?=htmlspecialchars($cur->Login); ?></a></td>



From fwilhelm at berlios.de  Sun Jun 11 22:53:38 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Sun, 11 Jun 2006 22:53:38 +0200
Subject: [Liman-svn] r155 - in trunk: . include/tests
Message-ID: <200606112053.k5BKrcDo025520@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-11 22:53:38 +0200 (Sun, 11 Jun 2006)
New Revision: 155

Added:
   trunk/include/tests/kommentar.php
   trunk/include/tests/literatur.php
   trunk/include/tests/mitglied.php
Modified:
   trunk/include/tests/autor.php
   trunk/include/tests/errormessage.php
   trunk/include/tests/sqldb_mock.php
   trunk/test.php
Log:
Unit-Tests f?\195?\188r Kommentar, Mitglied und Literatur erstellt (nicht fertig),
Fehler bei SQLDB_Mock::Verify behoben,
ErrorMessage keine Anzeige der Werte wenn Expected == Actual,
test.php verfollst?\195?\164ndigt

Modified: trunk/include/tests/autor.php
===================================================================
--- trunk/include/tests/autor.php	2006-06-10 10:34:12 UTC (rev 154)
+++ trunk/include/tests/autor.php	2006-06-11 20:53:38 UTC (rev 155)
@@ -1,4 +1,4 @@
-<?php
+?<?php
 	require_once("include/tests/errormessage.php");
 	
 	class AutorTest
@@ -85,18 +85,19 @@
 			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', $testAutoren[0] );
 			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', false  );
 			$sqldb->ExpectQuery( 'INSERT INTO.*', 1 );
-			$sqldb->ExpectQuery( 'SELECT @@IDENTITY.*', $testAutoren[1] ); /// \todo Das funktioniert weg MySQL3 nicht -> GetInsertID
 			
 			$autoren = Autor::Split( $testAutorNamen );
+
+			$result = $sqldb->Verify();
+			if( $result !== false )
+			{
+				$result->Unit = 'Autor';
+				$result->Test = 'Split';
+				return $result;
+			}
 			
 			if( count($autoren) != count($testAutoren) )
 				return new ErrorMessage( 'Autor', 'Split', 'Anzahl Autoren', count($testAutoren), count($autoren) );
-				
-			for( $i = 0; $i < count($autoren); $i++ )
-			{
-				if( $autoren[$i]->Nr != $testAutoren[$i]->Nr )
-					return new ErrorMessage( 'Autor', 'Split', "Autor[$i]->Nr", $testAutoren[$i]->Nr, $autoren[$i]->Nr );
-			}
 			
 			return true;
 		}

Modified: trunk/include/tests/errormessage.php
===================================================================
--- trunk/include/tests/errormessage.php	2006-06-10 10:34:12 UTC (rev 154)
+++ trunk/include/tests/errormessage.php	2006-06-11 20:53:38 UTC (rev 155)
@@ -33,8 +33,11 @@
 				}
 			}
 			
-			return "Test".$testcase." Fehlgeschlagen. Grund: ".$this->Message.
-			       " - Erwartet: <".$this->Expected."> Ist: <".$this->Actual.">";
+			$values = "";
+			if( $this->Actual != $this->Expected )
+				$values = " - Erwartet: <".$this->Expected."> Ist: <".$this->Actual.">";
+			
+			return "Test".$testcase." Fehlgeschlagen. Grund: ".$this->Message.$values;
 		}
 	}
 ?>

Added: trunk/include/tests/kommentar.php
===================================================================
--- trunk/include/tests/kommentar.php	2006-06-10 10:34:12 UTC (rev 154)
+++ trunk/include/tests/kommentar.php	2006-06-11 20:53:38 UTC (rev 155)
@@ -0,0 +1,58 @@
+<?php
+	require_once("include/tests/errormessage.php");
+	
+	class KommentarTest
+	{
+		function Setup()
+		{
+		}
+		
+		function TearDown()
+		{
+			global $sqldb;
+			
+			$sqldb->Verify();
+		}
+		
+		function ConstructorTest()
+		{
+			$testData = new stdObject();
+			$testData->Nr = 1;
+			$testData->Text = "Das ist ein Kommentar";
+			$testData->Mitglieds_Nr = 2;
+			$testData->Vorname = "Max";
+			$testData->Nachname = "Mustermann";
+			
+			$kommentar = new Kommentar($testData);
+			
+			if( $testData->Nr != $kommentar->Nr )
+				return new ErrorMessage( 'Kommentar', 'ctor', 'Kommentarnummer falsch', $testData->Nr, $kommentar->Nr );
+				
+			if( $testData->Text != $kommentar->Text )
+				return new ErrorMessage( 'Kommentar', 'ctor', 'Kommenttext falsch', $testData->Text, $kommentar->Text );
+				
+			if( $testData->Mitglieds_Nr != $kommentar->Verfasser_Nr )
+				return new ErrorMessage( 'Kommentar', 'ctor', 'Verfassernummer falsch', $testData->Mitglieds_Nr, $kommentar->Verfasser_Nr );
+				
+			if( $testData->Vorname." ".$testData->Nachname != $kommentar->Verfasser_Name )
+				return new ErrorMessage( 'Kommentar', 'ctor', 'Verfassername falsch', $testData->Vorname." ".$testData->Nachname, $kommentar->Verfasser_Name );
+				
+			return true; 
+		}
+		
+		function GetAll()
+		{
+			return new ErrorMessage( 'Kommentar', 'GetAll', 'Test nicht implementiert', null, null  );
+		}
+		
+		function Insert()
+		{
+			return new ErrorMessage( 'Kommentar', 'Insert', 'Test nicht implementiert', null, null  );
+		}
+		
+		function Update()
+		{
+			return new ErrorMessage( 'Kommentar', 'Update', 'Test nicht implementiert', null, null  );
+		}
+	}
+?>

Added: trunk/include/tests/literatur.php
===================================================================
--- trunk/include/tests/literatur.php	2006-06-10 10:34:12 UTC (rev 154)
+++ trunk/include/tests/literatur.php	2006-06-11 20:53:38 UTC (rev 155)
@@ -0,0 +1,42 @@
+<?php
+	require_once("include/tests/errormessage.php");
+	
+	class LiteraturTest
+	{
+		function Setup()
+		{
+		}
+		
+		function TearDown()
+		{
+			global $sqldb;
+			
+			$sqldb->Verify();
+		}
+		
+		function ConstructorTest()
+		{
+			return new ErrorMessage( 'Literatur', 'ctor', 'Test nicht implementiert', null, null );
+		}
+		
+		function Insert()
+		{
+			return new ErrorMessage( 'Literatur', 'Insert', 'Test nicht implementiert', null, null );
+		}
+		
+		function Update()
+		{
+			return new ErrorMessage( 'Literatur', 'Update', 'Test nicht implementiert', null, null );
+		}
+		
+		function InsertBibtex()
+		{
+			return new ErrorMessage( 'Literatur', 'InsertBibtex', 'Test nicht implementiert', null, null );
+		}
+		
+		function ToBibtex()
+		{
+			return new ErrorMessage( 'Literatur', 'ToBibtex', 'Test nicht implementiert', null, null );
+		}
+	}
+?>

Added: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-10 10:34:12 UTC (rev 154)
+++ trunk/include/tests/mitglied.php	2006-06-11 20:53:38 UTC (rev 155)
@@ -0,0 +1,66 @@
+<?php
+	require_once("include/tests/errormessage.php");
+	
+	class MitgliedTest
+	{
+		function Setup()
+		{
+		}
+		
+		function TearDown()
+		{
+			global $sqldb;
+			
+			$sqldb->Verify();
+		}
+		
+		function ConstructorTest()
+		{
+			global $sqldb;
+			
+			$testData = new stdObject();
+			$testData->Nr = 1;
+			$testData->Login = "Maximator";
+			$testData->Passwort = Mitglied::PasswordHash("passwort");
+			$testData->Vorname = "Max";
+			$testData->Nachname = "Mustermann";
+			$testData->Email != "max.mustermann at gmx.de";
+			$testData->Rechte = "Benutzer";
+			
+			$sqldb->ExpectQuery("SELECT.*FROM.*Mitglieder.*WHERE.*Mitglieds_Nr.*LIMIT 1", $testData );
+			
+			$mitglied = new Mitglied(1);
+			
+			$result = $sqldb->Verify();
+			if( $result !== true )
+			{
+				$result->Unit = 'Mitglied';
+				$result->Test = 'ctor';
+				return $result;
+			}
+			
+			if( $mitglied->Nr != $testData->Mitglieds_Nr )
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Mitgliedsnummer falsch', $testData->Mitglieds_Nr, $mitglied->Mitglieds_Nr );
+				
+			if( $mitglied->Login != $testData->Login )
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Login falsch', $testData->Login, $mitglied->Login );
+			
+			if( $mitglied->Passwort != $testData->Passwort )
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Passwort falsch', $testData->Passwort, $mitglied->Passwort );
+				
+			if( $mitglied->Vorname != $testData->Vorname )
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Vorname falsch', $testData->Vorname, $mitglied->Vorname );
+				
+			if( $mitglied->Nachname != $testData->Name )
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Name falsch', $testData->Name, $mitglied->Name );
+				
+			if( $mitglied->Email != $testData->Email )
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Email falsch', $testData->Email, $mitglied->Email );
+				
+			if( $mitglied->Rechte != 1 )
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Email falsch', 1, $mitglied->Rechte );
+				
+			return true;
+		}
+	}
+?>

Modified: trunk/include/tests/sqldb_mock.php
===================================================================
--- trunk/include/tests/sqldb_mock.php	2006-06-10 10:34:12 UTC (rev 154)
+++ trunk/include/tests/sqldb_mock.php	2006-06-11 20:53:38 UTC (rev 155)
@@ -1,4 +1,4 @@
-<?php
+?<?php
 	require_once("include/tests/errormessage.php");
 	
 	class SQLDB_Mock
@@ -147,12 +147,13 @@
 		{
 			$ret = $this->error;
 			/// \todo: Wieso darf man nicht auch mal ohne Fehlermeldung auskommen? :(
-			if( $ret === false )
+			if( ($ret === false) && (count($this->results) != $this->queryCounter) )
 			{
 				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
 			}
 			
 			// reset
+			$this->error = false;
 			$this->error_msg = false;
 			$this->patterns = array();
 			$this->results = array();

Modified: trunk/test.php
===================================================================
--- trunk/test.php	2006-06-10 10:34:12 UTC (rev 154)
+++ trunk/test.php	2006-06-11 20:53:38 UTC (rev 155)
@@ -81,6 +81,80 @@
 				$searchtest->TearDown();
 				echo "</tr>";
 				
+				// Kommentar
+				require_once("include/kommentar.php");
+				require_once("include/tests/kommentar.php");
+				$kommentarTest = new KommentarTest();
+
+				echo "<tr><td>Kommentar::Kommentar()</td>";
+				$kommentarTest->Setup();
+				PrintTestResults($kommentarTest->ConstructorTest());
+				$kommentarTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Kommentar::GetAll()</td>";
+				$kommentarTest->Setup();
+				PrintTestResults($kommentarTest->GetAll());
+				$kommentarTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Kommentar::Insert()</td>";
+				$kommentarTest->Setup();
+				PrintTestResults($kommentarTest->Insert());
+				$kommentarTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Kommentar::Update()</td>";
+				$kommentarTest->Setup();
+				PrintTestResults($kommentarTest->Update());
+				$kommentarTest->TearDown();
+				echo "</tr>";
+				
+				// Literatur
+				require_once("include/literatur.php");
+				require_once("include/tests/literatur.php");
+				$literaturTest = new LiteraturTest();
+
+				echo "<tr><td>Literatur::Literatur()</td>";
+				$literaturTest->Setup();
+				PrintTestResults($literaturTest->ConstructorTest());
+				$literaturTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Literatur::Insert()</td>";
+				$literaturTest->Setup();
+				PrintTestResults($literaturTest->Insert());
+				$literaturTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Literatur::Update()</td>";
+				$literaturTest->Setup();
+				PrintTestResults($literaturTest->Update());
+				$literaturTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Literatur::InsertBibtex()</td>";
+				$literaturTest->Setup();
+				PrintTestResults($literaturTest->InsertBibtex());
+				$literaturTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Literatur::ToBibtex()</td>";
+				$literaturTest->Setup();
+				PrintTestResults($literaturTest->ToBibtex());
+				$literaturTest->TearDown();
+				echo "</tr>";
+				
+				// Mitglied
+				require_once("include/mitglied.php");
+				require_once("include/tests/mitglied.php");
+				$mitgliedTest = new MitgliedTest();
+
+				echo "<tr><td>Mitglied::Mitglied()</td>";
+				$mitgliedTest->Setup();
+				PrintTestResults($mitgliedTest->ConstructorTest());
+				$mitgliedTest->TearDown();
+				echo "</tr>";
 			?>
 		</tbody>
 	</table>



From lazhur at berlios.de  Mon Jun 12 08:15:46 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 12 Jun 2006 08:15:46 +0200
Subject: [Liman-svn] r156 - trunk/include/tests
Message-ID: <200606120615.k5C6Fk98026980@sheep.berlios.de>

Author: lazhur
Date: 2006-06-12 08:15:11 +0200 (Mon, 12 Jun 2006)
New Revision: 156

Modified:
   trunk/include/tests/autor.php
   trunk/include/tests/kommentar.php
   trunk/include/tests/mitglied.php
   trunk/include/tests/sqldb_mock.php
Log:
- kleinere Fehler in Unittests korrigiert


Modified: trunk/include/tests/autor.php
===================================================================
--- trunk/include/tests/autor.php	2006-06-11 20:53:38 UTC (rev 155)
+++ trunk/include/tests/autor.php	2006-06-12 06:15:11 UTC (rev 156)
@@ -1,4 +1,4 @@
-?<?php
+<?php
 	require_once("include/tests/errormessage.php");
 	
 	class AutorTest

Modified: trunk/include/tests/kommentar.php
===================================================================
--- trunk/include/tests/kommentar.php	2006-06-11 20:53:38 UTC (rev 155)
+++ trunk/include/tests/kommentar.php	2006-06-12 06:15:11 UTC (rev 156)
@@ -16,7 +16,7 @@
 		
 		function ConstructorTest()
 		{
-			$testData = new stdObject();
+			$testData = new stdClass();
 			$testData->Nr = 1;
 			$testData->Text = "Das ist ein Kommentar";
 			$testData->Mitglieds_Nr = 2;

Modified: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-11 20:53:38 UTC (rev 155)
+++ trunk/include/tests/mitglied.php	2006-06-12 06:15:11 UTC (rev 156)
@@ -18,13 +18,13 @@
 		{
 			global $sqldb;
 			
-			$testData = new stdObject();
-			$testData->Nr = 1;
+			$testData = new stdClass();
+			$testData->Mitglieds_Nr = 1;
 			$testData->Login = "Maximator";
 			$testData->Passwort = Mitglied::PasswordHash("passwort");
 			$testData->Vorname = "Max";
-			$testData->Nachname = "Mustermann";
-			$testData->Email != "max.mustermann at gmx.de";
+			$testData->Name = "Mustermann";
+			$testData->Email = "max.mustermann at gmx.de";
 			$testData->Rechte = "Benutzer";
 			
 			$sqldb->ExpectQuery("SELECT.*FROM.*Mitglieder.*WHERE.*Mitglieds_Nr.*LIMIT 1", $testData );
@@ -40,7 +40,7 @@
 			}
 			
 			if( $mitglied->Nr != $testData->Mitglieds_Nr )
-				return new ErrorMessage( 'Mitglied', 'ctor', 'Mitgliedsnummer falsch', $testData->Mitglieds_Nr, $mitglied->Mitglieds_Nr );
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Mitgliedsnummer falsch', $testData->Mitglieds_Nr, $mitglied->Nr );
 				
 			if( $mitglied->Login != $testData->Login )
 				return new ErrorMessage( 'Mitglied', 'ctor', 'Login falsch', $testData->Login, $mitglied->Login );
@@ -52,13 +52,13 @@
 				return new ErrorMessage( 'Mitglied', 'ctor', 'Vorname falsch', $testData->Vorname, $mitglied->Vorname );
 				
 			if( $mitglied->Nachname != $testData->Name )
-				return new ErrorMessage( 'Mitglied', 'ctor', 'Name falsch', $testData->Name, $mitglied->Name );
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Name falsch', $testData->Name, $mitglied->Nachname );
 				
 			if( $mitglied->Email != $testData->Email )
 				return new ErrorMessage( 'Mitglied', 'ctor', 'Email falsch', $testData->Email, $mitglied->Email );
 				
 			if( $mitglied->Rechte != 1 )
-				return new ErrorMessage( 'Mitglied', 'ctor', 'Email falsch', 1, $mitglied->Rechte );
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Rechte falsch', 1, $mitglied->Rechte );
 				
 			return true;
 		}

Modified: trunk/include/tests/sqldb_mock.php
===================================================================
--- trunk/include/tests/sqldb_mock.php	2006-06-11 20:53:38 UTC (rev 155)
+++ trunk/include/tests/sqldb_mock.php	2006-06-12 06:15:11 UTC (rev 156)
@@ -1,4 +1,4 @@
-?<?php
+<?php
 	require_once("include/tests/errormessage.php");
 	
 	class SQLDB_Mock
@@ -146,11 +146,14 @@
 		function Verify()
 		{
 			$ret = $this->error;
-			/// \todo: Wieso darf man nicht auch mal ohne Fehlermeldung auskommen? :(
 			if( ($ret === false) && (count($this->results) != $this->queryCounter) )
 			{
 				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
 			}
+			else
+			{
+				$ret = true;
+			}
 			
 			// reset
 			$this->error = false;



From lazhur at berlios.de  Mon Jun 12 13:41:41 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 12 Jun 2006 13:41:41 +0200
Subject: [Liman-svn] r157 - trunk/include/tests
Message-ID: <200606121141.k5CBffcR030634@sheep.berlios.de>

Author: lazhur
Date: 2006-06-12 13:41:38 +0200 (Mon, 12 Jun 2006)
New Revision: 157

Modified:
   trunk/include/tests/sqldb_mock.php
Log:
- Fehlende ?\195?\156berpr?\195?\188fung in SQLDB_MOCK::Verify hinzugef?\195?\188gt


Modified: trunk/include/tests/sqldb_mock.php
===================================================================
--- trunk/include/tests/sqldb_mock.php	2006-06-12 06:15:11 UTC (rev 156)
+++ trunk/include/tests/sqldb_mock.php	2006-06-12 11:41:38 UTC (rev 157)
@@ -150,7 +150,7 @@
 			{
 				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
 			}
-			else
+			elseif ($ret === false)
 			{
 				$ret = true;
 			}



From fwilhelm at berlios.de  Mon Jun 12 16:45:59 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Mon, 12 Jun 2006 16:45:59 +0200
Subject: [Liman-svn] r158 - trunk/include/tests
Message-ID: <200606121445.k5CEjxvL004064@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-12 16:45:58 +0200 (Mon, 12 Jun 2006)
New Revision: 158

Modified:
   trunk/include/tests/sqldb_mock.php
Log:
GetError korregiert

Modified: trunk/include/tests/sqldb_mock.php
===================================================================
--- trunk/include/tests/sqldb_mock.php	2006-06-12 11:41:38 UTC (rev 157)
+++ trunk/include/tests/sqldb_mock.php	2006-06-12 14:45:58 UTC (rev 158)
@@ -82,11 +82,9 @@
 		
 		function GetError()
 		{
-			$error = array();
-
 			// was k?nnte hier rein?
 
-			return $error;
+			return $this->error_msg;
 		}
 
 		function GetInsertID()



From lazhur at berlios.de  Mon Jun 12 16:59:25 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 12 Jun 2006 16:59:25 +0200
Subject: [Liman-svn] r159 - in trunk: . include
Message-ID: <200606121459.k5CExP9h005291@sheep.berlios.de>

Author: lazhur
Date: 2006-06-12 16:59:24 +0200 (Mon, 12 Jun 2006)
New Revision: 159

Modified:
   trunk/bibtex.php
   trunk/commentmod.php
   trunk/include/autor.php
   trunk/include/config.php
   trunk/include/global.php
   trunk/include/header.php
   trunk/include/kommentar.php
   trunk/include/literatur.php
   trunk/include/literaturart.php
   trunk/include/sqldb.php
   trunk/index.php
Log:
- vereinzelt Kommentare hinzugef?\195?\188gt
- $basepath entfernt und GZIP-Kompression optional gemacht


Modified: trunk/bibtex.php
===================================================================
--- trunk/bibtex.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/bibtex.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -4,6 +4,7 @@
 
 	require_once("include/header.php");
 
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
 	if ($login->IsMember() === false)
 	{
 		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
@@ -13,71 +14,79 @@
 ?>
 <div id="cfront" class="content">
 <?php
+	// Zeige Importformular, wenn noch keine Daten gesendet wurden
 	if (empty($_FILES["bibtexfile"]) === true && empty($_POST["bibtextext"]) === true)
 	{
 	?>
-	<form action="bibtex.<?=$ext;?>" id="bibtexfileform" method="post" enctype="multipart/form-data">
-	<fieldset>
-   		 <legend><b>BibTeX-Datei importieren</b></legend>
+		<form action="bibtex.<?=$ext;?>" id="bibtexfileform" method="post" enctype="multipart/form-data">
+		<fieldset>
+			<legend><b>BibTeX-Datei importieren</b></legend>
+		
+		
+			<table class="bibteximport">
+				<tbody>
+					<tr>
+						<th scope=row><label for="bibtextext">Datei:</label></th>
+						<td><input class="input_file" type="file" id="bibtexfile" name="bibtexfile"></td>
+					</tr>
+					<tr>
+						<th></th>
+						<td><input type="submit" value="Importieren"></td>
+					</tr>
+				</tbody>
+			</table>
+		</fieldset>
+		</form>
 	
-	
-		<table class="bibteximport">
-			<tbody>
-				<tr>
-					<th scope=row><label for="bibtextext">Datei:</label></th>
-					<td><input class="input_file" type="file" id="bibtexfile" name="bibtexfile"></td>
-				</tr>
-				<tr>
-					<th></th>
-					<td><input type="submit" value="Importieren"></td>
-				</tr>
-			</tbody>
-		</table>
-	</fieldset>
-	</form>
-
-	<hr>
-	
-	<form action="bibtex.<?=$ext;?>" id="bibtextextform" method="post">
-	<fieldset>
-   		<legend><b>BibTeX importieren</b></legend>
-		<table class="bibteximport">
-			<tbody>
-				<tr>
-					<th scope=row><label for="bibtextext">BibTeX:</label></th>
-					<td><textarea cols="20" rows="10" name="bibtextext" id="bibtextext"></textarea></td>
-				</tr>
-				<tr>
-					<th></th>
-					<td><input type="submit" value="Importieren"></td>
-				</tr>
-			</tbody>
-		</table>
-	</fieldset>
-	</form>
+		<hr>
+		
+		<form action="bibtex.<?=$ext;?>" id="bibtextextform" method="post">
+		<fieldset>
+			<legend><b>BibTeX importieren</b></legend>
+			<table class="bibteximport">
+				<tbody>
+					<tr>
+						<th scope=row><label for="bibtextext">BibTeX:</label></th>
+						<td><textarea cols="20" rows="10" name="bibtextext" id="bibtextext"></textarea></td>
+					</tr>
+					<tr>
+						<th></th>
+						<td><input type="submit" value="Importieren"></td>
+					</tr>
+				</tbody>
+			</table>
+		</fieldset>
+		</form>
 	<?php
 	}
 	else
 	{
+		// BibTeX-Daten entweder von Dateiupload oder ?bergebenen Textdaten
 		$bibtex = "";
 		if (empty($_FILES["bibtexfile"]) === false)
 		{
+			// Wenn Datei hochgeladen wurde, lese Inhalt der Datei
 			$bibtex = file_get_contents($_FILES["bibtexfile"]["tmp_name"]);
 		}
 		elseif (empty($_POST["bibtextext"]) === false)
 		{
+			// Wenn Textdaten hochgeladen wurden, entferne automatisch
+			// hinzugef?gte Backslashes vor Zeichen mit besonderer Bedeutung
 			$bibtex = stripslashes($_POST["bibtextext"]);
 		}
 
+		// Fehler, wenn "nichts" hochgeladen/?bergeben wurde
 		if ($bibtex === false || empty($bibtex) === true)
 		{
 			echo "<div id=\"error\">Konnte nichts zum importieren lesen</div>";
 		}
 		else
 		{
+			// Importiere BibTeX in Datenbank
 			require_once("include/literatur.php");
 			$imported = Literatur::InsertBibTeX($bibtex);
 
+			// Gebe je nach Anzahl importierter Literatureintr?ge Text aus
 			switch ($imported)
 			{
 			case 0:

Modified: trunk/commentmod.php
===================================================================
--- trunk/commentmod.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/commentmod.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -1,4 +1,5 @@
 <?php
+	// W?hle Seitentitel nach ausgew?hlter Aktion
 	if (isset($_GET["delete"]) === true)
 	{
 		$title = "Kommentar l?schen";
@@ -15,6 +16,7 @@
 
 	require_once("include/header.php");
 
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
 	if ($login->IsMember() === false)
 	{
 		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
@@ -23,6 +25,8 @@
 	}
 	elseif ($login->IsAdministrator() === false)
 	{
+		// Wenn keine Administratorrechte vorhanden sind
+		// d?rfen nur die eigenen Daten ge?ndert werden
 		$_GET["userid"] = $login->Nr;
 		$_POST["userid"] = $login->Nr;
 	}
@@ -31,20 +35,27 @@
 <?php
 	require_once("include/kommentar.php");
 	require_once("include/form_helper.php");
+
+	// Suche gew?hlte Aktion
 	if (isset($_GET["delete"]) === true)
 	{
+		// L?schen wenn akzeptiert wurde
 		if (isset($_POST["accept"]) === true)
 		{
+			// Fehlerhafte Daten zum L?schen ?bertragen?
 			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
 			{
+				// Wenn ja, gebe Fehler aus
 				echo "<p id=\"error\">Kommentar konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
 			}
 			else
 			{
+				// Wenn nicht, l?sche Kommentar und gebe Erfolgsmeldung aus
 				Kommentar::Delete($_POST["id"]);
 				echo "<p style=\"text-align: center\">Kommentar wurde entfernt</p>";
 			}
 
+			// Wurde eine Literaturnummer ?bergeben, gebe Zur?ckbutton aus
 			if (empty($_POST["litid"]) === false)
 			{
 				echo form_back("lit.$ext", $_POST["litid"]);
@@ -52,6 +63,7 @@
 		}
 		else
 		{
+			// Frage ob gel?scht Kommentar werden soll
 			require_once("include/form_helper.php");
 			echo "<div id=\"warning\" style=\"margin-top: 2em\">";
 			echo "Wollen sie den Kommentar wirklich entfernen?";
@@ -69,18 +81,22 @@
 	}
 	elseif  (isset($_GET["insert"]) === true)
 	{
+		// Fehlerhafte Daten zum Anlegen ?bertragen?
 		if (isset($_POST["text"]) === false ||
 			empty($_POST["userid"]) === true || is_numeric($_POST["userid"]) === false ||
 			empty($_POST["litid"]) === true || is_numeric($_POST["litid"]) === false)
 		{
+			// Wenn ja, gebe Fehler aus
 			echo "<p id=\"error\">Kommentar konnte nicht angelegt werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
 		}
 		else
 		{
+			// Wenn nicht, lege Kommentar an und gebe Erfolgsmeldung aus
 			Kommentar::Insert($_POST["text"], $_POST["userid"], $_POST["litid"]);
 			echo "<p style=\"text-align: center\">Kommentar wurde angelegt</p>";
 		}
 
+		// Wurde eine Literaturnummer ?bergeben, gebe Zur?ckbutton aus
 		if (empty($_POST["litid"]) === false)
 		{
 			echo form_back("lit.$ext", $_POST["litid"]);
@@ -88,17 +104,21 @@
 	}
 	elseif (isset($_GET["update"]) === true)
 	{
+		// Fehlerhafte Daten zum ?ndern ?bertragen?
 		if (isset($_POST["text"]) === false ||
 			empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
 		{
+			// Wenn ja, gebe Fehler aus
 			echo "<p id=\"error\">Kommentar konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
 		}
 		else
 		{
+			// Wenn nicht, ?ndere Kommentar und gebe Erfolgsmeldung aus
 			Kommentar::Update($_POST["id"], $_POST["text"]);
 			echo "<p style=\"text-align: center\">Kommentar wurde ge?ndert</p>";
 		}
 
+		// Wurde eine Literaturnummer ?bergeben, gebe Zur?ckbutton aus
 		if (empty($_POST["litid"]) === false)
 		{
 			echo form_back("lit.$ext", $_POST["litid"]);

Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/autor.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -45,8 +45,10 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// Entferne Autoren ohne Verbindung in Literatur_Autor zur Literatur
 				$sql = "DELETE autoren, connect
 						FROM ".$db_config['prefix']."Autoren AS autoren
 						LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
@@ -56,6 +58,7 @@
 				if ($sqldb->Query($sql) === false)
 				{
 					// Workaround f?r MySQL < 4
+					// Finde Autoren ohne Verbindung in Literatur_Autor zur Literatur
 					$sql = "SELECT autoren.Autor_Nr AS Nr
 							FROM ".$db_config['prefix']."Autoren AS autoren
 							LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
@@ -63,19 +66,23 @@
 							WHERE connect.Autor_Nr is NULL";
 					$sqldb->Query($sql);
 
+					// Lese alle Autorennummern aus
 					$authorid = array();
 					while ($line = $sqldb->Fetch())
 					{
 						$authorid[] = $line->Nr;
 					}
 
+					// Wenn Autoren gefunden worden
 					if (empty($authorid) === false)
 					{
+						// Erstelle Kommagetrennte Liste der Autorennummern
+						$idlist = implode(", ", $authorid);
+
+						// L?sche gefundene Autoren
 						$sqlDelete = "DELETE FROM ".$db_config['prefix']."Autoren
 								WHERE Autor_Nr IN (";
-						$idlist = implode(", ", $authorid);
-						$sqlDelete .= $idlist.")";
-
+								$sqlDelete .= $idlist.")";
 						$sqldb->Query($sqlDelete);
 					}
 				}
@@ -95,13 +102,16 @@
 		{
 			global $db_config, $sqldb;
 
-			$authors = array();
+			// Lese alle Autoren mit Verbindung zu Literatur in Literatur_Autor
 			$sql = "SELECT  autoren.Autor_Nr AS Nr, Autorname AS Name
 					FROM ".$db_config['prefix']."Literatur_Autor AS connect
 					INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 					ON connect.Autor_Nr = autoren.Autor_Nr
 					WHERE Literatur_Nr = '$literatur_nr'";
 			$sqldb->Query($sql);
+
+			// Lese Autoren aus und erstelle Array aus gefundenen Autoren
+			$authors = array();
 			while ($cur = $sqldb->Fetch())
 			{
 				$authors[] = new Autor($cur);
@@ -130,25 +140,34 @@
 			global $db_config, $sqldb, $login;
 			$authorNumbers = array();
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// Trenne kommagetrennte Liste der Autoren an Kommas auf
 				$authorNames = array();
-				$authorNames = split( ",", $autoren );
-			
-				for( $i = 0; $i < count($authorNames); $i++ )
+				$authorNames = split(",", $autoren);
+
+				// Suche ob jeder Autorname in kommagetrennter Liste in Autoren steht
+				foreach ($authorNames as $autor)
 				{
+					// Suche nach Autoreintrag
 					$sqlSelect = "SELECT Autor_Nr AS Nr FROM ".$db_config['prefix']."Autoren AS autoren
-							WHERE Autorname = '".trim($authorNames[$i])."'";
+							WHERE Autorname = '".trim($autor)."'";
 					$sqldb->Query( $sqlSelect );
 					
-					if( $cur = $sqldb->Fetch() )
+					// Existiert der Eintrag?
+					if ($cur = $sqldb->Fetch())
 					{
+						// Wenn ja, speichere Autornummer f?r R?ckgabe
 						$authorNumbers[] = $cur->Nr;
 					}
 					else
 					{
-						$sqlInsert = "INSERT INTO ".$db_config['prefix']."Autoren VALUES (NULL, '".trim($authorNames[$i])."')";
-						$sqldb->Query( $sqlInsert );
+						// Wenn nicht, dann f?ge Autorname in Datenbank ein
+						$sqlInsert = "INSERT INTO ".$db_config['prefix']."Autoren VALUES (NULL, '".trim($autor)."')";
+						$sqldb->Query($sqlInsert);
+
+						// Speichere neue Autornummer f?r R?ckgabe
 						$authorNumbers[] = $sqldb->GetInsertID();
 					}
 				}

Modified: trunk/include/config.php
===================================================================
--- trunk/include/config.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/config.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -10,4 +10,5 @@
 	$db_config['prefix'] = "liman_";
 
 	$ext = "php";	// Endung der von den Usern abrufbaren Dateien
+	$gz_enable = true; // aktiviere GZIP-Kompression der HTML-Dateien
 ?>

Modified: trunk/include/global.php
===================================================================
--- trunk/include/global.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/global.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -1,9 +1,4 @@
 <?php
-	if (empty($basepath))
-	{
-		$basepath = "./";
-	}
-
 	// Benutze Backslashes, wenn dies nicht automatisch gemacht wird
 	if( !get_magic_quotes_gpc())
 	{
@@ -30,11 +25,8 @@
 			}
 		}
 	
-		//quote_array($HTTP_GET_VARS);
 		quote_array($_GET);
-		//quote_array($HTTP_POST_VARS);
 		quote_array($_POST);
-		//quote_array($HTTP_COOKIE_VARS);
 		quote_array($_COOKIE);
 	}
 
@@ -69,7 +61,7 @@
 		return $str;
 	}
 
-	require_once($basepath."include/config.php");
-	require_once($basepath."include/sqldb.php");
-	require_once($basepath."include/login.php");
-?>
\ No newline at end of file
+	require_once("include/config.php");
+	require_once("include/sqldb.php");
+	require_once("include/login.php");
+?>

Modified: trunk/include/header.php
===================================================================
--- trunk/include/header.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/header.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -1,16 +1,14 @@
-<?php
-	
-	ob_start('ob_gzhandler'); 
+<?php 
 	header("Content-Language: de");
-
 	header("Content-type: text/html; charset=UTF-8");
 
-	if (empty($basepath))
-                $basepath = "./";
-	elseif (isset($_GET["basepath"]) || isset($_POST["basepath"]))
-		die("Don't send basepath with request");
+	require_once("include/global.php");
 
-	require_once($basepath."include/global.php");
+	// Aktiviere GZIP-Kompression, wenn gew?nscht
+	if (isset($gz_enable) === true && $gz_enable === true)
+	{
+		ob_start('ob_gzhandler');
+	}
 ?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <html>
@@ -18,8 +16,8 @@
 		<title><?=empty($title)?"":$title." :: "; ?>LiMan</title>
 		<link rel="SHORTCUT ICON" href="favicon.ico">
 		<style type="text/css" title="LiMan 1.0" media="screen,projection">
-			@import "<?=$basepath;?>design/liman.css";
-			<?=empty($extracss)?"":"@import \"$basepath/design/".$extracss."\";\n"; ?>
+			@import "design/liman.css";
+			<?=empty($extracss)?"":"@import \"design/".$extracss."\";\n"; ?>
 		</style>
 		<?=empty($extrahead)?"":$extrahead."\n"; ?>
 		<meta name="description" content="Literature Manager">
@@ -28,7 +26,7 @@
 		<meta name="robots" content="follow">
 		<meta http-equiv="content-language" content="de">
 		<meta name="author" content="Simon Wunderlich">
-		<link rel="home" title="Home" href="<?=$basepath."index.".$ext;?>">
+		<link rel="home" title="Home" href="index.<?=$ext;?>">
 	</head>
 	<body id="liman">
 		<div id="container">
@@ -61,24 +59,24 @@
 					<?php
 						if ($login->IsMember() === false)
 						{
-					?>
-						<form action="login.<?=$ext;?>" id="loginform" method="post">
-							<div>
-							<label for="loginname">Login:</label><input id="loginname" name="loginname" value="" type="text">
-							<label for="passwort">Passwort:</label><input id="passwort" name="passwort" type="password">
-							<input type="submit" value="Login">
-							</div>
-						</form>
-					<?php
+						?>
+							<form action="login.<?=$ext;?>" id="loginform" method="post">
+								<div>
+								<label for="loginname">Login:</label><input id="loginname" name="loginname" value="" type="text">
+								<label for="passwort">Passwort:</label><input id="passwort" name="passwort" type="password">
+								<input type="submit" value="Login">
+								</div>
+							</form>
+						<?php
 						}
 						else
 						{
-					?>
-						<form action="login.<?=$ext;?>?logout" id="loginform" method="post">
-							<div><input type="submit" value="Logout">
-							</div>
-						</form>
-					<?php
+						?>
+							<form action="login.<?=$ext;?>?logout" id="loginform" method="post">
+								<div><input type="submit" value="Logout">
+								</div>
+							</form>
+						<?php
 						}
 					?>
 				</div>

Modified: trunk/include/kommentar.php
===================================================================
--- trunk/include/kommentar.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/kommentar.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -63,6 +63,8 @@
 
 			if ($login->IsAdministrator() === true)
 			{
+				// Wenn Administratorrechte vorliegen,
+				// L?sche Kommentar mit Kommentar_Nr = $nr
 				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
 						WHERE Kommentar_Nr = '$nr'
 						LIMIT 1";
@@ -70,6 +72,8 @@
 			}
 			elseif ($login->IsMember() === true)
 			{
+				// Wenn Mitgliedsrechte vorliegen, l?sche Kommentar mit Kommentar_Nr = $nr
+				// nur wenn Mitglieds_Nr des aktuellen Nutzers
 				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
 						WHERE Kommentar_Nr = '$nr' AND Mitglieds_Nr='".$login->Nr."'
 						LIMIT 1";
@@ -90,8 +94,10 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// L?sche alle Kommentare zu bestimmten Literatur
 				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
 						WHERE Literatur_Nr = '$literatur_nr'";
 				$sqldb->Query($sql);
@@ -111,8 +117,10 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsAdministrator() === true)
 			{
+				// L?sche alle Kommentare von bestimmten Mitglied
 				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
 						WHERE Mitglieds_Nr = '$member_nr'";
 				$sqldb->Query($sql);
@@ -132,7 +140,7 @@
 		{
 			global $db_config, $sqldb;
 
-			$authors = array();
+			// Lese alle Kommentare zu bestimmter Literatur
 			$sql = "SELECT  Kommentar_Nr AS Nr, Kommentartext AS Text, mitglieder.Mitglieds_Nr AS Mitglieds_Nr, Vorname, Name AS Nachname
 					FROM ".$db_config['prefix']."Kommentare AS kommentare
 					INNER JOIN  ".$db_config['prefix']."Mitglieder AS mitglieder
@@ -141,6 +149,8 @@
 					ORDER BY Nr ASC";
 			$sqldb->Query($sql);
 
+			// Lese Kommentare aus und erstelle Array aus gefundenen Kommentaren
+			$authors = array();
 			while ($cur = $sqldb->Fetch())
 			{
 				$authors[] = new Kommentar($cur);
@@ -172,22 +182,29 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Liegen Administratorrechte vor? Alternativ Mitgliedsrechte
+			// (aber nur, wenn der Verfasser gleich der eingeloggte User ist)
 			if ($login->IsAdministrator() === true ||
 				($login->IsMember() === true && $verfasser_nr == $login->Nr))
 			{
+				// Suche nach Literatureintrag mit ?bergebener Literatur_Nr $literatur_nr
 				$sqlExists = "SELECT Literatur_Nr FROM ".$db_config['prefix']."Bibliothek
 						WHERE Literatur_Nr='$literatur_nr'";
 				$sqldb->Query($sqlExists);
 
+				// Existiert eine Literatur mit $literatur_nr?
 				if ($sqldb->Fetch() !== false)
 				{
+					// Suche ob schon Kommentar von Mitglied zur Literatur existiert
 					$sqlAlready = "SELECT Kommentar_Nr FROM ".$db_config['prefix']."Kommentare
 							WHERE Literatur_Nr='$literatur_nr' AND Mitglieds_Nr='$verfasser_nr'";
 					$sqldb->Query($sqlAlready);
 
 					$cur = $sqldb->Fetch();
+					// Existiert noch kein Kommentar zur Literatur von Mitglied?
 					if ($cur === false)
 					{
+						// Wenn ja, f?ge neuen Kommentar hinzu, wenn Text angegeben wurde
 						if (empty($text) === false)
 						{
 							$sql = "INSERT INTO ".$db_config['prefix']."Kommentare
@@ -197,6 +214,7 @@
 					}
 					else
 					{
+						// Existiert schon ein Kommentar, dann ?ndere diesen
 						Kommentar::Update($cur->Kommentar_Nr, $text);
 					}
 				}
@@ -223,14 +241,20 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Wurde kein Text angegeben?
 			if (empty($text) === true)
 			{
+				// Wenn ja, l?sche Kommentar
 				Kommentar::Delete($nr);
 			}
 			else
 			{
+				// Wenn nicht, ?ndere Kommentar
+
 				if ($login->IsAdministrator() === true)
 				{
+					// Wenn Administratorrechte vorliegen,
+					// ?ndere Kommentar mit Kommentar_Nr = $nr
 					$sql = "UPDATE ".$db_config['prefix']."Kommentare
 							SET Kommentartext='$text'
 							WHERE Kommentar_Nr='$nr'
@@ -239,6 +263,8 @@
 				}
 				elseif ($login->IsMember() === true)
 				{
+					// Wenn Mitgliedsrechte vorliegen, ?ndere Kommentar mit Kommentar_Nr = $nr
+					// nur wenn Mitglieds_Nr des aktuellen Nutzers
 					$sql = "UPDATE ".$db_config['prefix']."Kommentare
 							SET Kommentartext='$text'
 							WHERE Kommentar_Nr='$nr' AND Mitglieds_Nr='".$login->Nr."'

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/literatur.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -51,11 +51,15 @@
 		function Literatur($nr)
 		{
 			global $db_config, $sqldb;
+
+			// Suche Literatur mit Literatur_Nr = $nr heraus
 			$sql = "SELECT Literatur_Nr, Art, Titel, Jahr, Verlag, ISBN, Beschreibung, Ort, Stichworte
 					FROM ".$db_config['prefix']."Bibliothek
 					WHERE Literatur_Nr='$nr'
 					LIMIT 1";
 			$sqldb->Query($sql);
+
+			// Lese gefundene Daten aus
 			if ($cur = $sqldb->Fetch())
 			{
 				$this->Nr = $cur->Literatur_Nr;
@@ -82,17 +86,23 @@
 		function ToBibtex()
 		{
 			$str = "";
+
+			// Wurde ein LiteraturArt-Objekt angelegt?
 			if (is_object($this->Art) === true)
 			{
+				// Lege Kopf des BibTeX-Eintrags an
 				$str = "@".$this->Art->GetBibtexText()."{".$this->Art->GetBibtexText().$this->Nr;
 				
-				if (!empty($this->Titel))
+				// Titel hinzuf?gen, wenn vorhanden
+				if (empty($this->Titel) === false)
 				{
 					$str .= ",\n\ttitle = \"".addslashes($this->Titel)."\"";
 				}
 	
+				// Autoren hinzuf?gen, wenn vorhanden
 				if (empty($this->Autoren) === false)
 				{
+					// Erstelle and-getrennte Liste der Autorennamen
 					$autornamen = array();
 					foreach ($this->Autoren as $autor)
 					{
@@ -103,26 +113,31 @@
 					$str .= ",\n\tauthor = \"".addslashes($autorlist)."\"";
 				}
 	
-				if (!empty($this->Jahr))
+				// Jahr hinzuf?gen, wenn vorhanden
+				if (empty($this->Jahr) === false)
 				{
 					$str .= ",\n\tyear = \"".addslashes($this->Jahr)."\"";
 				}
 	
-				if (!empty($this->Verlag))
+				// Verlag hinzuf?gen, wenn vorhanden
+				if (empty($this->Verlag) === false)
 				{
 					$str .= ",\n\tpublisher = \"".addslashes($this->Verlag)."\"";
 				}
 	
-				if (!empty($this->ISBN))
+				// ISBN hinzuf?gen, wenn vorhanden
+				if (empty($this->ISBN) === false)
 				{
 					$str .= ",\n\tisbn = \"".addslashes($this->ISBN)."\"";
 				}
 	
-				if (!empty($this->Ort))
+				// Ort hinzuf?gen, wenn vorhanden
+				if (empty($this->Ort) === false)
 				{
 					$str .= ",\n\taddress = \"".addslashes($this->Ort)."\"";
 				}
 				
+				// Beende BibTeX-Eintrag
 				$str .= "\n}\n";
 			}
 			return $str;
@@ -145,19 +160,24 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// L?sche Literatur aus Bibliothek
 				$sql = "DELETE FROM ".$db_config['prefix']."Bibliothek
 						WHERE Literatur_Nr = '$nr'
 						LIMIT 1";
 				$sqldb->Query($sql);
 
+				// Entferne alle Verbindugnen zwischen Literatur und Autoren
 				$sql = "DELETE FROM ".$db_config['prefix']."Literatur_Autor
 						WHERE Literatur_Nr = '$nr'";
 				$sqldb->Query($sql);
 
+				// L?sche nun alle freigewordenen Autoren
 				Autor::Clean();
 
+				// L?sche alle zur Literatur geh?rdenden Kommentare
 				Kommentar::DeleteAll($nr);
 			}
 		}
@@ -179,6 +199,7 @@
 					'mastersthesis', 'misc', 'phdthesis', 'proceedings', 'techreport',
 					'unpublished');
 
+			// Finde alle BibTeX-Eintr?ge
 			// Funktioniert nicht bei Argumenten ?ber mehrere Zeilen
 			if (preg_match_all('/@([\w]+[\s]*)\{[\s]*([-\d\w]+)(([\s]*,[\s]*[\w]*[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*)+)\}/', $bibtex, $regexp_entries) !== false)
 			{
@@ -191,6 +212,7 @@
 
 			$entries = false;
 			
+			// Extrahiere alle Eintr?ge
 			for ($i = 0; $i < $num_entries; $i++)
 			{
 				$cur = new stdClass;
@@ -223,6 +245,7 @@
 				// Extrahiere "Optionen"
 				if (preg_match_all('/(([\w]*)[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*(,|\}))+/', $regexp_entries[3][$i], $regexp_options) !== false)
 				{
+					// Lese die Optionen des aktuellen BibTeX-Eintrags einzeln
 					$num_options = sizeof($regexp_options[0]);
 					for ($j = 0; $j < $num_options; $j++)
 					{
@@ -238,6 +261,7 @@
 							$argument = substr($argument, 1, strlen($argument)-2);
 						}
 
+						// Wei?e Daten der aktuellen Option zu
 						switch (strtolower(trim($regexp_options[2][$j])))
 						{
 						case "title":
@@ -282,6 +306,8 @@
 			$imported = 0;
 			if ($entries !== false && empty($entries) === false)
 			{
+				// Importiere die einzelnen Eintr?ge in Bibliothek
+				// wenn Titel und Autor vorhanden sind
 				foreach ($entries as $entry)
 				{
 					if (empty($entry->titel) === false && empty($entry->autoren) === false)
@@ -321,12 +347,16 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// F?ge Literatur in Bibliothek ein
 				$sql = "INSERT INTO ".$db_config['prefix']."Bibliothek
 						VALUES (NULL, '$art', '$titel', '$jahr', '$verlag', '$isbn', '$beschreibung', '$ort', '$stichworte')";
 				$sqldb->Query($sql);
 
+				// Importiere jeden Autor und f?ge Verbindung zur
+				// zur Literatur in Literatur_Autor an
 				if ($nr = $sqldb->GetInsertID())
 				{
 					$autorlist = Autor::Split($autoren);
@@ -370,18 +400,22 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// L?sche jede Verbindung zu Autoren in Literatur_Autor mit aktueller Literatur
 				$sql = "DELETE FROM ".$db_config['prefix']."Literatur_Autor
 						WHERE Literatur_Nr='$nr'";
 				$sqldb->Query($sql);
 
+				// ?ndere aktuellen Literatureintrag
 				$sql = "UPDATE ".$db_config['prefix']."Bibliothek
 							SET Art='$art', Titel='$titel', Jahr='$jahr', Verlag='$verlag', ISBN='$isbn', Beschreibung='$beschreibung', Ort='$ort', Stichworte='$stichworte'
 							WHERE Literatur_Nr='$nr'
 							LIMIT 1";
 				$sqldb->Query($sql);
 
+				// F?ge neue Autoren hinzu und verbinde sie mit Literatur durch Literatur_Autor
 				$autorlist = Autor::Split($autoren);
 				foreach ($autorlist as $cur)
 				{

Modified: trunk/include/literaturart.php
===================================================================
--- trunk/include/literaturart.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/literaturart.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -39,6 +39,7 @@
 		 */
 		function LiteraturArt($text)
 		{
+			// Suche Zahlenrepr?sentation des ?bergebenen Texts heraus
 			switch ($text)
 			{
 			case "book":
@@ -109,6 +110,7 @@
 		 */
 		function GetDisplayText()
 		{
+			// Suche Datenbank-/Benutzeroberfl?chetext herau
 			switch ($this->value)
 			{
 			case 1:
@@ -157,6 +159,7 @@
 		 */
 		function GetBibtexText()
 		{
+			// Suche BibTeX-Text heraus
 			switch ($this->value)
 			{
 			case 1:

Modified: trunk/include/sqldb.php
===================================================================
--- trunk/include/sqldb.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/include/sqldb.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -3,7 +3,7 @@
 	{
 		default:
 		case "mysql":
-			require_once($basepath."include/sqldb_mysql.php");
+			require_once("include/sqldb_mysql.php");
 			break;
 	}
 	

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-06-12 14:45:58 UTC (rev 158)
+++ trunk/index.php	2006-06-12 14:59:24 UTC (rev 159)
@@ -17,38 +17,44 @@
 		</thead>
 		<tbody>
 			<?php
+				// Suche zuletzt hinzugef?gte Literatur
 				require_once("include/suche.php");
 				$search = new Suche();
+
+				// Gebe alle gefundenen Treffer aus
 				foreach ($search->Treffer as $cur)
 				{
-			?>
-				<tr>
-					<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+				?>
+					<tr>
+					<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>">
+						<?=htmlspecialchars($cur->Titel);?></a>
+					</td>
 					<td><?=htmlspecialchars($cur->Autor);?></td>
 					<td><?=htmlspecialchars($cur->Verlag);?></td>
 					<td><?=htmlspecialchars($cur->ISBN);?></td>
-				</tr>
-			<?php
+					</tr>
+				<?php
 				}
 			?>
 		</tbody>
 	</table>
 	<?php
+		// Sind Mitgliedsrechte vorhanden, gebe Hinzuf?ge- und Importierknopf an
 		if ($login->IsMember() === true)
 		{
-	?>
-		<hr>
-		<form style="display:inline" action="litmod.php">
-			<span>
-				<input type="submit" value="Literatur hinzuf&uuml;gen">
-			</span>
-		</form>
-		<form style="display:inline" action="bibtex.php">
-			<span>
-				<input type="submit" value="BibTeX importieren">
-			</span>
-		</form>
-	<?php
+		?>
+			<hr>
+			<form style="display:inline" action="litmod.php">
+				<span>
+					<input type="submit" value="Literatur hinzuf&uuml;gen">
+				</span>
+			</form>
+			<form style="display:inline" action="bibtex.php">
+				<span>
+					<input type="submit" value="BibTeX importieren">
+				</span>
+			</form>
+		<?php
 		}
 	?>
 



From lazhur at berlios.de  Mon Jun 12 20:24:22 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 12 Jun 2006 20:24:22 +0200
Subject: [Liman-svn] r160 - in trunk: . include
Message-ID: <200606121824.k5CIOMQ9023160@sheep.berlios.de>

Author: lazhur
Date: 2006-06-12 20:24:14 +0200 (Mon, 12 Jun 2006)
New Revision: 160

Modified:
   trunk/commentmod.php
   trunk/include/login.php
   trunk/include/mitglied.php
   trunk/include/sqldb.php
   trunk/include/sqldb_mysql.php
   trunk/include/suche.php
   trunk/index.php
   trunk/lit.php
   trunk/litmod.php
   trunk/login.php
   trunk/search.php
   trunk/user.php
   trunk/userlist.php
   trunk/usermod.php
Log:
weitere Kommentare hinzugef?\195?\188gt


Modified: trunk/commentmod.php
===================================================================
--- trunk/commentmod.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/commentmod.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -63,7 +63,7 @@
 		}
 		else
 		{
-			// Frage ob gel?scht Kommentar werden soll
+			// Frage ob Kommentar gel?scht werden soll
 			require_once("include/form_helper.php");
 			echo "<div id=\"warning\" style=\"margin-top: 2em\">";
 			echo "Wollen sie den Kommentar wirklich entfernen?";

Modified: trunk/include/login.php
===================================================================
--- trunk/include/login.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/include/login.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -89,11 +89,16 @@
 					LIMIT 1";
 			
 				$sqldb->Query($sql);
+
+				// Existiert das Mitglied?
 				if ($line = $sqldb->Fetch())
 				{
+					// Hat er das richtige Passwort?
 					if ($line->passwort === $_SESSION["login_passwort"])
 					{
 						$this->Nr = $line->Nr;
+
+						// Setze Benuterrechte nach Rechtename
 						switch ($line->Rechte)
 						{
 						case "Administrator":
@@ -129,6 +134,7 @@
 		 */
 		function Logout()
 		{
+			// Entferne Session und die Informationen zu dieser
 			session_unset();
 			session_destroy();
 			$this->Level = 0;

Modified: trunk/include/mitglied.php
===================================================================
--- trunk/include/mitglied.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/include/mitglied.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -37,12 +37,15 @@
 		function Mitglied($nr)
 		{
 			global $db_config, $sqldb;
+			
+			// Suche Mitglied mit Mitglied_Nr = $nr heraus
 			$sql = "SELECT Mitglieds_Nr, Login, Passwort, Rechte, Vorname, Name, Email
 					FROM ".$db_config['prefix']."Mitglieder
 					WHERE Mitglieds_Nr='$nr'
 					LIMIT 1";
 			$sqldb->Query($sql);
 			
+			// Lese gefundene Daten aus
 			if ($cur = $sqldb->Fetch())
 			{
 				$this->Nr = $cur->Mitglieds_Nr;
@@ -52,6 +55,7 @@
 				$this->Nachname = $cur->Name;
 				$this->Email = $cur->Email;
 
+				// Wandle Rechtebezeichner in numerische Repr?sentation um
 				switch ($cur->Rechte)
 				{
 				case "Administrator":
@@ -95,13 +99,16 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Administrator angemeldet sind
 			if ($login->IsAdministrator() === true)
 			{
+				// Entferne Mitglied mit Mitglieds_Nr $nr aus Mitglieder
 				$sql = "DELETE FROM ".$db_config['prefix']."Mitglieder
 						WHERE Mitglieds_Nr = '$nr'
 						LIMIT 1";
 				$sqldb->Query($sql);
 
+				// L?scht alle zu Mitglied geh?renden Kommentare
 				Kommentar::DeleteAllMember($nr);
 			}
 		}
@@ -132,12 +139,15 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Administrator angemeldet sind
 			if ($login->IsAdministrator() === true)
 			{
+				// Erzeuge Passworthash
 				$passworthash = Mitglied::PasswordHash($passwort);
+
+				// F?ge neues Mitglied hinzu
 				$sql = "INSERT INTO ".$db_config['prefix']."Mitglieder
 						VALUES (NULL, '$nachname', '$vorname', '$email', '$loginname', '$passworthash', '$rechte')";
-				
 				if ($sqldb->Query($sql) !== false)
 				{
 					return true;
@@ -186,17 +196,21 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Administrator angemeldet sind
 			if ($login->IsAdministrator() === true || $nr == $login->Nr)
 			{
+				// Erlaube nicht, dass einfache Mitglieder ihre
+				// Rechte erh?hen
 				if ($login->IsAdministrator() === false)
 				{
 					$rechte = "Benutzer";
 				}
 
 				$sql = "";
+				// Wurde neues Passwort angegeben?
 				if (empty($passwort) === true)
 				{
-					
+					// wenn nicht, aktualisiere nur die anderen Daten
 					$sql = "UPDATE ".$db_config['prefix']."Mitglieder
 							SET Login='$loginname', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
 							WHERE Mitglieds_Nr='$nr'
@@ -204,13 +218,16 @@
 				}
 				else
 				{
+					// wenn ja, erzeuge neuen Hash und aktualisiere
+					// ihn mit den anderen Daten
 					$passworthash = Mitglied::PasswordHash($passwort);
 					$sql = "UPDATE ".$db_config['prefix']."Mitglieder
 							SET Login='$loginname', Passwort='$passworthash', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
 							WHERE Mitglieds_Nr='$nr'
 							LIMIT 1";
 				}
-	
+
+				// ?ndere Daten des Mitglieds
 				if ($sqldb->Query($sql) !== false)
 				{
 					return true;
@@ -249,12 +266,15 @@
 
 			$members = array();
 
+			// Wenn wir als Administrator angemeldet sind
 			if ($login->IsAdministrator() === true)
 			{
+				// Suche alle Mitglieder
 				$sql = "SELECT Mitglieds_Nr AS Nr, Login, Vorname, Name AS Nachname, Email
 						FROM ".$db_config['prefix']."Mitglieder";
 				$sqldb->Query($sql);
 				
+				// Lese Mitglieder aus
 				while ($cur = $sqldb->Fetch())
 				{
 					$members[] = $cur;
@@ -262,12 +282,14 @@
 			}
 			elseif ($login->IsMember() === true)
 			{
+				// Suche eigene Daten in Mitglied
 				$sql = "SELECT Mitglieds_Nr AS Nr, Login, Vorname, Name AS Nachname, Email
 						FROM ".$db_config['prefix']."Mitglieder
 						WHERE Mitglieds_Nr='".$login->Nr."'
 						LIMIT 1";
 				$sqldb->Query($sql);
 				
+				// Lese Mitglied aus
 				if ($cur = $sqldb->Fetch())
 				{
 					$members[] = $cur;

Modified: trunk/include/sqldb.php
===================================================================
--- trunk/include/sqldb.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/include/sqldb.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -1,4 +1,5 @@
 <?php
+	// W?hle Datenbanksystem aus
 	switch ($db_config['dbms'])
 	{
 		default:
@@ -7,8 +8,10 @@
 			break;
 	}
 	
+	// Verbinde mit Datenbank
 	$sqldb = new SQLDB($db_config["host"], $db_config["user"], $db_config["pass"], $db_config["name"]);
 	
+	// Gib Fehler aus und breche ab, wenn keine Verbindung zum SQL-Server besteht
 	if ($sqldb->db_id === false)
 		die(mysql_error().". Could not connect to SQL server. Please inform Webmaster");;
 ?>

Modified: trunk/include/sqldb_mysql.php
===================================================================
--- trunk/include/sqldb_mysql.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/include/sqldb_mysql.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -69,8 +69,12 @@
 		{
 			if ($this->db_id !== false)
 			{
+				// Wenn Datenbankverbindung besteht,
+				// gebe Resourcen frei und schlie?e Verbindung
 				$this->FreeResult();
-				return @mysql_close($this->db_id);
+				$dbid = $this->db_id;
+				$this->db_id = false;
+				return @mysql_close($dbid);
 			}
 			else
 			{
@@ -93,6 +97,8 @@
 		{
 			if ($this->db_id !== false && $this->query_result !== false)
 			{
+				// Wenn Datenbankverbindung und Ergebnis eines Querys
+				// besteht, bewege Zeiger auf angegebenes Ergebnis
 				return @mysql_data_seek($this->query_result, $row_number);
 			}
 			else
@@ -114,6 +120,8 @@
 		{
 			if ($this->db_id !== false && $this->query_result !== false)
 			{
+				// Wenn Datenbankverbindung und Ergebnis eines Querys
+				// besteht, gebe aktuelles Ergebnis zur?ck
 				return @mysql_fetch_object($this->query_result);
 			}
 			else
@@ -133,7 +141,11 @@
 		{
 			if ($this->query_result !== false)
 			{
-				return @mysql_free_result($this->query_result);;
+				// Wenn rgebnis eines Querys existiert, gebe
+				// es frei
+				$queryresult = $this->query_result;
+				$this->query_result = false;
+				return @mysql_free_result($queryresult);
 			}
 			else
 			{
@@ -155,6 +167,8 @@
 		{
 			if ($this->db_id !== false)
 			{
+				// Wenn Datenbankverbindung besteht, gebe
+				// Anzahl zuletzt ge?nderter Datens?tze zur?ck
 				return @mysql_affected_rows($this->db_id);
 			}
 			else
@@ -201,6 +215,9 @@
 		{
 			if ($this->db_id !== false)
 			{
+				// Wenn Datenbankverbindung besteht, gebe 
+				// ID des zuletzt hinzugef?gten Datensatzes
+				// zur?ck
 				return @mysql_insert_id($this->db_id);
 			}
 			else
@@ -222,6 +239,8 @@
 		{
 			if ($this->db_id !== false && $this->query_result !== false)
 			{
+				// Wenn Datenbankverbindung und Ergebnis eines Querys
+				// besteht, gebe Anzahl gefundener Datens?tze zur?ck
 				return @mysql_num_rows($this->query_result);
 			}
 			else
@@ -243,6 +262,8 @@
 		{
 			if ($this->db_id !== false)
 			{
+				// Wenn Datenbankverbindung besteht, sende
+				// Abfrage an Datenbank
 				$this->FreeResult();
 				return $this->query_result = @mysql_query($query, $this->db_id);
 			}

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/include/suche.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -43,23 +43,27 @@
 		{
 			global $sqldb, $db_config;
 
+			// Finde die 10 zuletzt hinzugef?gten Literatureintr?ge
 			$sql = "SELECT Literatur_Nr AS Nr, Titel, Verlag, ISBN
 					FROM ".$db_config['prefix']."Bibliothek AS bibliothek
 					ORDER BY `Literatur_Nr` DESC
 					LIMIT 10";
 			$sqldb->Query($sql);
 
+			// Lese Treffer aus
 			$this->Treffer = array();
 			while ($cur = $sqldb->Fetch())
 			{
 				$this->Treffer[] = $cur;	
 			}
 
+			// Lese zu jedem Treffer Autoren
 			for ($i = 0; $i < count($this->Treffer); $i++)
 			{
 				// Kommagetrennte Autorenliste erstellen
 				$authors = Autor::GetAll($this->Treffer[$i]->Nr);
 
+				// Erstelle kommagetrennte Liste der Autoren
 				$autorlist = "";
 				if (empty($authors) === false)
 				{
@@ -95,6 +99,7 @@
 			$volltext = trim($volltext);
 			if (empty($volltext) === false)
 			{
+				// Finde Literatur mit Suchbegriff
 				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
 						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
 							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
@@ -105,16 +110,19 @@
 						OR MATCH (Autorname) AGAINST ('$volltext')";
 				$sqldb->Query($sql);
 				
+				// Lese Treffer aus
 				while ($cur = $sqldb->Fetch())
 				{
 					$this->Treffer[] = $cur;	
 				}
 	
+				// Lese zu jedem Treffer Autoren
 				for ($i = 0; $i < count($this->Treffer); $i++)
 				{
 					// Kommagetrennte Autorenliste erstellen
 					$authors = Autor::GetAll($this->Treffer[$i]->Nr);
 	
+					// Erstelle kommagetrennte Liste der Autoren
 					$autorlist = "";
 					if (empty($authors) === false)
 					{
@@ -156,6 +164,7 @@
 			$autor = trim($autor);
 			if (empty($titel) === false || empty($autor) === false)
 			{
+				// Finde Literatur mit Titel und Autor
 				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
 						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
 							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
@@ -164,6 +173,8 @@
 						ON connect.Autor_Nr = autoren.Autor_Nr
 						WHERE bibliothek.Titel like '%".$titel."%'";
 
+				// Trenne kommagetrennte Autorenliste und
+				// f?ge es Suche hinzu
 				if (empty($autor) === false)
 				{
 					$sql .= " AND (";
@@ -179,18 +190,21 @@
 					}
 					$sql .= ")";
 				}
+				$sqldb->Query($sql);
 
-				$sqldb->Query($sql);
+				// Lese Treffer aus
 				while ($cur = $sqldb->Fetch())
 				{
 					$this->Treffer[] = $cur;	
 				}
 	
+				// Lese zu jedem Treffer Autoren
 				for ($i = 0; $i < count($this->Treffer); $i++)
 				{
 					// Kommagetrennte Autorenliste erstellen
 					$authors = Autor::GetAll($this->Treffer[$i]->Nr);
 	
+					// Erstelle kommagetrennte Liste der Autoren
 					$autorlist = "";
 					if (empty($authors) === false)
 					{
@@ -243,6 +257,7 @@
 		 */
 		function Suche($suchbegriff="", $autor="")
 		{
+			// W?hle nach Parameteranzahl die richtige Suchfunktion
 			switch (func_num_args())
 			{
 			case 0:

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/index.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -39,7 +39,7 @@
 		</tbody>
 	</table>
 	<?php
-		// Sind Mitgliedsrechte vorhanden, gebe Hinzuf?ge- und Importierknopf an
+		// Sind Mitgliedsrechte vorhanden, gebe Hinzuf?ge- und Importierknopf aus
 		if ($login->IsMember() === true)
 		{
 		?>

Modified: trunk/lit.php
===================================================================
--- trunk/lit.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/lit.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -5,6 +5,7 @@
 	require_once("include/header.php");
 	require_once("include/literatur.php");
 
+	// Lese Literatur aus, wenn id ?bergeben wurde
 	if (isset($_GET["id"]))
 	{
 		$literatur = new Literatur($_GET["id"]);
@@ -13,6 +14,8 @@
 	{
 		$literatur = new Literatur(0);
 	}
+
+	// gebe Literatur aus
 ?>
 <div id="cfront" class="content">
 	
@@ -68,6 +71,7 @@
 				</td>
 			</tr>
 			<?php
+				// Sind Mitgliedsrechte vorhanden, gebe Bearbeiten- und L?schenknopf aus
 				if ($login->IsMember() === true)
 				{
 			?>
@@ -94,6 +98,7 @@
 				$owncomment = ""; // hat der user schon etwas kommentiert?
 				foreach ($literatur->Kommentare as $cur)
 				{
+					// Suche ob schon ein Kommentar des aktuellen Mitglieds existiert
 					if ($login->Nr == $cur->Verfasser_Nr)
 					{
 						$owncomment->Text = $cur->Text;
@@ -123,9 +128,12 @@
 		if ($login->IsMember() === true)
 		{
 			require_once("include/form_helper.php");
+
 			// Soll Kommentar-Hinzuf?gen-Box erscheinen oder Update-Box?
+			// (abh?ngig ob schon Kommentar das Mitglieds existiert)
 			if (empty($owncomment) === true)
 			{
+				// Zeige Hinzuf?gen-Formular
 		?>
 			<form action="commentmod.<?=$ext;?>?insert=" method="post">
 			<span>
@@ -152,6 +160,7 @@
 			}
 			else
 			{
+				// Zeige ?ndern-Formular
 		?>
 			<form action="commentmod.<?=$ext;?>?update" method="post">
 			<span>

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/litmod.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -1,4 +1,5 @@
 <?php
+	// W?hle Seitentitel nach ausgew?hlter Aktion
 	if (isset($_GET["delete"]) === true)
 	{
 		$title = "Literatur l?schen";
@@ -15,6 +16,7 @@
 
 	require_once("include/header.php");
 
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
 	if ($login->IsMember() === false)
 	{
 		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
@@ -29,6 +31,7 @@
 	$error_autor = false;
 	$error_jahr = false;
 
+	// ?berpr?fe wichtige Parameter bei Insert und Update auf Vorhandensein
 	if (isset($_GET["insert"]) === true || isset($_GET["update"]) === true)
 	{
 		if (empty($_POST["titel"]) === true)
@@ -50,6 +53,7 @@
 		}
 	}
 
+	// Gebe Fehler bei Parameter?berpr?fung aus
 	if ($error_occurred == true)
 	{
 		echo "<div id=\"error_list\">Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:<ul>";
@@ -72,10 +76,11 @@
 		echo "</ul></div>";
 	}
 
-
+	// Gebe Formular aus, wenn keine Schreibaktionen ausgef?hrt werden
 	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
 		|| $error_occurred === true)
 	{
+		// Lese id aus, wenn vorhanden
 		if (isset($_POST["id"]) === true)
 		{
 			$id = $_POST["id"];
@@ -90,6 +95,7 @@
 		}
 
 		require_once("include/form_helper.php");
+		// Lese Literatur aus, wenn id bekannt ist und vorher kein Fehler aufgetreten ist
 		if ($error_occurred === false && (isset($_GET["id"]) === true || isset($_POST["id"]) === true))
 		{
 			require_once("include/literatur.php");
@@ -128,6 +134,11 @@
 		}
 		else
 		{
+			// Sollte vorher Fehler aufgetreten sein, lese Parameter aus.
+			// Sollten vorher keine Fehler aufgetreten sein (keine
+			// id bekannt), setze Default Wert
+
+			// Setze Titel
 			if (isset($_POST["titel"]) === true)
 			{
 				$titel = stripslashes($_POST["titel"]);
@@ -137,6 +148,7 @@
 				$titel = "";
 			}
 
+			// Setze Autoren
 			if (isset($_POST["autor"]) === true)
 			{
 				$autor = stripslashes($_POST["autor"]);
@@ -146,6 +158,7 @@
 				$autor = "";
 			}
 
+			// Setze Jahr
 			if (isset($_POST["jahr"]) === true)
 			{
 				$jahr = stripslashes($_POST["jahr"]);
@@ -155,6 +168,7 @@
 				$jahr = date("Y");
 			}
 
+			// Setze Stichworte
 			if (isset($_POST["stichworte"]) === true)
 			{
 				$stichworte = stripslashes($_POST["stichworte"]);
@@ -164,6 +178,7 @@
 				$stichworte = "";
 			}
 
+			// Setze Art
 			if (isset($_POST["art"]) === true)
 			{
 				$art = stripslashes($_POST["art"]);
@@ -173,6 +188,7 @@
 				$art = "Buch";
 			}
 
+			// Setze Verlag
 			if (isset($_POST["verlag"]) === true)
 			{
 				$verlag = stripslashes($_POST["verlag"]);
@@ -182,6 +198,7 @@
 				$verlag = "";
 			}
 
+			// Setze Ort
 			if (isset($_POST["ort"]) === true)
 			{
 				$ort = stripslashes($_POST["ort"]);
@@ -191,6 +208,7 @@
 				$ort = "";
 			}
 
+			// Setze ISBN
 			if (isset($_POST["isbn"]) === true)
 			{
 				$isbn = stripslashes($_POST["isbn"]);
@@ -200,6 +218,7 @@
 				$isbn = "";
 			}
 
+			// Setze Beschreibung
 			if (isset($_POST["beschreibung"]) === true)
 			{
 				$beschreibung = stripslashes($_POST["beschreibung"]);
@@ -212,13 +231,17 @@
 
 		if (empty($id) === true)
 		{
+			// Gebe Hinzuf?gen-Formular aus
 			echo "<form action=\"litmod.".$ext."?insert\" id=\"litaddform\" method=\"post\">";
 		}
 		else
 		{
+			// Gebe Update-Formular aus
 			echo "<form action=\"litmod.".$ext."?update\" id=\"litupdateform\" method=\"post\">";
 			echo form_input("hidden", "id", $id);
 		}
+
+		// Gebe Formular mit vorher bestimmten Werten aus
 	?>
 		<table id="litadd">
 			<tbody>
@@ -274,23 +297,32 @@
 	}
 	else
 	{
+		// F?hre Schreibaktionen aus
 		require_once("include/literatur.php");
+
+
+		// Suche gew?hlte Aktion
 		if (isset($_GET["delete"]) === true)
 		{
+			// L?schen wenn akzeptiert wurde
 			if (isset($_POST["accept"]) === true)
 			{
+				// Fehlerhafte Daten zum L?schen ?bertragen?
 				if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
 				{
+					// Wenn ja, gebe Fehler aus
 					echo "<p id=\"error\">Literatur konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
 				}
 				else
 				{
+					// Wenn nicht, l?sche Literatur und gebe Erfolgsmeldung aus
 					Literatur::Delete($_POST["id"]);
 					echo "<p style=\"text-align: center\">Literatur wurde entfernt</p>";
 				}
 			}
 			else
 			{
+				// Frage ob Literatur gel?scht werden soll
 				require_once("include/form_helper.php");
 				echo "<div id=\"warning\" style=\"margin-top: 2em\">";
 				echo "Wollen sie die Literatur wirklich entfernen?";
@@ -305,6 +337,7 @@
 		{
 			if (isset($_POST["accept"]) === false)
 			{
+				// Suche ob ?hnliche Literatur existiert
 				require_once("include/suche.php");
 				$search = new Suche($_POST["titel"], $_POST["autor"]);
 				if (empty($search->Treffer) === false)
@@ -323,7 +356,7 @@
 						</thead>
 					<tbody>
 				<?php
-			
+					// Gebe gefundene Literatur zur?ck
 					foreach ($search->Treffer as $cur)
 					{
 				?>
@@ -339,6 +372,7 @@
 						</tbody>
 					</table>
 				<?php
+					// Frage nach Best?tigung zum Hinzuf?gen
 					require_once("include/form_helper.php");
 					echo "<div id=\"warning\" style=\"margin-top: 2em\">";
 					echo "Trotzdem hinzuf?gen?";
@@ -358,16 +392,20 @@
 				}
 			}
 
+			// Anlegen, wenn keine ?hnlichen B?cher gefunden wurden oder wenn akzeptiert wurde
 			if (isset($_POST["accept"]) === true || empty($search->Treffer) === true)
 			{
+				// Fehlerhafte Daten zum Anlegen ?bertragen?
 				if (isset($_POST["art"]) === false || isset($_POST["verlag"]) === false ||
 					isset($_POST["isbn"]) === false || isset($_POST["beschreibung"]) === false ||
 					isset($_POST["ort"]) === false || isset($_POST["stichworte"]) === false)
 				{
+					// Wenn ja, gebe Fehler aus
 					echo "<p id=\"error\">Literatur konnte nicht angelegt werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
 				}
 				else
 				{
+					// Wenn nicht, lege Literatur an und gebe Erfolgsmeldung aus
 					Literatur::Insert($_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
 					echo "<p style=\"text-align: center\">Literatur wurde hinzugef?gt</p>";
 				}
@@ -375,15 +413,18 @@
 		}
 		elseif (isset($_GET["update"]) === true)
 		{
+			// Fehlerhafte Daten zum ?ndern ?bertragen?
 			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false ||
 				isset($_POST["art"]) === false || isset($_POST["verlag"]) === false ||
 				isset($_POST["isbn"]) === false || isset($_POST["beschreibung"]) === false ||
 				isset($_POST["ort"]) === false || isset($_POST["stichworte"]) === false)
 			{
-					echo "<p id=\"error\">Literatur konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
+				// Wenn ja, gebe Fehler aus
+				echo "<p id=\"error\">Literatur konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
 			}
 			else
 			{
+				// Wenn nicht, ?ndere Literatur und gebe Erfolgsmeldung aus
 				Literatur::Update($_POST["id"], $_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
 				echo "<p style=\"text-align: center\">Literatur wurde ge?ndert</p>";
 			}

Modified: trunk/login.php
===================================================================
--- trunk/login.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/login.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -5,9 +5,20 @@
 	
 	require_once("include/global.php");
 
+	// Suche gew?hlte Aktion
 	if (empty($_POST["loginname"]) === false && empty($_POST["passwort"]) === false)
 	{
-		$login = new Login($_POST["loginname"], $_POST["passwort"]);
+		// Fehlerhafte Daten zum L?schen ?bertragen?
+		if (empty($_POST["loginname"]) === true || empty($_POST["passwort"]) === true)
+		{
+			// Wenn ja, gebe Fehler aus
+			echo "<p id=\"error\">Sie konnte nicht angemeldet werden, da es ein Fehler bei der ?bertragung der Informationen des Logins gab</p>";
+		}
+		else
+		{
+			// Logge Mitglied mit ?bergebenen Parametern ein
+			$login = new Login($_POST["loginname"], $_POST["passwort"]);
+		}
 	}
 	elseif (isset($_GET["logout"]) === true)
 	{
@@ -19,18 +30,22 @@
 <div id="clogin" class="content">
 	<div style="text-align: center">
 	<?php
+		// Gebe je nach Aktion Statusinformation aus
 		if (isset($_GET["logout"]) === true)
 		{
+			// Verabschiede Nutzer beim Abmelden
 			echo "Auf Wiedersehen";
 		}
 		elseif ($login->IsMember() === true)
 		{
+			// Begr??e Nutzer beim Anmelden
 			require_once("include/mitglied.php");
 			$mitglied = new Mitglied($login->Nr);
 			echo "Willkommen ".$mitglied->Vorname." ".$mitglied->Nachname;
 		}
 		else
 		{
+			// Sonst gebe Fehlermeldung beim Anmelden aus
 			echo "<div id=\"error\">Login ist Fehlgeschlagen</div>";
 		}
 	?>

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/search.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -1,6 +1,7 @@
 <?php
 	//$extracss = "home.css";
 
+	// W?hle Seitentitel nach ausgew?hlter Aktion
 	if (isset($_GET["suchbegriff"]) === true)
 	{
 		$title = "Suchergebnisse f&uuml;r \"".htmlspecialchars($_GET["suchbegriff"])."\"";
@@ -20,19 +21,24 @@
 <?php
 	require_once("include/suche.php");
 
+	// Welche Art von Suche?
 	if (isset($_GET["suchbegriff"]) === true)
 	{
+		// Volltextsuche nach Suchbegriff
 		$search = new Suche($_GET["suchbegriff"]);
 	}
 	elseif (isset($_GET["autor"]) === true && isset($_GET["titel"]) === true)
 	{
+		// Suche nach Autor und Titel
 		$search = new Suche($_GET["titel"], $_GET["autor"]);
 	}
 	else
 	{
+		// Suche zuletzt hinzugef?gte Literatur
 		$search = new Suche();
 	}
 
+	// Wurde etwas gefunden?
 	if (empty($search->Treffer) === false)
 	{
 	?>
@@ -47,7 +53,7 @@
 			</thead>
 		<tbody>
 	<?php
-
+		// Gebe alle gefundenen Treffer aus
 		foreach ($search->Treffer as $cur)
 		{
 	?>
@@ -66,27 +72,29 @@
 	}
 	else
 	{
+		// Wenn nicht, gebe Information aus
 		echo "<div id=\"warning\">Keine Treffern gefunden</div>";
 	}
 ?>
 
 
 <?php
+	// Sind Mitgliedsrechte vorhanden, gebe Hinzuf?ge- und Importierknopf aus
 	if ($login->IsMember() === true)
 	{
-?>
-	<hr>
-	<form style="display:inline" action="litmod.php">
-		<span>
-			<input type="submit" value="Literatur hinzuf&uuml;gen">
-		</span>
-	</form>
-	<form style="display:inline" action="bibtex.php">
-		<span>
-			<input type="submit" value="BibTeX importieren">
-		</span>
-	</form>
-<?php
+	?>
+		<hr>
+		<form style="display:inline" action="litmod.php">
+			<span>
+				<input type="submit" value="Literatur hinzuf&uuml;gen">
+			</span>
+		</form>
+		<form style="display:inline" action="bibtex.php">
+			<span>
+				<input type="submit" value="BibTeX importieren">
+			</span>
+		</form>
+	<?php
 	}
 ?>
 </div>

Modified: trunk/user.php
===================================================================
--- trunk/user.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/user.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -5,6 +5,7 @@
 	require_once("include/header.php");
 	require_once("include/mitglied.php");
 
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
 	if ($login->IsMember() === false)
 	{
 		require_once("include/footer.php");
@@ -12,10 +13,13 @@
 	}
 	elseif ($login->IsAdministrator() === false)
 	{
+		// Wenn keine Administratorrechte vorhanden sind
+		// d?rfen nur die eigenen Daten angesehen werden
 		$_GET["id"] = $login->Nr;
 		$_POST["id"] = $login->Nr;
 	}
 
+	// Lese Mitglied aus, wenn id ?bergeben wurde
 	if (isset($_GET["id"]))
 	{
 		$mitglied = new Mitglied($_GET["id"]);
@@ -24,6 +28,8 @@
 	{
 		$mitglied = new Mitglied(0);
 	}
+
+	// gebe Informationen zu Mitglied aus
 ?>
 <div id="cfront" class="content">
 	<form action="usermod.php">
@@ -45,6 +51,8 @@
 			<tr>
 				<th scope="row">Rechte:</th>	
 				<td><?php
+					// Wandle Zahlenrepr?sentation der Rechte
+					// in textuelle Repr?sentation um
 					switch ($mitglied->Rechte)
 					{
 					case 2:

Modified: trunk/userlist.php
===================================================================
--- trunk/userlist.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/userlist.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -18,6 +18,9 @@
 		<tbody>
 			<?php
 				require_once("include/mitglied.php");
+
+				// Lese alle Mitglieder aus (wenn Administrator)
+				// oder eigene Daten (wenn Mitglied)
 				$members = Mitglied::GetAll();
 				foreach ($members as $cur)
 				{
@@ -29,12 +32,16 @@
 				<td><?=htmlspecialchars($cur->Email); ?></td>
 				<td>
 					<?php
+						// Sind Mitgliedsrechte vorhanden, gebe Bearbeitenknopf bei eigenem Eintrag aus
+						// bei Administratoren immer
 						if ($login->IsAdministrator() === true || $login->Nr == $cur->Nr)
 						{
 							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?id=".htmlspecialchars($cur->Nr)."\">";
 							echo "<input type=\"submit\" value=\"Bearbeiten\">";
 							echo "</form>";
 						}
+						
+						// Sind Administratorrechte vorhanden, gebe L?schknopf aus
 						if ($login->IsAdministrator() === true)
 						{
 							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?delete=&id=".htmlspecialchars($cur->Nr)."\">";
@@ -51,6 +58,7 @@
 	</table>
 
 	<?php
+		// Sind Administratorrechte vorhanden, gebe Hinzuf?ge aus
 		if ($login->IsAdministrator() === true)
 		{
 	?>

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-12 14:59:24 UTC (rev 159)
+++ trunk/usermod.php	2006-06-12 18:24:14 UTC (rev 160)
@@ -1,4 +1,5 @@
 <?php
+	// W?hle Seitentitel nach ausgew?hlter Aktion
 	if (isset($_GET["delete"]) === true)
 	{
 		$title = "Nutzer l?schen";
@@ -15,6 +16,8 @@
 
 	require_once("include/header.php");
 
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
+	// oder gel?scht und hinzugef?gt werden soll und keine Administratorrechte vorliegen
 	if ($login->IsMember() === false
 		|| ($login->IsAdministrator() === false
 			&& (isset($_GET["delete"]) === true || isset($_GET["insert"]) === true)
@@ -26,6 +29,8 @@
 	}
 	elseif ($login->IsAdministrator() === false)
 	{
+		// Wenn keine Administratorrechte vorhanden sind
+		// d?rfen nur die eigenen Daten ge?ndert werden
 		$_GET["id"] = $login->Nr;
 		$_POST["id"] = $login->Nr;
 	}
@@ -41,6 +46,7 @@
 	$error_password_missing = false;
 	$error_password_different = false;
 
+	// ?berpr?fe wichtige Parameter bei Insert und Update auf Vorhandensein
 	if (isset($_GET["insert"]) === true || isset($_GET["update"]) === true)
 	{
 		if (empty($_POST["benutzername"]) === true)
@@ -67,6 +73,7 @@
 			$error_occurred = true;
 		}
 
+		// Teste ob Passwort beim hinzuf?gen vergessen wurde
 		if (empty($_POST["password"]) === true && isset($_GET["insert"]) === true)
 		{
 			$error_password = true;
@@ -76,6 +83,7 @@
 
 		if (empty($_POST["password"]) === false || empty($_POST["password_check"]) === false)
 		{
+			// Teste ob Passw?rter unterschiedlich sind
 			if ($_POST["password"] != $_POST["password_check"])
 			{
 				$error_password = true;
@@ -85,6 +93,7 @@
 		}
 	}
 
+	// Gebe Fehler bei Parameter?berpr?fung aus
 	if ($error_occurred == true)
 	{
 		echo "<div id=\"error_list\">Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:<ul>";
@@ -122,9 +131,11 @@
 	}
 
 
+	// Gebe Formular aus, wenn keine Schreibaktionen ausgef?hrt werden
 	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
 		|| $error_occurred === true)
 	{
+		// Lese id aus, wenn vorhanden
 		if (isset($_POST["id"]) === true)
 		{
 			$id = $_POST["id"];
@@ -139,6 +150,7 @@
 		}
 
 		require_once("include/form_helper.php");
+		// Lese Mitglied aus, wenn id bekannt ist und vorher kein Fehler aufgetreten ist
 		if ($error_occurred === false && (isset($_GET["id"]) === true || isset($_POST["id"]) === true))
 		{
 			require_once("include/mitglied.php");
@@ -169,6 +181,11 @@
 		}
 		else
 		{
+			// Sollte vorher Fehler aufgetreten sein, lese Parameter aus.
+			// Sollten vorher keine Fehler aufgetreten sein (keine
+			// id bekannt), setze Default Wert
+
+			// Setze Login
 			if (isset($_POST["benutzername"]) === true)
 			{
 				$benutzername = stripslashes($_POST["benutzername"]);
@@ -178,6 +195,7 @@
 				$benutzername = "";
 			}
 
+			// Setze Rechte
 			if (isset($_POST["rechte"]) === true)
 			{
 				$rechte = stripslashes($_POST["rechte"]);
@@ -187,6 +205,7 @@
 				$rechte = "Benutzer";
 			}
 
+			// Setze Vorname
 			if (isset($_POST["vorname"]) === true)
 			{
 				$vorname = stripslashes($_POST["vorname"]);
@@ -196,6 +215,7 @@
 				$vorname = "";
 			}
 
+			// Setze Nachname
 			if (isset($_POST["nachname"]) === true)
 			{
 				$nachname = stripslashes($_POST["nachname"]);
@@ -205,6 +225,7 @@
 				$nachname = "";
 			}
 
+			// Setze Email
 			if (isset($_POST["email"]) === true)
 			{
 				$email = stripslashes($_POST["email"]);
@@ -214,18 +235,23 @@
 				$email = "";
 			}
 
+			// ?bernehme nie das Passwort
 			$passwort = "";
 		}
 
 	if (empty($id) === true)
 	{
-		echo "<form action=\"usermod.".$ext."?insert\" id=\"useraddform\" method=\"post\">";
+		// Gebe Hinzuf?gen-Formular aus
+			echo "<form action=\"usermod.".$ext."?insert\" id=\"useraddform\" method=\"post\">";
 	}
 	else
 	{
+		// Gebe Update-Formular aus
 		echo "<form action=\"usermod.".$ext."?update\" id=\"userupdateform\" method=\"post\">";
 		echo form_input("hidden", "id", $id);
 	}
+
+	// Gebe Formular mit vorher bestimmten Werten aus
 ?>
 	<table id="bookdetails">
 		<tbody>
@@ -275,23 +301,32 @@
 	}
 	else
 	{
+		// F?hre Schreibaktionen aus
+		
 		require_once("include/mitglied.php");
+		
+		// Suche gew?hlte Aktion
 		if (isset($_GET["delete"]) === true)
 		{
+			// L?schen wenn akzeptiert wurde
 			if (isset($_POST["accept"]) === true)
 			{
+				// Fehlerhafte Daten zum L?schen ?bertragen?
 				if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
 				{
+					// Wenn ja, gebe Fehler aus
 					echo "<p id=\"error\">Nutzer konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen des Nutzers gab</p>";
 				}
 				else
 				{
+					// Wenn nicht, l?sche Mitglied und gebe Erfolgsmeldung aus
 					Mitglied::Delete($_POST["id"]);
 					echo "<p style=\"text-align: center\">Nutzer wurde entfernt</p>";
 				}
 			}
 			else
 			{
+				// Frage ob Mitglied gel?scht werden soll
 				require_once("include/form_helper.php");
 				echo "<div id=\"warning\" style=\"margin-top: 2em\">";
 				echo "Wollen sie den Nutzer wirklich entfernen?";
@@ -304,28 +339,34 @@
 		}
 		elseif  (isset($_GET["insert"]) === true)
 		{
+			// Versuche Benutzer anzulegen
 			if (Mitglied::Insert($_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
 			{
+				// Wenn ok, gebe Erfolgsmeldung aus
 				echo "<p style=\"text-align: center\">Nutzer wurde angelegt</p>";
 			}
 			else
 			{
-				
+				// Wenn nicht, gebe Fehler aus
 				echo "<p id=\"warning\">Nutzer konnte nicht angelegt werden. Ist Login vielleicht schon vergeben?</p>";
 			}
 		}
 		elseif (isset($_GET["update"]) === true)
 		{
+			// Fehlerhafte Daten zum ?ndern ?bertragen?
 			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
 			{
+				// Wenn ja, gebe Fehler aus
 				echo "<p id=\"error\">Nutzer konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen des Nutzers gab</p>";
 			}
 			elseif (Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
 			{
+				// Wenn ok, gebe Erfolgsmeldung aus
 				echo "<p style=\"text-align: center\">Nutzer wurde ge?ndert</p>";
 			}
 			else
 			{
+				// Wenn nicht, gebe Fehler aus
 				echo "<p id=\"warning\">Nutzer konnte nicht ge?ndert werden. Ist Login vielleicht schon vergeben?</p>";
 			}
 		}



From lazhur at berlios.de  Mon Jun 12 22:18:34 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 12 Jun 2006 22:18:34 +0200
Subject: [Liman-svn] r161 - in trunk: . design include
Message-ID: <200606122018.k5CKIYwk005687@sheep.berlios.de>

Author: lazhur
Date: 2006-06-12 22:18:33 +0200 (Mon, 12 Jun 2006)
New Revision: 161

Added:
   trunk/install.php
Modified:
   trunk/design/liman.css
   trunk/include/header.php
Log:
- install.php hinzugef?\195?\188gt


Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-06-12 18:24:14 UTC (rev 160)
+++ trunk/design/liman.css	2006-06-12 20:18:33 UTC (rev 161)
@@ -20,6 +20,14 @@
 	margin-bottom: 2em;
 }
 
+#installerror {
+	margin: 0;
+	padding: 3px;
+	border-bottom: 1px solid #000000;
+	font-size: 0.8em;
+	background-color: #ffffdc;
+}
+
 #content h2 {
 	padding-bottom: 1em;
 }

Modified: trunk/include/header.php
===================================================================
--- trunk/include/header.php	2006-06-12 18:24:14 UTC (rev 160)
+++ trunk/include/header.php	2006-06-12 20:18:33 UTC (rev 161)
@@ -29,6 +29,17 @@
 		<link rel="home" title="Home" href="index.<?=$ext;?>">
 	</head>
 	<body id="liman">
+		<?php
+			// Gebe Warnung aus, wenn install.php nicht gel?scht wurde und es nicht unterdr?ckt wird
+			if (file_exists("install.php") === true && 
+				((empty($disable_installwarning) === false && $disable_installwarning === false)
+				|| empty($disable_installwarning) === true))
+			{
+				echo "<div id=\"installerror\">
+					install.php wurde nicht gel?scht. Erledigen sie dies so schnell wie m?glich
+					</div>";
+			}
+		?>
 		<div id="container">
 			<div id="header">
 				<h1><span><acronym title="Literature Manager">LiMan</acronym></span></h1>

Added: trunk/install.php
===================================================================
--- trunk/install.php	2006-06-12 18:24:14 UTC (rev 160)
+++ trunk/install.php	2006-06-12 20:18:33 UTC (rev 161)
@@ -0,0 +1,323 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
+<html>
+	<head>
+		<title>Install :: LiMan</title>
+		<link rel="SHORTCUT ICON" href="favicon.ico">
+		<meta name="description" content="Literature Manager">
+		<meta name="keywords" content="bibtex, books, literature, database, manager">
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+		<meta name="robots" content="follow">
+		<meta http-equiv="content-language" content="de">
+		<meta name="author" content="Simon Wunderlich">
+		<link rel="home" title="Home" href="index.php">
+		<style type="text/css">
+			th {
+				width: 10em;
+				text-align: left;
+			}
+			td {
+				width: 20em;
+			}
+
+			.input_text, .input_password {
+				width: 20em;
+			}
+		</style>
+	</head>
+	<body id="liman_install">
+		<h1>LiMan Installation</h1>
+<?php
+	if (empty($_POST["dbms"]) === false)
+	{
+		$db_config['dbms'] = "mysql";
+
+		if ($_POST["dbms"] === "MySQL5")
+		{
+			$enableUTF8 = true;
+		}
+		else
+		{
+			$enableUTF8 = false;
+		}
+	}
+	else
+	{
+		$db_config['dbms'] = "mysql";
+	}
+
+	if (empty($_POST["user"]) === false)
+	{
+		$db_config['user'] = $_POST["user"];
+	}
+	else
+	{
+		$db_config['user'] = "";
+	}
+
+	if (empty($_POST["pass"]) === false)
+	{
+		$db_config['pass'] = $_POST["pass"];
+	}
+	else
+	{
+		$db_config['pass'] = "";
+	}
+
+	if (empty($_POST["name"]) === false)
+	{
+		$db_config['name'] = $_POST["name"];
+	}
+	else
+	{
+		$db_config['name'] = "";
+	}
+
+	if (empty($_POST["host"]) === false)
+	{
+		$db_config['host'] = $_POST["host"];
+	}
+	else
+	{
+		$db_config['host'] = "";
+	}
+
+	if (empty($_POST["name"]) === false)
+	{
+		$db_config['name'] = $_POST["name"];
+	}
+	else
+	{
+		$db_config['name'] = "liman";
+	}
+
+	if (empty($_POST["prefix"]) === false)
+	{
+		$db_config['prefix'] = $_POST["prefix"];
+	}
+	elseif (isset($_GET["install"]) === true)
+	{
+		$db_config['prefix'] = "";
+	}
+	else
+	{
+		$db_config['prefix'] = "liman_";
+	}
+
+	if (empty($_POST["loginname"]) === false)
+	{
+		$loginname = $_POST["loginname"];
+	}
+	elseif (isset($_GET["install"]) === true)
+	{
+		die("Sie m?ssen ein Loginname angeben");
+		echo "</body></html>";
+	}
+	else
+	{
+		$loginname = "admin";
+	}
+
+	if (empty($_POST["passwort"]) === false)
+	{
+		$passworthash = sha1($_POST["passwort"]);
+	}
+	elseif (isset($_GET["install"]) === true)
+	{
+		$passworthash = "";
+		die("Sie m?ssen ein Passwort angeben");
+		echo "</body></html>";
+	}
+	else
+	{
+		$passworthash = "";
+	}
+
+	
+	if (isset($_GET["install"]) === true)
+	{
+		require_once("include/sqldb.php");
+	
+		$sqlDrop["Autoren"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Autoren`";
+		$sqlDrop["Bibliothek"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Bibliothek`";
+		$sqlDrop["Kommentare"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Kommentare`";
+		$sqlDrop["Literatur_Autor"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Literatur_Autor`";
+		$sqlDrop["Mitglieder"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Mitglieder`";
+	
+		$sqlCreate["Autoren"] = "CREATE TABLE `".$db_config['prefix']."Autoren` (
+			`Autor_Nr` int(11) NOT NULL auto_increment,
+			`Autorname` varchar(40) NOT NULL,
+			PRIMARY KEY  (`Autor_Nr`),
+			UNIQUE KEY `Autorname` (`Autorname`),
+			FULLTEXT KEY `Autorname_2` (`Autorname`)
+			)";
+	
+		$sqlCreate["Bibliothek"] = "CREATE TABLE `".$db_config['prefix']."Bibliothek` (
+			`Literatur_Nr` int(11) NOT NULL auto_increment,
+			`Art` enum('Buch','Artikel','Brosch?re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver?ffentlicht','Sonstiges') NOT NULL,
+			`Titel` varchar(40) NOT NULL,
+			`Jahr` int(11) NOT NULL,
+			`Verlag` varchar(40) NOT NULL,
+			`ISBN` varchar(20) NOT NULL,
+			`Beschreibung` text NOT NULL,
+			`Ort` varchar(40) NOT NULL,
+			`Stichworte` varchar(100) NOT NULL,
+			PRIMARY KEY  (`Literatur_Nr`),
+			FULLTEXT KEY `Titel` (`Titel`,`Verlag`,`ISBN`,`Beschreibung`,`Ort`,`Stichworte`)
+			)";
+	
+		$sqlCreate["Kommentare"] = "CREATE TABLE `".$db_config['prefix']."Kommentare` (
+			`Kommentar_Nr` int(11) NOT NULL auto_increment,
+			`Kommentartext` text NOT NULL,
+			`Literatur_Nr` int(11) NOT NULL,
+			`Mitglieds_Nr` int(11) NOT NULL,
+			PRIMARY KEY  (`Kommentar_Nr`),
+			KEY `Literatur_Nr` (`Literatur_Nr`,`Mitglieds_Nr`),
+			FULLTEXT KEY `Kommentartext` (`Kommentartext`)
+			)";
+	
+		$sqlCreate["Literatur_Autor"] = "CREATE TABLE `".$db_config['prefix']."Literatur_Autor` (
+			`Autor_Nr` int(11) NOT NULL,
+			`Literatur_Nr` int(11) NOT NULL,
+			KEY `Autor_Nr` (`Autor_Nr`,`Literatur_Nr`)
+			)";
+	
+		$sqlCreate["Mitglieder"] = "CREATE TABLE `".$db_config['prefix']."Mitglieder` (
+			`Mitglieds_Nr` int(11) NOT NULL auto_increment,
+			`Name` varchar(20) NOT NULL,
+			`Vorname` varchar(20) NOT NULL,
+			`Email` text NOT NULL,
+			`Login` varchar(12) NOT NULL,
+			`Passwort` varchar(40) NOT NULL,
+			`Rechte` enum('Benutzer','Administrator') NOT NULL,
+			PRIMARY KEY  (`Mitglieds_Nr`),
+			UNIQUE KEY `Login` (`Login`)
+			)";
+	
+		if ($enableUTF8 === true)
+		{
+			$sqlCreate["Autoren"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Bibliothek"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Kommentare"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Literatur_Autor"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Mitglieder"] .= " DEFAULT CHARSET=utf8";
+		}
+	
+		$sqlInsertMitglied = "INSERT INTO ".$db_config['prefix']."Mitglieder
+				VALUES (NULL, 'Istrator', 'Admin', 'foo at bar.de', '$loginname', '$passworthash', 'Administrator')";
+	
+		foreach ($sqlDrop as $drop)
+		{
+			if ($sqldb->Query($drop) === false)
+			{
+				echo "<div class=\"error\">Es trat ein Fehler bei der Verarbeitung auf:<pre>";
+				echo htmlspecialchars($drop);
+				echo "</pre></div>";
+				echo "</body></html>";
+				die();
+			}
+		}
+	
+		foreach ($sqlCreate as $create)
+		{
+			if ($sqldb->Query($create) === false)
+			{
+				echo "<div class=\"error\">Es trat ein Fehler bei der Verarbeitung auf:<pre>";
+				echo htmlspecialchars($create);
+				echo "</pre></div>";
+				echo "</body></html>";
+				die();
+			}
+		}
+	
+		if ($sqldb->Query($sqlInsertMitglied) === false)
+		{
+			echo "<div class=\"error\">Es trat ein Fehler bei der Verarbeitung auf:<pre>";
+			echo htmlspecialchars($sqlInsertMitglied);
+			echo "</pre></div>";
+			echo "</body></html>";
+			die();
+		}
+
+		?>
+			<p>Datenbank wurde erfolgreich eingerichtet.</p>
+			<p>Erstellen sie in ihrem Installationsordner eine Datei mit dem Namen "config.php" und folgendem Inhalt:
+			<pre>
+&lt;?php
+	// Datenbankeinstellungen
+	$db_config['dbms'] = "<?=htmlspecialchars($db_config['dbms']);?>";
+	$db_config['user'] = "<?=htmlspecialchars($db_config['user']);?>";
+	$db_config['pass'] = "<?=htmlspecialchars($db_config['pass']);?>";
+	$db_config['name'] = "<?=htmlspecialchars($db_config['name']);?>";
+	$db_config['host'] = "<?=htmlspecialchars($db_config['host']);?>";
+	$db_config['prefix'] = "<?=htmlspecialchars($db_config['prefix']);?>";
+
+	$ext = "php";	// Endung der von den Usern abrufbaren Dateien
+	$gz_enable = false; // aktiviere GZIP-Kompression der HTML-Dateien
+?&gt;
+			</pre></p>
+		<?php
+	}
+	else
+	{
+		require_once("include/form_helper.php");
+		?>
+		<form id="installform" action="install.php?install=" method="post">
+		
+		<h2>Datenbankeinstellungen</h2>
+		<table>
+		<tbody>
+			<tr>
+			<th scope="row"><label for="dbms">Datenbanksystem</label></th>
+			<td><?= form_select(array("MySQL3", "MySQL4", "MySQL5"), "dbms", "MySQL5"); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="user">Benutzername</label></th>
+			<td><?= form_input("text", "user", $db_config["user"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="pass">Passwort</label></th>
+			<td><?= form_input("password", "pass"); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="host">Host</label></th>
+			<td><?= form_input("text", "host", $db_config["host"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="name">Datenbankname</label></th>
+			<td><?= form_input("text", "name", $db_config["name"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="prefix">Prefix</label></th>
+			<td><?= form_input("text", "prefix", $db_config["prefix"]); ?></td>
+			</tr>
+		</tbody>
+		</table>
+
+
+		<h2>Administratoreinstellungen</h2>
+		<table>
+		<tbody>
+			<tr>
+			<th scope="row"><label for="loginname">Loginname</label></th>
+			<td><?= form_input("text", "loginname", $db_config["loginname"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="passwort">Passwort</label></th>
+			<td><?= form_input("password", "passwort", $db_config["passwort"]); ?></td>
+			</tr>
+		</tbody>
+		</table>
+
+		<div><input type="submit" value="&Uuml;bernehmen"></div>
+		</form>
+		<?php
+	}
+	
+?>
+</body></html>
\ No newline at end of file



From lazhur at berlios.de  Mon Jun 12 22:29:15 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 12 Jun 2006 22:29:15 +0200
Subject: [Liman-svn] r162 - trunk/design
Message-ID: <200606122029.k5CKTFTm015429@sheep.berlios.de>

Author: lazhur
Date: 2006-06-12 22:29:15 +0200 (Mon, 12 Jun 2006)
New Revision: 162

Modified:
   trunk/design/liman.css
Log:
- Warnmeldung im IE6 lesbar gemacht


Modified: trunk/design/liman.css
===================================================================
--- trunk/design/liman.css	2006-06-12 20:18:33 UTC (rev 161)
+++ trunk/design/liman.css	2006-06-12 20:29:15 UTC (rev 162)
@@ -4,7 +4,7 @@
 	font: x-small sans-serif;
 	margin: 0;
 	padding: 0;
-} 
+}
 
 abbr, acronym {
 	border-bottom: 1px dotted black;
@@ -24,7 +24,6 @@
 	margin: 0;
 	padding: 3px;
 	border-bottom: 1px solid #000000;
-	font-size: 0.8em;
 	background-color: #ffffdc;
 }
 



From lazhur at berlios.de  Mon Jun 12 22:52:33 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 12 Jun 2006 22:52:33 +0200
Subject: [Liman-svn] r163 - trunk/db
Message-ID: <200606122052.k5CKqXIo018368@sheep.berlios.de>

Author: lazhur
Date: 2006-06-12 22:52:33 +0200 (Mon, 12 Jun 2006)
New Revision: 163

Added:
   trunk/db/liman_struktur_utf8.sql
Modified:
   trunk/db/liman_struktur.sql
Log:
- Datenbankexport f?\195?\188r manuelle Installation (mit und ohne UTF8-Unterst?\195?\188tzung)


Modified: trunk/db/liman_struktur.sql
===================================================================
--- trunk/db/liman_struktur.sql	2006-06-12 20:29:15 UTC (rev 162)
+++ trunk/db/liman_struktur.sql	2006-06-12 20:52:33 UTC (rev 163)
@@ -9,7 +9,7 @@
   PRIMARY KEY  (`Autor_Nr`),
   UNIQUE KEY `Autorname` (`Autorname`),
   FULLTEXT KEY `Autorname_2` (`Autorname`)
-) ENGINE=MyISAM DEFAULT CHARSET=utf8;
+);
 
 -- --------------------------------------------------------
 
@@ -30,7 +30,7 @@
   `Stichworte` varchar(100) NOT NULL,
   PRIMARY KEY  (`Literatur_Nr`),
   FULLTEXT KEY `Titel` (`Titel`,`Verlag`,`ISBN`,`Beschreibung`,`Ort`,`Stichworte`)
-) ENGINE=MyISAM DEFAULT CHARSET=utf8;
+);
 
 -- --------------------------------------------------------
 
@@ -47,7 +47,7 @@
   PRIMARY KEY  (`Kommentar_Nr`),
   KEY `Literatur_Nr` (`Literatur_Nr`,`Mitglieds_Nr`),
   FULLTEXT KEY `Kommentartext` (`Kommentartext`)
-) ENGINE=MyISAM DEFAULT CHARSET=utf8;
+);
 
 -- --------------------------------------------------------
 
@@ -60,7 +60,7 @@
   `Autor_Nr` int(11) NOT NULL,
   `Literatur_Nr` int(11) NOT NULL,
   KEY `Autor_Nr` (`Autor_Nr`,`Literatur_Nr`)
-) ENGINE=MyISAM DEFAULT CHARSET=utf8 COMMENT='n-m-Relationstabelle Literatur-Autor';
+) COMMENT='n-m-Relationstabelle Literatur-Autor';
 
 -- --------------------------------------------------------
 
@@ -79,4 +79,10 @@
   `Rechte` enum('Benutzer','Administrator') NOT NULL,
   PRIMARY KEY  (`Mitglieds_Nr`),
   UNIQUE KEY `Login` (`Login`)
-) ENGINE=MyISAM DEFAULT CHARSET=utf8;
+);
+
+-- 
+-- Daten f?r Tabelle `liman_Mitglieder`
+-- 
+
+INSERT INTO `liman_Mitglieder` (`Mitglieds_Nr`, `Name`, `Vorname`, `Email`, `Login`, `Passwort`, `Rechte`) VALUES (NULL, 'Istrator', 'Admin', 'foo at bar.de', 'admin', 'c47c25460079d8a87d44175b732f73af2e92b6d2', 'Administrator');
\ No newline at end of file

Added: trunk/db/liman_struktur_utf8.sql
===================================================================
--- trunk/db/liman_struktur_utf8.sql	2006-06-12 20:29:15 UTC (rev 162)
+++ trunk/db/liman_struktur_utf8.sql	2006-06-12 20:52:33 UTC (rev 163)
@@ -0,0 +1,88 @@
+-- 
+-- Tabellenstruktur f?r Tabelle `liman_Autoren`
+-- 
+
+DROP TABLE IF EXISTS `liman_Autoren`;
+CREATE TABLE IF NOT EXISTS `liman_Autoren` (
+  `Autor_Nr` int(11) NOT NULL auto_increment,
+  `Autorname` varchar(40) NOT NULL,
+  PRIMARY KEY  (`Autor_Nr`),
+  UNIQUE KEY `Autorname` (`Autorname`),
+  FULLTEXT KEY `Autorname_2` (`Autorname`)
+) DEFAULT CHARSET=utf8;
+
+-- --------------------------------------------------------
+
+-- 
+-- Tabellenstruktur f?r Tabelle `liman_Bibliothek`
+-- 
+
+DROP TABLE IF EXISTS `liman_Bibliothek`;
+CREATE TABLE IF NOT EXISTS `liman_Bibliothek` (
+  `Literatur_Nr` int(11) NOT NULL auto_increment,
+  `Art` enum('Buch','Artikel','Brosch?re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver?ffentlicht','Sonstiges') NOT NULL,
+  `Titel` varchar(40) NOT NULL,
+  `Jahr` int(11) NOT NULL,
+  `Verlag` varchar(40) NOT NULL,
+  `ISBN` varchar(20) NOT NULL,
+  `Beschreibung` text NOT NULL,
+  `Ort` varchar(40) NOT NULL,
+  `Stichworte` varchar(100) NOT NULL,
+  PRIMARY KEY  (`Literatur_Nr`),
+  FULLTEXT KEY `Titel` (`Titel`,`Verlag`,`ISBN`,`Beschreibung`,`Ort`,`Stichworte`)
+) DEFAULT CHARSET=utf8;
+
+-- --------------------------------------------------------
+
+-- 
+-- Tabellenstruktur f?r Tabelle `liman_Kommentare`
+-- 
+
+DROP TABLE IF EXISTS `liman_Kommentare`;
+CREATE TABLE IF NOT EXISTS `liman_Kommentare` (
+  `Kommentar_Nr` int(11) NOT NULL auto_increment,
+  `Kommentartext` text NOT NULL,
+  `Literatur_Nr` int(11) NOT NULL,
+  `Mitglieds_Nr` int(11) NOT NULL,
+  PRIMARY KEY  (`Kommentar_Nr`),
+  KEY `Literatur_Nr` (`Literatur_Nr`,`Mitglieds_Nr`),
+  FULLTEXT KEY `Kommentartext` (`Kommentartext`)
+) DEFAULT CHARSET=utf8;
+
+-- --------------------------------------------------------
+
+-- 
+-- Tabellenstruktur f?r Tabelle `liman_Literatur_Autor`
+-- 
+
+DROP TABLE IF EXISTS `liman_Literatur_Autor`;
+CREATE TABLE IF NOT EXISTS `liman_Literatur_Autor` (
+  `Autor_Nr` int(11) NOT NULL,
+  `Literatur_Nr` int(11) NOT NULL,
+  KEY `Autor_Nr` (`Autor_Nr`,`Literatur_Nr`)
+) DEFAULT CHARSET=utf8 COMMENT='n-m-Relationstabelle Literatur-Autor';
+
+-- --------------------------------------------------------
+
+-- 
+-- Tabellenstruktur f?r Tabelle `liman_Mitglieder`
+-- 
+
+DROP TABLE IF EXISTS `liman_Mitglieder`;
+CREATE TABLE IF NOT EXISTS `liman_Mitglieder` (
+  `Mitglieds_Nr` int(11) NOT NULL auto_increment,
+  `Name` varchar(20) NOT NULL,
+  `Vorname` varchar(20) NOT NULL,
+  `Email` text NOT NULL,
+  `Login` varchar(12) NOT NULL,
+  `Passwort` varchar(40) NOT NULL,
+  `Rechte` enum('Benutzer','Administrator') NOT NULL,
+  PRIMARY KEY  (`Mitglieds_Nr`),
+  UNIQUE KEY `Login` (`Login`)
+) DEFAULT CHARSET=utf8;
+
+-- 
+-- Daten f?r Tabelle `liman_Mitglieder`
+-- 
+
+INSERT INTO `liman_Mitglieder` (`Mitglieds_Nr`, `Name`, `Vorname`, `Email`, `Login`, `Passwort`, `Rechte`) VALUES (NULL, 'Istrator', 'Admin', 'foo at bar.de', 'admin', 'c47c25460079d8a87d44175b732f73af2e92b6d2', 'Administrator');



From lazhur at berlios.de  Tue Jun 13 16:05:07 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Tue, 13 Jun 2006 16:05:07 +0200
Subject: [Liman-svn] r164 - in trunk: docs/beleg2 docs/beleg2/doxygen docs/beleg3/interfaces include
Message-ID: <200606131405.k5DE573m015163@sheep.berlios.de>

Author: lazhur
Date: 2006-06-13 16:05:01 +0200 (Tue, 13 Jun 2006)
New Revision: 164

Modified:
   trunk/docs/beleg2/doxygen/classAutor.tex
   trunk/docs/beleg2/doxygen/classKommentar.tex
   trunk/docs/beleg2/systemarchitektur.dot
   trunk/docs/beleg2/systemarchitektur.eps
   trunk/docs/beleg2/systemarchitektur.pdf
   trunk/docs/beleg3/interfaces/autor.php
   trunk/docs/beleg3/interfaces/kommentar.php
   trunk/include/autor.php
   trunk/include/kommentar.php
Log:
- Fehlerkorrektur des zweiten Teilbelegs


Modified: trunk/docs/beleg2/doxygen/classAutor.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classAutor.tex	2006-06-12 20:52:33 UTC (rev 163)
+++ trunk/docs/beleg2/doxygen/classAutor.tex	2006-06-13 14:05:01 UTC (rev 164)
@@ -94,7 +94,7 @@
 \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
-\item[R\"{u}ckgabe:]Feld vom Typ \hyperlink{classAutor}{Autor} \end{Desc}
+\item[R\"{u}ckgabe:]Feld mit Elementen vom Typ \hyperlink{classAutor}{Autor} \end{Desc}
 \hypertarget{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{
 \index{Autor@{Autor}!Split@{Split}}
 \index{Split@{Split}!Autor@{Autor}}

Modified: trunk/docs/beleg2/doxygen/classKommentar.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classKommentar.tex	2006-06-12 20:52:33 UTC (rev 163)
+++ trunk/docs/beleg2/doxygen/classKommentar.tex	2006-06-13 14:05:01 UTC (rev 164)
@@ -147,7 +147,7 @@
 \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
-\item[R\"{u}ckgabe:]Feld vom Typ \hyperlink{classKommentar}{Kommentar} \end{Desc}
+\item[R\"{u}ckgabe:]Feld mit Elementen vom Typ \hyperlink{classKommentar}{Kommentar} \end{Desc}
 \hypertarget{classKommentar_6119b3c12a61d8d5a41cded165517914}{
 \index{Kommentar@{Kommentar}!Insert@{Insert}}
 \index{Insert@{Insert}!Kommentar@{Kommentar}}

Modified: trunk/docs/beleg2/systemarchitektur.dot
===================================================================
--- trunk/docs/beleg2/systemarchitektur.dot	2006-06-12 20:52:33 UTC (rev 163)
+++ trunk/docs/beleg2/systemarchitektur.dot	2006-06-13 14:05:01 UTC (rev 164)
@@ -46,12 +46,20 @@
 		Suche -> Autor
 	}
 
+	subgraph SQLDB
+	{
+		node [shape=box]
+		rank = same
+
+		SQLDB
+	}
+
 	subgraph Datenbank
 	{
 		node [shape=box];
 		rank = max;
 
-		SQLDB
+		Datenbank
 	}
 
 
@@ -79,4 +87,6 @@
 	Literatur -> SQLDB
 	Mitglied -> SQLDB
 	Suche -> SQLDB
+
+	SQLDB -> Datenbank
 }

Modified: trunk/docs/beleg2/systemarchitektur.eps
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg2/systemarchitektur.pdf
===================================================================
(Binary files differ)

Modified: trunk/docs/beleg3/interfaces/autor.php
===================================================================
--- trunk/docs/beleg3/interfaces/autor.php	2006-06-12 20:52:33 UTC (rev 163)
+++ trunk/docs/beleg3/interfaces/autor.php	2006-06-13 14:05:01 UTC (rev 164)
@@ -46,7 +46,7 @@
 		 *  Typs Autor zur?ck.
 		 *  \param[in] $literatur_nr Nr einer Literatur mit Autoren
 		 *  \pre Datenbankverbindung muss bestehen
-		 *  \return Feld vom Typ Autor
+		 *  \return Feld mit Elementen vom Typ Autor
 		 */
 		function GetAll($literatur_nr);
 

Modified: trunk/docs/beleg3/interfaces/kommentar.php
===================================================================
--- trunk/docs/beleg3/interfaces/kommentar.php	2006-06-12 20:52:33 UTC (rev 163)
+++ trunk/docs/beleg3/interfaces/kommentar.php	2006-06-13 14:05:01 UTC (rev 164)
@@ -82,7 +82,7 @@
 		 *  Typs Kommentar zur?ck.
 		 *  \param[in] $literatur_nr Nr einer Literatur mit Kommentaren
 		 *  \pre Datenbankverbindung muss bestehen
-		 *  \return Feld vom Typ Kommentar
+		 *  \return Feld mit Elementen vom Typ Kommentar
 		 */
 		function GetAll($literatur_nr);
 		

Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-06-12 20:52:33 UTC (rev 163)
+++ trunk/include/autor.php	2006-06-13 14:05:01 UTC (rev 164)
@@ -96,7 +96,7 @@
 		 *  Typs Autor zur??ck.
 		 *  \param[in] $literatur_nr Nr einer Literatur mit Autoren
 		 *  \pre Datenbankverbindung muss bestehen
-		 *  \return Feld vom Typ Autor
+		 *  \return Feld mit Elementen vom Typ Autor
 		 */
 		function GetAll($literatur_nr)
 		{

Modified: trunk/include/kommentar.php
===================================================================
--- trunk/include/kommentar.php	2006-06-12 20:52:33 UTC (rev 163)
+++ trunk/include/kommentar.php	2006-06-13 14:05:01 UTC (rev 164)
@@ -134,7 +134,7 @@
 		 *  Typs Kommentar zur??ck.
 		 *  \param[in] $literatur_nr Nr einer Literatur mit Kommentaren
 		 *  \pre Datenbankverbindung muss bestehen
-		 *  \return Feld vom Typ Kommentar
+		 *  \return Feld mit Elementen vom Typ Kommentar
 		 */
 		function GetAll($literatur_nr)
 		{



From lazhur at berlios.de  Tue Jun 13 16:53:53 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Tue, 13 Jun 2006 16:53:53 +0200
Subject: [Liman-svn] r165 - in trunk: . docs/beleg3 docs/beleg3/sourcecodes docs/beleg3/sourcecodes/design docs/beleg3/sourcecodes/include include
Message-ID: <200606131453.k5DErr0j021993@sheep.berlios.de>

Author: lazhur
Date: 2006-06-13 16:53:50 +0200 (Tue, 13 Jun 2006)
New Revision: 165

Added:
   trunk/docs/beleg3/sourcecodes/bibtex.php
   trunk/docs/beleg3/sourcecodes/commentmod.php
   trunk/docs/beleg3/sourcecodes/design/
   trunk/docs/beleg3/sourcecodes/design/liman.css
   trunk/docs/beleg3/sourcecodes/include/config.php
   trunk/docs/beleg3/sourcecodes/include/footer.php
   trunk/docs/beleg3/sourcecodes/include/form_helper.php
   trunk/docs/beleg3/sourcecodes/include/global.php
   trunk/docs/beleg3/sourcecodes/include/header.php
   trunk/docs/beleg3/sourcecodes/include/kommentar.php
   trunk/docs/beleg3/sourcecodes/include/literatur.php
   trunk/docs/beleg3/sourcecodes/include/literaturart.php
   trunk/docs/beleg3/sourcecodes/include/login.php
   trunk/docs/beleg3/sourcecodes/include/mitglied.php
   trunk/docs/beleg3/sourcecodes/include/sqldb.php
   trunk/docs/beleg3/sourcecodes/include/sqldb_mysql.php
   trunk/docs/beleg3/sourcecodes/include/suche.php
   trunk/docs/beleg3/sourcecodes/index.php
   trunk/docs/beleg3/sourcecodes/install.php
   trunk/docs/beleg3/sourcecodes/lit.php
   trunk/docs/beleg3/sourcecodes/litmod.php
   trunk/docs/beleg3/sourcecodes/login.php
   trunk/docs/beleg3/sourcecodes/search.php
   trunk/docs/beleg3/sourcecodes/searchmore.php
   trunk/docs/beleg3/sourcecodes/user.php
   trunk/docs/beleg3/sourcecodes/userlist.php
   trunk/docs/beleg3/sourcecodes/usermod.php
   trunk/docs/beleg3/tests.tex
Modified:
   trunk/bibtex.php
   trunk/commentmod.php
   trunk/docs/beleg3/programmdokumentation.tex
   trunk/docs/beleg3/sourcecodes/include/autor.php
   trunk/include/config.php
   trunk/index.php
   trunk/install.php
   trunk/lit.php
   trunk/litmod.php
   trunk/login.php
   trunk/search.php
   trunk/searchmore.php
   trunk/user.php
   trunk/userlist.php
   trunk/usermod.php
Log:
- Quelltexte in dritten Teilbeleg eingef?\195?\188gt
- weitere Kommentare hinzugef?\195?\188gt und entfernt


Modified: trunk/bibtex.php
===================================================================
--- trunk/bibtex.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/bibtex.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,6 +1,5 @@
 <?php
 	$title = "BibTeX Importieren";
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 

Modified: trunk/commentmod.php
===================================================================
--- trunk/commentmod.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/commentmod.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -12,7 +12,6 @@
 	{
 		$title = "Kommentar hinzuf??gen";
 	}
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 

Modified: trunk/docs/beleg3/programmdokumentation.tex
===================================================================
--- trunk/docs/beleg3/programmdokumentation.tex	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/programmdokumentation.tex	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,4 +1,5 @@
 \chapter{Programmdokumentation}
+% Klasseninterfaces
 \section{Definition Klasseninterfaces}
 \subsection{Klasse Autor}
 \lstinputlisting{interfaces/autor.php}
@@ -24,17 +25,89 @@
 \subsection{Klasse Suche}
 \lstinputlisting{interfaces/suche.php}
 
+% Quelltexte
+\section{Kommentierte Quelltexte}
+\subsection{bibtex.php}
+\lstinputlisting{sourcecodes/bibtex.php}
 
+\subsection{commentmod.php}
+\lstinputlisting{sourcecodes/commentmod.php}
 
-\section{Kommentierte Quelltexte}
+\subsection{index.php}
+\lstinputlisting{sourcecodes/index.php}
+
+\subsection{install.php}
+\lstinputlisting{sourcecodes/install.php}
+
+\subsection{litmod.php}
+\lstinputlisting{sourcecodes/litmod.php}
+
+\subsection{lit.php}
+\lstinputlisting{sourcecodes/lit.php}
+
+\subsection{login.php}
+\lstinputlisting{sourcecodes/login.php}
+
+\subsection{searchmore.php}
+\lstinputlisting{sourcecodes/searchmore.php}
+
+\subsection{search.php}
+\lstinputlisting{sourcecodes/search.php}
+
+\subsection{userlist.php}
+\lstinputlisting{sourcecodes/userlist.php}
+
+\subsection{usermod.php}
+\lstinputlisting{sourcecodes/usermod.php}
+
+\subsection{user.php}
+\lstinputlisting{sourcecodes/user.php}
+
+\subsection{design/liman.css}
+\lstinputlisting{sourcecodes/design/liman.css}
+
 \subsection{include/autor.php}
 \lstinputlisting{sourcecodes/include/autor.php}
 
-\section{Testplan}
-\subsection{Testf??lle}
+\subsection{include/config.php}
+\lstinputlisting{sourcecodes/include/config.php}
 
-\subsection{Testmatrix}
+\subsection{include/footer.php}
+\lstinputlisting{sourcecodes/include/footer.php}
 
-\section{Systemtest}
+\subsection{include/form\_helper.php}
+\lstinputlisting{sourcecodes/include/form_helper.php}
 
-\section{Abschlu??einsch??tzung}
\ No newline at end of file
+\subsection{include/global.php}
+\lstinputlisting{sourcecodes/include/global.php}
+
+\subsection{include/header.php}
+\lstinputlisting{sourcecodes/include/header.php}
+
+\subsection{include/kommentar.php}
+\lstinputlisting{sourcecodes/include/kommentar.php}
+
+\subsection{include/literaturart.php}
+\lstinputlisting{sourcecodes/include/literaturart.php}
+
+\subsection{include/literatur.php}
+\lstinputlisting{sourcecodes/include/literatur.php}
+
+\subsection{include/login.php}
+\lstinputlisting{sourcecodes/include/login.php}
+
+\subsection{include/mitglied.php}
+\lstinputlisting{sourcecodes/include/mitglied.php}
+
+\subsection{include/sqldb\_mysql.php}
+\lstinputlisting{sourcecodes/include/sqldb_mysql.php}
+
+\subsection{include/sqldb.php}
+\lstinputlisting{sourcecodes/include/sqldb.php}
+
+\subsection{include/suche.php}
+\lstinputlisting{sourcecodes/include/suche.php}
+
+
+% Tests
+\input{tests.tex}
\ No newline at end of file

Added: trunk/docs/beleg3/sourcecodes/bibtex.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/bibtex.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/bibtex.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,104 @@
+<?php
+	$title = "BibTeX Importieren";
+
+	require_once("include/header.php");
+
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
+	if ($login->IsMember() === false)
+	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
+		require_once("include/footer.php");
+		die();
+	}
+?>
+<div id="cfront" class="content">
+<?php
+	// Zeige Importformular, wenn noch keine Daten gesendet wurden
+	if (empty($_FILES["bibtexfile"]) === true && empty($_POST["bibtextext"]) === true)
+	{
+	?>
+		<form action="bibtex.<?=$ext;?>" id="bibtexfileform" method="post" enctype="multipart/form-data">
+		<fieldset>
+			<legend><b>BibTeX-Datei importieren</b></legend>
+		
+		
+			<table class="bibteximport">
+				<tbody>
+					<tr>
+						<th scope=row><label for="bibtextext">Datei:</label></th>
+						<td><input class="input_file" type="file" id="bibtexfile" name="bibtexfile"></td>
+					</tr>
+					<tr>
+						<th></th>
+						<td><input type="submit" value="Importieren"></td>
+					</tr>
+				</tbody>
+			</table>
+		</fieldset>
+		</form>
+	
+		<hr>
+		
+		<form action="bibtex.<?=$ext;?>" id="bibtextextform" method="post">
+		<fieldset>
+			<legend><b>BibTeX importieren</b></legend>
+			<table class="bibteximport">
+				<tbody>
+					<tr>
+						<th scope=row><label for="bibtextext">BibTeX:</label></th>
+						<td><textarea cols="20" rows="10" name="bibtextext" id="bibtextext"></textarea></td>
+					</tr>
+					<tr>
+						<th></th>
+						<td><input type="submit" value="Importieren"></td>
+					</tr>
+				</tbody>
+			</table>
+		</fieldset>
+		</form>
+	<?php
+	}
+	else
+	{
+		// BibTeX-Daten entweder von Dateiupload oder ?bergebenen Textdaten
+		$bibtex = "";
+		if (empty($_FILES["bibtexfile"]) === false)
+		{
+			// Wenn Datei hochgeladen wurde, lese Inhalt der Datei
+			$bibtex = file_get_contents($_FILES["bibtexfile"]["tmp_name"]);
+		}
+		elseif (empty($_POST["bibtextext"]) === false)
+		{
+			// Wenn Textdaten hochgeladen wurden, entferne automatisch
+			// hinzugef?gte Backslashes vor Zeichen mit besonderer Bedeutung
+			$bibtex = stripslashes($_POST["bibtextext"]);
+		}
+
+		// Fehler, wenn "nichts" hochgeladen/?bergeben wurde
+		if ($bibtex === false || empty($bibtex) === true)
+		{
+			echo "<div id=\"error\">Konnte nichts zum importieren lesen</div>";
+		}
+		else
+		{
+			// Importiere BibTeX in Datenbank
+			require_once("include/literatur.php");
+			$imported = Literatur::InsertBibTeX($bibtex);
+
+			// Gebe je nach Anzahl importierter Literatureintr?ge Text aus
+			switch ($imported)
+			{
+			case 0:
+				echo "<p style=\"text-align: center\">Keine Literatur wurde importiert</p>";
+				break;
+			case 1:
+				echo "<p style=\"text-align: center\">Ein Literatureintrag wurde importiert</p>";
+				break;
+			default:
+				echo "<p style=\"text-align: center\">$imported Literatureintr?ge wurden importiert</p>";
+			}
+		}
+	}
+	?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/commentmod.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/commentmod.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/commentmod.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,128 @@
+<?php
+	// W?hle Seitentitel nach ausgew?hlter Aktion
+	if (isset($_GET["delete"]) === true)
+	{
+		$title = "Kommentar l?schen";
+	}
+	elseif (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+	{
+		$title = "Kommentar ?ndern";
+	}
+	else
+	{
+		$title = "Kommentar hinzuf?gen";
+	}
+
+	require_once("include/header.php");
+
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
+	if ($login->IsMember() === false)
+	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
+		require_once("include/footer.php");
+		die();
+	}
+	elseif ($login->IsAdministrator() === false)
+	{
+		// Wenn keine Administratorrechte vorhanden sind
+		// d?rfen nur die eigenen Daten ge?ndert werden
+		$_GET["userid"] = $login->Nr;
+		$_POST["userid"] = $login->Nr;
+	}
+?>
+<div id="cfront" class="content">
+<?php
+	require_once("include/kommentar.php");
+	require_once("include/form_helper.php");
+
+	// Suche gew?hlte Aktion
+	if (isset($_GET["delete"]) === true)
+	{
+		// L?schen wenn akzeptiert wurde
+		if (isset($_POST["accept"]) === true)
+		{
+			// Fehlerhafte Daten zum L?schen ?bertragen?
+			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+			{
+				// Wenn ja, gebe Fehler aus
+				echo "<p id=\"error\">Kommentar konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
+			}
+			else
+			{
+				// Wenn nicht, l?sche Kommentar und gebe Erfolgsmeldung aus
+				Kommentar::Delete($_POST["id"]);
+				echo "<p style=\"text-align: center\">Kommentar wurde entfernt</p>";
+			}
+
+			// Wurde eine Literaturnummer ?bergeben, gebe Zur?ckbutton aus
+			if (empty($_POST["litid"]) === false)
+			{
+				echo form_back("lit.$ext", $_POST["litid"]);
+			}
+		}
+		else
+		{
+			// Frage ob Kommentar gel?scht werden soll
+			require_once("include/form_helper.php");
+			echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+			echo "Wollen sie den Kommentar wirklich entfernen?";
+			echo "<form action=\"commentmod.".$ext."?delete\" id=\"commentupdateform\" method=\"post\">";
+			echo form_input("hidden", "id", $_GET["id"]);
+			echo form_input("hidden", "accept", "true");
+			if (empty($_GET["litid"]) === false)
+			{
+				echo form_input("hidden", "litid", $_GET["litid"]);
+			}
+
+			echo "<input type=\"submit\" value=\"Best?tigen\">";
+			echo "</form></div>";
+		}
+	}
+	elseif  (isset($_GET["insert"]) === true)
+	{
+		// Fehlerhafte Daten zum Anlegen ?bertragen?
+		if (isset($_POST["text"]) === false ||
+			empty($_POST["userid"]) === true || is_numeric($_POST["userid"]) === false ||
+			empty($_POST["litid"]) === true || is_numeric($_POST["litid"]) === false)
+		{
+			// Wenn ja, gebe Fehler aus
+			echo "<p id=\"error\">Kommentar konnte nicht angelegt werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
+		}
+		else
+		{
+			// Wenn nicht, lege Kommentar an und gebe Erfolgsmeldung aus
+			Kommentar::Insert($_POST["text"], $_POST["userid"], $_POST["litid"]);
+			echo "<p style=\"text-align: center\">Kommentar wurde angelegt</p>";
+		}
+
+		// Wurde eine Literaturnummer ?bergeben, gebe Zur?ckbutton aus
+		if (empty($_POST["litid"]) === false)
+		{
+			echo form_back("lit.$ext", $_POST["litid"]);
+		}
+	}
+	elseif (isset($_GET["update"]) === true)
+	{
+		// Fehlerhafte Daten zum ?ndern ?bertragen?
+		if (isset($_POST["text"]) === false ||
+			empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+		{
+			// Wenn ja, gebe Fehler aus
+			echo "<p id=\"error\">Kommentar konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen des Kommentars gab</p>";
+		}
+		else
+		{
+			// Wenn nicht, ?ndere Kommentar und gebe Erfolgsmeldung aus
+			Kommentar::Update($_POST["id"], $_POST["text"]);
+			echo "<p style=\"text-align: center\">Kommentar wurde ge?ndert</p>";
+		}
+
+		// Wurde eine Literaturnummer ?bergeben, gebe Zur?ckbutton aus
+		if (empty($_POST["litid"]) === false)
+		{
+			echo form_back("lit.$ext", $_POST["litid"]);
+		}
+	}
+?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/design/liman.css
===================================================================
--- trunk/docs/beleg3/sourcecodes/design/liman.css	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/design/liman.css	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,153 @@
+html, body {
+	background-color: #f0f0f0;
+	color: black;
+	font: x-small sans-serif;
+	margin: 0;
+	padding: 0;
+}
+
+abbr, acronym {
+	border-bottom: 1px dotted black;
+	cursor: help;
+}
+
+h1 {
+	margin-left: 1em;
+}
+
+hr {
+	margin-top: 2em;
+	margin-bottom: 2em;
+}
+
+#installerror {
+	margin: 0;
+	padding: 3px;
+	border-bottom: 1px solid #000000;
+	background-color: #ffffdc;
+}
+
+#content h2 {
+	padding-bottom: 1em;
+}
+
+#sidebar {
+	float: left;
+	width: 11.5em;
+	padding: 0;
+	margin-left: .1em;
+	font-size: 125%;
+}
+
+#sidebar h2 {
+	font-size: 1em;	
+	margin: .2em .2em .2em .5em;
+}
+
+#navigation, #search, #loginbox {
+	background-color: white;
+	border: 1px solid #aaa;
+	color: black;
+	font-size: 0.9em;
+	margin-bottom: 1em;	
+	padding: 0 0.5em .3em 0em;
+	position: relative;
+	z-index: 3;
+}
+
+#navigation ul {
+	margin: 0 0 1em 0;
+	padding-left: 1em;
+	list-style: none;
+}
+
+#search input, #loginform #loginname, #loginform #passwort {
+	margin: 0 auto;
+	font-size: 1em;
+	width: 10.8em;
+	display: box;
+}
+
+#search form, #loginform {
+	text-align: center
+}
+
+#content {
+	background-color: white;
+	border: 1px solid #aaa;
+	font-size: 125%;
+	margin: 0em .1em 0em 12em;
+	padding: 1em;
+	position: relative;
+	min-height: 20em;
+}
+
+#content h2 {
+	margin: 0.1em;
+}
+
+.content {
+	margin-left: 1em;
+}
+
+#content form td {
+	width: 99%;
+}
+
+#content form th {
+	width: 20em;
+}
+
+#content .input_text,
+#content .input_file,
+#content .input_password,
+#content form textarea {
+	width: 99%;
+}
+
+#searchresult, #userlist {
+	
+	width: 99%;
+	border: 1px solid black;
+	border-collapse: collapse;
+}
+.searchmore th label {
+	width:9em;
+}
+
+
+#searchresult td, #searchresult th,  #userlist th{
+	border: 1px solid black;
+	text-align: center;
+}
+#userlist td {
+	border: 1px solid black;
+	text-align: left;
+}
+
+#litdetails th {
+	text-align: left;
+	vertical-align: top;
+}
+
+#litkommentare .kommentar {
+	width: 99%;
+}
+
+#error_list, #error {
+	padding: 0.5em;
+	border: 2px solid red;
+	margin: 0 auto;
+	margin-bottom: 1em;
+	background-color: #ffeaea;
+}
+
+#error, #warning {
+	text-align: center;
+}
+
+.input_failure {
+	border-color: red;
+	background-color: red;
+	color: black;
+}

Modified: trunk/docs/beleg3/sourcecodes/include/autor.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/autor.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/autor.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -8,9 +8,10 @@
 	 *  - Login::IsMember
 	 *  - SQLDB::Query
 	 *  - SQLDB::Fetch
+	 *  - SQLDB::GetInsertID
 	 *
 	 *  \author Frank Wilhelm
-	 *  \date 30.05.2006
+	 *  \date 6.06.2006
 	 */
 	class Autor
 	{
@@ -44,14 +45,47 @@
 		{
 			global $db_config, $sqldb, $login;
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// Entferne Autoren ohne Verbindung in Literatur_Autor zur Literatur
 				$sql = "DELETE autoren, connect
 						FROM ".$db_config['prefix']."Autoren AS autoren
 						LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
 						ON autoren.Autor_Nr = connect.Autor_Nr
 						WHERE connect.Autor_Nr is NULL";
-				$sqldb->Query($sql);
+
+				if ($sqldb->Query($sql) === false)
+				{
+					// Workaround f?r MySQL < 4
+					// Finde Autoren ohne Verbindung in Literatur_Autor zur Literatur
+					$sql = "SELECT autoren.Autor_Nr AS Nr
+							FROM ".$db_config['prefix']."Autoren AS autoren
+							LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
+							ON autoren.Autor_Nr = connect.Autor_Nr
+							WHERE connect.Autor_Nr is NULL";
+					$sqldb->Query($sql);
+
+					// Lese alle Autorennummern aus
+					$authorid = array();
+					while ($line = $sqldb->Fetch())
+					{
+						$authorid[] = $line->Nr;
+					}
+
+					// Wenn Autoren gefunden worden
+					if (empty($authorid) === false)
+					{
+						// Erstelle Kommagetrennte Liste der Autorennummern
+						$idlist = implode(", ", $authorid);
+
+						// L?sche gefundene Autoren
+						$sqlDelete = "DELETE FROM ".$db_config['prefix']."Autoren
+								WHERE Autor_Nr IN (";
+								$sqlDelete .= $idlist.")";
+						$sqldb->Query($sqlDelete);
+					}
+				}
 			}
 		}
 
@@ -62,19 +96,22 @@
 		 *  Typs Autor zur?ck.
 		 *  \param[in] $literatur_nr Nr einer Literatur mit Autoren
 		 *  \pre Datenbankverbindung muss bestehen
-		 *  \return Feld vom Typ Autor
+		 *  \return Feld mit Elementen vom Typ Autor
 		 */
 		function GetAll($literatur_nr)
 		{
 			global $db_config, $sqldb;
 
-			$authors = array();
+			// Lese alle Autoren mit Verbindung zu Literatur in Literatur_Autor
 			$sql = "SELECT  autoren.Autor_Nr AS Nr, Autorname AS Name
 					FROM ".$db_config['prefix']."Literatur_Autor AS connect
 					INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 					ON connect.Autor_Nr = autoren.Autor_Nr
 					WHERE Literatur_Nr = '$literatur_nr'";
 			$sqldb->Query($sql);
+
+			// Lese Autoren aus und erstelle Array aus gefundenen Autoren
+			$authors = array();
 			while ($cur = $sqldb->Fetch())
 			{
 				$authors[] = new Autor($cur);
@@ -101,32 +138,37 @@
 		function Split($autoren)
 		{
 			global $db_config, $sqldb, $login;
-			
 			$authorNumbers = array();
 
+			// Nur wenn wir als Mitglied angemeldet sind
 			if ($login->IsMember() === true)
 			{
+				// Trenne kommagetrennte Liste der Autoren an Kommas auf
 				$authorNames = array();
-				$authorNames = split( ",", $autoren );
-			
-				for( $i = 0; $i < count($authorNames); $i++ )
+				$authorNames = split(",", $autoren);
+
+				// Suche ob jeder Autorname in kommagetrennter Liste in Autoren steht
+				foreach ($authorNames as $autor)
 				{
+					// Suche nach Autoreintrag
 					$sqlSelect = "SELECT Autor_Nr AS Nr FROM ".$db_config['prefix']."Autoren AS autoren
-							WHERE Autorname = '".trim($authorNames[$i])."'";
+							WHERE Autorname = '".trim($autor)."'";
 					$sqldb->Query( $sqlSelect );
 					
-					if( $cur = $sqldb->Fetch() )
+					// Existiert der Eintrag?
+					if ($cur = $sqldb->Fetch())
 					{
+						// Wenn ja, speichere Autornummer f?r R?ckgabe
 						$authorNumbers[] = $cur->Nr;
 					}
 					else
 					{
-						$sqlInsert = "INSERT INTO ".$db_config['prefix']."Autoren VALUES (NULL, '".trim($authorNames[$i])."')";
-						$sqlIdentity = "SELECT @@IDENTITY AS Nr FROM ".$db_config['prefix']."Autoren";
-						$sqldb->Query( $sqlInsert );
-						$sqldb->Query( $sqlIdentity );
-						$line = $sqldb->Fetch();
-						$authorNumbers[] = $line->Nr;
+						// Wenn nicht, dann f?ge Autorname in Datenbank ein
+						$sqlInsert = "INSERT INTO ".$db_config['prefix']."Autoren VALUES (NULL, '".trim($autor)."')";
+						$sqldb->Query($sqlInsert);
+
+						// Speichere neue Autornummer f?r R?ckgabe
+						$authorNumbers[] = $sqldb->GetInsertID();
 					}
 				}
 			}

Added: trunk/docs/beleg3/sourcecodes/include/config.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/config.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/config.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,12 @@
+<?php
+	// Datenbankeinstellungen
+	$db_config['dbms'] = "mysql";	// welche Datenbankklasse benutzen?
+	$db_config['user'] = "liman"; // Nutzername des Datenbanknutzers
+	$db_config['pass'] = "drownamil"; // Passwort f?r Datenbanknutzer
+	$db_config['name'] = "liman"; // Name der Datenbank
+	$db_config['host'] = "db.berlios.de"; // Adresse des Datenbankservers
+	$db_config['prefix'] = "liman_"; // Prefix der Tabellennamen
+
+	$ext = "php";	// Endung der von den Usern abrufbaren Dateien
+	$gz_enable = true; // aktiviere GZIP-Kompression der HTML-Dateien
+?>

Added: trunk/docs/beleg3/sourcecodes/include/footer.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/footer.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/footer.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,4 @@
+			</div>
+		</div>
+	</body>
+</html>

Added: trunk/docs/beleg3/sourcecodes/include/form_helper.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/form_helper.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/form_helper.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,83 @@
+<?php
+	/*! \brief Gibt HTML-Form-Input zur?ck
+	 *
+	 *  \param[in] $type Type des Inputfeldes
+	 *  \param[in] $name ID und Name des Inputfeldes
+	 *  \param[in] $value Inhalt des Feldes
+	 *  \param[in] $failure ob Feld als fehlerhaft markiert werden soll
+	 *  \return String mit HTML-Form-Input
+	 */
+	function form_input($type, $name, $value = "", $failure = false)
+	{
+		$str = "<input class=\"input_".$type."\" type=\"".htmlspecialchars($type)."\" name=\"".htmlspecialchars($name)."\" id=\"".htmlspecialchars($name)."\" ";
+
+		if (empty($value) === false)
+		{
+			$str .= " value=\"".htmlspecialchars($value)."\" ";
+		}
+
+		if ($failure === true)
+		{
+			$str .= " class=\"input_failure\" ";
+		}
+
+		$str .= ">";
+		
+		return $str;
+	}
+
+	/*! \brief Gibt HTML-Form-Select zur?ck
+	 *
+	 *  \param[in] $options Feld mit Auswahlm?glichkeiten
+	 *  \param[in] $name ID und Name der Auswahlfeldes
+	 *  \param[in] $value aktuell ausgew?hltes Element der Auswahl
+	 *  \param[in] $failure ob Auswahl als fehlerhaft markiert werden soll
+	 *  \return String mit HTML-Form-Select
+	 */
+	function form_select($options, $name, $value="", $failure = false)
+	{
+		$str = "<select id=\"".htmlspecialchars($name)."\" name=\"".htmlspecialchars($name)."\" ";
+		if ($failure === true)
+		{
+			$str .= " class=\"input_failure\" ";
+		}
+		$str .= ">";
+
+		foreach ($options as $option)
+		{
+			$str .= " <option ";
+			if ($option == $value)
+			{
+				$str .= " selected ";
+			}
+			$str .= ">".htmlspecialchars($option)."</option>";
+		}
+		$str .= "</select>";
+
+		return $str;
+	}
+
+	/*! \brief Gibt Formular mit Zur?ckknopf zur?ck
+	 *
+	 *  Erzeugt ein einfaches GET-Formular, dass nur aus einem Zur?ckbutton
+	 *  besteht, der entweder auf eine Seite oder einer Seite mit ID
+	 *  verweist. Die ID wird dabei einfach per verstecktem Feld
+	 *  mit dem Namen id ?bergeben.
+	 *  \param[in] $url Seite auf die der Knopf zeigt
+	 *  \param[in] $id ID f?r aufzurufende Seite
+	 *  \return String mit Zur?ck-Button im HTML-Form
+	 */
+	function form_back($url, $id="")
+	{
+		$str = "<form action=\"".htmlspecialchars($url)."\" method=\"get\"><span>";
+
+		if (func_num_args() == 2)
+		{
+			$str .= form_input("hidden", "id", $id);
+		}
+		
+		$str .= "<input type=\"submit\" value=\"Zur?ck\"></span></form>";
+
+		return $str;
+	}
+?>
\ No newline at end of file

Added: trunk/docs/beleg3/sourcecodes/include/global.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/global.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/global.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,67 @@
+<?php
+	// Benutze Backslashes, wenn dies nicht automatisch gemacht wird
+	if( !get_magic_quotes_gpc())
+	{
+		function quote_array(&$array)
+		{
+			if (is_array($array))
+			{
+				while (list($k, $v) = each($array))
+				{
+					if (is_array($array[$k]))
+					{
+						while (list($k2, $v2) = each($array[$k]))
+						{
+							$array[$k][$k2] = addslashes($v2);
+						}
+						@reset($array[$k]);
+					}
+					else
+					{
+						$array[$k] = addslashes($v);
+					}
+				}
+				@reset($array);
+			}
+		}
+	
+		quote_array($_GET);
+		quote_array($_POST);
+		quote_array($_COOKIE);
+	}
+
+	/*! \brief Wandelt String in HTML-ID um
+	 *
+	 *  \param[in] str zu verarbeitende Rohdaten
+	 *  \return umgewandelter String
+	 */
+	function makeid($str)
+	{
+		$str = strtolower($str);
+		$str = str_replace(" ", "_", $str);
+		$str = str_replace("/", "_", $str);
+		$str = str_replace("\\", "_", $str);
+
+		$str = str_replace("\"", "_", $str);
+		$str = str_replace("'", "_", $str);
+
+		$str = str_replace("?", "ue", $str);
+		$str = str_replace("&uuml;", "ue", $str);
+
+		$str = str_replace("?", "ae", $str);
+		$str = str_replace("&auml;", "ae", $str);
+
+		$str = str_replace("?", "oe", $str);
+		$str = str_replace("&ouml;", "oe", $str);
+
+		if ($str[0] == '_')
+		{
+			$str[0] = " ";
+		}
+		return $str;
+	}
+
+	require_once("include/config.php");
+	require_once("include/sqldb.php");
+	require_once("include/login.php");
+?>

Added: trunk/docs/beleg3/sourcecodes/include/header.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/header.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/header.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,97 @@
+<?php 
+	header("Content-Language: de");
+	header("Content-type: text/html; charset=UTF-8");
+
+	require_once("include/global.php");
+
+	// Aktiviere GZIP-Kompression, wenn gew?nscht
+	if (isset($gz_enable) === true && $gz_enable === true)
+	{
+		ob_start('ob_gzhandler');
+	}
+?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
+<html>
+	<head>
+		<title><?=empty($title)?"":$title." :: "; ?>LiMan</title>
+		<link rel="SHORTCUT ICON" href="favicon.ico">
+		<style type="text/css" title="LiMan 1.0" media="screen,projection">
+			@import "design/liman.css";
+			<?=empty($extracss)?"":"@import \"design/".$extracss."\";\n"; ?>
+		</style>
+		<?=empty($extrahead)?"":$extrahead."\n"; ?>
+		<meta name="description" content="Literature Manager">
+		<meta name="keywords" content="bibtex, books, literature, database, manager">
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+		<meta name="robots" content="follow">
+		<meta http-equiv="content-language" content="de">
+		<meta name="author" content="Simon Wunderlich">
+		<link rel="home" title="Home" href="index.<?=$ext;?>">
+	</head>
+	<body id="liman">
+		<?php
+			// Gebe Warnung aus, wenn install.php nicht gel?scht wurde und es nicht unterdr?ckt wird
+			if (file_exists("install.php") === true && 
+				((empty($disable_installwarning) === false && $disable_installwarning === false)
+				|| empty($disable_installwarning) === true))
+			{
+				echo "<div id=\"installerror\">
+					install.php wurde nicht gel?scht. Erledigen sie dies so schnell wie m?glich
+					</div>";
+			}
+		?>
+		<div id="container">
+			<div id="header">
+				<h1><span><acronym title="Literature Manager">LiMan</acronym></span></h1>
+			</div>
+			
+			<div id="sidebar">
+				<div id="navigation">
+					<h2><span>Navigation</span></h2>
+					<ul>
+						<li id="nhome"><a href="index.<?=$ext;?>" accesskey="h">Literatur</a></li>
+						<li id="nuser"><a href="userlist.<?=$ext;?>" accesskey="n">Nutzer</a></li>
+					</ul>
+				</div>
+
+				<div id="search">
+					<h2><span>Suchen</span></h2>
+					<form action="search.<?=$ext;?>" id="searchform" method="get">
+						<div>
+						<input name="suchbegriff" value="" type="text">
+						<input value="Suche" type="submit">
+						<span style="font-size: xx-small"><a href="searchmore.php">Erweiterte Suche</a></span>
+						</div>
+					</form>
+				</div>
+
+				<div id="loginbox">
+					<h2><span>Einloggen</span></h2>
+					<?php
+						if ($login->IsMember() === false)
+						{
+						?>
+							<form action="login.<?=$ext;?>" id="loginform" method="post">
+								<div>
+								<label for="loginname">Login:</label><input id="loginname" name="loginname" value="" type="text">
+								<label for="passwort">Passwort:</label><input id="passwort" name="passwort" type="password">
+								<input type="submit" value="Login">
+								</div>
+							</form>
+						<?php
+						}
+						else
+						{
+						?>
+							<form action="login.<?=$ext;?>?logout" id="loginform" method="post">
+								<div><input type="submit" value="Logout">
+								</div>
+							</form>
+						<?php
+						}
+					?>
+				</div>
+			</div>
+
+			<div id="content">
+				<h2 <?=empty($title)?"":"id=\"".makeid($title)."\""; ?>><?=empty($title)?"Inhalt":$title; ?></h2>

Added: trunk/docs/beleg3/sourcecodes/include/kommentar.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/kommentar.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/kommentar.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,277 @@
+<?php
+	require_once("include/login.php");
+
+	/*! \brief Verwaltet Kommentare
+	 *
+	 *  Stellt Funktionen zum Anlegen, L?schen, Bearbeiten von Kommentaren
+	 *  bereit. Es k?nnen sowohl einzelne Kommentare oder Kommentare nach
+	 *  ihrer Verbindung zur Literatur bzw. Mitgliedern gel?scht werden.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Login::IsAdministrator
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class Kommentar
+	{
+		var $Nr = 0; ///< Identifikationsnummer des Kommentars
+		var $Text = 0; ///< Kommentartext
+		var $Verfasser_Nr = 0; ///< Mitglieds_Nr des Verfassers
+		var $Verfasser_Name = 0; ///< Name des Verfassers (Vor- und Nachname)
+		
+		/*! \brief Legt Kommentarobjekt an
+		 *
+		 *  Legt ein neues Kommentarobjekt aus einem Objekt mit den
+		 *  Attributen Nr, Text, Verfasser_Nr und Verfasser_Name an.
+		 *  \pre -
+		 *  \param[in] $data Objekt mit Kommentardaten der Form
+		 *    - Nr
+		 *    - Text
+		 *    - Mitglieds_Nr
+		 *    - Vorname
+		 *    - Nachname
+		 */
+		function Kommentar($data)
+		{
+			$this->Nr = $data->Nr;
+			$this->Text = $data->Text;
+			$this->Verfasser_Nr = $data->Mitglieds_Nr;
+			$this->Verfasser_Name = $data->Vorname." ".$data->Nachname;
+		}
+		
+		/*! \brief L?scht Kommentar
+		 *
+		 *  L?scht einen Kommentar aus Kommentare mit der Kommentar_Nr
+		 *  $nr.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Kommentar in Kommentare mit Kommentar_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer des zu l?schenden Kommentars
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt, wenn Mitglieds_Nr
+		 *    des Kommentars ungleich der eigenen Mitglieds_Nr ist.
+		 *    Ist der Nutzer nicht angemeldet, werden keine Operationen
+		 *    ausgef?hrt
+		 */
+		function Delete($nr)
+		{
+			global $db_config, $sqldb, $login;
+
+			if ($login->IsAdministrator() === true)
+			{
+				// Wenn Administratorrechte vorliegen,
+				// L?sche Kommentar mit Kommentar_Nr = $nr
+				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
+						WHERE Kommentar_Nr = '$nr'
+						LIMIT 1";
+				$sqldb->Query($sql);
+			}
+			elseif ($login->IsMember() === true)
+			{
+				// Wenn Mitgliedsrechte vorliegen, l?sche Kommentar mit Kommentar_Nr = $nr
+				// nur wenn Mitglieds_Nr des aktuellen Nutzers
+				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
+						WHERE Kommentar_Nr = '$nr' AND Mitglieds_Nr='".$login->Nr."'
+						LIMIT 1";
+				$sqldb->Query($sql);
+			}
+		}
+		
+		/*! \brief L?scht alle zu einer Literatur geh?renden Kommentare
+		 *
+		 *  L?scht alle Kommentare aus Kommentare, die mit Literatur
+		 *  mit der Literaturnummer ($literatur_nr) verbunden sind.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $literatur_nr Nummer der Literatur
+		 *  \remarks Ist Nutzer nicht eingeloggt, werden keine
+		 *    Operationen ausgef?hrt.
+		 */
+		function DeleteAll($literatur_nr)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Mitglied angemeldet sind
+			if ($login->IsMember() === true)
+			{
+				// L?sche alle Kommentare zu bestimmten Literatur
+				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
+						WHERE Literatur_Nr = '$literatur_nr'";
+				$sqldb->Query($sql);
+			}
+		}
+
+		/*! \brief L?scht alle zu einem Mitglied geh?renden Kommentare
+		 *
+		 *  L?scht alle Kommentare aus Kommentare, die mit Mitglieder
+		 *  mit der Mitglieds_Nr ($member_nr) verbunden sind.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $member_nr Nummer eines Mitglieds
+		 *  \remarks Ist der Nutzer nicht als Administrator eingeloggt,
+		 *    werden keine Operationen ausgef?hrt.
+		 */
+		function DeleteAllMember($member_nr)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Mitglied angemeldet sind
+			if ($login->IsAdministrator() === true)
+			{
+				// L?sche alle Kommentare von bestimmten Mitglied
+				$sql = "DELETE FROM ".$db_config['prefix']."Kommentare
+						WHERE Mitglieds_Nr = '$member_nr'";
+				$sqldb->Query($sql);
+			}
+		}
+
+		/*! \brief Gibt Kommentare zu bestimmter Literatur zur?ck
+		 *
+		 *  Liest alle Kommentare die einer Literatur ($literatur_nr)
+		 *  zugeordnet sind aus Kommentare aus und gibt sie als Feld des
+		 *  Typs Kommentar zur?ck.
+		 *  \param[in] $literatur_nr Nr einer Literatur mit Kommentaren
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld mit Elementen vom Typ Kommentar
+		 */
+		function GetAll($literatur_nr)
+		{
+			global $db_config, $sqldb;
+
+			// Lese alle Kommentare zu bestimmter Literatur
+			$sql = "SELECT  Kommentar_Nr AS Nr, Kommentartext AS Text, mitglieder.Mitglieds_Nr AS Mitglieds_Nr, Vorname, Name AS Nachname
+					FROM ".$db_config['prefix']."Kommentare AS kommentare
+					INNER JOIN  ".$db_config['prefix']."Mitglieder AS mitglieder
+					ON kommentare.Mitglieds_Nr = mitglieder.Mitglieds_Nr
+					WHERE Literatur_Nr = '$literatur_nr'
+					ORDER BY Nr ASC";
+			$sqldb->Query($sql);
+
+			// Lese Kommentare aus und erstelle Array aus gefundenen Kommentaren
+			$authors = array();
+			while ($cur = $sqldb->Fetch())
+			{
+				$authors[] = new Kommentar($cur);
+			}
+			return $authors;
+		}
+		
+		/*! \brief Legt Kommentar an
+		 *
+		 *  Legt einen neuen Kommentar mit Text ($text) zu einer
+		 *  Literatur ($literatur_nr) vom einem Verfasser 
+		 *  ($verfasser_nr) an.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Text ($text) darf nicht leer sein
+		 *  \param[in] $text Text des Kommentars
+		 *  \param[in] $verfasser_nr Mitglieds_Nr des Verfassers
+		 *  \param[in] $literatur_nr Nummer der Literatur
+		 *  \remarks Ist das aktuelle Mitglied kein 
+		 *  Administrator, dann muss $verfasser_nr gleich der aktuellen
+		 *  Nummer des Logins sein. Ist der Nutzer nicht eingeloggt,
+		 *  werden keine Operationen ausgef?hrt. Ist keine passende
+		 *  Literatur mit der Literatur_Nr $literatur_nr vorhanden,
+		 *  wird kein Kommentar angelegt. Existiert schon ein Kommentar
+		 *  zu Literatur mit $literatur_nr von Mitglied mit Mitglieds_Nr
+		 *  $verfasser_nr, wird nur der Text des Kommentars mit
+		 *  Kommentar::Update ge?ndert.
+		 */
+		function Insert($text, $verfasser_nr, $literatur_nr)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Liegen Administratorrechte vor? Alternativ Mitgliedsrechte
+			// (aber nur, wenn der Verfasser gleich der eingeloggte User ist)
+			if ($login->IsAdministrator() === true ||
+				($login->IsMember() === true && $verfasser_nr == $login->Nr))
+			{
+				// Suche nach Literatureintrag mit ?bergebener Literatur_Nr $literatur_nr
+				$sqlExists = "SELECT Literatur_Nr FROM ".$db_config['prefix']."Bibliothek
+						WHERE Literatur_Nr='$literatur_nr'";
+				$sqldb->Query($sqlExists);
+
+				// Existiert eine Literatur mit $literatur_nr?
+				if ($sqldb->Fetch() !== false)
+				{
+					// Suche ob schon Kommentar von Mitglied zur Literatur existiert
+					$sqlAlready = "SELECT Kommentar_Nr FROM ".$db_config['prefix']."Kommentare
+							WHERE Literatur_Nr='$literatur_nr' AND Mitglieds_Nr='$verfasser_nr'";
+					$sqldb->Query($sqlAlready);
+
+					$cur = $sqldb->Fetch();
+					// Existiert noch kein Kommentar zur Literatur von Mitglied?
+					if ($cur === false)
+					{
+						// Wenn ja, f?ge neuen Kommentar hinzu, wenn Text angegeben wurde
+						if (empty($text) === false)
+						{
+							$sql = "INSERT INTO ".$db_config['prefix']."Kommentare
+								VALUES (NULL, '$text', '$literatur_nr', '$verfasser_nr')";
+							$sqldb->Query($sql);
+						}
+					}
+					else
+					{
+						// Existiert schon ein Kommentar, dann ?ndere diesen
+						Kommentar::Update($cur->Kommentar_Nr, $text);
+					}
+				}
+			}
+		}
+		
+		/*! \brief ?ndert einen Kommentar
+		 *
+		 *  ?ndert in Kommentare den Text des Kommentars mit $nr
+		 *  in $text.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Kommentar in Kommentare mit Kommentar_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer des zu ver?ndernden Kommentars
+		 *  \param[in] $text neuer Text des Kommentars
+		 *  \remarks Ist das aktuelle Mitglied kein Administrator,
+		 *  dann muss die aktuelle Nummer des Mitglieds gleich der
+		 *  Mitglieds_Nr des Kommentars in Kommentare sein. Ist der
+		 *  Nutzer nicht eingeloggt, werden keine Operationen
+		 *  ausgef?hrt. Wird kein Text ($text) angegeben, wird der
+		 *  Kommentar mit Kommentar::Delete gel?scht.
+		 */
+		function Update($nr, $text)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Wurde kein Text angegeben?
+			if (empty($text) === true)
+			{
+				// Wenn ja, l?sche Kommentar
+				Kommentar::Delete($nr);
+			}
+			else
+			{
+				// Wenn nicht, ?ndere Kommentar
+
+				if ($login->IsAdministrator() === true)
+				{
+					// Wenn Administratorrechte vorliegen,
+					// ?ndere Kommentar mit Kommentar_Nr = $nr
+					$sql = "UPDATE ".$db_config['prefix']."Kommentare
+							SET Kommentartext='$text'
+							WHERE Kommentar_Nr='$nr'
+							LIMIT 1";
+					$sqldb->Query($sql);
+				}
+				elseif ($login->IsMember() === true)
+				{
+					// Wenn Mitgliedsrechte vorliegen, ?ndere Kommentar mit Kommentar_Nr = $nr
+					// nur wenn Mitglieds_Nr des aktuellen Nutzers
+					$sql = "UPDATE ".$db_config['prefix']."Kommentare
+							SET Kommentartext='$text'
+							WHERE Kommentar_Nr='$nr' AND Mitglieds_Nr='".$login->Nr."'
+							LIMIT 1";
+					$sqldb->Query($sql);
+				}
+			}
+		}
+	}
+?>

Added: trunk/docs/beleg3/sourcecodes/include/literatur.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/literatur.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/literatur.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,431 @@
+<?php
+	require_once("include/login.php");
+	require_once("include/kommentar.php");
+	require_once("include/literaturart.php");
+	require_once("include/autor.php");
+
+	/*! \brief Verwaltet Literatur
+	 *
+	 *  Stellt Funktionen zum Abruf, Exportieren, L?schen, Importieren,
+	 *  Hinzuf?gen und ?ndern von Literatur in Bibliothek zur Verf?gung.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Autor::Clean
+	 *  - Autor::GetAll
+	 *  - Autor::Split
+	 *  - Kommentar::DeleteAll
+	 *  - Kommentar::GetAll
+	 *  - LiteraturArt::LiteraturArt
+	 *  - LiteraturArt::GetBibTexText
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *  - SQLDB::GetInsertID
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 06.06.2006
+	 */
+	class Literatur
+	{
+		var $Nr = 0; ///< Literaturidentifikationsnummer
+		var $Titel = ""; ///< Titel der Literatur
+		var $Jahr = 0; ///< Erscheinungsjahr
+		var $Verlag = ""; ///< Verlag/Herausgeber
+		var $ISBN = ""; ///< ISBN der Literatur
+		var $Beschreibung = ""; ///< Bemerkung zur Literatur
+		var $Ort = ""; ///< Herausgabeort
+		var $Stichworte = ""; ///< Stichworte zum Inhalt der Literatur
+		var $Art; ///< Typ der Literatur
+		var $Autoren = array(); ///< Feld mit Autoren der Literatur
+		var $Kommentare = array(); ///< Feld mit Kommentaren der Literatur
+		
+		/*! \brief Liest Literatur ein
+		 *
+		 *  Erstellt aus Literatur in Bibliothek mit Literatur_Nr
+		 *  ($nr) neues Literaturobjekt.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer der zu einlesenden Literatur
+		 */
+		function Literatur($nr)
+		{
+			global $db_config, $sqldb;
+
+			// Suche Literatur mit Literatur_Nr = $nr heraus
+			$sql = "SELECT Literatur_Nr, Art, Titel, Jahr, Verlag, ISBN, Beschreibung, Ort, Stichworte
+					FROM ".$db_config['prefix']."Bibliothek
+					WHERE Literatur_Nr='$nr'
+					LIMIT 1";
+			$sqldb->Query($sql);
+
+			// Lese gefundene Daten aus
+			if ($cur = $sqldb->Fetch())
+			{
+				$this->Nr = $cur->Literatur_Nr;
+				$this->Art = new LiteraturArt($cur->Art);
+				$this->Titel = $cur->Titel;
+				$this->Jahr = $cur->Jahr;
+				$this->Verlag = $cur->Verlag;
+				$this->ISBN = $cur->ISBN;
+				$this->Beschreibung = $cur->Beschreibung;
+				$this->Ort = $cur->Ort;
+				$this->Stichworte = $cur->Stichworte;
+				$this->Autoren = Autor::GetAll($nr);
+				$this->Kommentare = Kommentar::GetAll($nr);
+			}
+		}
+
+		/*! \brief Exportiert Literatur nach BibTeX
+		 *
+		 *  Exportiert die aktuellen Informationen im Literaturobjekt
+		 *  in das BibTeX-Format.
+		 *  \pre -
+		 *  \return $string mit BibTeX-Eintrag
+		 */
+		function ToBibtex()
+		{
+			$str = "";
+
+			// Wurde ein LiteraturArt-Objekt angelegt?
+			if (is_object($this->Art) === true)
+			{
+				// Lege Kopf des BibTeX-Eintrags an
+				$str = "@".$this->Art->GetBibtexText()."{".$this->Art->GetBibtexText().$this->Nr;
+				
+				// Titel hinzuf?gen, wenn vorhanden
+				if (empty($this->Titel) === false)
+				{
+					$str .= ",\n\ttitle = \"".addslashes($this->Titel)."\"";
+				}
+	
+				// Autoren hinzuf?gen, wenn vorhanden
+				if (empty($this->Autoren) === false)
+				{
+					// Erstelle and-getrennte Liste der Autorennamen
+					$autornamen = array();
+					foreach ($this->Autoren as $autor)
+					{
+						$autornamen[] = $autor->Name;
+					}
+
+					$autorlist = implode(" and ", $autornamen);
+					$str .= ",\n\tauthor = \"".addslashes($autorlist)."\"";
+				}
+	
+				// Jahr hinzuf?gen, wenn vorhanden
+				if (empty($this->Jahr) === false)
+				{
+					$str .= ",\n\tyear = \"".addslashes($this->Jahr)."\"";
+				}
+	
+				// Verlag hinzuf?gen, wenn vorhanden
+				if (empty($this->Verlag) === false)
+				{
+					$str .= ",\n\tpublisher = \"".addslashes($this->Verlag)."\"";
+				}
+	
+				// ISBN hinzuf?gen, wenn vorhanden
+				if (empty($this->ISBN) === false)
+				{
+					$str .= ",\n\tisbn = \"".addslashes($this->ISBN)."\"";
+				}
+	
+				// Ort hinzuf?gen, wenn vorhanden
+				if (empty($this->Ort) === false)
+				{
+					$str .= ",\n\taddress = \"".addslashes($this->Ort)."\"";
+				}
+				
+				// Beende BibTeX-Eintrag
+				$str .= "\n}\n";
+			}
+			return $str;
+		}
+
+		/*! \brief L?scht Literatur
+		 *
+		 *  L?scht Literatur aus Bibliothek mit der Literatur_Nr $nr.
+		 *  Alle verbundenen Kommentare werden aus Kommentare gel?scht.
+		 *  Au?erdem werden alle nun nicht mehr gebrauchten Autoren in
+		 *  Autoren gel?scht.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer der zu l?schenden Literatur
+		 *  \remarks Ist der Nutzer nicht als Mitglied angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Delete($nr)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Mitglied angemeldet sind
+			if ($login->IsMember() === true)
+			{
+				// L?sche Literatur aus Bibliothek
+				$sql = "DELETE FROM ".$db_config['prefix']."Bibliothek
+						WHERE Literatur_Nr = '$nr'
+						LIMIT 1";
+				$sqldb->Query($sql);
+
+				// Entferne alle Verbindugnen zwischen Literatur und Autoren
+				$sql = "DELETE FROM ".$db_config['prefix']."Literatur_Autor
+						WHERE Literatur_Nr = '$nr'";
+				$sqldb->Query($sql);
+
+				// L?sche nun alle freigewordenen Autoren
+				Autor::Clean();
+
+				// L?sche alle zur Literatur geh?rdenden Kommentare
+				Kommentar::DeleteAll($nr);
+			}
+		}
+
+		/*! \brief Importiert BibTeX
+		 *
+		 *  Importiert Literatur nach Bibliothek aus einem
+		 *  BibTeX-formatierten String. Alle Eintr?ge werden dazu
+		 *  nacheinandere eingelesen und umgewandelt, um diese dann
+		 *  in die Datenbank zu schreiben.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $bibtex String mit Inhalt einer BibTeX-Datei
+		 *  \return Anzahl der importierten Literatur
+		 */
+		function InsertBibTeX($bibtex)
+		{
+			$allowed_entries = array('book', 'article', 'booklet',
+					'conference', 'inbook', 'incollection', 'inproceedings', 'manual',
+					'mastersthesis', 'misc', 'phdthesis', 'proceedings', 'techreport',
+					'unpublished');
+
+			// Finde alle BibTeX-Eintr?ge
+			// Funktioniert nicht bei Argumenten ?ber mehrere Zeilen
+			if (preg_match_all('/@([\w]+[\s]*)\{[\s]*([-\d\w]+)(([\s]*,[\s]*[\w]*[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*)+)\}/', $bibtex, $regexp_entries) !== false)
+			{
+				$num_entries = sizeof($regexp_entries[0]);
+			}
+			else
+			{
+				$num_entries = 0;
+			}
+
+			$entries = false;
+			
+			// Extrahiere alle Eintr?ge
+			for ($i = 0; $i < $num_entries; $i++)
+			{
+				$cur = new stdClass;
+				$cur->autoren = "";
+				$cur->art = new LiteraturArt("book");
+				$cur->titel = "";
+				$cur->jahr = date("Y");
+				$cur->verlag = "";
+				$cur->isbn = "";
+				$cur->beschreibung = "";
+				$cur->ort = "";
+
+				// Lese Typ vom Eintrag
+				$type = trim($regexp_entries[1][$i]);
+				
+				// Haben wir ?berhaupt den Anfang eines Eintrags gefunden?
+				if (in_array($type, $allowed_entries) === false)
+				{
+					continue;
+				}
+				else
+				{
+					$cur->art = new LiteraturArt($type);
+				}
+				
+
+				// Lese K?rzel
+				$cur->id = trim($regexp_entries[2][$i]);
+
+				// Extrahiere "Optionen"
+				if (preg_match_all('/(([\w]*)[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*(,|\}))+/', $regexp_entries[3][$i], $regexp_options) !== false)
+				{
+					// Lese die Optionen des aktuellen BibTeX-Eintrags einzeln
+					$num_options = sizeof($regexp_options[0]);
+					for ($j = 0; $j < $num_options; $j++)
+					{
+						// Name des Arguments der "Option" auslesen und bereinigen
+						$argument = trim($regexp_options[3][$j]);
+
+						if ($argument[0] == "{" && $argument[strlen($argument)-1] == "}")
+						{
+							$argument = substr($argument, 1, strlen($argument)-2);
+						}
+						if ($argument[0] == "\"" && $argument[strlen($argument)-1] == "\"")
+						{
+							$argument = substr($argument, 1, strlen($argument)-2);
+						}
+
+						// Wei?e Daten der aktuellen Option zu
+						switch (strtolower(trim($regexp_options[2][$j])))
+						{
+						case "title":
+							$cur->titel = $argument;
+							break;
+						case "author":
+							$cur->autoren = preg_replace("/ AND /i", ", ", $argument);
+							break;
+						case "year":
+							$cur->jahr = $argument;
+							break;
+						case "publisher":
+							$cur->verlag = $argument;
+							break;
+						case "isbn":
+							$cur->isbn = $argument;
+							break;
+						case "address":
+							$cur->ort = $argument;
+							break;
+						case "note":
+						case "annote":
+							$cur->beschreibung = $argument;
+							break;
+						}
+					}
+				}
+				else
+				{
+					continue;
+				}
+				
+				// Erzeuge array, wenn noch nicht geschehen
+				if ($entries === false)
+				{
+					$entries = array();
+				}
+				$entries[] = $cur;
+			}
+
+
+			$imported = 0;
+			if ($entries !== false && empty($entries) === false)
+			{
+				// Importiere die einzelnen Eintr?ge in Bibliothek
+				// wenn Titel und Autor vorhanden sind
+				foreach ($entries as $entry)
+				{
+					if (empty($entry->titel) === false && empty($entry->autoren) === false)
+					{
+						$imported++;
+						Literatur::Insert($entry->autoren, $entry->art->GetDisplayText(),
+							$entry->titel, $entry->jahr, $entry->verlag, $entry->isbn,
+							$entry->beschreibung, $entry->ort, "");
+					}
+				}
+			}
+
+			return $imported;
+		}
+
+		/*! \brief Legt Literatur an
+		 *
+		 *  Legt neue Literatur in Bibliothek mit den ?bergebenen
+		 *  Parametern ($art, $titel, $jahr, $verlag, $isbn,
+		 *  $beschreibung, $ort, $stichworte) an. Danach werden die
+		 *  Autoren ($autoren) in Autoren geschrieben und mit der
+		 *  Tabelle Literatur_Autor der Literatur zugeordnet.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
+		 *  \param[in] $art Bezeichner der Literaturart
+		 *  \param[in] $titel Titel der Literatur
+		 *  \param[in] $jahr Erscheinungsjahr der Literatur
+		 *  \param[in] $verlag Verlag der Literatur
+		 *  \param[in] $isbn ISBN der Literatur
+		 *  \param[in] $beschreibung Beschreibung der Literatur
+		 *  \param[in] $ort Erscheinungsort
+		 *  \param[in] $stichworte Stichworte
+		 *  \remarks Ist der Nutzer nicht als Mitglied angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Insert($autoren, $art, $titel, $jahr, $verlag, $isbn, $beschreibung, $ort, $stichworte)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Mitglied angemeldet sind
+			if ($login->IsMember() === true)
+			{
+				// F?ge Literatur in Bibliothek ein
+				$sql = "INSERT INTO ".$db_config['prefix']."Bibliothek
+						VALUES (NULL, '$art', '$titel', '$jahr', '$verlag', '$isbn', '$beschreibung', '$ort', '$stichworte')";
+				$sqldb->Query($sql);
+
+				// Importiere jeden Autor und f?ge Verbindung zur
+				// zur Literatur in Literatur_Autor an
+				if ($nr = $sqldb->GetInsertID())
+				{
+					$autorlist = Autor::Split($autoren);
+					foreach ($autorlist as $cur)
+					{
+						$sql = "INSERT INTO ".$db_config['prefix']."Literatur_Autor
+							VALUES ('".$cur."', '$nr')";
+						$sqldb->Query($sql);
+					}
+				}
+			}
+		}
+
+		/*! \brief ?ndert Literatur
+		 *
+		 *  Entfernt alle zur Literatur_Nr ($nr) geh?renden
+		 *  Verbindungen in Autor_Literatur um danach die Literatur mit
+		 *  Literatur_Nr $nr zu den neuen Werten ($art, $titel, $jahr,
+		 *  $verlag, $isbn, $beschreibung, $ort, $stichworte) zu ?ndern.
+		 *  Danach werden die Autoren ($autoren) in Autoren geschrieben
+		 *  und mit der Tabelle Literatur_Autor der Literatur
+		 *  zugeordnet. Alle jetzt noch nicht zugeordneten Autoren in
+		 *  Autoren werden gel?scht.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Literatur in Bibliothek mit Literatur_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Nummer der zu ver?ndernden Literatur
+		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
+		 *  \param[in] $art neuer Bezeichner der Literaturart
+		 *  \param[in] $titel neuer Titel der Literatur
+		 *  \param[in] $jahr neues Erscheinungsjahr der Literatur
+		 *  \param[in] $verlag neuer Verlag der Literatur
+		 *  \param[in] $isbn neue ISBN der Literatur
+		 *  \param[in] $beschreibung neue Beschreibung der Literatur
+		 *  \param[in] $ort neuer Erscheinungsort
+		 *  \param[in] $stichworte neue Stichworte
+		 *  \remarks Ist der Nutzer nicht als Mitglied angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Update($nr, $autoren, $art, $titel, $jahr, $verlag, $isbn, $beschreibung, $ort, $stichworte)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Mitglied angemeldet sind
+			if ($login->IsMember() === true)
+			{
+				// L?sche jede Verbindung zu Autoren in Literatur_Autor mit aktueller Literatur
+				$sql = "DELETE FROM ".$db_config['prefix']."Literatur_Autor
+						WHERE Literatur_Nr='$nr'";
+				$sqldb->Query($sql);
+
+				// ?ndere aktuellen Literatureintrag
+				$sql = "UPDATE ".$db_config['prefix']."Bibliothek
+							SET Art='$art', Titel='$titel', Jahr='$jahr', Verlag='$verlag', ISBN='$isbn', Beschreibung='$beschreibung', Ort='$ort', Stichworte='$stichworte'
+							WHERE Literatur_Nr='$nr'
+							LIMIT 1";
+				$sqldb->Query($sql);
+
+				// F?ge neue Autoren hinzu und verbinde sie mit Literatur durch Literatur_Autor
+				$autorlist = Autor::Split($autoren);
+				foreach ($autorlist as $cur)
+				{
+					$sql = "INSERT INTO ".$db_config['prefix']."Literatur_Autor
+						VALUES ('".$cur."', '$nr')";
+					$sqldb->Query($sql);
+				}
+
+				Autor::Clean();
+			}
+		}
+	}
+?>

Added: trunk/docs/beleg3/sourcecodes/include/literaturart.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/literaturart.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/literaturart.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,198 @@
+<?php
+	/*! \brief Verwaltet Literaturarten
+	 *
+	 *  Verwaltet die aus der Datenbank oder BibTeX-Datei erhaltenen
+	 *  Informationen zur Art einer Literatur. Enthaltene Informationen
+	 *  k?nnen wieder als BibTeX- oder als der in Datenbank/Benutzeroberfl?che
+	 *  verwendeten Namen zur?ckgegeben werden.
+	 *  \pre -
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class LiteraturArt
+	{
+		/*! Typ des Buches
+		 *   - 1 Buch
+		 *   - 2 Artikel
+		 *   - 3 Brosch?re
+		 *   - 4 Protokoll
+		 *   - 5 Anleitung
+		 *   - 6 Diplomarbeit
+		 *   - 7 Dissertation
+		 *   - 8 Techn. Bericht
+		 *   - 9 Unver?ffentlicht
+		 *   - sonst Sonstiges
+		 *  \private
+		 */
+		var $value = 0;
+		
+		/*! \brief Importiert BibTeX- bzw. interne Namen
+		 *
+		 *  Importiert die in BibTeX-Dateien oder in der
+		 *  Datenbank/Benutzeroberfl?chen verwendeten Bezeichner f?r
+		 *  Literaturarten und weist sie einen internen Wert zu.
+		 *  \pre -
+		 *  \param[in] $text BibTeX oder interner Bezeichner einer Literaturart
+		 *  \remarks Ist der Bezeichner unbekannt, erh?lt die Literatur
+		 *    die Art "Sonstiges"
+		 */
+		function LiteraturArt($text)
+		{
+			// Suche Zahlenrepr?sentation des ?bergebenen Texts heraus
+			switch ($text)
+			{
+			case "book":
+			case "inbook":
+			case "Buch":
+				$this->value = 1;
+				break;
+
+			case "Artikel":
+			case "article":
+				$this->value = 2;
+				break;
+
+			case "Brosch?re":
+			case "booklet":
+				$this->value = 3;
+				break;
+		
+			case "Protokoll":
+			case "proceedings":
+			case "inproceedings":
+			case "conference":
+				$this->value = 4;
+				break;
+
+			case "Anleitung":
+			case "manual":
+				$this->value = 5;
+				break;
+
+			case "Diplomarbeit":
+			case "masterthesis":
+				$this->value = 6;
+				break;
+
+			case "Dissertation":
+			case "phdthesis":
+				$this->value = 7;
+				break;
+
+			case "Techn. Bericht":
+			case "techreport":
+				$this->value = 8;
+				break;
+
+			case "Unver?ffentlicht":
+			case "unpublished":
+				$this->value = 9;
+				break;
+
+			default:
+			case "Sonstiges":
+			case "misc":
+				$this->value = 0;
+			};
+		}
+		
+		/*! \brief Liefert Bezeichner f?r Datenbank/Benutzeroberfl?che
+		 *
+		 *  Je nach der bei der Erstellung des Objekts gew?hlten Art,
+		 *  wird der dazugeh?rige Bezeichner f?r die Literaturart
+		 *  in der Datenbank/Benutzeroberfl?che herausgesucht.
+		 *  \pre -
+		 *  \return String mit Bezeichner der Literaturart in
+		 *    Datenbank/Benutzeroberfl?chendarstellung
+		 *  \remarks Sollte der Wert der Literatur nicht bekannt sein
+		 *    wird "Sonstiges" zur?ckgegeben
+		 */
+		function GetDisplayText()
+		{
+			// Suche Datenbank-/Benutzeroberfl?chetext herau
+			switch ($this->value)
+			{
+			case 1:
+				return "Buch";
+
+			case 2:
+				return "Artikel";
+
+			case 3:
+				return "Brosch?re";
+		
+			case 4:
+				return "Protokoll";
+
+			case 5:
+				return "Anleitung";
+
+			case 6:
+				return "Diplomarbeit";
+
+			case 7:
+				return "Dissertation";
+
+			case 8:
+				return "Techn. Bericht";
+
+			case 9:
+				return "Unver?ffentlicht";
+
+			default:
+			case 0:
+				return "Sonstiges";
+			};
+		}
+		
+		/*! \brief Liefert Bezeichner f?r BibTeX
+		 *
+		 *  Je nach der bei der Erstellung des Objekts gew?hlten Art,
+		 *  wird der dazugeh?rige Bezeichner f?r die Literaturart
+		 *  in BibTeX herausgesucht.
+		 *  \pre -
+		 *  \return String mit Bezeichner der Literaturart in
+		 *    BibTeX-Darstellung
+		 *  \remarks Sollte der Wert der Literatur nicht bekannt sein
+		 *    wird "Sonstiges" zur?ckgegeben
+		 */
+		function GetBibtexText()
+		{
+			// Suche BibTeX-Text heraus
+			switch ($this->value)
+			{
+			case 1:
+				return "book";
+
+			case 2:
+				return "article";
+
+			case 3:
+				return "booklet";
+		
+			case 4:
+				return "proceedings";
+
+			case 5:
+				return "manual";
+
+			case 6:
+				return "masterthesis";
+
+			case 7:
+				return "phdthesis";
+
+			case 8:
+				return "techreport";
+
+			case 9:
+				return "unpublished";
+
+			default:
+			case 0:
+				return "misc";
+			};
+		}
+	}
+?>

Added: trunk/docs/beleg3/sourcecodes/include/login.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/login.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/login.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,189 @@
+<?php
+	require_once("include/mitglied.php");
+
+	/*! \brief Verwaltet Logininformationen
+	 *
+	 *  Verwaltet die aus der sich aktuellen Anmeldung ergebenen Session
+	 *  des Users und der damit entstehenden Rechte
+	 *  \pre Das Loginobjekt muss vor einer ?bertragung von Inhaltsdaten zum 
+	 *    User angelegt werden, um ein Cookie anlegen zu k?nnen.
+	 *  \pre Es sollte kein zweites Objekt vom Typ Login existieren.
+	 *  \pre Datenbankverbindung muss bestehen.
+	 *  \remarks Sollte ein weiteres Objekt vom Typ Login existieren, in
+	 *    welche neue Logininformationen eingetragen werden, wird keine
+	 *    weitere Session angelegt, sondern die alten Informationen in
+	 *    der aktuellen Session ?berschrieben.
+	 *  \sa
+	 *  - Mitglied::PasswordHash
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Frank Wilhelm
+	 *  \date 30.05.2006
+	 */
+	class Login
+	{
+		/*! Level des aktuellen Nutzers
+		 *   - >=1 Mitglied
+		 *   - >=2 Administrator
+		 *   - >=0 Nutzer
+		 *  \private
+		 */
+		var $Level = 0;
+		var $Nr = 0; ///< Mitglieds_Nr f?r angemeldetes Mitglied (sonst 0)
+		
+		/*! \brief Liest bzw. Erstellt Session f?r Anmeldedaten
+		 *
+		 *  Liest Daten aus der Session ein. Sollten keine vorhanden
+		 *  sein, dann wird eine neue, leere Session angelegt. Sollten
+		 *  Daten vorhanden sein, wird die Korrektheit ?ber die
+		 *  Datenbank (Mitglieder) und die Verbindungsinformationen
+		 *  gepr?ft. Nach dieser Pr?fung werden abh?ngig vom Ausgang
+		 *  die Rechteinformationen gesetzt.\n
+		 *  Werden keine Parameter ?bergeben, wird das Klartextpasswort
+		 *  mit Mitglied::PasswordHash gehasht, um diese mit
+		 *  Benutzernamen ($benutzer) gegen die Eintr?ge in Mitglieder
+		 *  zu pr?fen. Ist diese erfolgreich, wird eine neue Session
+		 *  mit gehashtem Passwort, Benutzernamen und
+		 *  Verbindungsinformationen erstellt. Sollte ein Fehler 
+		 *  bei der Anmeldung auftreten, erh?lt er Nutzerrechte
+		 *  (wird also nicht zum Mitglied). Sonst erh?lt er die Rechte
+		 *  und Mitglieds_Nr aus dem gefundenem Eintrag in Mitglieder.
+		 *  \param[in] $benutzer neuer Benutzername
+		 *  \param[in] $passwort Passwort in Klartext des Nutzers
+		 *  \pre Eine Verbindung zur Datenbank muss bestehen.
+		 *  \pre Der Konstruktor muss vor dem Senden von Inhaltsdaten
+		 *    aufgerufen werden, um ein Cookie erstellen zu k?nnen.
+		 *  \pre Zum Einloggen mit Daten darf kein Parameter leer sein
+		 */
+		function Login($benutzer = "", $passwort = "")
+		{
+			global $db_config, $sqldb;
+
+			@session_start();
+
+			$this->Level = 0;
+			$this->Nr = 0;
+
+			// Neue Session starten?
+			if (empty($benutzer) === false && empty($passwort) === false)
+			{
+				session_register("login_benutzer");
+				session_register("login_passwort");
+				session_register("ip");
+
+				$_SESSION["login_benutzer"] = $benutzer;
+				$_SESSION["login_passwort"] = Mitglied::PasswordHash($passwort);
+				$_SESSION["ip"] = $_SERVER['REMOTE_ADDR'];
+				
+			}
+
+			// Korrekt eingeloggt?
+			if (isset($_SESSION["ip"]) && $_SESSION["ip"] == $_SERVER['REMOTE_ADDR'] &&
+				!empty($_SESSION["login_benutzer"]) && !empty($_SESSION["login_passwort"]))
+			{
+				// Hole, Nr, Passwort und Rechte zu Loginnamen
+				$sql = "SELECT Mitglieds_Nr AS Nr, Passwort AS passwort, Rechte
+					FROM ".$db_config['prefix']."Mitglieder AS members
+					WHERE members.Login = '".$_SESSION["login_benutzer"]."'
+					LIMIT 1";
+			
+				$sqldb->Query($sql);
+
+				// Existiert das Mitglied?
+				if ($line = $sqldb->Fetch())
+				{
+					// Hat er das richtige Passwort?
+					if ($line->passwort === $_SESSION["login_passwort"])
+					{
+						$this->Nr = $line->Nr;
+
+						// Setze Benuterrechte nach Rechtename
+						switch ($line->Rechte)
+						{
+						case "Administrator":
+							$this->Level = 2;
+							break;
+						case "Benutzer":
+							$this->Level = 1;
+							break;
+						default:
+							$this->Level = 0;
+						}
+					}
+					else
+					{
+						// Falsche Passwort
+						$this->Logout();
+					}
+				}
+				else
+				{
+					// Benutzername nicht gefunden
+					$this->Logout();
+				}
+			}
+		}
+
+		/*! \brief Entfernt Session
+		 *
+		 *  Die Anmeldedaten und Verbindungsdaten werden in der
+		 *  Session entfernt. Au?erdem werden die Rechte auf Nutzer (0)
+		 *  und Nr auf 0 gesetzt.
+		 *  \pre -
+		 */
+		function Logout()
+		{
+			// Entferne Session und die Informationen zu dieser
+			session_unset();
+			session_destroy();
+			$this->Level = 0;
+			$this->Nr = 0;
+		}
+
+		/*! \brief Ermittelt ob Administratorrechte vorliegen
+		 *
+		 *  Vergleicht ob die bei der Erstellung des Loginobjekts
+		 *  ermittelten Rechte mindestens den Wert f?r
+		 *  Administratorrechte (>=2) haben.
+		 *  \pre -
+		 *  \retval true wenn Administratorrechte vorliegen
+		 *  \retval false wenn Nutzer- oder Mitgliedsrechte vorliegen
+		 */
+		function IsAdministrator()
+		{
+			if ($this->Level >= 2)
+			{
+				return true;
+			}
+			else
+			{
+				return false;
+			}
+		}
+
+		/*! \brief Ermittelt ob mindestens Mitgliedsrechte vorliegen
+		 *
+		 *  Vergleicht ob die bei der Erstellung des Loginobjekts
+		 *  ermittelten Rechte mindestens den Wert f?r
+		 *  Mitgliedsrechte (>=1) haben.
+		 *  \pre -
+		 *  \retval true wenn mindestens Mitgliedsrechte vorliegen
+		 *  \retval false wenn Nutzerrechte vorliegen
+		 */
+		function IsMember()
+		{
+			if ($this->Level >= 1)
+			{
+				return true;
+			}
+			else
+			{
+				return false;
+			}
+		}
+	}
+
+	// Globales Loginobjekt erstellen
+	$login = new Login();
+?>

Added: trunk/docs/beleg3/sourcecodes/include/mitglied.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/mitglied.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/mitglied.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,302 @@
+<?php
+	require_once("include/login.php");
+	require_once("include/kommentar.php");
+
+	/*! \brief Verwaltet Mitglieder
+	 *
+	 *  Stellt Funktionen zum Entfernen, Hinzuf?gen, ?ndern und Auflisten
+	 *  von Mitgliedern bereit.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Kommentar::DeleteAllMember
+	 *  - Login::IsAdministrator
+	 *  - Login::IsMember
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 30.05.2006
+	 */
+	class Mitglied
+	{
+		var $Nr = 0; ///< Identifikationsnummer des Mitglieds
+		var $Login = ""; ///< Benutzername des Mitglieds
+		var $Passwort = ""; ///< Passworthash des Benutzerpassworts
+		var $Rechte = 0; ///< Rechte des Mitglieds (0 - Gast, 1 - Mitglied, 2 - Administrator)
+		var $Vorname = ""; ///< Vorname des Mitglieds
+		var $Nachname = ""; ///< Nachname des Mitglieds
+		var $Email = ""; ///< E-Mail-Adresse des Mitglieds
+		
+		/*! \brief Liest Mitglied ein
+		 *
+		 *  Liest Mitglied mit Mitglied_Nr ($nr)
+		 *  und setzt Felder entsprechend den Daten.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $nr Nummer der zu einlesenden Literatur
+		 */
+		function Mitglied($nr)
+		{
+			global $db_config, $sqldb;
+			
+			// Suche Mitglied mit Mitglied_Nr = $nr heraus
+			$sql = "SELECT Mitglieds_Nr, Login, Passwort, Rechte, Vorname, Name, Email
+					FROM ".$db_config['prefix']."Mitglieder
+					WHERE Mitglieds_Nr='$nr'
+					LIMIT 1";
+			$sqldb->Query($sql);
+			
+			// Lese gefundene Daten aus
+			if ($cur = $sqldb->Fetch())
+			{
+				$this->Nr = $cur->Mitglieds_Nr;
+				$this->Login = $cur->Login;
+				$this->Passwort = $cur->Passwort;
+				$this->Vorname = $cur->Vorname;
+				$this->Nachname = $cur->Name;
+				$this->Email = $cur->Email;
+
+				// Wandle Rechtebezeichner in numerische Repr?sentation um
+				switch ($cur->Rechte)
+				{
+				case "Administrator":
+					$this->Rechte = 2;
+					break;
+				case "Benutzer":
+					$this->Rechte = 1;
+					break;
+				default:
+					$this->Rechte = 0;
+				}
+			}
+		}
+		
+		/*! \brief Generiert Passworthash
+		 *
+		 *  Aus ?bergebenes Klartextpasswort wird ein 40 Byte gro?er
+		 *  hexkodierter Hash generiert. Als Hashingalgorithmus wird
+		 *  SHA-1 genutzt
+		 *  \pre -
+		 *  \param[in] $pass zu hashendes Klartextpasswort
+		 */
+		function PasswordHash($pass)
+		{
+			return sha1($pass);
+		}
+		
+		/*! \brief Entfernt Mitglied
+		 *
+		 *  Entfernt Mitglied mit Mitgliedsnummer ($nr) aus Mitglieder
+		 *  und l?scht zus?tzlich die Kommentare des Mitglieds in
+		 *  Kommentare
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Mitglied in Mitglieder mit Mitglieds_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Mitglieds_Nr des zu l?schenden Mitglieds
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt
+		 */
+		function Delete($nr)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Administrator angemeldet sind
+			if ($login->IsAdministrator() === true)
+			{
+				// Entferne Mitglied mit Mitglieds_Nr $nr aus Mitglieder
+				$sql = "DELETE FROM ".$db_config['prefix']."Mitglieder
+						WHERE Mitglieds_Nr = '$nr'
+						LIMIT 1";
+				$sqldb->Query($sql);
+
+				// L?scht alle zu Mitglied geh?renden Kommentare
+				Kommentar::DeleteAllMember($nr);
+			}
+		}
+		
+		/*! \brief Legt  Mitglied an
+		 *
+		 *  F?gt neues Mitglied mit Benutzernamen ($loginname), Passwort
+		 *  ($passwort), Benutzerrechten ($rechte), Vorname ($vorname),
+		 *  Nachname ($nachname), E-Mail-Adresse ($email) in Mitglieder
+		 *  ein. Dazu wird das Passwort noch mit Mitglied::PasswordHash
+		 *  gehasht. Sollte ein Mitglied mit gleichem Login existieren
+		 *  wird ein Fehler zur?ckgegeben, da die Datenbank nur ein
+		 *  Mitglied mit gleichem Login erlaubt.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $loginname Benutzername des neuen Mitglieds
+		 *  \param[in] $passwort Benutzerpasswort des neuen Mitglieds
+		 *  \param[in] $rechte Rechte des neuen Mitglieds
+		 *     (Benutzer, Administrator)
+		 *  \param[in] $vorname Vorname des neuen Mitglieds
+		 *  \param[in] $nachname Nachname des neuen Mitglieds
+		 *  \param[in] $email E-Mail-Adresse des neuen Mitglieds
+		 *  \retval true Mitglied wurde eingef?gt
+		 *  \retval false Mitglied konnte nicht hinzugef?gt werden
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt.
+		 */
+		function Insert($loginname, $passwort, $rechte, $vorname, $nachname, $email)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Administrator angemeldet sind
+			if ($login->IsAdministrator() === true)
+			{
+				// Erzeuge Passworthash
+				$passworthash = Mitglied::PasswordHash($passwort);
+
+				// F?ge neues Mitglied hinzu
+				$sql = "INSERT INTO ".$db_config['prefix']."Mitglieder
+						VALUES (NULL, '$nachname', '$vorname', '$email', '$loginname', '$passworthash', '$rechte')";
+				if ($sqldb->Query($sql) !== false)
+				{
+					return true;
+				}
+				else
+				{
+					return false;
+				}
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		/*! \brief ?ndert ein Mitglied
+		 *
+		 *  ?ndert die Daten des Mitglieds mit der Mitglieds_Nr ($nr),
+		 *  in neuen Benutzernamen ($loginname), Passwort ($passwort),
+		 *  Benutzerrechten ($rechte), Vorname ($vorname),
+		 *  Nachname ($nachname), E-Mail-Adresse ($email) in
+		 *  Mitglieder. Wenn $passwort nicht die L?nge 0 hat, wird es 
+		 *  noch mit Mitglied::PasswortHash gehasht. Andernfalls wird
+		 *  das alte Passwort in Mitglieder beibehalten. Sollte ein
+		 *  Mitglied mit gleichem Login existieren wird ein Fehler
+		 *  zur?ckgegeben, da die Datenbank nur ein Mitglied mit
+		 *  gleichem Login erlaubt.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre Mitglied in Mitglieder mit Mitglieds_Nr $nr muss
+		 *    existieren
+		 *  \param[in] $nr Mitglieds_Nr des zu ver?ndernden Mitglieds
+		 *  \param[in] $loginname neuer Benutzername des Mitglieds
+		 *  \param[in] $passwort neues Passwort des Mitglieds
+		 *  \param[in] $rechte neuen Rechte des Mitglieds
+		 *    (Benutzer, Administrator)
+		 *  \param[in] $vorname neuer Vorname des Mitglieds
+		 *  \param[in] $nachname neuer Nachname des Mitglieds
+		 *  \param[in] $email neue E-Mail-Adresse des Mitglieds
+		 *  \retval true Mitglied wurde ge?ndert
+		 *  \retval false Mitglied konnte nicht ge?ndert werden
+		 *  \remarks Ist der Nutzer nicht als Administrator angemeldet,
+		 *    werden keine Operationen ausgef?hrt, wenn $nr ungleich
+		 *    der eigenen Mitglieds_Nr is.
+		 */
+		function Update($nr, $loginname, $passwort, $rechte, $vorname, $nachname, $email)
+		{
+			global $db_config, $sqldb, $login;
+
+			// Nur wenn wir als Administrator angemeldet sind
+			if ($login->IsAdministrator() === true || $nr == $login->Nr)
+			{
+				// Erlaube nicht, dass einfache Mitglieder ihre
+				// Rechte erh?hen
+				if ($login->IsAdministrator() === false)
+				{
+					$rechte = "Benutzer";
+				}
+
+				$sql = "";
+				// Wurde neues Passwort angegeben?
+				if (empty($passwort) === true)
+				{
+					// wenn nicht, aktualisiere nur die anderen Daten
+					$sql = "UPDATE ".$db_config['prefix']."Mitglieder
+							SET Login='$loginname', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
+							WHERE Mitglieds_Nr='$nr'
+							LIMIT 1";
+				}
+				else
+				{
+					// wenn ja, erzeuge neuen Hash und aktualisiere
+					// ihn mit den anderen Daten
+					$passworthash = Mitglied::PasswordHash($passwort);
+					$sql = "UPDATE ".$db_config['prefix']."Mitglieder
+							SET Login='$loginname', Passwort='$passworthash', Rechte='$rechte', Vorname='$vorname', Name='$nachname', Email='$email'
+							WHERE Mitglieds_Nr='$nr'
+							LIMIT 1";
+				}
+
+				// ?ndere Daten des Mitglieds
+				if ($sqldb->Query($sql) !== false)
+				{
+					return true;
+				}
+				else
+				{
+					return false;
+				}
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		/*! \brief R?ckgabe einer Liste der Mitglieder
+		 *
+		 *  Liest alle Mitglieder mit Nr, Login, Vorname, Nachname und
+		 *  Email aus Tabelle Mitglieder und gibt die ausgelesenen
+		 *  Objekte in einem Feld zur?ck
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld mit Objekten der Form
+		 *    - Nr
+		 *    - Login
+		 *    - Vorname
+		 *    - Nachname
+		 *    - Email
+		 *  \remarks Ist der Nutzer nicht als Administrator, sondern
+		 *    als Mitglied angemeldet, wird nur der eigene Eintrag
+		 *    zur?ckgegeben. Ist der Nutzer nicht angemeldet werden
+		 *    keine Operationen ausgef?hrt.
+		 */
+		function GetAll()
+		{
+			global $db_config, $sqldb, $login;
+
+			$members = array();
+
+			// Wenn wir als Administrator angemeldet sind
+			if ($login->IsAdministrator() === true)
+			{
+				// Suche alle Mitglieder
+				$sql = "SELECT Mitglieds_Nr AS Nr, Login, Vorname, Name AS Nachname, Email
+						FROM ".$db_config['prefix']."Mitglieder";
+				$sqldb->Query($sql);
+				
+				// Lese Mitglieder aus
+				while ($cur = $sqldb->Fetch())
+				{
+					$members[] = $cur;
+				}
+			}
+			elseif ($login->IsMember() === true)
+			{
+				// Suche eigene Daten in Mitglied
+				$sql = "SELECT Mitglieds_Nr AS Nr, Login, Vorname, Name AS Nachname, Email
+						FROM ".$db_config['prefix']."Mitglieder
+						WHERE Mitglieds_Nr='".$login->Nr."'
+						LIMIT 1";
+				$sqldb->Query($sql);
+				
+				// Lese Mitglied aus
+				if ($cur = $sqldb->Fetch())
+				{
+					$members[] = $cur;
+				}
+			}
+
+			return $members;
+		}
+	}
+?>

Added: trunk/docs/beleg3/sourcecodes/include/sqldb.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/sqldb.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/sqldb.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,17 @@
+<?php
+	// W?hle Datenbanksystem aus
+	switch ($db_config['dbms'])
+	{
+		default:
+		case "mysql":
+			require_once("include/sqldb_mysql.php");
+			break;
+	}
+	
+	// Verbinde mit Datenbank
+	$sqldb = new SQLDB($db_config["host"], $db_config["user"], $db_config["pass"], $db_config["name"]);
+	
+	// Gib Fehler aus und breche ab, wenn keine Verbindung zum SQL-Server besteht
+	if ($sqldb->db_id === false)
+		die(mysql_error().". Could not connect to SQL server. Please inform Webmaster");;
+?>

Added: trunk/docs/beleg3/sourcecodes/include/sqldb_mysql.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/sqldb_mysql.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/sqldb_mysql.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,276 @@
+<?php
+	define("SQLDB", "mysql");
+
+	/*! \brief Datenbankzugriff ?ber MySQL
+	 *
+	 *  Erlaubt den abstrahierten Zugriff ?ber SQL auf eine
+	 *  Datenbank (hier MySQL).
+	 *  \pre -
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 06.06.2006
+	 */
+	class SQLDB
+	{
+		var $db_id = false; ///< Identifikation der aktuellen Datenbankverbindung
+		var $query_result = false; ///< Identifikation der letzten Datenbankabfrage
+		
+
+		/*! \brief ?ffnet eine Datenbankverbindung
+		 *
+		 *  Startet eine Verbindung zum Datenbanksystem, je nach
+		 *  gew?hlter Art ($persist), und w?hlt nach erfolgreichem
+		 *  Aufbau eine Datenbank. Treten Fehler beim Aufbau auf, wird
+		 *  SQLDB::$db_id auf false gesetzt.
+		 *  \pre -
+		 *  \param[in] $host Adresse oder IP des MySQL-Servers
+		 *  \param[in] $user Benutzernamen f?r MySQL-Zugriff
+		 *  \param[in] $password Benutzerpasswort f?r MySQL-Zugriff
+		 *  \param[in] $database Auszuw?hlende Datenbank
+		 *  \param[in] $persist Aufbau einer persistenten (geteilten) Verbindung
+		 */
+		function SQLDB($host, $user, $password, $database, $persist = true)
+		{
+			if ($persist == true)
+			{
+				$this->db_id = @mysql_pconnect($host, $user, $password);
+			}
+			else
+			{
+				$this->db_id = @mysql_connect($host, $user, $password);
+			}
+			
+			if ($this->db_id !== false)
+			{
+				if (@mysql_select_db($database, $this->db_id) === false)
+				{
+					// Verbindung aufgebaut und Datenbank nicht ausgew?hlt
+					@mysql_close($this->db_id);
+					$this->db_id = false;
+				}
+			}
+			else
+			{
+				// Verbindungsaufbau funktionierte nicht
+				$this->db_id = false;
+			}
+		}
+		
+		/*! \brief Beendet Verbindung
+		 *
+		 *  Beendet die Verbindung zum Datenbankserver, wenn eine nicht
+		 *  persistende Verbindung besteht.
+		 *  \pre -
+		 *  \retval true bei Erfolg
+		 *  \retval false bei Misserfolg
+		 *  \remarks Persistente Verbindungen werden nicht geschlossen
+		 */
+		function Close()
+		{
+			if ($this->db_id !== false)
+			{
+				// Wenn Datenbankverbindung besteht,
+				// gebe Resourcen frei und schlie?e Verbindung
+				$this->FreeResult();
+				$dbid = $this->db_id;
+				$this->db_id = false;
+				return @mysql_close($dbid);
+			}
+			else
+			{
+				// keine Verbindung endet immer im geschlossenem
+				// Zustand
+				return true;
+			}
+		}
+		
+		/*! \brief Springt auf Datensatz
+		 *
+		 *  L?sst den internen Zeiger auf angegebenen Datensatz der
+		 *  letzten Anfrage zeigen. Der Datensatz l?sst sich danach mit
+		 *  Fetch abfragen.
+		 *  \pre Datenbankverbindung muss mit einer Abfrage bestehen
+		 *  \retval true bei Erfolg
+		 *  \retval false bei Misserfolg
+		 */
+		function DataSeek($row_number)
+		{
+			if ($this->db_id !== false && $this->query_result !== false)
+			{
+				// Wenn Datenbankverbindung und Ergebnis eines Querys
+				// besteht, bewege Zeiger auf angegebenes Ergebnis
+				return @mysql_data_seek($this->query_result, $row_number);
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		/*! \brief Liefert Datensatz als Objekt
+		 *
+		 *  Wandelt aktuellen Datensatz in Objekt um und gibt ihn
+		 *  zur?ck. Nach erfolgreicher Operation wird der
+		 *  interne Zeiger eine Stelle weiter ger?ckt.
+		 *  \pre Datenbankverbindung muss mit einer Abfrage bestehen
+		 *  \return bei Erfolg Datensatz als Objekt
+		 *  \retval false bei Misserfolg
+		 */
+		function Fetch()
+		{
+			if ($this->db_id !== false && $this->query_result !== false)
+			{
+				// Wenn Datenbankverbindung und Ergebnis eines Querys
+				// besteht, gebe aktuelles Ergebnis zur?ck
+				return @mysql_fetch_object($this->query_result);
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		/*! \brief Entfernt Ergebnisse
+		 *
+		 *  Entfernt Datens?tze der letzten Anfrage und gibt deren
+		 *  Speicher frei.
+		 *  \pre -
+		 *  \remarks Funktion wird vor jedem Query() aufgerufen
+		 */
+		function FreeResult()
+		{
+			if ($this->query_result !== false)
+			{
+				// Wenn rgebnis eines Querys existiert, gebe
+				// es frei
+				$queryresult = $this->query_result;
+				$this->query_result = false;
+				return @mysql_free_result($queryresult);
+			}
+			else
+			{
+				// keine Resultate enden immer mit leeren
+				// Resultaten
+				return true;
+			}
+		}
+		
+		/*! \brief Anzahl zuletzt ge?nderter Datens?tze
+		 *
+		 *  Gibt Anzahl der bei der letzten INSERT, UPDATE bzw. DELETE
+		 *  Anweisung ge?nderten Datens?tze.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Anzahl der Datens?tze
+		 *  \remarks F?r gefundene Datens?tze sollte GetNumRows() genutzt werden
+		 */
+		function GetAffectedRows()
+		{
+			if ($this->db_id !== false)
+			{
+				// Wenn Datenbankverbindung besteht, gebe
+				// Anzahl zuletzt ge?nderter Datens?tze zur?ck
+				return @mysql_affected_rows($this->db_id);
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		/*! \brief Liefert Fehlerinformationen
+		 *
+		 *  Liefert Feld mit Fehlernachricht und interner Fehlernummer
+		 *  zur?ck.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \return Feld mit feld[0] als Fehlernachricht und feld[1] als Fehlernummer
+		 */
+		function GetError()
+		{
+			$error = array();
+			if ($this->db_id !== false)
+			{
+				$error['msg'] = @mysql_error($this->db_id);
+				$error['code'] = @mysql_errno($this->db_id);
+				
+			}
+			else
+			{
+				$error['msg'] = "Keine Verbindung vorhanden";
+				$error['code'] = 0;
+			}
+
+			return $error;
+		}
+
+		/*! \brief Liefert die ID des letzten INSERTS
+		 *
+		 *  Liefert die ID des bei den letzten INSERT angelegten
+		 *  Datensatzes zur?ck
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \pre INSERT-Query muss gemacht worden sein
+		 *  \return ID des zuletzt hinzugef?gten Datensatzes
+		 *  \retval false bei Misserfolg
+		 */
+		function GetInsertID()
+		{
+			if ($this->db_id !== false)
+			{
+				// Wenn Datenbankverbindung besteht, gebe 
+				// ID des zuletzt hinzugef?gten Datensatzes
+				// zur?ck
+				return @mysql_insert_id($this->db_id);
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		/*! \brief Anzahl zuletzt gefundener Datens?tze
+		 *
+		 *  Gibt Anzahl der bei der letzten SELECT-Anweisung
+		 *  gefundenen Datens?tze.
+		 *  \pre Datenbankverbindung muss mit einer Abfrage bestehen
+		 *  \return bei Erfolg Anzahl der Datens?tze
+		 *  \retval false bei Misserfolg
+		 *  \remarks F?r ge?nderte Datens?tze sollte GetAffectedRows() genutzt werden
+		 */
+		function GetNumRows()
+		{
+			if ($this->db_id !== false && $this->query_result !== false)
+			{
+				// Wenn Datenbankverbindung und Ergebnis eines Querys
+				// besteht, gebe Anzahl gefundener Datens?tze zur?ck
+				return @mysql_num_rows($this->query_result);
+			}
+			else
+			{
+				return false;
+			}
+		}
+		
+		/*! \brief Sendet Anfrage an Server
+		 *
+		 *  Sendet eine Anfrage an die aktive Datenbank.
+		 *  Erhaltene Datens?tze der Anfrage k?nnen mit Fetch abgefragt
+		 *  werden.
+		 *  \pre Datenbankverbindung muss bestehen
+		 *  \param[in] $query SQL-Anfrage an den Datenbankserver
+		 *  \retval false wenn ein Fehler in der Anfrage aufgetreten ist
+		 */
+		function Query($query)
+		{
+			if ($this->db_id !== false)
+			{
+				// Wenn Datenbankverbindung besteht, sende
+				// Abfrage an Datenbank
+				$this->FreeResult();
+				return $this->query_result = @mysql_query($query, $this->db_id);
+			}
+			else
+			{
+				return false;
+			}
+		}
+	}
+?>

Added: trunk/docs/beleg3/sourcecodes/include/suche.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/suche.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/include/suche.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,275 @@
+<?php
+	require_once("include/autor.php");
+	require_once("include/literatur.php");
+
+	/*! \brief Suche Literaturdaten
+	 *
+	 *  Durchsucht die Tabelle Bibliothek und Autoren ?ber Volltextsuche,
+	 *  nach Autor und Titel oder nach den 10 zuletzt hinzugef?gten
+	 *  Literatureintr?gen und speichert sie in $Treffer zwischen.
+	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Autor::GetAll
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
+	 *
+	 *  \author Sven Eckelmann
+	 *  \date 30.05.2006
+	 */
+	class Suche
+	{
+		/*! \brief gefundene Treffer
+		 *
+		 *  Feld aus gefundenen Trefferobjekten mit Attributen
+		 *   - Nr
+		 *   - Titel
+		 *   - Autor
+		 *   - Verlag
+		 *   - ISBN
+		 */
+		var $Treffer = array();
+
+		/*! \brief Sucht zuletzt hinzugef?gte Literatur
+		 *
+		 *  Sucht in Tabelle Bibliothek nach den 10 zuletzt hinzugef?gten
+		 *  Literatureintr?gen und speichert Nr, Titel, Autor, Verlag
+		 *  und ISBN als Objekt im Feld $Treffer. Sollte ein Fehler
+		 *  auftreten oder bisher keine Eintr?ge vorhanden sein, dann
+		 *  wird $Treffer ein Feld der L?nge 0.
+		 *  \pre Datenbankverbindung muss bestehen.
+		 *  \private
+		 */
+		function LetzteLiteratur()
+		{
+			global $sqldb, $db_config;
+
+			// Finde die 10 zuletzt hinzugef?gten Literatureintr?ge
+			$sql = "SELECT Literatur_Nr AS Nr, Titel, Verlag, ISBN
+					FROM ".$db_config['prefix']."Bibliothek AS bibliothek
+					ORDER BY `Literatur_Nr` DESC
+					LIMIT 10";
+			$sqldb->Query($sql);
+
+			// Lese Treffer aus
+			$this->Treffer = array();
+			while ($cur = $sqldb->Fetch())
+			{
+				$this->Treffer[] = $cur;	
+			}
+
+			// Lese zu jedem Treffer Autoren
+			for ($i = 0; $i < count($this->Treffer); $i++)
+			{
+				// Kommagetrennte Autorenliste erstellen
+				$authors = Autor::GetAll($this->Treffer[$i]->Nr);
+
+				// Erstelle kommagetrennte Liste der Autoren
+				$autorlist = "";
+				if (empty($authors) === false)
+				{
+					$autornamen = array();
+					foreach ($authors as $cur)
+					{
+						$autornamen[] = $cur->Name;
+					}
+	
+					$autorlist = implode(", ", $autornamen);
+				}
+				$this->Treffer[$i]->Autor = $autorlist;
+			}
+		}
+
+		/*! \brief Sucht nach Literatur mit Suchbegriff
+		 *
+		 *  Sucht in Tabelle Bibliothek und Autor nach dem Auftreten
+		 *  des ?bergebenen Textes in  Literatureintr?gen und speichert
+		 *  Nr, Titel, Autor, Verlag und ISBN als Objekt im Feld
+		 *  $Treffer. Sollte ein Fehler auftreten oder keine passenden
+		 *  Eintr?ge vorhanden sein, dann wird $Treffer ein Feld der
+		 *  L?nge 0.
+		 *  \pre Datenbankverbindung muss bestehen.
+		 *  \param[in] $volltext Suchtext
+		 *  \private
+		 */
+		function VolltextSuche($volltext)
+		{
+			global $sqldb, $db_config;
+			$this->Treffer = array();
+
+			$volltext = trim($volltext);
+			if (empty($volltext) === false)
+			{
+				// Finde Literatur mit Suchbegriff
+				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
+						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
+							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
+							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
+						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
+						ON connect.Autor_Nr = autoren.Autor_Nr
+						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext')
+						OR MATCH (Autorname) AGAINST ('$volltext')";
+				$sqldb->Query($sql);
+				
+				// Lese Treffer aus
+				while ($cur = $sqldb->Fetch())
+				{
+					$this->Treffer[] = $cur;	
+				}
+	
+				// Lese zu jedem Treffer Autoren
+				for ($i = 0; $i < count($this->Treffer); $i++)
+				{
+					// Kommagetrennte Autorenliste erstellen
+					$authors = Autor::GetAll($this->Treffer[$i]->Nr);
+	
+					// Erstelle kommagetrennte Liste der Autoren
+					$autorlist = "";
+					if (empty($authors) === false)
+					{
+						$autornamen = array();
+						foreach ($authors as $cur)
+						{
+							$autornamen[] = $cur->Name;
+						}
+		
+						$autorlist = implode(", ", $autornamen);
+					}
+					$this->Treffer[$i]->Autor = $autorlist;
+				}
+			}
+		}
+		
+		/*! \brief Sucht Literatur mit Autor und Titel
+		 *
+		 *  Sucht in Tabelle Bibliothek und Autoren nach dem Auftreten
+		 *  von $autor in Autor und $titel im Titel des Literatureintrags
+		 *  und speichert Nr, Titel, Autor, Verlag und ISBN der Treffer
+		 *  als Objekt im Feld $Treffer. Sollte ein Fehler auftreten
+		 *  oder keine passenden Eintr?ge vorhanden sein, dann wird
+		 *  $Treffer ein Feld der L?nge 0.
+		 *  \pre Datenbankverbindung muss bestehen.
+		 *  \param[in] $titel String mit Literaturtitel
+		 *  \param[in] $autor String mit Autorname
+		 *  \private
+		 *  \remarks Wird eine kommagetrennte Liste von Autoren als
+		 *    $autor ?bergeben, muss in Treffern nur einer der
+		 *    genannten Autoren auftreten.
+		 */
+		function AutorTitelSuche($titel, $autor)
+		{
+			global $sqldb, $db_config;
+			$this->Treffer = array();
+
+			$titel = trim($titel);
+			$autor = trim($autor);
+			if (empty($titel) === false || empty($autor) === false)
+			{
+				// Finde Literatur mit Titel und Autor
+				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
+						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
+							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
+							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
+						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
+						ON connect.Autor_Nr = autoren.Autor_Nr
+						WHERE bibliothek.Titel like '%".$titel."%'";
+
+				// Trenne kommagetrennte Autorenliste und
+				// f?ge es Suche hinzu
+				if (empty($autor) === false)
+				{
+					$sql .= " AND (";
+					$authors = array();
+					$authors = split(",", $autor);
+					for($i = 0; $i < count($authors); $i++)
+					{
+						if ($i != 0)
+						{
+							$sql .= " OR ";
+						}
+						$sql .= "autoren.Autorname like '%".trim($authors[$i])."%'";
+					}
+					$sql .= ")";
+				}
+				$sqldb->Query($sql);
+
+				// Lese Treffer aus
+				while ($cur = $sqldb->Fetch())
+				{
+					$this->Treffer[] = $cur;	
+				}
+	
+				// Lese zu jedem Treffer Autoren
+				for ($i = 0; $i < count($this->Treffer); $i++)
+				{
+					// Kommagetrennte Autorenliste erstellen
+					$authors = Autor::GetAll($this->Treffer[$i]->Nr);
+	
+					// Erstelle kommagetrennte Liste der Autoren
+					$autorlist = "";
+					if (empty($authors) === false)
+					{
+						$autornamen = array();
+						foreach ($authors as $cur)
+						{
+							$autornamen[] = $cur->Name;
+						}
+		
+						$autorlist = implode(", ", $autornamen);
+					}
+					$this->Treffer[$i]->Autor = $autorlist;
+				}
+			}
+		}
+
+		
+		/*! \brief Sucht Literatur
+		 *
+		 *  Wenn keine Parameter ?bergeben werden:
+		 *  - Sucht in Tabelle Bibliothek nach den 10 zuletzt
+		 *    hinzugef?gten Literatureintr?gen und speichert Nr, Titel,
+		 *    Autor, Verlag und ISBN als Objekt im Feld $Treffer.
+		 *    Sollte ein Fehler auftreten oder bisher keine Eintr?ge
+		 *    vorhanden sein, dann wird $Treffer ein Feld der L?nge 0.
+		 *
+		 *  Wenn ein $suchbegriff ?bergeben wird:
+		 *  - Sucht in Tabelle Literatur und Autoren nach dem Auftreten
+		 *    des ?bergebenen Textes in  Literatureintr?gen und speichert
+		 *    Nr, Titel, Autor, Verlag und ISBN als Objekt im Feld
+		 *    $Treffer. Sollte ein Fehler auftreten oder keine passenden
+		 *    Eintr?ge vorhanden sein, dann wird $Treffer ein Feld der
+		 *    L?nge 0.
+		 *
+		 *  Wenn $suchbegriff und $autor ?bergeben werden:
+		 *  - Sucht in Tabelle Bibliothek und Autoren nach dem Auftreten
+		 *    von $autor in Autor und $suchbegriff im Titel des 
+		 *    Literatureintrags und speichert Nr, Titel, Autor, Verlag
+		 *    als Objekt im Feld $Treffer. Sollte ein Fehler auftreten
+		 *    und ISBN der Treffer oder keine passenden Eintr?ge vorhanden
+		 *    sein, dann wird $Treffer ein Feld der L?nge 0.
+		 *  - Wird eine kommagetrennte Liste von Autoren als
+		 *    $autor ?bergeben, muss in Treffern nur einer der
+		 *    genannten Autoren auftreten.
+		 *
+		 *  \pre Datenbankverbindung muss bestehen.
+		 *  \param[in] $autor String mit Autorname
+		 *  \param[in] $suchbegriff String mit Literaturtitel bzw. wenn
+		 *     einzeln ?bergeben Suchtext f?r Volltextsuche
+		 */
+		function Suche($suchbegriff="", $autor="")
+		{
+			// W?hle nach Parameteranzahl die richtige Suchfunktion
+			switch (func_num_args())
+			{
+			case 0:
+				$this->LetzteLiteratur();
+				break;
+			case 1:
+				$this->VolltextSuche($suchbegriff);
+				break;
+			case 2:
+				$this->AutorTitelSuche($suchbegriff, $autor);
+				break;
+			}
+		}
+	}
+?>

Added: trunk/docs/beleg3/sourcecodes/index.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/index.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/index.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,62 @@
+<?php
+	$title = "Letzte Literatur";
+
+	require_once("include/header.php");
+?>
+<div id="cfront" class="content">
+	
+	<table id="searchresult">
+		<thead>
+			<tr>
+				<th scope="col">Titel</th>
+				<th scope="col">Autor</th>
+				<th scope="col">Verlag</th>
+				<th scope="col">ISBN</th>
+			</tr>
+		</thead>
+		<tbody>
+			<?php
+				// Suche zuletzt hinzugef?gte Literatur
+				require_once("include/suche.php");
+				$search = new Suche();
+
+				// Gebe alle gefundenen Treffer aus
+				foreach ($search->Treffer as $cur)
+				{
+				?>
+					<tr>
+					<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>">
+						<?=htmlspecialchars($cur->Titel);?></a>
+					</td>
+					<td><?=htmlspecialchars($cur->Autor);?></td>
+					<td><?=htmlspecialchars($cur->Verlag);?></td>
+					<td><?=htmlspecialchars($cur->ISBN);?></td>
+					</tr>
+				<?php
+				}
+			?>
+		</tbody>
+	</table>
+	<?php
+		// Sind Mitgliedsrechte vorhanden, gebe Hinzuf?ge- und Importierknopf aus
+		if ($login->IsMember() === true)
+		{
+		?>
+			<hr>
+			<form style="display:inline" action="litmod.php">
+				<span>
+					<input type="submit" value="Literatur hinzuf&uuml;gen">
+				</span>
+			</form>
+			<form style="display:inline" action="bibtex.php">
+				<span>
+					<input type="submit" value="BibTeX importieren">
+				</span>
+			</form>
+		<?php
+		}
+	?>
+
+
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/install.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/install.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/install.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,326 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
+<html>
+	<head>
+		<title>Install :: LiMan</title>
+		<link rel="SHORTCUT ICON" href="favicon.ico">
+		<meta name="description" content="Literature Manager">
+		<meta name="keywords" content="bibtex, books, literature, database, manager">
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
+		<meta name="robots" content="follow">
+		<meta http-equiv="content-language" content="de">
+		<meta name="author" content="Simon Wunderlich">
+		<link rel="home" title="Home" href="index.php">
+		<style type="text/css">
+			th {
+				width: 10em;
+				text-align: left;
+			}
+			td {
+				width: 20em;
+			}
+
+			.input_text, .input_password {
+				width: 20em;
+			}
+		</style>
+	</head>
+	<body id="liman_install">
+		<h1>LiMan Installation</h1>
+<?php
+	// Lese ?bergebene Variablen aus bzw. setzte Standardwerte
+	if (empty($_POST["dbms"]) === false)
+	{
+		$db_config['dbms'] = "mysql";
+
+		if ($_POST["dbms"] === "MySQL5")
+		{
+			$enableUTF8 = true;
+		}
+		else
+		{
+			$enableUTF8 = false;
+		}
+	}
+	else
+	{
+		$db_config['dbms'] = "mysql";
+	}
+
+	if (empty($_POST["user"]) === false)
+	{
+		$db_config['user'] = $_POST["user"];
+	}
+	else
+	{
+		$db_config['user'] = "";
+	}
+
+	if (empty($_POST["pass"]) === false)
+	{
+		$db_config['pass'] = $_POST["pass"];
+	}
+	else
+	{
+		$db_config['pass'] = "";
+	}
+
+	if (empty($_POST["name"]) === false)
+	{
+		$db_config['name'] = $_POST["name"];
+	}
+	else
+	{
+		$db_config['name'] = "";
+	}
+
+	if (empty($_POST["host"]) === false)
+	{
+		$db_config['host'] = $_POST["host"];
+	}
+	else
+	{
+		$db_config['host'] = "";
+	}
+
+	if (empty($_POST["prefix"]) === false)
+	{
+		$db_config['prefix'] = $_POST["prefix"];
+	}
+	elseif (isset($_GET["install"]) === true)
+	{
+		$db_config['prefix'] = "";
+	}
+	else
+	{
+		$db_config['prefix'] = "liman_";
+	}
+
+	if (empty($_POST["loginname"]) === false)
+	{
+		$loginname = $_POST["loginname"];
+	}
+	elseif (isset($_GET["install"]) === true)
+	{
+		die("Sie m?ssen ein Loginname angeben");
+		echo "</body></html>";
+	}
+	else
+	{
+		$loginname = "admin";
+	}
+
+	if (empty($_POST["passwort"]) === false)
+	{
+		$passworthash = sha1($_POST["passwort"]);
+	}
+	elseif (isset($_GET["install"]) === true)
+	{
+		$passworthash = "";
+		die("Sie m?ssen ein Passwort angeben");
+		echo "</body></html>";
+	}
+	else
+	{
+		$passworthash = "";
+	}
+
+	
+	// Soll Tabellen Datenbank erstellt werden?
+	if (isset($_GET["install"]) === true)
+	{
+		// Wenn ja, verbinde mit Datenbank
+		require_once("include/sqldb.php");
+
+		// Erstelle SQL-Befehle zum L?schen alter Tabellen
+		$sqlDrop["Autoren"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Autoren`";
+		$sqlDrop["Bibliothek"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Bibliothek`";
+		$sqlDrop["Kommentare"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Kommentare`";
+		$sqlDrop["Literatur_Autor"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Literatur_Autor`";
+		$sqlDrop["Mitglieder"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Mitglieder`";
+
+		// Erstelle SQL-Befehle zum Erstellen neuer Tabellen
+		$sqlCreate["Autoren"] = "CREATE TABLE `".$db_config['prefix']."Autoren` (
+			`Autor_Nr` int(11) NOT NULL auto_increment,
+			`Autorname` varchar(40) NOT NULL,
+			PRIMARY KEY  (`Autor_Nr`),
+			UNIQUE KEY `Autorname` (`Autorname`),
+			FULLTEXT KEY `Autorname_2` (`Autorname`)
+			)";
+		$sqlCreate["Bibliothek"] = "CREATE TABLE `".$db_config['prefix']."Bibliothek` (
+			`Literatur_Nr` int(11) NOT NULL auto_increment,
+			`Art` enum('Buch','Artikel','Brosch?re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver?ffentlicht','Sonstiges') NOT NULL,
+			`Titel` varchar(40) NOT NULL,
+			`Jahr` int(11) NOT NULL,
+			`Verlag` varchar(40) NOT NULL,
+			`ISBN` varchar(20) NOT NULL,
+			`Beschreibung` text NOT NULL,
+			`Ort` varchar(40) NOT NULL,
+			`Stichworte` varchar(100) NOT NULL,
+			PRIMARY KEY  (`Literatur_Nr`),
+			FULLTEXT KEY `Titel` (`Titel`,`Verlag`,`ISBN`,`Beschreibung`,`Ort`,`Stichworte`)
+			)";
+		$sqlCreate["Kommentare"] = "CREATE TABLE `".$db_config['prefix']."Kommentare` (
+			`Kommentar_Nr` int(11) NOT NULL auto_increment,
+			`Kommentartext` text NOT NULL,
+			`Literatur_Nr` int(11) NOT NULL,
+			`Mitglieds_Nr` int(11) NOT NULL,
+			PRIMARY KEY  (`Kommentar_Nr`),
+			KEY `Literatur_Nr` (`Literatur_Nr`,`Mitglieds_Nr`),
+			FULLTEXT KEY `Kommentartext` (`Kommentartext`)
+			)";
+		$sqlCreate["Literatur_Autor"] = "CREATE TABLE `".$db_config['prefix']."Literatur_Autor` (
+			`Autor_Nr` int(11) NOT NULL,
+			`Literatur_Nr` int(11) NOT NULL,
+			KEY `Autor_Nr` (`Autor_Nr`,`Literatur_Nr`)
+			)";
+		$sqlCreate["Mitglieder"] = "CREATE TABLE `".$db_config['prefix']."Mitglieder` (
+			`Mitglieds_Nr` int(11) NOT NULL auto_increment,
+			`Name` varchar(20) NOT NULL,
+			`Vorname` varchar(20) NOT NULL,
+			`Email` text NOT NULL,
+			`Login` varchar(12) NOT NULL,
+			`Passwort` varchar(40) NOT NULL,
+			`Rechte` enum('Benutzer','Administrator') NOT NULL,
+			PRIMARY KEY  (`Mitglieds_Nr`),
+			UNIQUE KEY `Login` (`Login`)
+			)";
+	
+		// Sollen Tabellen mit Standardzeichenkodierung UTF-8 erstellt werden?
+		if ($enableUTF8 === true)
+		{
+			$sqlCreate["Autoren"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Bibliothek"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Kommentare"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Literatur_Autor"] .= " DEFAULT CHARSET=utf8";
+			$sqlCreate["Mitglieder"] .= " DEFAULT CHARSET=utf8";
+		}
+	
+		// Erstelle SQL-Befehle zum Anlegen des ersten Nuters an
+		$sqlInsertMitglied = "INSERT INTO ".$db_config['prefix']."Mitglieder
+				VALUES (NULL, 'Istrator', 'Admin', 'foo at bar.de', '$loginname', '$passworthash', 'Administrator')";
+	
+		// L?sche alte Tabellen in Datenbank
+		foreach ($sqlDrop as $drop)
+		{
+			if ($sqldb->Query($drop) === false)
+			{
+				echo "<div class=\"error\">Es trat ein Fehler bei dem L?schen alter Tabellen auf:<pre>";
+				$error = $sqldb->GetError();
+				echo htmlspecialchars($error[0])."<br>";
+				echo "SQL-Befehl: <br>".htmlspecialchars($drop);
+				echo "</pre></div>";
+				echo "</body></html>";
+				die();
+			}
+		}
+	
+		// Erstelle neue Tabellen
+		foreach ($sqlCreate as $create)
+		{
+			if ($sqldb->Query($create) === false)
+			{
+				echo "<div class=\"error\">Es trat ein Fehler bei dem Erstellen neuer Tabellen auf:<pre>";
+				$error = $sqldb->GetError();
+				echo htmlspecialchars($error[0])."<br>";
+				echo "SQL-Befehl: <br>".htmlspecialchars($create);
+				echo "</pre></div>";
+				echo "</body></html>";
+				die();
+			}
+		}
+	
+		// Einf?gen erstes Mitglied (Administrator)
+		if ($sqldb->Query($sqlInsertMitglied) === false)
+		{
+			echo "<div class=\"error\">Es trat ein Fehler bei dem Einf?gen des ersten Mitglieds auf:<pre>";
+			$error = $sqldb->GetError();
+			echo htmlspecialchars($error[0])."<br>";
+			echo "SQL-Befehl: <br>".htmlspecialchars($sqlInsertMitglied);
+			echo "</pre></div>";
+			echo "</body></html>";
+			die();
+		}
+
+		?>
+			<p>Datenbank wurde erfolgreich eingerichtet.</p>
+			<p>Erstellen sie in ihrem Installationsordner unter "include" eine Datei mit dem Namen "config.php" und folgendem Inhalt:
+			<pre>
+&lt;?php
+	// Datenbankeinstellungen
+	$db_config['dbms'] = "<?=htmlspecialchars($db_config['dbms']);?>";
+	$db_config['user'] = "<?=htmlspecialchars($db_config['user']);?>";
+	$db_config['pass'] = "<?=htmlspecialchars($db_config['pass']);?>";
+	$db_config['name'] = "<?=htmlspecialchars($db_config['name']);?>";
+	$db_config['host'] = "<?=htmlspecialchars($db_config['host']);?>";
+	$db_config['prefix'] = "<?=htmlspecialchars($db_config['prefix']);?>";
+
+	$ext = "php";	// Endung der von den Usern abrufbaren Dateien
+	$gz_enable = false; // aktiviere GZIP-Kompression der HTML-Dateien
+?&gt;
+			</pre></p>
+		<?php
+	}
+	else
+	{
+		require_once("include/form_helper.php");
+		?>
+		<form id="installform" action="install.php?install=" method="post">
+		
+		<h2>Datenbankeinstellungen</h2>
+		<table>
+		<tbody>
+			<tr>
+			<th scope="row"><label for="dbms">Datenbanksystem</label></th>
+			<td><?= form_select(array("MySQL3", "MySQL4", "MySQL5"), "dbms", "MySQL5"); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="user">Benutzername</label></th>
+			<td><?= form_input("text", "user", $db_config["user"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="pass">Passwort</label></th>
+			<td><?= form_input("password", "pass"); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="host">Host</label></th>
+			<td><?= form_input("text", "host", $db_config["host"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="name">Datenbankname</label></th>
+			<td><?= form_input("text", "name", $db_config["name"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="prefix">Prefix</label></th>
+			<td><?= form_input("text", "prefix", $db_config["prefix"]); ?></td>
+			</tr>
+		</tbody>
+		</table>
+
+
+		<h2>Administratoreinstellungen</h2>
+		<table>
+		<tbody>
+			<tr>
+			<th scope="row"><label for="loginname">Loginname</label></th>
+			<td><?= form_input("text", "loginname", $db_config["loginname"]); ?></td>
+			</tr>
+
+			<tr>
+			<th scope="row"><label for="passwort">Passwort</label></th>
+			<td><?= form_input("password", "passwort", $db_config["passwort"]); ?></td>
+			</tr>
+		</tbody>
+		</table>
+
+		<div><input type="submit" value="&Uuml;bernehmen"></div>
+		</form>
+		<?php
+	}
+	
+?>
+</body></html>
\ No newline at end of file

Added: trunk/docs/beleg3/sourcecodes/lit.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/lit.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/lit.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,190 @@
+<?php
+	$title = "Literaturdetails";
+
+	require_once("include/header.php");
+	require_once("include/literatur.php");
+
+	// Lese Literatur aus, wenn id ?bergeben wurde
+	if (isset($_GET["id"]))
+	{
+		$literatur = new Literatur($_GET["id"]);
+	}
+	else
+	{
+		$literatur = new Literatur(0);
+	}
+
+	// gebe Literatur aus
+?>
+<div id="cfront" class="content">
+	
+	<table id="litdetails">
+		<tbody>
+			<tr>
+				<th scope="row">Titel:</th>	
+				<td><?=htmlspecialchars($literatur->Titel); ?></td>
+			</tr>
+			<tr>
+				<th scope="row">Autor:</th>	
+				<td><?php
+					$autorlist = "";
+
+					if (count($literatur->Autoren) > 0)
+					{
+						$autornamen = array();
+						foreach ($literatur->Autoren as $autor)
+						{
+							$autornamen[] = $autor->Name;
+						}
+	
+						$autorlist = implode(", ", $autornamen);
+					}
+					echo htmlspecialchars($autorlist);
+				?></td>
+			</tr>
+			<tr>
+				<th scope="row">Erscheinungsjahr:</th>	
+				<td><?=htmlspecialchars($literatur->Jahr); ?></td>
+			</tr>
+			<tr>
+				<th scope="row">Verlag:</th>	
+				<td><?=htmlspecialchars($literatur->Verlag); ?></td>
+			</tr>
+			<tr>
+				<th scope="row">Verlagsort:</th>	
+				<td><?=htmlspecialchars($literatur->Ort); ?></td>
+			</tr>
+
+			<tr>
+				<th scope="row">ISBN:</th>	
+				<td><?=htmlspecialchars($literatur->ISBN); ?></td>
+			</tr>
+			<tr>
+				<th scope="row">Beschreibung:</th>	
+				<td><?=nl2br(htmlspecialchars($literatur->Beschreibung)); ?></td>
+			</tr>
+			<tr>
+				<th scope="row">Bibtex:</th>	
+				<td>
+					<pre><?= htmlspecialchars($literatur->ToBibtex()); ?></pre>
+				</td>
+			</tr>
+			<?php
+				// Sind Mitgliedsrechte vorhanden, gebe Bearbeiten- und L?schenknopf aus
+				if ($login->IsMember() === true)
+				{
+			?>
+				<tr>
+					<th scope="row">Aktionen:</th>	
+					<td><form style="display:inline" action="litmod.<?=$ext;?>?id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+							<span><input type="submit" value="Bearbeiten"></span>
+						</form>
+						<form style="display:inline" action="litmod.<?=$ext;?>?delete=&amp;id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+							<span><input type="submit" value="L&ouml;schen"></span>
+					</form></td>
+				</tr>
+			<?php
+				}
+			?>
+		</tbody>
+	</table>
+	<hr>
+
+	<table id="litkommentare">
+		<tbody>
+			<?php
+				require_once("include/form_helper.php");
+				$owncomment = ""; // hat der user schon etwas kommentiert?
+				foreach ($literatur->Kommentare as $cur)
+				{
+					// Suche ob schon ein Kommentar des aktuellen Mitglieds existiert
+					if ($login->Nr == $cur->Verfasser_Nr)
+					{
+						$owncomment->Text = $cur->Text;
+						$owncomment->Nr = $cur->Nr;
+						
+					}
+			?>
+				<tr>
+					<th scope="row"><?=htmlspecialchars($cur->Verfasser_Name);?>:</th>	
+					<td class="kommentar"><?=htmlspecialchars($cur->Text);?></td>
+					<td><?php
+						// Darf der User l?schen?
+						if ($login->Nr == $cur->Verfasser_Nr || $login->IsAdministrator() === true)
+						{
+							echo "<span style=\"font-size: xx-small\">";
+							echo "<a href=\"commentmod.php?delete&amp;id=".$cur->Nr."&amp;litid=".htmlspecialchars($_GET["id"])."\">(l?schen)</a></span>";
+						}
+					?></td>
+				</tr>
+			<?php
+				}
+			?>
+		</tbody>
+	</table>
+
+	<?php
+		if ($login->IsMember() === true)
+		{
+			require_once("include/form_helper.php");
+
+			// Soll Kommentar-Hinzuf?gen-Box erscheinen oder Update-Box?
+			// (abh?ngig ob schon Kommentar das Mitglieds existiert)
+			if (empty($owncomment) === true)
+			{
+				// Zeige Hinzuf?gen-Formular
+		?>
+			<form action="commentmod.<?=$ext;?>?insert=" method="post">
+			<span>
+				<?=form_input("hidden", "litid", $_GET["id"]);?>
+				<?=form_input("hidden", "userid", $login->Nr);?>
+			</span>
+			<table id="litkommentaradd">
+				<tbody>
+					<tr>
+						<th scope="row">Neuer Kommentar:</th>	
+						<td>
+							<textarea id="text" name="text" cols=40 rows=10></textarea>
+						</td>
+					</tr>
+					<tr>
+						<th scope="row"></th>
+						<td><input type="submit" value="Kommentar senden"></td>
+						
+					</tr>
+				</tbody>
+			</table>
+			</form>
+		<?php
+			}
+			else
+			{
+				// Zeige ?ndern-Formular
+		?>
+			<form action="commentmod.<?=$ext;?>?update" method="post">
+			<span>
+				<?=form_input("hidden", "litid", $_GET["id"]);?>
+				<?=form_input("hidden", "id", $owncomment->Nr);?>
+			</span>
+			<table id="litkommentarmod">
+				<tbody>
+					<tr>
+						<th scope="row"><label for="text">Kommentar ?ndern:</label></th>	
+						<td>
+							<textarea id="text" name="text" cols=40 rows=10><?=htmlspecialchars($owncomment->Text);?></textarea>
+						</td>
+					</tr>
+					<tr>
+						<th scope="row"></th>
+						<td><input type="submit" value="Kommentar senden"></td>
+						
+					</tr>
+				</tbody>
+			</table>
+			</form>
+		<?php
+			}
+		}
+	?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/litmod.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/litmod.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/litmod.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,434 @@
+<?php
+	// W?hle Seitentitel nach ausgew?hlter Aktion
+	if (isset($_GET["delete"]) === true)
+	{
+		$title = "Literatur l?schen";
+	}
+	elseif (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+	{
+		$title = "Literatur ?ndern";
+	}
+	else
+	{
+		$title = "Literatur hinzuf?gen";
+	}
+
+	require_once("include/header.php");
+
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
+	if ($login->IsMember() === false)
+	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
+		require_once("include/footer.php");
+		die();
+	}
+?>
+<div id="cfront" class="content">
+<?php
+	$error_occurred = false; // Fehler beim Verarbeiten aufgetreten?
+	$error_titel = false;
+	$error_autor = false;
+	$error_jahr = false;
+
+	// ?berpr?fe wichtige Parameter bei Insert und Update auf Vorhandensein
+	if (isset($_GET["insert"]) === true || isset($_GET["update"]) === true)
+	{
+		if (empty($_POST["titel"]) === true)
+		{
+			$error_titel = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["autor"]) === true)
+		{
+			$error_autor = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["jahr"]) === false && is_numeric($_POST["jahr"]) === false)
+		{
+			$error_jahr = true;
+			$error_occurred = true;
+		}
+	}
+
+	// Gebe Fehler bei Parameter?berpr?fung aus
+	if ($error_occurred == true)
+	{
+		echo "<div id=\"error_list\">Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:<ul>";
+		
+		if ($error_titel === true)
+		{
+			echo "<li>Sie m?ssen einen Titel f?r die Literatur angeben</li>";
+		}
+
+		if ($error_autor === true)
+		{
+			echo "<li>Sie m?ssen mindestens einen Autor angeben</li>";
+		}
+
+		if ($error_jahr === true)
+		{
+			echo "<li>Das Jahr muss eine Zahl sein</li>";
+		}
+
+		echo "</ul></div>";
+	}
+
+	// Gebe Formular aus, wenn keine Schreibaktionen ausgef?hrt werden
+	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
+		|| $error_occurred === true)
+	{
+		// Lese id aus, wenn vorhanden
+		if (isset($_POST["id"]) === true)
+		{
+			$id = $_POST["id"];
+		}
+		elseif (isset($_GET["id"]) === true)
+		{
+			$id = $_GET["id"];
+		}
+		else
+		{
+			unset($id);
+		}
+
+		require_once("include/form_helper.php");
+		// Lese Literatur aus, wenn id bekannt ist und vorher kein Fehler aufgetreten ist
+		if ($error_occurred === false && (isset($_GET["id"]) === true || isset($_POST["id"]) === true))
+		{
+			require_once("include/literatur.php");
+
+			$lit = new Literatur($id);
+			$titel = $lit->Titel;
+			$autor = "";
+			$jahr = $lit->Jahr;
+			$stichworte = $lit->Stichworte;
+
+			if (isset($lit->Art) === true)
+			{
+				$art = $lit->Art->GetDisplayText();
+			}
+			else
+			{
+				$art = "Buch";
+			}
+
+			$autor = "";
+			if (empty($lit->Autoren) === false)
+			{
+				$autornamen = array();
+				foreach ($lit->Autoren as $cur)
+				{
+					$autornamen[] = $cur->Name;
+				}
+
+				$autor = implode(", ", $autornamen);
+			}
+
+			$verlag = $lit->Verlag;
+			$ort = $lit->Ort;
+			$isbn = $lit->ISBN;
+			$beschreibung = $lit->Beschreibung;
+		}
+		else
+		{
+			// Sollte vorher Fehler aufgetreten sein, lese Parameter aus.
+			// Sollten vorher keine Fehler aufgetreten sein (keine
+			// id bekannt), setze Default Wert
+
+			// Setze Titel
+			if (isset($_POST["titel"]) === true)
+			{
+				$titel = stripslashes($_POST["titel"]);
+			}
+			else
+			{
+				$titel = "";
+			}
+
+			// Setze Autoren
+			if (isset($_POST["autor"]) === true)
+			{
+				$autor = stripslashes($_POST["autor"]);
+			}
+			else
+			{
+				$autor = "";
+			}
+
+			// Setze Jahr
+			if (isset($_POST["jahr"]) === true)
+			{
+				$jahr = stripslashes($_POST["jahr"]);
+			}
+			else
+			{
+				$jahr = date("Y");
+			}
+
+			// Setze Stichworte
+			if (isset($_POST["stichworte"]) === true)
+			{
+				$stichworte = stripslashes($_POST["stichworte"]);
+			}
+			else
+			{
+				$stichworte = "";
+			}
+
+			// Setze Art
+			if (isset($_POST["art"]) === true)
+			{
+				$art = stripslashes($_POST["art"]);
+			}
+			else
+			{
+				$art = "Buch";
+			}
+
+			// Setze Verlag
+			if (isset($_POST["verlag"]) === true)
+			{
+				$verlag = stripslashes($_POST["verlag"]);
+			}
+			else
+			{
+				$verlag = "";
+			}
+
+			// Setze Ort
+			if (isset($_POST["ort"]) === true)
+			{
+				$ort = stripslashes($_POST["ort"]);
+			}
+			else
+			{
+				$ort = "";
+			}
+
+			// Setze ISBN
+			if (isset($_POST["isbn"]) === true)
+			{
+				$isbn = stripslashes($_POST["isbn"]);
+			}
+			else
+			{
+				$isbn = "";
+			}
+
+			// Setze Beschreibung
+			if (isset($_POST["beschreibung"]) === true)
+			{
+				$beschreibung = stripslashes($_POST["beschreibung"]);
+			}
+			else
+			{
+				$beschreibung = "";
+			}
+		}
+
+		if (empty($id) === true)
+		{
+			// Gebe Hinzuf?gen-Formular aus
+			echo "<form action=\"litmod.".$ext."?insert\" id=\"litaddform\" method=\"post\">";
+		}
+		else
+		{
+			// Gebe Update-Formular aus
+			echo "<form action=\"litmod.".$ext."?update\" id=\"litupdateform\" method=\"post\">";
+			echo form_input("hidden", "id", $id);
+		}
+
+		// Gebe Formular mit vorher bestimmten Werten aus
+	?>
+		<table id="litadd">
+			<tbody>
+				<tr>
+					<th scope="row">Titel:</th>	
+					<td><?=form_input("text", "titel", $titel, $error_titel);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Autor:</th>
+					<td><?=form_input("text", "autor", $autor, $error_autor);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Erscheinungsjahr:</th>	
+					<td><?=form_input("text", "jahr", $jahr, $error_jahr);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Stichworte:</th>	
+					<td><?=form_input("text", "stichworte", $stichworte);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Art:</th>	
+					<td><?=form_select(array("Anleitung", "Artikel", "Brosch?re", "Buch", "Diplomarbeit",
+						"Dissertation", "Protokoll", "Sonstiges", "Techn. Bericht", "Unver?ffentlicht"),
+						"art", $art);?>
+					</td>
+				</tr>
+				<tr>
+					<th scope="row">Verlag:</th>	
+					<td><?=form_input("text", "verlag", $verlag);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Verlagsort:</th>	
+					<td><?=form_input("text", "ort", $ort);?></td>
+				</tr>
+	
+				<tr>
+					<th scope="row">ISBN:</th>	
+					<td><?=form_input("text", "isbn", $isbn);?></td>
+				</tr>
+				<tr>
+					<th scope="row">Bemerkung:</th>	
+					<td><textarea cols="20" rows="10" name="beschreibung" id="beschreibung"><?=htmlspecialchars($beschreibung);?></textarea></td>
+				</tr>
+				<tr>
+					<th scope="row">Aktionen:</th>	
+					<td><input type="submit" value="&Uuml;bernehmen"></td>
+				</tr>
+	
+			</tbody>
+		</table>
+		</form>
+	<?php
+	}
+	else
+	{
+		// F?hre Schreibaktionen aus
+		require_once("include/literatur.php");
+
+
+		// Suche gew?hlte Aktion
+		if (isset($_GET["delete"]) === true)
+		{
+			// L?schen wenn akzeptiert wurde
+			if (isset($_POST["accept"]) === true)
+			{
+				// Fehlerhafte Daten zum L?schen ?bertragen?
+				if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+				{
+					// Wenn ja, gebe Fehler aus
+					echo "<p id=\"error\">Literatur konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
+				}
+				else
+				{
+					// Wenn nicht, l?sche Literatur und gebe Erfolgsmeldung aus
+					Literatur::Delete($_POST["id"]);
+					echo "<p style=\"text-align: center\">Literatur wurde entfernt</p>";
+				}
+			}
+			else
+			{
+				// Frage ob Literatur gel?scht werden soll
+				require_once("include/form_helper.php");
+				echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+				echo "Wollen sie die Literatur wirklich entfernen?";
+				echo "<form action=\"litmod.".$ext."?delete\" id=\"litupdateform\" method=\"post\">";
+				echo form_input("hidden", "id", $_GET["id"]);
+				echo form_input("hidden", "accept", "true");
+				echo "<input type=\"submit\" value=\"Best?tigen\">";
+				echo "</form></div>";
+			}
+		}
+		elseif  (isset($_GET["insert"]) === true)
+		{
+			if (isset($_POST["accept"]) === false)
+			{
+				// Suche ob ?hnliche Literatur existiert
+				require_once("include/suche.php");
+				$search = new Suche($_POST["titel"], $_POST["autor"]);
+				if (empty($search->Treffer) === false)
+				{
+				?>
+					Es wurde ?hnliche Literatur gefunden:
+					<table id="searchresult">
+				
+						<thead>
+							<tr>
+								<th scope="col">Titel</th>
+								<th scope="col">Autor</th>
+								<th scope="col">Verlag</th>
+								<th scope="col">ISBN</th>
+							</tr>
+						</thead>
+					<tbody>
+				<?php
+					// Gebe gefundene Literatur zur?ck
+					foreach ($search->Treffer as $cur)
+					{
+				?>
+					<tr>
+						<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+						<td><?=htmlspecialchars($cur->Autor);?></td>
+						<td><?=htmlspecialchars($cur->Verlag);?></td>
+						<td><?=htmlspecialchars($cur->ISBN);?></td>
+					</tr>
+				<?php
+					}
+				?>
+						</tbody>
+					</table>
+				<?php
+					// Frage nach Best?tigung zum Hinzuf?gen
+					require_once("include/form_helper.php");
+					echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+					echo "Trotzdem hinzuf?gen?";
+					echo "<form action=\"litmod.".$ext."?insert\" id=\"litupdateform\" method=\"post\">";
+					echo form_input("hidden", "accept", "true");
+					echo form_input("hidden", "titel", $_POST["titel"]);
+					echo form_input("hidden", "autor", $_POST["autor"]);
+					echo form_input("hidden", "jahr", $_POST["jahr"]);
+					echo form_input("hidden", "stichworte", $_POST["stichworte"]);
+					echo form_input("hidden", "art", $_POST["art"]);
+					echo form_input("hidden", "verlag", $_POST["verlag"]);
+					echo form_input("hidden", "ort", $_POST["ort"]);
+					echo form_input("hidden", "isbn", $_POST["isbn"]);
+					echo form_input("hidden", "beschreibung", $_POST["beschreibung"]);
+					echo "<input type=\"submit\" value=\"Best?tigen\">";
+					echo "</form></div>";
+				}
+			}
+
+			// Anlegen, wenn keine ?hnlichen B?cher gefunden wurden oder wenn akzeptiert wurde
+			if (isset($_POST["accept"]) === true || empty($search->Treffer) === true)
+			{
+				// Fehlerhafte Daten zum Anlegen ?bertragen?
+				if (isset($_POST["art"]) === false || isset($_POST["verlag"]) === false ||
+					isset($_POST["isbn"]) === false || isset($_POST["beschreibung"]) === false ||
+					isset($_POST["ort"]) === false || isset($_POST["stichworte"]) === false)
+				{
+					// Wenn ja, gebe Fehler aus
+					echo "<p id=\"error\">Literatur konnte nicht angelegt werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
+				}
+				else
+				{
+					// Wenn nicht, lege Literatur an und gebe Erfolgsmeldung aus
+					Literatur::Insert($_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+					echo "<p style=\"text-align: center\">Literatur wurde hinzugef?gt</p>";
+				}
+			}
+		}
+		elseif (isset($_GET["update"]) === true)
+		{
+			// Fehlerhafte Daten zum ?ndern ?bertragen?
+			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false ||
+				isset($_POST["art"]) === false || isset($_POST["verlag"]) === false ||
+				isset($_POST["isbn"]) === false || isset($_POST["beschreibung"]) === false ||
+				isset($_POST["ort"]) === false || isset($_POST["stichworte"]) === false)
+			{
+				// Wenn ja, gebe Fehler aus
+				echo "<p id=\"error\">Literatur konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen der Literatur gab</p>";
+			}
+			else
+			{
+				// Wenn nicht, ?ndere Literatur und gebe Erfolgsmeldung aus
+				Literatur::Update($_POST["id"], $_POST["autor"], $_POST["art"], $_POST["titel"], $_POST["jahr"], $_POST["verlag"], $_POST["isbn"], $_POST["beschreibung"], $_POST["ort"], $_POST["stichworte"]);
+				echo "<p style=\"text-align: center\">Literatur wurde ge?ndert</p>";
+			}
+		}
+	}
+?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/login.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/login.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/login.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,52 @@
+<?php
+	$title = "Login";
+	
+	require_once("include/global.php");
+
+	// Suche gew?hlte Aktion
+	if (empty($_POST["loginname"]) === false && empty($_POST["passwort"]) === false)
+	{
+		// Fehlerhafte Daten zum L?schen ?bertragen?
+		if (empty($_POST["loginname"]) === true || empty($_POST["passwort"]) === true)
+		{
+			// Wenn ja, gebe Fehler aus
+			echo "<p id=\"error\">Sie konnte nicht angemeldet werden, da es ein Fehler bei der ?bertragung der Informationen des Logins gab</p>";
+		}
+		else
+		{
+			// Logge Mitglied mit ?bergebenen Parametern ein
+			$login = new Login($_POST["loginname"], $_POST["passwort"]);
+		}
+	}
+	elseif (isset($_GET["logout"]) === true)
+	{
+		$login->Logout();
+	}
+
+	require_once("include/header.php");
+?>
+<div id="clogin" class="content">
+	<div style="text-align: center">
+	<?php
+		// Gebe je nach Aktion Statusinformation aus
+		if (isset($_GET["logout"]) === true)
+		{
+			// Verabschiede Nutzer beim Abmelden
+			echo "Auf Wiedersehen";
+		}
+		elseif ($login->IsMember() === true)
+		{
+			// Begr??e Nutzer beim Anmelden
+			require_once("include/mitglied.php");
+			$mitglied = new Mitglied($login->Nr);
+			echo "Willkommen ".$mitglied->Vorname." ".$mitglied->Nachname;
+		}
+		else
+		{
+			// Sonst gebe Fehlermeldung beim Anmelden aus
+			echo "<div id=\"error\">Login ist Fehlgeschlagen</div>";
+		}
+	?>
+	</div>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/search.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/search.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/search.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,99 @@
+<?php
+	// W?hle Seitentitel nach ausgew?hlter Aktion
+	if (isset($_GET["suchbegriff"]) === true)
+	{
+		$title = "Suchergebnisse f&uuml;r \"".htmlspecialchars($_GET["suchbegriff"])."\"";
+	}
+	elseif (isset($_GET["autor"]) === true && isset($_GET["titel"]) === true)
+	{
+		$title = "Suchergebnisse f&uuml;r \"".htmlspecialchars($_GET["autor"])."\" und \"".htmlspecialchars($_GET["titel"])."\"";
+	}
+	else
+	{
+		$title = "Letzte Literatur";
+	}
+
+	require_once("include/header.php");
+?>
+<div id="cfront" class="content">
+<?php
+	require_once("include/suche.php");
+
+	// Welche Art von Suche?
+	if (isset($_GET["suchbegriff"]) === true)
+	{
+		// Volltextsuche nach Suchbegriff
+		$search = new Suche($_GET["suchbegriff"]);
+	}
+	elseif (isset($_GET["autor"]) === true && isset($_GET["titel"]) === true)
+	{
+		// Suche nach Autor und Titel
+		$search = new Suche($_GET["titel"], $_GET["autor"]);
+	}
+	else
+	{
+		// Suche zuletzt hinzugef?gte Literatur
+		$search = new Suche();
+	}
+
+	// Wurde etwas gefunden?
+	if (empty($search->Treffer) === false)
+	{
+	?>
+		<table id="searchresult">
+			<thead>
+				<tr>
+					<th scope="col">Titel</th>
+					<th scope="col">Autor</th>
+					<th scope="col">Verlag</th>
+					<th scope="col">ISBN</th>
+				</tr>
+			</thead>
+		<tbody>
+	<?php
+		// Gebe alle gefundenen Treffer aus
+		foreach ($search->Treffer as $cur)
+		{
+	?>
+		<tr>
+			<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+			<td><?=htmlspecialchars($cur->Autor);?></td>
+			<td><?=htmlspecialchars($cur->Verlag);?></td>
+			<td><?=htmlspecialchars($cur->ISBN);?></td>
+		</tr>
+	<?php
+		}
+	?>
+			</tbody>
+		</table>	
+	<?php
+	}
+	else
+	{
+		// Wenn nicht, gebe Information aus
+		echo "<div id=\"warning\">Keine Treffern gefunden</div>";
+	}
+?>
+
+
+<?php
+	// Sind Mitgliedsrechte vorhanden, gebe Hinzuf?ge- und Importierknopf aus
+	if ($login->IsMember() === true)
+	{
+	?>
+		<hr>
+		<form style="display:inline" action="litmod.php">
+			<span>
+				<input type="submit" value="Literatur hinzuf&uuml;gen">
+			</span>
+		</form>
+		<form style="display:inline" action="bibtex.php">
+			<span>
+				<input type="submit" value="BibTeX importieren">
+			</span>
+		</form>
+	<?php
+	}
+?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/searchmore.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/searchmore.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/searchmore.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,52 @@
+<?php
+	$title = "Erweiterte Suche";
+
+	require_once("include/header.php");
+?>
+<div id="cfront" class="content">
+
+	<form action="search.<?=$ext;?>" id="extrasearchform" method="get">
+	<fieldset>
+   		 <legend><b>Autoren- und Titelsuche</b></legend>
+	
+	
+		<table class="searchmore">
+			<tbody>
+				<tr>
+					<th scope=row><label for="autor">Autor:</label></th>
+					<td><input class="input_text" type="text" id="autor" name="autor"></td>
+				</tr>
+				<tr>
+					<th scope=row><label for="titel">Titel:</label></th>
+					<td><input class="input_text" type="text" id="titel" name="titel"></td>
+				</tr>
+				<tr>
+					<th></th>
+					<td><input type="submit" value="Suche"></td>
+				</tr>
+			</tbody>
+		</table>
+	</fieldset>
+	</form>
+
+	<hr>
+	
+	<form action="search.<?=$ext;?>" id="fulltextform" method="get">
+	<fieldset>
+   		<legend><b>Volltextsuche</b></legend>
+		<table class="searchmore">
+			<tbody>
+				<tr>
+					<th scope=row><label for="suchbegriff">Suchbegriff:</label></th>
+					<td><input class="input_text" type="text" id="suchbegriff" name="suchbegriff"></td>
+				</tr>
+				<tr>
+					<th></th>
+					<td><input type="submit" value="Suche"></td>
+				</tr>
+			</tbody>
+		</table>
+	</fieldset>
+	</form>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/user.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/user.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/user.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,88 @@
+<?php
+	$title = "Nutzerdetails";
+
+	require_once("include/header.php");
+	require_once("include/mitglied.php");
+
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
+	if ($login->IsMember() === false)
+	{
+		require_once("include/footer.php");
+		die();
+	}
+	elseif ($login->IsAdministrator() === false)
+	{
+		// Wenn keine Administratorrechte vorhanden sind
+		// d?rfen nur die eigenen Daten angesehen werden
+		$_GET["id"] = $login->Nr;
+		$_POST["id"] = $login->Nr;
+	}
+
+	// Lese Mitglied aus, wenn id ?bergeben wurde
+	if (isset($_GET["id"]))
+	{
+		$mitglied = new Mitglied($_GET["id"]);
+	}
+	else
+	{
+		$mitglied = new Mitglied(0);
+	}
+
+	// gebe Informationen zu Mitglied aus
+?>
+<div id="cfront" class="content">
+	<form action="usermod.php">
+	
+	<table id="bookdetails">
+		<tbody>
+			<tr>
+				<th scope="row">Login:</th>	
+				<td><?=htmlspecialchars($mitglied->Login);?></td>
+			</tr>
+			<tr>
+				<th scope="row">Vorname:</th>	
+				<td><?=htmlspecialchars($mitglied->Vorname);?></td>
+			</tr>
+			<tr>
+				<th scope="row">Nachname:</th>	
+				<td><?=htmlspecialchars($mitglied->Nachname);?></td>
+			</tr>
+			<tr>
+				<th scope="row">Rechte:</th>	
+				<td><?php
+					// Wandle Zahlenrepr?sentation der Rechte
+					// in textuelle Repr?sentation um
+					switch ($mitglied->Rechte)
+					{
+					case 2:
+						$rechte = "Administrator";
+						break;
+					default:
+					case 1:
+						$rechte = "Benutzer";
+						break;
+					}
+					echo htmlspecialchars($rechte);
+				?></td>
+			</tr>
+
+			<tr>
+				<th scope="row">E-Mail:</th>	
+				<td><?=htmlspecialchars($mitglied->Email);?></td>
+			</tr>
+			<tr>
+				<th scope="row">Aktionen:</th>	
+				<td>
+					<form style="display:inline" action="usermod.<?=$ext;?>" method="post">
+						<span>
+							<input type="hidden" id="id" name="id" value="<?=htmlspecialchars($_GET["id"]);?>">
+							<input type="submit" value="Bearbeiten">
+						</span>
+					</form>
+				</td>
+			</tr>
+		</tbody>
+	</table>
+	</form>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/sourcecodes/userlist.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/userlist.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/userlist.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,84 @@
+<?php
+	$title = "Nutzer";
+
+	require_once("include/header.php");
+?>
+<div id="cfront" class="content">
+	<table id="userlist">
+		<thead>
+			<tr>
+				<th scope="col">Login</th>
+				<th scope="col">Vorname</th>
+				<th scope="col">Nachname</th>
+				<th scope="col">E-Mail</th>
+				<th scope="col">Aktionen</th>
+			</tr>
+		</thead>
+		<tbody>
+			<?php
+				require_once("include/mitglied.php");
+
+				// Lese alle Mitglieder aus (wenn Administrator)
+				// oder eigene Daten (wenn Mitglied)
+				$members = Mitglied::GetAll();
+				foreach ($members as $cur)
+				{
+			?>
+			<tr>
+				<td><a href="user.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr); ?>"><?=htmlspecialchars($cur->Login); ?></a></td>
+				<td><?=htmlspecialchars($cur->Vorname); ?></td>
+				<td><?=htmlspecialchars($cur->Nachname); ?></td>
+				<td><?=htmlspecialchars($cur->Email); ?></td>
+				<td>
+					<?php
+						// Sind Mitgliedsrechte vorhanden, gebe Bearbeitenknopf bei eigenem Eintrag aus
+						// bei Administratoren immer
+						if ($login->IsAdministrator() === true || $login->Nr == $cur->Nr)
+						{
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?id=".htmlspecialchars($cur->Nr)."\">";
+							echo "<input type=\"submit\" value=\"Bearbeiten\">";
+							echo "</form>";
+						}
+						
+						// Sind Administratorrechte vorhanden, gebe L?schknopf aus
+						if ($login->IsAdministrator() === true)
+						{
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?delete=&id=".htmlspecialchars($cur->Nr)."\">";
+							echo "<input type=\"submit\" value=\"L?schen\">";
+							echo "</form>";
+						}
+					?>
+				</td>
+			</tr>
+			<?php
+				}
+			?>
+		</tbody>
+	</table>
+
+	<?php
+		// Sind Administratorrechte vorhanden, gebe Hinzuf?ge aus
+		if ($login->IsAdministrator() === true)
+		{
+	?>
+		<hr>
+		<form action="usermod.php">
+			<div>
+				<input type="submit" value="Nutzer hinzuf&uuml;gen">
+			</div>
+		</form>
+	<?php
+		}
+		elseif ($login->IsMember() === true)
+		{
+			echo "<p id=\"warning\">Sie sind nicht berechtigt alle Nutzerinformationen einzusehen</p>";
+		}
+		else
+		{
+			echo "<p id=\"warning\">Sie sind nicht berechtigt Nutzerinformationen einzusehen</p>";
+		}
+	?>
+
+</div>
+<?php	require_once("include/footer.php"); ?>
+

Added: trunk/docs/beleg3/sourcecodes/usermod.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/usermod.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/sourcecodes/usermod.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,375 @@
+<?php
+	// W?hle Seitentitel nach ausgew?hlter Aktion
+	if (isset($_GET["delete"]) === true)
+	{
+		$title = "Nutzer l?schen";
+	}
+	elseif (isset($_GET["id"]) === true || isset($_POST["id"]) === true)
+	{
+		$title = "Nutzer ?ndern";
+	}
+	else
+	{
+		$title = "Nutzer hinzuf?gen";
+	}
+
+	require_once("include/header.php");
+
+	// Abbruch wenn keine Mitgliedsrechte vorhanden
+	// oder gel?scht und hinzugef?gt werden soll und keine Administratorrechte vorliegen
+	if ($login->IsMember() === false
+		|| ($login->IsAdministrator() === false
+			&& (isset($_GET["delete"]) === true || isset($_GET["insert"]) === true)
+		))
+	{
+		echo "<div id=\"error\">Sie sind f?r diese Aktion nicht berechtigt</div>";
+		require_once("include/footer.php");
+		die();
+	}
+	elseif ($login->IsAdministrator() === false)
+	{
+		// Wenn keine Administratorrechte vorhanden sind
+		// d?rfen nur die eigenen Daten ge?ndert werden
+		$_GET["id"] = $login->Nr;
+		$_POST["id"] = $login->Nr;
+	}
+?>
+<div id="cfront" class="content">
+<?php
+	$error_occurred = false; // Fehler beim Verarbeiten aufgetreten?
+	$error_benutzername = false;
+	$error_vorname = false;
+	$error_nachname = false;
+	$error_email = false;
+	$error_password = false;
+	$error_password_missing = false;
+	$error_password_different = false;
+
+	// ?berpr?fe wichtige Parameter bei Insert und Update auf Vorhandensein
+	if (isset($_GET["insert"]) === true || isset($_GET["update"]) === true)
+	{
+		if (empty($_POST["benutzername"]) === true)
+		{
+			$error_benutzername = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["vorname"]) === true)
+		{
+			$error_vorname = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["nachname"]) === true)
+		{
+			$error_nachname = true;
+			$error_occurred = true;
+		}
+		
+		if (empty($_POST["email"]) === true)
+		{
+			$error_email = true;
+			$error_occurred = true;
+		}
+
+		// Teste ob Passwort beim hinzuf?gen vergessen wurde
+		if (empty($_POST["password"]) === true && isset($_GET["insert"]) === true)
+		{
+			$error_password = true;
+			$error_password_missing = true;
+			$error_occurred = true;
+		}
+
+		if (empty($_POST["password"]) === false || empty($_POST["password_check"]) === false)
+		{
+			// Teste ob Passw?rter unterschiedlich sind
+			if ($_POST["password"] != $_POST["password_check"])
+			{
+				$error_password = true;
+				$error_password_different = true;
+				$error_occurred = true;
+			}
+		}
+	}
+
+	// Gebe Fehler bei Parameter?berpr?fung aus
+	if ($error_occurred == true)
+	{
+		echo "<div id=\"error_list\">Es scheinen Fehler bei der Verarbeitung aufgetreten zu sein:<ul>";
+		
+		if ($error_benutzername === true)
+		{
+			echo "<li>Sie m?ssen ein Login angeben</li>";
+		}
+		
+		if ($error_vorname === true)
+		{
+			echo "<li>Sie m?ssen einen Vornamen angeben</li>";
+		}
+		
+		if ($error_nachname === true)
+		{
+			echo "<li>Sie m?ssen ein Nachnamen angeben</li>";
+		}
+		
+		if ($error_email === true)
+		{
+			echo "<li>E-Mail scheint nicht korrekt zu sein</li>";
+		}
+		
+		if ($error_password_missing === true)
+		{
+			echo "<li>Sie m?ssen ein Passwort angeben</li>";
+		}
+		elseif ($error_password_different === true)
+		{
+			echo "<li>Passw?rter stimmen nicht ?berein</li>";
+		}
+
+		echo "</ul></div>";
+	}
+
+
+	// Gebe Formular aus, wenn keine Schreibaktionen ausgef?hrt werden
+	if ((isset($_GET["delete"]) === false && isset($_GET["insert"]) === false && isset($_GET["update"]) === false)
+		|| $error_occurred === true)
+	{
+		// Lese id aus, wenn vorhanden
+		if (isset($_POST["id"]) === true)
+		{
+			$id = $_POST["id"];
+		}
+		elseif (isset($_GET["id"]) === true)
+		{
+			$id = $_GET["id"];
+		}
+		else
+		{
+			unset($id);
+		}
+
+		require_once("include/form_helper.php");
+		// Lese Mitglied aus, wenn id bekannt ist und vorher kein Fehler aufgetreten ist
+		if ($error_occurred === false && (isset($_GET["id"]) === true || isset($_POST["id"]) === true))
+		{
+			require_once("include/mitglied.php");
+			$mitglied = new Mitglied($id);
+			$benutzername = $mitglied->Login;
+
+			if (isset($mitglied->Rechte) === true)
+			{
+				switch ($mitglied->Rechte)
+				{
+				case 2:
+					$rechte = "Administrator";
+					break;
+				default:
+				case 1:
+					$rechte = "Benutzer";
+					break;
+				}
+			}
+			else
+			{
+				$rechte = "Benutzer";
+			}
+
+			$vorname = $mitglied->Vorname;
+			$nachname = $mitglied->Nachname;
+			$email = $mitglied->Email;
+		}
+		else
+		{
+			// Sollte vorher Fehler aufgetreten sein, lese Parameter aus.
+			// Sollten vorher keine Fehler aufgetreten sein (keine
+			// id bekannt), setze Default Wert
+
+			// Setze Login
+			if (isset($_POST["benutzername"]) === true)
+			{
+				$benutzername = stripslashes($_POST["benutzername"]);
+			}
+			else
+			{
+				$benutzername = "";
+			}
+
+			// Setze Rechte
+			if (isset($_POST["rechte"]) === true)
+			{
+				$rechte = stripslashes($_POST["rechte"]);
+			}
+			else
+			{
+				$rechte = "Benutzer";
+			}
+
+			// Setze Vorname
+			if (isset($_POST["vorname"]) === true)
+			{
+				$vorname = stripslashes($_POST["vorname"]);
+			}
+			else
+			{
+				$vorname = "";
+			}
+
+			// Setze Nachname
+			if (isset($_POST["nachname"]) === true)
+			{
+				$nachname = stripslashes($_POST["nachname"]);
+			}
+			else
+			{
+				$nachname = "";
+			}
+
+			// Setze Email
+			if (isset($_POST["email"]) === true)
+			{
+				$email = stripslashes($_POST["email"]);
+			}
+			else
+			{
+				$email = "";
+			}
+
+			// ?bernehme nie das Passwort
+			$passwort = "";
+		}
+
+	if (empty($id) === true)
+	{
+		// Gebe Hinzuf?gen-Formular aus
+			echo "<form action=\"usermod.".$ext."?insert\" id=\"useraddform\" method=\"post\">";
+	}
+	else
+	{
+		// Gebe Update-Formular aus
+		echo "<form action=\"usermod.".$ext."?update\" id=\"userupdateform\" method=\"post\">";
+		echo form_input("hidden", "id", $id);
+	}
+
+	// Gebe Formular mit vorher bestimmten Werten aus
+?>
+	<table id="bookdetails">
+		<tbody>
+			<tr>
+				<th scope="row">Login:</th>	
+				<td><?=form_input("text", "benutzername", $benutzername, $error_benutzername);?></td>
+			</tr>
+			<tr>
+				<th scope="row">Vorname:</th>	
+				<td><?=form_input("text", "vorname", $vorname, $error_vorname);?></td>
+			</tr>
+			<tr>
+				<th scope="row">Nachname:</th>	
+				<td><?=form_input("text", "nachname", $nachname, $error_nachname);?></td>
+			</tr>
+			<tr>
+				<th scope="row">E-Mail:</th>	
+				<td><?=form_input("text", "email", $email, $error_email);?></td>
+			</tr>
+			<tr>
+				<th scope="row" name="rechte" id="rechte">Rechte:</th>	
+				<td><?=form_select(array("Administrator", "Benutzer"),
+					"rechte", $rechte);?>
+				</td>
+			</tr>
+
+			<tr>
+				<th scope="row">Passwort:</th>	
+				<td><?=form_input("password", "password", "", $error_password);?></td>
+			</tr>
+			<tr>
+				<th scope="row">Passwort (wiederholen):</th>	
+				<td><?=form_input("password", "password_check", "", $error_password);?></td>
+			</tr>
+
+			<tr>
+				<th scope="row">Aktionen:</th>	
+				<td>
+				<input type="submit" value="&Uuml;bernehmen">
+				</td>
+			</tr>
+
+		</tbody>
+	</table>
+	</form>
+<?php
+	}
+	else
+	{
+		// F?hre Schreibaktionen aus
+		
+		require_once("include/mitglied.php");
+		
+		// Suche gew?hlte Aktion
+		if (isset($_GET["delete"]) === true)
+		{
+			// L?schen wenn akzeptiert wurde
+			if (isset($_POST["accept"]) === true)
+			{
+				// Fehlerhafte Daten zum L?schen ?bertragen?
+				if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+				{
+					// Wenn ja, gebe Fehler aus
+					echo "<p id=\"error\">Nutzer konnte nicht gel?scht werden, da es ein Fehler bei der ?bertragung der Informationen des Nutzers gab</p>";
+				}
+				else
+				{
+					// Wenn nicht, l?sche Mitglied und gebe Erfolgsmeldung aus
+					Mitglied::Delete($_POST["id"]);
+					echo "<p style=\"text-align: center\">Nutzer wurde entfernt</p>";
+				}
+			}
+			else
+			{
+				// Frage ob Mitglied gel?scht werden soll
+				require_once("include/form_helper.php");
+				echo "<div id=\"warning\" style=\"margin-top: 2em\">";
+				echo "Wollen sie den Nutzer wirklich entfernen?";
+				echo "<form action=\"usermod.".$ext."?delete\" id=\"userupdateform\" method=\"post\">";
+				echo form_input("hidden", "id", $_GET["id"]);
+				echo form_input("hidden", "accept", "true");
+				echo "<input type=\"submit\" value=\"Best?tigen\">";
+				echo "</form></div>";
+			}
+		}
+		elseif  (isset($_GET["insert"]) === true)
+		{
+			// Versuche Benutzer anzulegen
+			if (Mitglied::Insert($_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
+			{
+				// Wenn ok, gebe Erfolgsmeldung aus
+				echo "<p style=\"text-align: center\">Nutzer wurde angelegt</p>";
+			}
+			else
+			{
+				// Wenn nicht, gebe Fehler aus
+				echo "<p id=\"warning\">Nutzer konnte nicht angelegt werden. Ist Login vielleicht schon vergeben?</p>";
+			}
+		}
+		elseif (isset($_GET["update"]) === true)
+		{
+			// Fehlerhafte Daten zum ?ndern ?bertragen?
+			if (empty($_POST["id"]) === true || is_numeric($_POST["id"]) === false)
+			{
+				// Wenn ja, gebe Fehler aus
+				echo "<p id=\"error\">Nutzer konnte nicht ge?ndert werden, da es ein Fehler bei der ?bertragung der Informationen des Nutzers gab</p>";
+			}
+			elseif (Mitglied::Update($_POST["id"], $_POST["benutzername"], $_POST["password"], $_POST["rechte"], $_POST["vorname"], $_POST["nachname"], $_POST["email"]) === true)
+			{
+				// Wenn ok, gebe Erfolgsmeldung aus
+				echo "<p style=\"text-align: center\">Nutzer wurde ge?ndert</p>";
+			}
+			else
+			{
+				// Wenn nicht, gebe Fehler aus
+				echo "<p id=\"warning\">Nutzer konnte nicht ge?ndert werden. Ist Login vielleicht schon vergeben?</p>";
+			}
+		}
+	}
+?>
+</div>
+<?php	require_once("include/footer.php"); ?>

Added: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/docs/beleg3/tests.tex	2006-06-13 14:53:50 UTC (rev 165)
@@ -0,0 +1,8 @@
+\section{Testplan}
+\subsection{Testf??lle}
+
+\subsection{Testmatrix}
+
+\section{Systemtest}
+
+\section{Abschlu??einsch??tzung}

Modified: trunk/include/config.php
===================================================================
--- trunk/include/config.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/include/config.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -3,11 +3,11 @@
 
 	// Datenbankeinstellungen
 	$db_config['dbms'] = "mysql";	// welche Datenbankklasse benutzen?
-	$db_config['user'] = "liman";
-	$db_config['pass'] = "drownamil";
-	$db_config['name'] = "liman";
-	$db_config['host'] = "db.berlios.de";
-	$db_config['prefix'] = "liman_";
+	$db_config['user'] = ""; // Nutzername des Datenbanknutzers
+	$db_config['pass'] = ""; // Passwort f?r Datenbanknutzer
+	$db_config['name'] = ""; // Name der Datenbank
+	$db_config['host'] = ""; // Adresse des Datenbankservers
+	$db_config['prefix'] = "liman_"; // Prefix der Tabellennamen
 
 	$ext = "php";	// Endung der von den Usern abrufbaren Dateien
 	$gz_enable = true; // aktiviere GZIP-Kompression der HTML-Dateien

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/index.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,6 +1,5 @@
 <?php
 	$title = "Letzte Literatur";
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 ?>

Modified: trunk/install.php
===================================================================
--- trunk/install.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/install.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -27,6 +27,7 @@
 	<body id="liman_install">
 		<h1>LiMan Installation</h1>
 <?php
+	// Lese ??bergebene Variablen aus bzw. setzte Standardwerte
 	if (empty($_POST["dbms"]) === false)
 	{
 		$db_config['dbms'] = "mysql";
@@ -81,15 +82,6 @@
 		$db_config['host'] = "";
 	}
 
-	if (empty($_POST["name"]) === false)
-	{
-		$db_config['name'] = $_POST["name"];
-	}
-	else
-	{
-		$db_config['name'] = "liman";
-	}
-
 	if (empty($_POST["prefix"]) === false)
 	{
 		$db_config['prefix'] = $_POST["prefix"];
@@ -133,16 +125,20 @@
 	}
 
 	
+	// Soll Tabellen Datenbank erstellt werden?
 	if (isset($_GET["install"]) === true)
 	{
+		// Wenn ja, verbinde mit Datenbank
 		require_once("include/sqldb.php");
-	
+
+		// Erstelle SQL-Befehle zum L??schen alter Tabellen
 		$sqlDrop["Autoren"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Autoren`";
 		$sqlDrop["Bibliothek"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Bibliothek`";
 		$sqlDrop["Kommentare"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Kommentare`";
 		$sqlDrop["Literatur_Autor"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Literatur_Autor`";
 		$sqlDrop["Mitglieder"] = "DROP TABLE IF EXISTS `".$db_config['prefix']."Mitglieder`";
-	
+
+		// Erstelle SQL-Befehle zum Erstellen neuer Tabellen
 		$sqlCreate["Autoren"] = "CREATE TABLE `".$db_config['prefix']."Autoren` (
 			`Autor_Nr` int(11) NOT NULL auto_increment,
 			`Autorname` varchar(40) NOT NULL,
@@ -150,7 +146,6 @@
 			UNIQUE KEY `Autorname` (`Autorname`),
 			FULLTEXT KEY `Autorname_2` (`Autorname`)
 			)";
-	
 		$sqlCreate["Bibliothek"] = "CREATE TABLE `".$db_config['prefix']."Bibliothek` (
 			`Literatur_Nr` int(11) NOT NULL auto_increment,
 			`Art` enum('Buch','Artikel','Brosch??re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver??ffentlicht','Sonstiges') NOT NULL,
@@ -164,7 +159,6 @@
 			PRIMARY KEY  (`Literatur_Nr`),
 			FULLTEXT KEY `Titel` (`Titel`,`Verlag`,`ISBN`,`Beschreibung`,`Ort`,`Stichworte`)
 			)";
-	
 		$sqlCreate["Kommentare"] = "CREATE TABLE `".$db_config['prefix']."Kommentare` (
 			`Kommentar_Nr` int(11) NOT NULL auto_increment,
 			`Kommentartext` text NOT NULL,
@@ -174,13 +168,11 @@
 			KEY `Literatur_Nr` (`Literatur_Nr`,`Mitglieds_Nr`),
 			FULLTEXT KEY `Kommentartext` (`Kommentartext`)
 			)";
-	
 		$sqlCreate["Literatur_Autor"] = "CREATE TABLE `".$db_config['prefix']."Literatur_Autor` (
 			`Autor_Nr` int(11) NOT NULL,
 			`Literatur_Nr` int(11) NOT NULL,
 			KEY `Autor_Nr` (`Autor_Nr`,`Literatur_Nr`)
 			)";
-	
 		$sqlCreate["Mitglieder"] = "CREATE TABLE `".$db_config['prefix']."Mitglieder` (
 			`Mitglieds_Nr` int(11) NOT NULL auto_increment,
 			`Name` varchar(20) NOT NULL,
@@ -193,6 +185,7 @@
 			UNIQUE KEY `Login` (`Login`)
 			)";
 	
+		// Sollen Tabellen mit Standardzeichenkodierung UTF-8 erstellt werden?
 		if ($enableUTF8 === true)
 		{
 			$sqlCreate["Autoren"] .= " DEFAULT CHARSET=utf8";
@@ -202,37 +195,47 @@
 			$sqlCreate["Mitglieder"] .= " DEFAULT CHARSET=utf8";
 		}
 	
+		// Erstelle SQL-Befehle zum Anlegen des ersten Nuters an
 		$sqlInsertMitglied = "INSERT INTO ".$db_config['prefix']."Mitglieder
 				VALUES (NULL, 'Istrator', 'Admin', 'foo at bar.de', '$loginname', '$passworthash', 'Administrator')";
 	
+		// L??sche alte Tabellen in Datenbank
 		foreach ($sqlDrop as $drop)
 		{
 			if ($sqldb->Query($drop) === false)
 			{
-				echo "<div class=\"error\">Es trat ein Fehler bei der Verarbeitung auf:<pre>";
-				echo htmlspecialchars($drop);
+				echo "<div class=\"error\">Es trat ein Fehler bei dem L??schen alter Tabellen auf:<pre>";
+				$error = $sqldb->GetError();
+				echo htmlspecialchars($error[0])."<br>";
+				echo "SQL-Befehl: <br>".htmlspecialchars($drop);
 				echo "</pre></div>";
 				echo "</body></html>";
 				die();
 			}
 		}
 	
+		// Erstelle neue Tabellen
 		foreach ($sqlCreate as $create)
 		{
 			if ($sqldb->Query($create) === false)
 			{
-				echo "<div class=\"error\">Es trat ein Fehler bei der Verarbeitung auf:<pre>";
-				echo htmlspecialchars($create);
+				echo "<div class=\"error\">Es trat ein Fehler bei dem Erstellen neuer Tabellen auf:<pre>";
+				$error = $sqldb->GetError();
+				echo htmlspecialchars($error[0])."<br>";
+				echo "SQL-Befehl: <br>".htmlspecialchars($create);
 				echo "</pre></div>";
 				echo "</body></html>";
 				die();
 			}
 		}
 	
+		// Einf??gen erstes Mitglied (Administrator)
 		if ($sqldb->Query($sqlInsertMitglied) === false)
 		{
-			echo "<div class=\"error\">Es trat ein Fehler bei der Verarbeitung auf:<pre>";
-			echo htmlspecialchars($sqlInsertMitglied);
+			echo "<div class=\"error\">Es trat ein Fehler bei dem Einf??gen des ersten Mitglieds auf:<pre>";
+			$error = $sqldb->GetError();
+			echo htmlspecialchars($error[0])."<br>";
+			echo "SQL-Befehl: <br>".htmlspecialchars($sqlInsertMitglied);
 			echo "</pre></div>";
 			echo "</body></html>";
 			die();
@@ -240,7 +243,7 @@
 
 		?>
 			<p>Datenbank wurde erfolgreich eingerichtet.</p>
-			<p>Erstellen sie in ihrem Installationsordner eine Datei mit dem Namen "config.php" und folgendem Inhalt:
+			<p>Erstellen sie in ihrem Installationsordner unter "include" eine Datei mit dem Namen "config.php" und folgendem Inhalt:
 			<pre>
 &lt;?php
 	// Datenbankeinstellungen

Modified: trunk/lit.php
===================================================================
--- trunk/lit.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/lit.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,6 +1,5 @@
 <?php
 	$title = "Literaturdetails";
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 	require_once("include/literatur.php");

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/litmod.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -12,7 +12,6 @@
 	{
 		$title = "Literatur hinzuf??gen";
 	}
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 

Modified: trunk/login.php
===================================================================
--- trunk/login.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/login.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,7 +1,5 @@
 <?php
 	$title = "Login";
-	//$extracss = "home.css";
-
 	
 	require_once("include/global.php");
 

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/search.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,6 +1,4 @@
 <?php
-	//$extracss = "home.css";
-
 	// W??hle Seitentitel nach ausgew??hlter Aktion
 	if (isset($_GET["suchbegriff"]) === true)
 	{

Modified: trunk/searchmore.php
===================================================================
--- trunk/searchmore.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/searchmore.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,6 +1,5 @@
 <?php
 	$title = "Erweiterte Suche";
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 ?>

Modified: trunk/user.php
===================================================================
--- trunk/user.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/user.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,6 +1,5 @@
 <?php
 	$title = "Nutzerdetails";
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 	require_once("include/mitglied.php");

Modified: trunk/userlist.php
===================================================================
--- trunk/userlist.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/userlist.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -1,6 +1,5 @@
 <?php
 	$title = "Nutzer";
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 ?>

Modified: trunk/usermod.php
===================================================================
--- trunk/usermod.php	2006-06-13 14:05:01 UTC (rev 164)
+++ trunk/usermod.php	2006-06-13 14:53:50 UTC (rev 165)
@@ -12,7 +12,6 @@
 	{
 		$title = "Nutzer hinzuf??gen";
 	}
-	//$extracss = "home.css";
 
 	require_once("include/header.php");
 



From lazhur at berlios.de  Tue Jun 13 21:00:14 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Tue, 13 Jun 2006 21:00:14 +0200
Subject: [Liman-svn] r166 - in trunk: docs/beleg3/sourcecodes/include include
Message-ID: <200606131900.k5DJ0E3J027128@sheep.berlios.de>

Author: lazhur
Date: 2006-06-13 21:00:04 +0200 (Tue, 13 Jun 2006)
New Revision: 166

Modified:
   trunk/docs/beleg3/sourcecodes/include/config.php
   trunk/include/config.php
Log:
vertauschte config.php zur?\195?\188ckgetauscht


Modified: trunk/docs/beleg3/sourcecodes/include/config.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/config.php	2006-06-13 14:53:50 UTC (rev 165)
+++ trunk/docs/beleg3/sourcecodes/include/config.php	2006-06-13 19:00:04 UTC (rev 166)
@@ -1,10 +1,12 @@
 <?php
+	error_reporting(E_ALL);
+
 	// Datenbankeinstellungen
 	$db_config['dbms'] = "mysql";	// welche Datenbankklasse benutzen?
-	$db_config['user'] = "liman"; // Nutzername des Datenbanknutzers
-	$db_config['pass'] = "drownamil"; // Passwort f?r Datenbanknutzer
-	$db_config['name'] = "liman"; // Name der Datenbank
-	$db_config['host'] = "db.berlios.de"; // Adresse des Datenbankservers
+	$db_config['user'] = ""; // Nutzername des Datenbanknutzers
+	$db_config['pass'] = ""; // Passwort f?r Datenbanknutzer
+	$db_config['name'] = ""; // Name der Datenbank
+	$db_config['host'] = ""; // Adresse des Datenbankservers
 	$db_config['prefix'] = "liman_"; // Prefix der Tabellennamen
 
 	$ext = "php";	// Endung der von den Usern abrufbaren Dateien

Modified: trunk/include/config.php
===================================================================
--- trunk/include/config.php	2006-06-13 14:53:50 UTC (rev 165)
+++ trunk/include/config.php	2006-06-13 19:00:04 UTC (rev 166)
@@ -1,12 +1,10 @@
 <?php
-	error_reporting(E_ALL);
-
 	// Datenbankeinstellungen
 	$db_config['dbms'] = "mysql";	// welche Datenbankklasse benutzen?
-	$db_config['user'] = ""; // Nutzername des Datenbanknutzers
-	$db_config['pass'] = ""; // Passwort f?r Datenbanknutzer
-	$db_config['name'] = ""; // Name der Datenbank
-	$db_config['host'] = ""; // Adresse des Datenbankservers
+	$db_config['user'] = "liman"; // Nutzername des Datenbanknutzers
+	$db_config['pass'] = "drownamil"; // Passwort f??r Datenbanknutzer
+	$db_config['name'] = "liman"; // Name der Datenbank
+	$db_config['host'] = "db.berlios.de"; // Adresse des Datenbankservers
 	$db_config['prefix'] = "liman_"; // Prefix der Tabellennamen
 
 	$ext = "php";	// Endung der von den Usern abrufbaren Dateien



From lazhur at berlios.de  Tue Jun 13 22:24:27 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Tue, 13 Jun 2006 22:24:27 +0200
Subject: [Liman-svn] r167 - in trunk: . docs/beleg3/sourcecodes docs/beleg3/sourcecodes/include include
Message-ID: <200606132024.k5DKOREm025720@sheep.berlios.de>

Author: lazhur
Date: 2006-06-13 22:24:26 +0200 (Tue, 13 Jun 2006)
New Revision: 167

Modified:
   trunk/docs/beleg3/sourcecodes/include/autor.php
   trunk/docs/beleg3/sourcecodes/include/header.php
   trunk/docs/beleg3/sourcecodes/include/kommentar.php
   trunk/docs/beleg3/sourcecodes/include/literatur.php
   trunk/docs/beleg3/sourcecodes/include/suche.php
   trunk/docs/beleg3/sourcecodes/index.php
   trunk/docs/beleg3/sourcecodes/install.php
   trunk/docs/beleg3/sourcecodes/lit.php
   trunk/docs/beleg3/sourcecodes/litmod.php
   trunk/docs/beleg3/sourcecodes/search.php
   trunk/docs/beleg3/sourcecodes/user.php
   trunk/docs/beleg3/sourcecodes/userlist.php
   trunk/include/autor.php
   trunk/include/header.php
   trunk/include/kommentar.php
   trunk/include/literatur.php
   trunk/include/suche.php
   trunk/index.php
   trunk/install.php
   trunk/lit.php
   trunk/litmod.php
   trunk/search.php
   trunk/user.php
   trunk/userlist.php
Log:
- Verbessere Quellcodeausgabe in dritten Teilbeleg


Modified: trunk/docs/beleg3/sourcecodes/include/autor.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/autor.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/include/autor.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -60,8 +60,8 @@
 					// Workaround f?r MySQL < 4
 					// Finde Autoren ohne Verbindung in Literatur_Autor zur Literatur
 					$sql = "SELECT autoren.Autor_Nr AS Nr
-							FROM ".$db_config['prefix']."Autoren AS autoren
-							LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
+							FROM ". $db_config['prefix'] ."Autoren AS autoren
+							LEFT JOIN ". $db_config['prefix'] ."Literatur_Autor AS connect
 							ON autoren.Autor_Nr = connect.Autor_Nr
 							WHERE connect.Autor_Nr is NULL";
 					$sqldb->Query($sql);

Modified: trunk/docs/beleg3/sourcecodes/include/header.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/header.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/include/header.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -72,11 +72,13 @@
 						{
 						?>
 							<form action="login.<?=$ext;?>" id="loginform" method="post">
-								<div>
-								<label for="loginname">Login:</label><input id="loginname" name="loginname" value="" type="text">
-								<label for="passwort">Passwort:</label><input id="passwort" name="passwort" type="password">
-								<input type="submit" value="Login">
-								</div>
+							<div>
+							<label for="loginname">Login:</label>
+							<input id="loginname" name="loginname" value="" type="text">
+							<label for="passwort">Passwort:</label>
+							<input id="passwort" name="passwort" type="password">
+							<input type="submit" value="Login">
+							</div>
 							</form>
 						<?php
 						}
@@ -84,8 +86,8 @@
 						{
 						?>
 							<form action="login.<?=$ext;?>?logout" id="loginform" method="post">
-								<div><input type="submit" value="Logout">
-								</div>
+							<div><input type="submit" value="Logout">
+							</div>
 							</form>
 						<?php
 						}

Modified: trunk/docs/beleg3/sourcecodes/include/kommentar.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/kommentar.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/include/kommentar.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -207,7 +207,7 @@
 						// Wenn ja, f?ge neuen Kommentar hinzu, wenn Text angegeben wurde
 						if (empty($text) === false)
 						{
-							$sql = "INSERT INTO ".$db_config['prefix']."Kommentare
+							$sql = "INSERT INTO ". $db_config['prefix']. "Kommentare
 								VALUES (NULL, '$text', '$literatur_nr', '$verfasser_nr')";
 							$sqldb->Query($sql);
 						}

Modified: trunk/docs/beleg3/sourcecodes/include/literatur.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/literatur.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/include/literatur.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -91,7 +91,7 @@
 			if (is_object($this->Art) === true)
 			{
 				// Lege Kopf des BibTeX-Eintrags an
-				$str = "@".$this->Art->GetBibtexText()."{".$this->Art->GetBibtexText().$this->Nr;
+				$str = "@".$this->Art->GetBibtexText()."{". $this->Art->GetBibtexText().$this->Nr;
 				
 				// Titel hinzuf?gen, wenn vorhanden
 				if (empty($this->Titel) === false)
@@ -201,7 +201,7 @@
 
 			// Finde alle BibTeX-Eintr?ge
 			// Funktioniert nicht bei Argumenten ?ber mehrere Zeilen
-			if (preg_match_all('/@([\w]+[\s]*)\{[\s]*([-\d\w]+)(([\s]*,[\s]*[\w]*[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*)+)\}/', $bibtex, $regexp_entries) !== false)
+			if (preg_match_all('/@([\w]+[\s]*)\{[\s]*([-\d\w]+)(([\s]*,[\s]*'. '[\w]*[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*)+)\}/', $bibtex, $regexp_entries) !== false)
 			{
 				$num_entries = sizeof($regexp_entries[0]);
 			}
@@ -243,7 +243,7 @@
 				$cur->id = trim($regexp_entries[2][$i]);
 
 				// Extrahiere "Optionen"
-				if (preg_match_all('/(([\w]*)[\s]*=[\s]*([\w]+|\{.*\}|".*")[\s]*(,|\}))+/', $regexp_entries[3][$i], $regexp_options) !== false)
+				if (preg_match_all('/(([\w]*)[\s]*=[\s]*([\w]+|\{.*\}|'. '".*")[\s]*(,|\}))+/', $regexp_entries[3][$i], $regexp_options) !== false)
 				{
 					// Lese die Optionen des aktuellen BibTeX-Eintrags einzeln
 					$num_options = sizeof($regexp_options[0]);
@@ -262,7 +262,7 @@
 						}
 
 						// Wei?e Daten der aktuellen Option zu
-						switch (strtolower(trim($regexp_options[2][$j])))
+						switch (strtolower( trim($regexp_options[2][$j])))
 						{
 						case "title":
 							$cur->titel = $argument;

Modified: trunk/docs/beleg3/sourcecodes/include/suche.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/suche.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/include/suche.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -102,7 +102,7 @@
 				// Finde Literatur mit Suchbegriff
 				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
 						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
-							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
+							INNER JOIN  ". $db_config['prefix'] ."Literatur_Autor AS connect
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr
@@ -167,7 +167,7 @@
 				// Finde Literatur mit Titel und Autor
 				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
 						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
-							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
+							INNER JOIN  ". $db_config['prefix'] ."Literatur_Autor AS connect
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr

Modified: trunk/docs/beleg3/sourcecodes/index.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/index.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/index.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -25,7 +25,7 @@
 				{
 				?>
 					<tr>
-					<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>">
+					<td><a href="lit.<?=$ext; ?>?id=<?=htmlspecialchars($cur->Nr); ?>">
 						<?=htmlspecialchars($cur->Titel);?></a>
 					</td>
 					<td><?=htmlspecialchars($cur->Autor);?></td>

Modified: trunk/docs/beleg3/sourcecodes/install.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/install.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/install.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -148,7 +148,7 @@
 			)";
 		$sqlCreate["Bibliothek"] = "CREATE TABLE `".$db_config['prefix']."Bibliothek` (
 			`Literatur_Nr` int(11) NOT NULL auto_increment,
-			`Art` enum('Buch','Artikel','Brosch?re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver?ffentlicht','Sonstiges') NOT NULL,
+			`Art` enum('Buch', 'Artikel', 'Brosch?re', 'Protokoll', 'Anleitung', 'Diplomarbeit', 'Dissertation', 'Techn. Bericht', 'Unver?ffentlicht', 'Sonstiges') NOT NULL,
 			`Titel` varchar(40) NOT NULL,
 			`Jahr` int(11) NOT NULL,
 			`Verlag` varchar(40) NOT NULL,

Modified: trunk/docs/beleg3/sourcecodes/lit.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/lit.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/lit.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -76,10 +76,10 @@
 			?>
 				<tr>
 					<th scope="row">Aktionen:</th>	
-					<td><form style="display:inline" action="litmod.<?=$ext;?>?id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+					<td><form style="display:inline" action="litmod.<?=$ext; ?>?id=<?=htmlspecialchars($_GET["id"]); ?>" method="post">
 							<span><input type="submit" value="Bearbeiten"></span>
 						</form>
-						<form style="display:inline" action="litmod.<?=$ext;?>?delete=&amp;id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+						<form style="display:inline" action="litmod.<?=$ext; ?>?delete=&amp;id=<?=htmlspecialchars($_GET["id"]); ?>" method="post">
 							<span><input type="submit" value="L&ouml;schen"></span>
 					</form></td>
 				</tr>
@@ -106,14 +106,14 @@
 					}
 			?>
 				<tr>
-					<th scope="row"><?=htmlspecialchars($cur->Verfasser_Name);?>:</th>	
-					<td class="kommentar"><?=htmlspecialchars($cur->Text);?></td>
+					<th scope="row"><?= htmlspecialchars($cur->Verfasser_Name); ?>:</th>	
+					<td class="kommentar"><?= htmlspecialchars($cur->Text); ?></td>
 					<td><?php
 						// Darf der User l?schen?
 						if ($login->Nr == $cur->Verfasser_Nr || $login->IsAdministrator() === true)
 						{
 							echo "<span style=\"font-size: xx-small\">";
-							echo "<a href=\"commentmod.php?delete&amp;id=".$cur->Nr."&amp;litid=".htmlspecialchars($_GET["id"])."\">(l?schen)</a></span>";
+							echo "<a href=\"commentmod.php?delete&amp;id=". $cur->Nr ."&amp;litid=". htmlspecialchars($_GET["id"]) ."\">(l?schen)</a></span>";
 						}
 					?></td>
 				</tr>
@@ -171,7 +171,7 @@
 					<tr>
 						<th scope="row"><label for="text">Kommentar ?ndern:</label></th>	
 						<td>
-							<textarea id="text" name="text" cols=40 rows=10><?=htmlspecialchars($owncomment->Text);?></textarea>
+							<textarea id="text" name="text" cols=40 rows=10><?= htmlspecialchars($owncomment->Text); ?></textarea>
 						</td>
 					</tr>
 					<tr>

Modified: trunk/docs/beleg3/sourcecodes/litmod.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/litmod.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/litmod.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -282,7 +282,7 @@
 				</tr>
 				<tr>
 					<th scope="row">Bemerkung:</th>	
-					<td><textarea cols="20" rows="10" name="beschreibung" id="beschreibung"><?=htmlspecialchars($beschreibung);?></textarea></td>
+					<td><textarea cols="20" rows="10" name="beschreibung" id="beschreibung"><?=htmlspecialchars($beschreibung); ?></textarea></td>
 				</tr>
 				<tr>
 					<th scope="row">Aktionen:</th>	
@@ -360,7 +360,7 @@
 					{
 				?>
 					<tr>
-						<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+						<td><a href="lit.<?=$ext; ?>?id=<?=htmlspecialchars($cur->Nr); ?>"><?=htmlspecialchars($cur->Titel); ?></a></td>
 						<td><?=htmlspecialchars($cur->Autor);?></td>
 						<td><?=htmlspecialchars($cur->Verlag);?></td>
 						<td><?=htmlspecialchars($cur->ISBN);?></td>

Modified: trunk/docs/beleg3/sourcecodes/search.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/search.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/search.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -56,7 +56,7 @@
 		{
 	?>
 		<tr>
-			<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+			<td><a href="lit.<?= $ext; ?>?id=<?= htmlspecialchars($cur->Nr); ?>"><?= htmlspecialchars($cur->Titel); ?></a></td>
 			<td><?=htmlspecialchars($cur->Autor);?></td>
 			<td><?=htmlspecialchars($cur->Verlag);?></td>
 			<td><?=htmlspecialchars($cur->ISBN);?></td>

Modified: trunk/docs/beleg3/sourcecodes/user.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/user.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/user.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -75,7 +75,7 @@
 				<td>
 					<form style="display:inline" action="usermod.<?=$ext;?>" method="post">
 						<span>
-							<input type="hidden" id="id" name="id" value="<?=htmlspecialchars($_GET["id"]);?>">
+							<input type="hidden" id="id" name="id" value="<?= htmlspecialchars($_GET["id"]); ?>">
 							<input type="submit" value="Bearbeiten">
 						</span>
 					</form>

Modified: trunk/docs/beleg3/sourcecodes/userlist.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/userlist.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/docs/beleg3/sourcecodes/userlist.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -35,7 +35,7 @@
 						// bei Administratoren immer
 						if ($login->IsAdministrator() === true || $login->Nr == $cur->Nr)
 						{
-							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?id=".htmlspecialchars($cur->Nr)."\">";
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?id=". htmlspecialchars($cur->Nr) ."\">";
 							echo "<input type=\"submit\" value=\"Bearbeiten\">";
 							echo "</form>";
 						}
@@ -43,7 +43,7 @@
 						// Sind Administratorrechte vorhanden, gebe L?schknopf aus
 						if ($login->IsAdministrator() === true)
 						{
-							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?delete=&id=".htmlspecialchars($cur->Nr)."\">";
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?delete=&id=". htmlspecialchars($cur->Nr) ."\">";
 							echo "<input type=\"submit\" value=\"L?schen\">";
 							echo "</form>";
 						}

Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/include/autor.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -60,8 +60,8 @@
 					// Workaround f??r MySQL < 4
 					// Finde Autoren ohne Verbindung in Literatur_Autor zur Literatur
 					$sql = "SELECT autoren.Autor_Nr AS Nr
-							FROM ".$db_config['prefix']."Autoren AS autoren
-							LEFT JOIN ".$db_config['prefix']."Literatur_Autor AS connect
+							FROM ". $db_config['prefix'] ."Autoren AS autoren
+							LEFT JOIN ". $db_config['prefix'] ."Literatur_Autor AS connect
 							ON autoren.Autor_Nr = connect.Autor_Nr
 							WHERE connect.Autor_Nr is NULL";
 					$sqldb->Query($sql);

Modified: trunk/include/header.php
===================================================================
--- trunk/include/header.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/include/header.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -72,11 +72,13 @@
 						{
 						?>
 							<form action="login.<?=$ext;?>" id="loginform" method="post">
-								<div>
-								<label for="loginname">Login:</label><input id="loginname" name="loginname" value="" type="text">
-								<label for="passwort">Passwort:</label><input id="passwort" name="passwort" type="password">
-								<input type="submit" value="Login">
-								</div>
+							<div>
+							<label for="loginname">Login:</label>
+							<input id="loginname" name="loginname" value="" type="text">
+							<label for="passwort">Passwort:</label>
+							<input id="passwort" name="passwort" type="password">
+							<input type="submit" value="Login">
+							</div>
 							</form>
 						<?php
 						}
@@ -84,8 +86,8 @@
 						{
 						?>
 							<form action="login.<?=$ext;?>?logout" id="loginform" method="post">
-								<div><input type="submit" value="Logout">
-								</div>
+							<div><input type="submit" value="Logout">
+							</div>
 							</form>
 						<?php
 						}

Modified: trunk/include/kommentar.php
===================================================================
--- trunk/include/kommentar.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/include/kommentar.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -207,7 +207,7 @@
 						// Wenn ja, f??ge neuen Kommentar hinzu, wenn Text angegeben wurde
 						if (empty($text) === false)
 						{
-							$sql = "INSERT INTO ".$db_config['prefix']."Kommentare
+							$sql = "INSERT INTO ". $db_config['prefix'] ."Kommentare
 								VALUES (NULL, '$text', '$literatur_nr', '$verfasser_nr')";
 							$sqldb->Query($sql);
 						}

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/include/literatur.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -91,7 +91,7 @@
 			if (is_object($this->Art) === true)
 			{
 				// Lege Kopf des BibTeX-Eintrags an
-				$str = "@".$this->Art->GetBibtexText()."{".$this->Art->GetBibtexText().$this->Nr;
+				$str = "@".$this->Art->GetBibtexText()."{". $this->Art->GetBibtexText().$this->Nr;
 				
 				// Titel hinzuf??gen, wenn vorhanden
 				if (empty($this->Titel) === false)

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/include/suche.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -102,7 +102,7 @@
 				// Finde Literatur mit Suchbegriff
 				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
 						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
-							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
+							INNER JOIN  ". $db_config['prefix'] ."Literatur_Autor AS connect
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr
@@ -167,7 +167,7 @@
 				// Finde Literatur mit Titel und Autor
 				$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
 						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
-							INNER JOIN  ".$db_config['prefix']."Literatur_Autor AS connect
+							INNER JOIN  ". $db_config['prefix'] ."Literatur_Autor AS connect
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr

Modified: trunk/index.php
===================================================================
--- trunk/index.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/index.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -25,7 +25,7 @@
 				{
 				?>
 					<tr>
-					<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>">
+					<td><a href="lit.<?=$ext; ?>?id=<?=htmlspecialchars($cur->Nr); ?>">
 						<?=htmlspecialchars($cur->Titel);?></a>
 					</td>
 					<td><?=htmlspecialchars($cur->Autor);?></td>

Modified: trunk/install.php
===================================================================
--- trunk/install.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/install.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -148,7 +148,7 @@
 			)";
 		$sqlCreate["Bibliothek"] = "CREATE TABLE `".$db_config['prefix']."Bibliothek` (
 			`Literatur_Nr` int(11) NOT NULL auto_increment,
-			`Art` enum('Buch','Artikel','Brosch??re','Protokoll','Anleitung','Diplomarbeit','Dissertation','Techn. Bericht','Unver??ffentlicht','Sonstiges') NOT NULL,
+			`Art` enum('Buch', 'Artikel', 'Brosch??re', 'Protokoll', 'Anleitung', 'Diplomarbeit', 'Dissertation', 'Techn. Bericht', 'Unver??ffentlicht', 'Sonstiges') NOT NULL,
 			`Titel` varchar(40) NOT NULL,
 			`Jahr` int(11) NOT NULL,
 			`Verlag` varchar(40) NOT NULL,

Modified: trunk/lit.php
===================================================================
--- trunk/lit.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/lit.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -76,10 +76,10 @@
 			?>
 				<tr>
 					<th scope="row">Aktionen:</th>	
-					<td><form style="display:inline" action="litmod.<?=$ext;?>?id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+					<td><form style="display:inline" action="litmod.<?=$ext; ?>?id=<?=htmlspecialchars($_GET["id"]); ?>" method="post">
 							<span><input type="submit" value="Bearbeiten"></span>
 						</form>
-						<form style="display:inline" action="litmod.<?=$ext;?>?delete=&amp;id=<?=htmlspecialchars($_GET["id"]);?>" method="post">
+						<form style="display:inline" action="litmod.<?=$ext; ?>?delete=&amp;id=<?=htmlspecialchars($_GET["id"]); ?>" method="post">
 							<span><input type="submit" value="L&ouml;schen"></span>
 					</form></td>
 				</tr>
@@ -106,14 +106,14 @@
 					}
 			?>
 				<tr>
-					<th scope="row"><?=htmlspecialchars($cur->Verfasser_Name);?>:</th>	
-					<td class="kommentar"><?=htmlspecialchars($cur->Text);?></td>
+					<th scope="row"><?= htmlspecialchars($cur->Verfasser_Name); ?>:</th>	
+					<td class="kommentar"><?= htmlspecialchars($cur->Text); ?></td>
 					<td><?php
 						// Darf der User l??schen?
 						if ($login->Nr == $cur->Verfasser_Nr || $login->IsAdministrator() === true)
 						{
 							echo "<span style=\"font-size: xx-small\">";
-							echo "<a href=\"commentmod.php?delete&amp;id=".$cur->Nr."&amp;litid=".htmlspecialchars($_GET["id"])."\">(l??schen)</a></span>";
+							echo "<a href=\"commentmod.php?delete&amp;id=". $cur->Nr ."&amp;litid=". htmlspecialchars($_GET["id"]) ."\">(l??schen)</a></span>";
 						}
 					?></td>
 				</tr>
@@ -171,7 +171,7 @@
 					<tr>
 						<th scope="row"><label for="text">Kommentar ??ndern:</label></th>	
 						<td>
-							<textarea id="text" name="text" cols=40 rows=10><?=htmlspecialchars($owncomment->Text);?></textarea>
+							<textarea id="text" name="text" cols=40 rows=10><?= htmlspecialchars($owncomment->Text); ?></textarea>
 						</td>
 					</tr>
 					<tr>

Modified: trunk/litmod.php
===================================================================
--- trunk/litmod.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/litmod.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -282,7 +282,7 @@
 				</tr>
 				<tr>
 					<th scope="row">Bemerkung:</th>	
-					<td><textarea cols="20" rows="10" name="beschreibung" id="beschreibung"><?=htmlspecialchars($beschreibung);?></textarea></td>
+					<td><textarea cols="20" rows="10" name="beschreibung" id="beschreibung"><?=htmlspecialchars($beschreibung); ?></textarea></td>
 				</tr>
 				<tr>
 					<th scope="row">Aktionen:</th>	
@@ -360,7 +360,7 @@
 					{
 				?>
 					<tr>
-						<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+						<td><a href="lit.<?=$ext; ?>?id=<?=htmlspecialchars($cur->Nr); ?>"><?=htmlspecialchars($cur->Titel); ?></a></td>
 						<td><?=htmlspecialchars($cur->Autor);?></td>
 						<td><?=htmlspecialchars($cur->Verlag);?></td>
 						<td><?=htmlspecialchars($cur->ISBN);?></td>

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/search.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -56,7 +56,7 @@
 		{
 	?>
 		<tr>
-			<td><a href="lit.<?=$ext;?>?id=<?=htmlspecialchars($cur->Nr);?>"><?=htmlspecialchars($cur->Titel);?></a></td>
+			<td><a href="lit.<?=$ext;?>?id=<?= htmlspecialchars($cur->Nr); ?>"><?=h tmlspecialchars($cur->Titel); ?></a></td>
 			<td><?=htmlspecialchars($cur->Autor);?></td>
 			<td><?=htmlspecialchars($cur->Verlag);?></td>
 			<td><?=htmlspecialchars($cur->ISBN);?></td>

Modified: trunk/user.php
===================================================================
--- trunk/user.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/user.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -75,7 +75,7 @@
 				<td>
 					<form style="display:inline" action="usermod.<?=$ext;?>" method="post">
 						<span>
-							<input type="hidden" id="id" name="id" value="<?=htmlspecialchars($_GET["id"]);?>">
+							<input type="hidden" id="id" name="id" value="<?= htmlspecialchars($_GET["id"]); ?>">
 							<input type="submit" value="Bearbeiten">
 						</span>
 					</form>

Modified: trunk/userlist.php
===================================================================
--- trunk/userlist.php	2006-06-13 19:00:04 UTC (rev 166)
+++ trunk/userlist.php	2006-06-13 20:24:26 UTC (rev 167)
@@ -35,7 +35,7 @@
 						// bei Administratoren immer
 						if ($login->IsAdministrator() === true || $login->Nr == $cur->Nr)
 						{
-							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?id=".htmlspecialchars($cur->Nr)."\">";
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?id=". htmlspecialchars($cur->Nr) ."\">";
 							echo "<input type=\"submit\" value=\"Bearbeiten\">";
 							echo "</form>";
 						}
@@ -43,7 +43,7 @@
 						// Sind Administratorrechte vorhanden, gebe L??schknopf aus
 						if ($login->IsAdministrator() === true)
 						{
-							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?delete=&id=".htmlspecialchars($cur->Nr)."\">";
+							echo "<form style=\"display: inline\" method=\"post\" action=\"usermod.$ext?delete=&id=". htmlspecialchars($cur->Nr) ."\">";
 							echo "<input type=\"submit\" value=\"L??schen\">";
 							echo "</form>";
 						}



From lazhur at berlios.de  Tue Jun 13 22:37:21 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Tue, 13 Jun 2006 22:37:21 +0200
Subject: [Liman-svn] r168 - trunk/docs/protokoll
Message-ID: <200606132037.k5DKbLUh027857@sheep.berlios.de>

Author: lazhur
Date: 2006-06-13 22:37:20 +0200 (Tue, 13 Jun 2006)
New Revision: 168

Added:
   trunk/docs/protokoll/2006_06_13.xhtml
Log:
Protokoll f?\195?\188r 2. Pflichtdokumentation hinzugef?\195?\188gt


Added: trunk/docs/protokoll/2006_06_13.xhtml
===================================================================
--- trunk/docs/protokoll/2006_06_13.xhtml	2006-06-13 20:24:26 UTC (rev 167)
+++ trunk/docs/protokoll/2006_06_13.xhtml	2006-06-13 20:37:20 UTC (rev 168)
@@ -0,0 +1,54 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
+	<head>
+		<title>Protokoll 2. Pflichtkonsultation 13.06.2006</title>
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
+		<meta http-equiv="content-language" content="de" />
+		<style type="text/css">@import "./protokoll.css";</style>
+	</head>
+	<body>
+		<h1>Literaturverwaltung</h1>
+		<h2>Protokoll 2. Pflichtkonsultation 13.06.2006</h2>
+
+		<h3>Anwesende</h3>
+		<ul>
+			<li>Simon Wunderlich</li>
+			<li>Andreas Tr?ger</li>
+			<li>Frank Wilhelm</li>
+			<li>Florian Scharl</li>
+			<li>Sven Eckelmann</li>
+		</ul>
+
+		<h3>Tagesordnung</h3>
+		<ol>
+			<li><a href="#teilbeleg2">Besprechung Teilbeleg 2</a></li>
+			<li><a href="#teilbeleg3">Vorstellung Stand Teilbeleg 3</a></li>
+			<li><a href="#sitzung">N?chste Sitzung</a></li>
+		</ol>
+
+		<div id="content">
+			<h3 id="teilbeleg2">Besprechung Teilbeleg 2</h3>
+			<ul>
+				<li>fehlende Trennung zwischen SQLDB-Klasse und Datenbank</li>
+				<li>unklare Formulierung "Felder <i>mit Elementen</i> vom Typ..."</li>
+			</ul>
+	
+			<h3 id="teilbeleg3">Vorstellung Stand Teilbeleg 3</h3>
+			<ul>
+				<li>Implementierung weitgehend vollst?ndig</li>
+				<li>Tests werden fertiggestellt</li>
+				<li>Anwender- und Systemdokumentation in Vorbereitung</li>
+			</ul>
+			
+			<h3 id="sitzung">N?chste Sitzung</h3>
+			<ul>
+				<li>Treffen am 14.06. 15:15</li>
+				<li>Besprechung einzelner Punkte des 3. Belegs</li>
+			</ul>
+		</div>
+
+		<dl>
+			<dt>Protokolant</dt><dd>Sven Eckelmann</dd>
+		</dl>
+	</body>
+</html>



From lazhur at berlios.de  Thu Jun 15 08:27:11 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Thu, 15 Jun 2006 08:27:11 +0200
Subject: [Liman-svn] r169 - trunk/docs/protokoll
Message-ID: <200606150627.k5F6RBuZ004944@sheep.berlios.de>

Author: lazhur
Date: 2006-06-15 08:27:08 +0200 (Thu, 15 Jun 2006)
New Revision: 169

Added:
   trunk/docs/protokoll/2006_06_14.xhtml
Log:
Protokoll vom 14.06.2006 hinzugef?\195?\188gt


Added: trunk/docs/protokoll/2006_06_14.xhtml
===================================================================
--- trunk/docs/protokoll/2006_06_14.xhtml	2006-06-13 20:37:20 UTC (rev 168)
+++ trunk/docs/protokoll/2006_06_14.xhtml	2006-06-15 06:27:08 UTC (rev 169)
@@ -0,0 +1,41 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
+	<head>
+		<title>Sitzungsprotokoll 14.06.2006</title>
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
+		<meta http-equiv="content-language" content="de" />
+		<style type="text/css">@import "./protokoll.css";</style>
+	</head>
+	<body>
+		<h1>Literaturverwaltung</h1>
+		<h2>Sitzungsprotokoll 14.06.2006</h2>
+
+		<h3>Anwesende</h3>
+		<ul>
+			<li>Simon Wunderlich</li>
+			<li>Andreas Tr?ger</li>
+			<li>Frank Wilhelm</li>
+			<li>Florian Scharl</li>
+			<li>Sven Eckelmann</li>
+		</ul>
+
+		<h3>Tagesordnung</h3>
+		<ol>
+			<li><a href="#teilbeleg3">Besprechung Teilbeleg 3</a></li>
+		</ol>
+
+		<div id="content">
+			<h3 id="teilbeleg3">Besprechung Teilbeleg 3</h3>
+			<ul>
+				<li>Explizite Aufteilung noch zu erledigender Aufgaben</li>
+				<li>Besprechung und Korrektur bisher vorhandener Teile</li>
+				<li>Besprechung technischer M?glichkeiten zur Dokumentation der Oberfl?che</li>
+				<li>Archivierungsm?glichkeiten des Administrators (<a href="http://www.phpmyadmin.net/">phpMyAdmin</a>, <a href="http://www.mysql.com/doc/de/mysqldump.html">mysqldump</a>)</li>
+			</ul>
+		</div>
+
+		<dl>
+			<dt>Protokolant</dt><dd>Sven Eckelmann</dd>
+		</dl>
+	</body>
+</html>



From lazhur at berlios.de  Fri Jun 16 16:54:15 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Fri, 16 Jun 2006 16:54:15 +0200
Subject: [Liman-svn] r170 - trunk/docs/beleg3
Message-ID: <200606161454.k5GEsFbL021322@sheep.berlios.de>

Author: lazhur
Date: 2006-06-16 16:54:15 +0200 (Fri, 16 Jun 2006)
New Revision: 170

Added:
   trunk/docs/beleg3/interfaces_code.tex
Modified:
   trunk/docs/beleg3/Makefile
   trunk/docs/beleg3/programmdokumentation.tex
   trunk/docs/beleg3/tests.tex
   trunk/docs/beleg3/user.sty
Log:
- Interfaces und Quellcode zwischenzeitlich bei der Ausgabe entfernt
- Testmatrix angefangen
- Erste Tests beschrieben und eingetragen


Modified: trunk/docs/beleg3/Makefile
===================================================================
--- trunk/docs/beleg3/Makefile	2006-06-15 06:27:08 UTC (rev 169)
+++ trunk/docs/beleg3/Makefile	2006-06-16 14:54:15 UTC (rev 170)
@@ -1,12 +1,14 @@
 MAIN = teilbeleg3
-DEPENDS =	Makefile\
-		teilbeleg3.tex\
-		meta.tex\
-		titel.tex\
-		anwenderdokumentation.tex\
-		arbeitsaufgaben.tex\
-		programmdokumentation.tex\
-		systemhandbuch.tex
+DEPENDS =	Makefile \
+		teilbeleg3.tex \
+		meta.tex \
+		titel.tex \
+		anwenderdokumentation.tex \
+		arbeitsaufgaben.tex \
+		interfaces_code.tex \
+		programmdokumentation.tex \
+		systemhandbuch.tex \
+		tests.tex
 
 # Standard pdf
 all: pdf

Added: trunk/docs/beleg3/interfaces_code.tex
===================================================================
--- trunk/docs/beleg3/interfaces_code.tex	2006-06-15 06:27:08 UTC (rev 169)
+++ trunk/docs/beleg3/interfaces_code.tex	2006-06-16 14:54:15 UTC (rev 170)
@@ -0,0 +1,108 @@
+% Klasseninterfaces
+\section{Definition Klasseninterfaces}
+\subsection{Klasse Autor}
+\lstinputlisting{interfaces/autor.php}
+
+\subsection{Klasse Kommentar}
+\lstinputlisting{interfaces/kommentar.php}
+
+\subsection{Klasse LiteraturArt}
+\lstinputlisting{interfaces/literaturart.php}
+
+\subsection{Klasse Literatur}
+\lstinputlisting{interfaces/literatur.php}
+
+\subsection{Klasse Login}
+\lstinputlisting{interfaces/login.php}
+
+\subsection{Klasse Mitglied}
+\lstinputlisting{interfaces/mitglied.php}
+
+\subsection{Klasse SQLDB}
+\lstinputlisting{interfaces/sqldb_mysql.php}
+
+\subsection{Klasse Suche}
+\lstinputlisting{interfaces/suche.php}
+
+% Quelltexte
+\section{Kommentierte Quelltexte}
+\subsection{bibtex.php}
+\lstinputlisting{sourcecodes/bibtex.php}
+
+\subsection{commentmod.php}
+\lstinputlisting{sourcecodes/commentmod.php}
+
+\subsection{index.php}
+\lstinputlisting{sourcecodes/index.php}
+
+\subsection{install.php}
+\lstinputlisting{sourcecodes/install.php}
+
+\subsection{litmod.php}
+\lstinputlisting{sourcecodes/litmod.php}
+
+\subsection{lit.php}
+\lstinputlisting{sourcecodes/lit.php}
+
+\subsection{login.php}
+\lstinputlisting{sourcecodes/login.php}
+
+\subsection{searchmore.php}
+\lstinputlisting{sourcecodes/searchmore.php}
+
+\subsection{search.php}
+\lstinputlisting{sourcecodes/search.php}
+
+\subsection{userlist.php}
+\lstinputlisting{sourcecodes/userlist.php}
+
+\subsection{usermod.php}
+\lstinputlisting{sourcecodes/usermod.php}
+
+\subsection{user.php}
+\lstinputlisting{sourcecodes/user.php}
+
+\subsection{design/liman.css}
+\lstinputlisting{sourcecodes/design/liman.css}
+
+\subsection{include/autor.php}
+\lstinputlisting{sourcecodes/include/autor.php}
+
+\subsection{include/config.php}
+\lstinputlisting{sourcecodes/include/config.php}
+
+\subsection{include/footer.php}
+\lstinputlisting{sourcecodes/include/footer.php}
+
+\subsection{include/form\_helper.php}
+\lstinputlisting{sourcecodes/include/form_helper.php}
+
+\subsection{include/global.php}
+\lstinputlisting{sourcecodes/include/global.php}
+
+\subsection{include/header.php}
+\lstinputlisting{sourcecodes/include/header.php}
+
+\subsection{include/kommentar.php}
+\lstinputlisting{sourcecodes/include/kommentar.php}
+
+\subsection{include/literaturart.php}
+\lstinputlisting{sourcecodes/include/literaturart.php}
+
+\subsection{include/literatur.php}
+\lstinputlisting{sourcecodes/include/literatur.php}
+
+\subsection{include/login.php}
+\lstinputlisting{sourcecodes/include/login.php}
+
+\subsection{include/mitglied.php}
+\lstinputlisting{sourcecodes/include/mitglied.php}
+
+\subsection{include/sqldb\_mysql.php}
+\lstinputlisting{sourcecodes/include/sqldb_mysql.php}
+
+\subsection{include/sqldb.php}
+\lstinputlisting{sourcecodes/include/sqldb.php}
+
+\subsection{include/suche.php}
+\lstinputlisting{sourcecodes/include/suche.php}

Modified: trunk/docs/beleg3/programmdokumentation.tex
===================================================================
--- trunk/docs/beleg3/programmdokumentation.tex	2006-06-15 06:27:08 UTC (rev 169)
+++ trunk/docs/beleg3/programmdokumentation.tex	2006-06-16 14:54:15 UTC (rev 170)
@@ -1,113 +1,6 @@
 \chapter{Programmdokumentation}
-% Klasseninterfaces
-\section{Definition Klasseninterfaces}
-\subsection{Klasse Autor}
-\lstinputlisting{interfaces/autor.php}
+% W?hrend der Weiteren Arbeiten kurzzeitig deaktiviert
+%\input{interfaces_code}
 
-\subsection{Klasse Kommentar}
-\lstinputlisting{interfaces/kommentar.php}
-
-\subsection{Klasse LiteraturArt}
-\lstinputlisting{interfaces/literaturart.php}
-
-\subsection{Klasse Literatur}
-\lstinputlisting{interfaces/literatur.php}
-
-\subsection{Klasse Login}
-\lstinputlisting{interfaces/login.php}
-
-\subsection{Klasse Mitglied}
-\lstinputlisting{interfaces/mitglied.php}
-
-\subsection{Klasse SQLDB}
-\lstinputlisting{interfaces/sqldb_mysql.php}
-
-\subsection{Klasse Suche}
-\lstinputlisting{interfaces/suche.php}
-
-% Quelltexte
-\section{Kommentierte Quelltexte}
-\subsection{bibtex.php}
-\lstinputlisting{sourcecodes/bibtex.php}
-
-\subsection{commentmod.php}
-\lstinputlisting{sourcecodes/commentmod.php}
-
-\subsection{index.php}
-\lstinputlisting{sourcecodes/index.php}
-
-\subsection{install.php}
-\lstinputlisting{sourcecodes/install.php}
-
-\subsection{litmod.php}
-\lstinputlisting{sourcecodes/litmod.php}
-
-\subsection{lit.php}
-\lstinputlisting{sourcecodes/lit.php}
-
-\subsection{login.php}
-\lstinputlisting{sourcecodes/login.php}
-
-\subsection{searchmore.php}
-\lstinputlisting{sourcecodes/searchmore.php}
-
-\subsection{search.php}
-\lstinputlisting{sourcecodes/search.php}
-
-\subsection{userlist.php}
-\lstinputlisting{sourcecodes/userlist.php}
-
-\subsection{usermod.php}
-\lstinputlisting{sourcecodes/usermod.php}
-
-\subsection{user.php}
-\lstinputlisting{sourcecodes/user.php}
-
-\subsection{design/liman.css}
-\lstinputlisting{sourcecodes/design/liman.css}
-
-\subsection{include/autor.php}
-\lstinputlisting{sourcecodes/include/autor.php}
-
-\subsection{include/config.php}
-\lstinputlisting{sourcecodes/include/config.php}
-
-\subsection{include/footer.php}
-\lstinputlisting{sourcecodes/include/footer.php}
-
-\subsection{include/form\_helper.php}
-\lstinputlisting{sourcecodes/include/form_helper.php}
-
-\subsection{include/global.php}
-\lstinputlisting{sourcecodes/include/global.php}
-
-\subsection{include/header.php}
-\lstinputlisting{sourcecodes/include/header.php}
-
-\subsection{include/kommentar.php}
-\lstinputlisting{sourcecodes/include/kommentar.php}
-
-\subsection{include/literaturart.php}
-\lstinputlisting{sourcecodes/include/literaturart.php}
-
-\subsection{include/literatur.php}
-\lstinputlisting{sourcecodes/include/literatur.php}
-
-\subsection{include/login.php}
-\lstinputlisting{sourcecodes/include/login.php}
-
-\subsection{include/mitglied.php}
-\lstinputlisting{sourcecodes/include/mitglied.php}
-
-\subsection{include/sqldb\_mysql.php}
-\lstinputlisting{sourcecodes/include/sqldb_mysql.php}
-
-\subsection{include/sqldb.php}
-\lstinputlisting{sourcecodes/include/sqldb.php}
-
-\subsection{include/suche.php}
-\lstinputlisting{sourcecodes/include/suche.php}
-
-
 % Tests
-\input{tests.tex}
\ No newline at end of file
+\input{tests}
\ No newline at end of file

Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-15 06:27:08 UTC (rev 169)
+++ trunk/docs/beleg3/tests.tex	2006-06-16 14:54:15 UTC (rev 170)
@@ -1,7 +1,123 @@
 \section{Testplan}
 \subsection{Testf?lle}
 
+TODO: Fall 1 - Unittests
+
+\subsubsection{Fall 2: Installation}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	1. Durchlauf: Alle Speicher sind nicht vorhanden, aber die Datenbank. 2. Durchlauf: Speicher sind vorhanden und mit zuf?lligen Werten gef?llt.
+\item Eingabedaten:\\
+	install.php wird aufgerufen und die verlangten Daten eingegeben.
+\item Erwartete Ereignisse:\
+	Verbindung mit Datenbank wird erstellt, schon vorhandene Speicher gel?scht, Speicher neu angelegt und neuer Administrator angelegt
+\item Systemzustand nach Test:\\
+	Leere Speicher Autoren, Bibliothek, Kommentare und Literatur\_Autoren bestehen. Au?erdem existiert Speicher Mitglieder mit einem Datensatz (Administrator Admin Istrator mit angegebenen Login und gehashtem Passwort)
+\end{enumerate}
+
+\subsubsection{Fall 3: Test des Nutzerinterfaces -- Administrator}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher sind bis auf Mitglieder leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem einloggen als Administrator. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen. Beendet wird der Test mit dem Ausloggen.
+\item Erwartete Ereignisse:\
+	Korrekte Anzeige der entsprechend der aktivierten Aktion laut Layoutentwurf zugeordneten Ansicht.
+\item Systemzustand nach Test:\\
+	Unver?ndert, wie vor dem Test.
+\end{enumerate}
+
+\subsubsection{Fall 4: Test des Nutzerinterfaces -- Benutzer}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher sind bis auf Mitglieder leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem einloggen als Mitglied. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen. Beendet wird der Test mit dem Ausloggen.
+\item Erwartete Ereignisse:\
+	Korrekte Anzeige der entsprechend der aktivierten Aktion laut Layoutentwurf zugeordneten Ansicht. Die Nutzerliste zeigt nur den eigenen Nutzereintrag an. Jegliche Provokation des Systems (L?schen und Hinzuf?gen eines Mitglieds und das Bearbeiten eines fremden Mitglieds) wird abgewiesen bzw. auf die eigenen Nutzerdaten umgeleitet.
+\item Systemzustand nach Test:\\
+	Unver?ndert, wie vor dem Test.
+\end{enumerate}
+
+\subsubsection{Fall 5: Test des Nutzerinterfaces -- Gast}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher sind bis auf Mitglieder leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
+\item Eingabedaten:\\
+	Nutzer ist nicht angemeldet. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen.
+\item Erwartete Ereignisse:\
+	Korrekte Anzeige der entsprechend der aktivierten Aktion laut Layoutentwurf zugeordneten Ansicht. Es sind keine Elemente zum Hinzuf?gen, ?ndern oder L?schen von Daten vorhanden. Die Nutzerliste zeigt keinen Nutzereintrag an. Jegliche Provokation des Systems (L?schen und Hinzuf?gen, ?ndern eines Mitglieds, Kommentars, Literatur) wird abgewiesen.
+\item Systemzustand nach Test:\\
+	Unver?ndert, wie vor dem Test.
+\end{enumerate}
+
+\subsubsection{Fall 6: Anlegen neue Literatur}
+TODO
+
+\subsubsection{Fall 7: ?ndern Literatur}
+TODO
+
+\subsubsection{Fall 8: L?schen Literatur}
+TODO
+
+\subsubsection{Fall 9: Anlegen neues Mitglied}
+TODO
+
+\subsubsection{Fall 10: ?ndern Mitglied}
+TODO
+
+\subsubsection{Fall 11: L?schen Mitglied}
+TODO
+
+\subsubsection{Fall 12: Anlegen Kommentar}
+TODO
+
+\subsubsection{Fall 13: ?ndern Kommentar}
+TODO
+
+\subsubsection{Fall 14: L?schen Kommentar}
+TODO
+
+\subsubsection{Fall 15: L?schen Kommentar -- Administrator}
+TODO
+
+\subsubsection{Fall 16: Volltextsuche}
+TODO
+
+\subsubsection{Fall 17: Erweiterte Suche}
+TODO
+
 \subsection{Testmatrix}
+\begin{longtable}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
+\hline
+ & \multicolumn{15}{c|}{dabei getestete Systemkomponenten} \\\hline
+	% Titel
+	Testfall & 
+	% grobe ``Module''
+	\multicolumn{1}{R{6em}|}{Nutzerinterface} &
+	\multicolumn{1}{R{6em}|}{Bibliotheksverwaltung} &
+	\multicolumn{1}{R{6em}|}{Kommentarverwaltung} &
+	\multicolumn{1}{R{6em}|}{Literaturinformation} &
+	\multicolumn{1}{R{6em}|}{Mitgliedsverwaltung} &
+	\multicolumn{1}{R{6em}|}{Suchsystem} &
+	% Klassen
+	\multicolumn{1}{R{6em}|}{Autor} &
+	\multicolumn{1}{R{6em}|}{Kommentar} &
+	\multicolumn{1}{R{6em}|}{Literatur} &
+	\multicolumn{1}{R{6em}|}{LiteraturArt} &
+	\multicolumn{1}{R{6em}|}{Login} &
+	\multicolumn{1}{R{6em}|}{Mitglied} &
+	\multicolumn{1}{R{6em}|}{Suche} &
+	\multicolumn{1}{R{6em}|}{SQLDB} &
+	\multicolumn{1}{R{6em}|}{Installation}\\
+\hline\hline
+\endhead
+1 &   &   &   &   &   &   & x & x & x & x &   & x & x &   &  \\\hline
+2 & x &   &   &   &   &   &   &   &   &   &   &   &   &   & x\\\hline
+3 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
+4 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
+5 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
+\end{longtable}
 
 \section{Systemtest}
 

Modified: trunk/docs/beleg3/user.sty
===================================================================
--- trunk/docs/beleg3/user.sty	2006-06-15 06:27:08 UTC (rev 169)
+++ trunk/docs/beleg3/user.sty	2006-06-16 14:54:15 UTC (rev 170)
@@ -1,3 +1,6 @@
+\RequirePackage{array}
+\RequirePackage{rotating}
+
 % Nummer auch vor subsubsection anzeigen
 \setcounter{secnumdepth}{3}
 
@@ -25,3 +28,9 @@
     \fi
   \fi
 \fi
+
+% Rotierte Spaltenk?pfe
+\newcolumntype{R}[1]{%
+  >{\begin{turn}{90}\begin{minipage}{#1}\footnotesize\raggedright\hspace{0pt}}l%
+  <{\end{minipage}\end{turn}}%
+}
\ No newline at end of file



From lazhur at berlios.de  Sat Jun 17 22:32:29 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sat, 17 Jun 2006 22:32:29 +0200
Subject: [Liman-svn] r171 - in trunk: . docs/beleg3
Message-ID: <200606172032.k5HKWTin032236@sheep.berlios.de>

Author: lazhur
Date: 2006-06-17 22:32:29 +0200 (Sat, 17 Jun 2006)
New Revision: 171

Modified:
   trunk/docs/beleg3/tests.tex
   trunk/search.php
Log:
- Typo in search.php und tests.tex entfernt


Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-16 14:54:15 UTC (rev 170)
+++ trunk/docs/beleg3/tests.tex	2006-06-17 20:32:29 UTC (rev 171)
@@ -113,7 +113,7 @@
 \hline\hline
 \endhead
 1 &   &   &   &   &   &   & x & x & x & x &   & x & x &   &  \\\hline
-2 & x &   &   &   &   &   &   &   &   &   &   &   &   &   & x\\\hline
+2 & x &   &   &   &   &   &   &   &   &   &   &   &   & x & x\\\hline
 3 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
 4 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
 5 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline

Modified: trunk/search.php
===================================================================
--- trunk/search.php	2006-06-16 14:54:15 UTC (rev 170)
+++ trunk/search.php	2006-06-17 20:32:29 UTC (rev 171)
@@ -56,7 +56,7 @@
 		{
 	?>
 		<tr>
-			<td><a href="lit.<?=$ext;?>?id=<?= htmlspecialchars($cur->Nr); ?>"><?=h tmlspecialchars($cur->Titel); ?></a></td>
+			<td><a href="lit.<?=$ext;?>?id=<?= htmlspecialchars($cur->Nr); ?>"><?= htmlspecialchars($cur->Titel); ?></a></td>
 			<td><?=htmlspecialchars($cur->Autor);?></td>
 			<td><?=htmlspecialchars($cur->Verlag);?></td>
 			<td><?=htmlspecialchars($cur->ISBN);?></td>



From dotslash at berlios.de  Sat Jun 17 23:32:24 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 17 Jun 2006 23:32:24 +0200
Subject: [Liman-svn] r172 - in trunk: . docs/beleg3
Message-ID: <200606172132.k5HLWOkE004543@sheep.berlios.de>

Author: dotslash
Date: 2006-06-17 23:32:23 +0200 (Sat, 17 Jun 2006)
New Revision: 172

Added:
   trunk/Makefile
Modified:
   trunk/docs/beleg3/systemhandbuch.tex
Log:
- Makefile
- Installationsanleitung

Added: trunk/Makefile
===================================================================
--- trunk/Makefile	2006-06-17 20:32:29 UTC (rev 171)
+++ trunk/Makefile	2006-06-17 21:32:23 UTC (rev 172)
@@ -0,0 +1,17 @@
+PACKAGE=liman
+VERSION=0.1
+DEPEND=*.php include/* include/tests/* design/* 
+DISTDIR=/tmp
+FILES=*.php include design
+default:	dist
+dist:		$(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz
+$(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz: $(DEPEND) 
+	mkdir -p $(DISTDIR)/$(PACKAGE)-$(VERSION)
+	cp -r $(FILES) $(DISTDIR)/$(PACKAGE)-$(VERSION)
+	cd $(DISTDIR) && 	tar zcf $(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz 	$(PACKAGE)-$(VERSION)
+	cd $(DISTDIR) &&	tar jcf $(DISTDIR)/$(PACKAGE)-$(VERSION).tar.bz2	$(PACKAGE)-$(VERSION)
+	cd $(DISTDIR) && 	zip -r $(DISTDIR)/$(PACKAGE)-$(VERSION).zip 		$(PACKAGE)-$(VERSION)
+	rm -rf $(DISTDIR)/$(PACKAGE)-$(VERSION)
+	ls -l $(DISTDIR)/$(PACKAGE)-$(VERSION).*
+clean:
+	rm -rf $(DISTDIR)/$(PACKAGE)-*.*

Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-17 20:32:29 UTC (rev 171)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-17 21:32:23 UTC (rev 172)
@@ -1,6 +1,38 @@
 \chapter{Systemhandbuch}
 \section{Installationsanleitung}
+Das System ist vollkommen frei und kostenlos "uber das Internet von http://liman.berlios.de/ 
+bzw. direkt der 
+Downloadseite http://developer.berlios.de/project/showfiles.php?group\_id=6441 
+zu beziehen.
 
+Je nach verf"ugbarem Entpackprogramm sollte man die neuste Version im .tar.gz, 
+.tar.bz2 (zu entpacken mit z.b. GNU tar, http://www.gnu.org/software/tar/) oder .zip-Format 
+(zu entpacken mit z.b. WinZIP, http://www.winzip.de/) herunterladen und entpacken.
+
+Nun muss der Inhalt des Archivs auf das Server in einen vom Webserver verwalteten Ordner 
+abgelegt werden, z.b. in (oder unterhalb) von /var/www auf einem Standard-Debian System.
+
+Befindet man sich nicht direkt auf dem Webserver, k"onnen die Dateien beispielsweise mit 
+einem FTP-Programm oder einem SCP-Programm hochgeladen werden, jenachdem was der Server 
+unterst"utzt.
+
+Die Datenbankverbindung und der erste Administrator werden "uber das Installationskript 
+festgelegt. Dazu ist es notwendig dass der Webserver Schreibzugriff auf include/config.php
+hat, es sollte also ggf. noch schreibbar gesetzt werden. Richten sie nun Ihren Webbrowser 
+(je nach Installationsort) auf http://ihr.server.de/liman/install.php und tragen sie die 
+Verbindungsdaten zum MySQL-Server ein.
+Prefix beschreibt die ersten Zeichen der Tabellennamen und sollte im Allgemeinen so belassen
+werden.
+
+Mit dem Best"atigen des Formulares werden automatisch die ben"otigten Tabellen in der Datenbank 
+und der Administrator angelegt. Sie k"onnen ihre Einstellungen auch sp"ater noch in der Datei
+include/config.php anpassen.
+
+"Uberpr"ufen sie Ihre Einstellungen mit einem Login auf http://ihr.server.de/liman/ .
+Wenn alles korrekt installiert wurde sollten Sie abschliessend noch die Datei install.php 
+aus dem Webserver-Verzeichnis gel"oscht werden, damit niemand die Datenbankverbindungsdaten neu 
+setzen kann.
+
 \section{Programm-Filesystem}
 
-\section{Administrationsanleitung}
\ No newline at end of file
+\section{Administrationsanleitung}



From dotslash at berlios.de  Sat Jun 17 23:40:20 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 17 Jun 2006 23:40:20 +0200
Subject: [Liman-svn] r173 - trunk
Message-ID: <200606172140.k5HLeKt0005280@sheep.berlios.de>

Author: dotslash
Date: 2006-06-17 23:40:20 +0200 (Sat, 17 Jun 2006)
New Revision: 173

Modified:
   trunk/Makefile
Log:
- drop tests

Modified: trunk/Makefile
===================================================================
--- trunk/Makefile	2006-06-17 21:32:23 UTC (rev 172)
+++ trunk/Makefile	2006-06-17 21:40:20 UTC (rev 173)
@@ -3,11 +3,15 @@
 DEPEND=*.php include/* include/tests/* design/* 
 DISTDIR=/tmp
 FILES=*.php include design
+DROP=\
+	$(DISTDIR)/$(PACKAGE)-$(VERSION)/test.php\
+	$(DISTDIR)/$(PACKAGE)-$(VERSION)/include/tests
 default:	dist
 dist:		$(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz
 $(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz: $(DEPEND) 
 	mkdir -p $(DISTDIR)/$(PACKAGE)-$(VERSION)
 	cp -r $(FILES) $(DISTDIR)/$(PACKAGE)-$(VERSION)
+	rm -rf $(DROP)
 	cd $(DISTDIR) && 	tar zcf $(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz 	$(PACKAGE)-$(VERSION)
 	cd $(DISTDIR) &&	tar jcf $(DISTDIR)/$(PACKAGE)-$(VERSION).tar.bz2	$(PACKAGE)-$(VERSION)
 	cd $(DISTDIR) && 	zip -r $(DISTDIR)/$(PACKAGE)-$(VERSION).zip 		$(PACKAGE)-$(VERSION)



From lazhur at berlios.de  Sun Jun 18 00:50:49 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sun, 18 Jun 2006 00:50:49 +0200
Subject: [Liman-svn] r174 - in trunk: . docs/beleg3 docs/beleg3/sourcecodes
Message-ID: <200606172250.k5HMonnR015500@sheep.berlios.de>

Author: lazhur
Date: 2006-06-18 00:50:46 +0200 (Sun, 18 Jun 2006)
New Revision: 174

Modified:
   trunk/docs/beleg3/meta.tex
   trunk/docs/beleg3/sourcecodes/install.php
   trunk/docs/beleg3/systemhandbuch.tex
   trunk/docs/beleg3/user.sty
   trunk/install.php
Log:
- \pdfurl eingef?\195?\188gt
- Installationsanleitung korrigiert
- install.php an die Installationsanleitung angepasst (Schreiben von config.php)


Modified: trunk/docs/beleg3/meta.tex
===================================================================
--- trunk/docs/beleg3/meta.tex	2006-06-17 21:40:20 UTC (rev 173)
+++ trunk/docs/beleg3/meta.tex	2006-06-17 22:50:46 UTC (rev 174)
@@ -12,6 +12,7 @@
    pdfstartview={FitH},
    colorlinks=true,
    linkcolor=black,
+   urlcolor=black,
    plainpages = false
 }
 \fi

Modified: trunk/docs/beleg3/sourcecodes/install.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/install.php	2006-06-17 21:40:20 UTC (rev 173)
+++ trunk/docs/beleg3/sourcecodes/install.php	2006-06-17 22:50:46 UTC (rev 174)
@@ -241,24 +241,50 @@
 			die();
 		}
 
+
+		// Erstelle Konfigurationsdatei
+		$config = 
+			"<?php\n".
+			"	// Datenbankeinstellungen\n".
+			"	\$db_config['dbms'] = \"".$db_config['dbms']."\";\n".
+			"	\$db_config['user'] = \"".$db_config['user']."\";\n".
+			"	\$db_config['pass'] = \"".$db_config['pass']."\";\n".
+			"	\$db_config['name'] = \"".$db_config['name']."\";\n".
+			"	\$db_config['host'] = \"".$db_config['host']."\";\n".
+			"	\$db_config['prefix'] = \"".$db_config['prefix']."\";\n".
+			"\n".
+			"	\$ext = \"php\";	// Endung der von den Usern abrufbaren Dateien\n".
+			"	\$gz_enable = false; // aktiviere GZIP-Kompression der HTML-Dateien\n".
+			"?>\n";
+
+		$written = false;
+		if (is_writable("include/config.php") === true)
+		{
+			$handle = fopen("include/config.php", "w");
+			if ($handle !== false)
+			{
+				if (fwrite($handle, $config) !== false)
+				{
+					$written = true;
+					fclose($handle);
+				}
+			}
+		}
+
+		echo "<p>Datenbank wurde erfolgreich eingerichtet.</p>";
+		if ($written === false)
+		{
 		?>
-			<p>Datenbank wurde erfolgreich eingerichtet.</p>
 			<p>Erstellen sie in ihrem Installationsordner unter "include" eine Datei mit dem Namen "config.php" und folgendem Inhalt:
-			<pre>
-&lt;?php
-	// Datenbankeinstellungen
-	$db_config['dbms'] = "<?=htmlspecialchars($db_config['dbms']);?>";
-	$db_config['user'] = "<?=htmlspecialchars($db_config['user']);?>";
-	$db_config['pass'] = "<?=htmlspecialchars($db_config['pass']);?>";
-	$db_config['name'] = "<?=htmlspecialchars($db_config['name']);?>";
-	$db_config['host'] = "<?=htmlspecialchars($db_config['host']);?>";
-	$db_config['prefix'] = "<?=htmlspecialchars($db_config['prefix']);?>";
-
-	$ext = "php";	// Endung der von den Usern abrufbaren Dateien
-	$gz_enable = false; // aktiviere GZIP-Kompression der HTML-Dateien
-?&gt;
-			</pre></p>
+			<pre><?=htmlspecialchars($config);?></pre></p>
 		<?php
+		}
+		else
+		{
+			echo "<p>Die Einstellungen wurden unter include/config.php gespeichert. Um weitere Schreibvorg?nge von unpriviligierten Nutzern darauf zu verhindern, sollten sie die Schreibrechte au?er f?r den eigenen Nutzer entfernen.</p>";
+		}
+		?>
+		<?php
 	}
 	else
 	{

Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-17 21:40:20 UTC (rev 173)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-17 22:50:46 UTC (rev 174)
@@ -1,24 +1,24 @@
 \chapter{Systemhandbuch}
 \section{Installationsanleitung}
-Das System ist vollkommen frei und kostenlos "uber das Internet von http://liman.berlios.de/ 
+Das System ist vollkommen frei und kostenlos "uber das Internet von \pdfurl{http://liman.berlios.de/} 
 bzw. direkt der 
-Downloadseite http://developer.berlios.de/project/showfiles.php?group\_id=6441 
+Downloadseite \pdfurl{http://developer.berlios.de/project/showfiles.php?group\_id=6441} 
 zu beziehen.
 
 Je nach verf"ugbarem Entpackprogramm sollte man die neuste Version im .tar.gz, 
-.tar.bz2 (zu entpacken mit z.b. GNU tar, http://www.gnu.org/software/tar/) oder .zip-Format 
-(zu entpacken mit z.b. WinZIP, http://www.winzip.de/) herunterladen und entpacken.
+.tar.bz2 (zu entpacken mit z.b. GNU tar, \pdfurl{http://www.gnu.org/software/tar/}) oder .zip-Format 
+(zu entpacken mit z. B. WinZIP, \pdfurl{http://www.winzip.de/}) herunterladen und entpacken.
 
 Nun muss der Inhalt des Archivs auf das Server in einen vom Webserver verwalteten Ordner 
-abgelegt werden, z.b. in (oder unterhalb) von /var/www auf einem Standard-Debian System.
+abgelegt werden, z. B. in (oder unterhalb) von /var/www auf einem Standard-Debian System.
 
 Befindet man sich nicht direkt auf dem Webserver, k"onnen die Dateien beispielsweise mit 
-einem FTP-Programm oder einem SCP-Programm hochgeladen werden, jenachdem was der Server 
+einem FTP-Programm oder einem SCP-Programm hochgeladen werden, je nach dem was der Server 
 unterst"utzt.
 
 Die Datenbankverbindung und der erste Administrator werden "uber das Installationskript 
-festgelegt. Dazu ist es notwendig dass der Webserver Schreibzugriff auf include/config.php
-hat, es sollte also ggf. noch schreibbar gesetzt werden. Richten sie nun Ihren Webbrowser 
+festgelegt. Dazu ist es empfohlen, dass der Webserver Schreibzugriff auf include/config.php
+hat. Es sollte also ggf. noch schreibbar gesetzt werden. Richten sie nun Ihren Webbrowser 
 (je nach Installationsort) auf http://ihr.server.de/liman/install.php und tragen sie die 
 Verbindungsdaten zum MySQL-Server ein.
 Prefix beschreibt die ersten Zeichen der Tabellennamen und sollte im Allgemeinen so belassen
@@ -29,7 +29,7 @@
 include/config.php anpassen.
 
 "Uberpr"ufen sie Ihre Einstellungen mit einem Login auf http://ihr.server.de/liman/ .
-Wenn alles korrekt installiert wurde sollten Sie abschliessend noch die Datei install.php 
+Wenn alles korrekt installiert wurde, sollten Sie abschliessend noch die Datei install.php 
 aus dem Webserver-Verzeichnis gel"oscht werden, damit niemand die Datenbankverbindungsdaten neu 
 setzen kann.
 

Modified: trunk/docs/beleg3/user.sty
===================================================================
--- trunk/docs/beleg3/user.sty	2006-06-17 21:40:20 UTC (rev 173)
+++ trunk/docs/beleg3/user.sty	2006-06-17 22:50:46 UTC (rev 174)
@@ -33,4 +33,12 @@
 \newcolumntype{R}[1]{%
   >{\begin{turn}{90}\begin{minipage}{#1}\footnotesize\raggedright\hspace{0pt}}l%
   <{\end{minipage}\end{turn}}%
+}
+
+\newcommand{\pdfurl}[1]{
+	\ifpdf
+		\url{#1}
+	\else
+		#1
+	\fi
 }
\ No newline at end of file

Modified: trunk/install.php
===================================================================
--- trunk/install.php	2006-06-17 21:40:20 UTC (rev 173)
+++ trunk/install.php	2006-06-17 22:50:46 UTC (rev 174)
@@ -241,24 +241,50 @@
 			die();
 		}
 
+
+		// Erstelle Konfigurationsdatei
+		$config = 
+			"<?php\n".
+			"	// Datenbankeinstellungen\n".
+			"	\$db_config['dbms'] = \"".$db_config['dbms']."\";\n".
+			"	\$db_config['user'] = \"".$db_config['user']."\";\n".
+			"	\$db_config['pass'] = \"".$db_config['pass']."\";\n".
+			"	\$db_config['name'] = \"".$db_config['name']."\";\n".
+			"	\$db_config['host'] = \"".$db_config['host']."\";\n".
+			"	\$db_config['prefix'] = \"".$db_config['prefix']."\";\n".
+			"\n".
+			"	\$ext = \"php\";	// Endung der von den Usern abrufbaren Dateien\n".
+			"	\$gz_enable = false; // aktiviere GZIP-Kompression der HTML-Dateien\n".
+			"?>\n";
+
+		$written = false;
+		if (is_writable("include/config.php") === true)
+		{
+			$handle = fopen("include/config.php", "w");
+			if ($handle !== false)
+			{
+				if (fwrite($handle, $config) !== false)
+				{
+					$written = true;
+					fclose($handle);
+				}
+			}
+		}
+
+		echo "<p>Datenbank wurde erfolgreich eingerichtet.</p>";
+		if ($written === false)
+		{
 		?>
-			<p>Datenbank wurde erfolgreich eingerichtet.</p>
 			<p>Erstellen sie in ihrem Installationsordner unter "include" eine Datei mit dem Namen "config.php" und folgendem Inhalt:
-			<pre>
-&lt;?php
-	// Datenbankeinstellungen
-	$db_config['dbms'] = "<?=htmlspecialchars($db_config['dbms']);?>";
-	$db_config['user'] = "<?=htmlspecialchars($db_config['user']);?>";
-	$db_config['pass'] = "<?=htmlspecialchars($db_config['pass']);?>";
-	$db_config['name'] = "<?=htmlspecialchars($db_config['name']);?>";
-	$db_config['host'] = "<?=htmlspecialchars($db_config['host']);?>";
-	$db_config['prefix'] = "<?=htmlspecialchars($db_config['prefix']);?>";
-
-	$ext = "php";	// Endung der von den Usern abrufbaren Dateien
-	$gz_enable = false; // aktiviere GZIP-Kompression der HTML-Dateien
-?&gt;
-			</pre></p>
+			<pre><?=htmlspecialchars($config);?></pre></p>
 		<?php
+		}
+		else
+		{
+			echo "<p>Die Einstellungen wurden unter include/config.php gespeichert. Um weitere Schreibvorg??nge von unpriviligierten Nutzern darauf zu verhindern, sollten sie die Schreibrechte au??er f??r den eigenen Nutzer entfernen.</p>";
+		}
+		?>
+		<?php
 	}
 	else
 	{



From lazhur at berlios.de  Sun Jun 18 15:13:29 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sun, 18 Jun 2006 15:13:29 +0200
Subject: [Liman-svn] r175 - trunk/docs/beleg3
Message-ID: <200606181313.k5IDDTUe017469@sheep.berlios.de>

Author: lazhur
Date: 2006-06-18 15:13:25 +0200 (Sun, 18 Jun 2006)
New Revision: 175

Modified:
   trunk/docs/beleg3/systemhandbuch.tex
   trunk/docs/beleg3/tests.tex
Log:
- weitere Testf?\195?\164lle hinzugef?\195?\188gt
- Testmatrix erweitert
- kleinere Korrektur in Installationsanleitung


Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-17 22:50:46 UTC (rev 174)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-18 13:13:25 UTC (rev 175)
@@ -29,7 +29,7 @@
 include/config.php anpassen.
 
 "Uberpr"ufen sie Ihre Einstellungen mit einem Login auf http://ihr.server.de/liman/ .
-Wenn alles korrekt installiert wurde, sollten Sie abschliessend noch die Datei install.php 
+Wenn alles korrekt installiert wurde, sollten abschlie?end noch die Datei install.php 
 aus dem Webserver-Verzeichnis gel"oscht werden, damit niemand die Datenbankverbindungsdaten neu 
 setzen kann.
 

Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-17 22:50:46 UTC (rev 174)
+++ trunk/docs/beleg3/tests.tex	2006-06-18 13:13:25 UTC (rev 175)
@@ -6,10 +6,10 @@
 \subsubsection{Fall 2: Installation}
 \begin{enumerate}
 \item Systemzustand vor dem Test:\\
-	1. Durchlauf: Alle Speicher sind nicht vorhanden, aber die Datenbank. 2. Durchlauf: Speicher sind vorhanden und mit zuf?lligen Werten gef?llt.
+	1. Durchlauf: Alle Speicher nicht vorhanden, aber die Datenbank. 2. Durchlauf: Speicher sind vorhanden und mit zuf?lligen Werten gef?llt.
 \item Eingabedaten:\\
 	install.php wird aufgerufen und die verlangten Daten eingegeben.
-\item Erwartete Ereignisse:\
+\item Erwartete Ereignisse:\\
 	Verbindung mit Datenbank wird erstellt, schon vorhandene Speicher gel?scht, Speicher neu angelegt und neuer Administrator angelegt
 \item Systemzustand nach Test:\\
 	Leere Speicher Autoren, Bibliothek, Kommentare und Literatur\_Autoren bestehen. Au?erdem existiert Speicher Mitglieder mit einem Datensatz (Administrator Admin Istrator mit angegebenen Login und gehashtem Passwort)
@@ -18,10 +18,10 @@
 \subsubsection{Fall 3: Test des Nutzerinterfaces -- Administrator}
 \begin{enumerate}
 \item Systemzustand vor dem Test:\\
-	Alle Speicher sind bis auf Mitglieder leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
 \item Eingabedaten:\\
-	Begonnen wird der Test mit dem einloggen als Administrator. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen. Beendet wird der Test mit dem Ausloggen.
-\item Erwartete Ereignisse:\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
 	Korrekte Anzeige der entsprechend der aktivierten Aktion laut Layoutentwurf zugeordneten Ansicht.
 \item Systemzustand nach Test:\\
 	Unver?ndert, wie vor dem Test.
@@ -30,10 +30,10 @@
 \subsubsection{Fall 4: Test des Nutzerinterfaces -- Benutzer}
 \begin{enumerate}
 \item Systemzustand vor dem Test:\\
-	Alle Speicher sind bis auf Mitglieder leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden.
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden.
 \item Eingabedaten:\\
-	Begonnen wird der Test mit dem einloggen als Mitglied. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen. Beendet wird der Test mit dem Ausloggen.
-\item Erwartete Ereignisse:\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
 	Korrekte Anzeige der entsprechend der aktivierten Aktion laut Layoutentwurf zugeordneten Ansicht. Die Nutzerliste zeigt nur den eigenen Nutzereintrag an. Jegliche Provokation des Systems (L?schen und Hinzuf?gen eines Mitglieds und das Bearbeiten eines fremden Mitglieds) wird abgewiesen bzw. auf die eigenen Nutzerdaten umgeleitet.
 \item Systemzustand nach Test:\\
 	Unver?ndert, wie vor dem Test.
@@ -42,51 +42,219 @@
 \subsubsection{Fall 5: Test des Nutzerinterfaces -- Gast}
 \begin{enumerate}
 \item Systemzustand vor dem Test:\\
-	Alle Speicher sind bis auf Mitglieder leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
 \item Eingabedaten:\\
 	Nutzer ist nicht angemeldet. Alle Funktionen des Systems werden nacheinander aktiviert, ohne Eintragungen vorzunehmen.
-\item Erwartete Ereignisse:\
+\item Erwartete Ereignisse:\\
 	Korrekte Anzeige der entsprechend der aktivierten Aktion laut Layoutentwurf zugeordneten Ansicht. Es sind keine Elemente zum Hinzuf?gen, ?ndern oder L?schen von Daten vorhanden. Die Nutzerliste zeigt keinen Nutzereintrag an. Jegliche Provokation des Systems (L?schen und Hinzuf?gen, ?ndern eines Mitglieds, Kommentars, Literatur) wird abgewiesen.
 \item Systemzustand nach Test:\\
 	Unver?ndert, wie vor dem Test.
 \end{enumerate}
 
 \subsubsection{Fall 6: Anlegen neue Literatur}
-TODO
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Neue Literatur wird angelegt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System legt neue Literatur an und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher bis auf Bibliothek sind unver?ndert. In Bibliothek existiert ein korrekter Datensatz.
+\end{enumerate}
 
-\subsubsection{Fall 7: ?ndern Literatur}
-TODO
+\subsubsection{Fall 7: Anlegen neue Literatur, die schon existiert}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder und Bibliothek sind leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek sind mehrere Literaturdatens?tze vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Neue Literatur wird angelegt mit ?hnlichen/gleichen Daten wie eine existierende Literatur angelegt. Anlegen wird best?tigt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System fragt ob die Literatur angelegt werden soll und zeigt Liste der ?hnlichen Literatur an. Nach Best?tigung legt das System neue Literatur an und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher bis auf Bibliothek, Literatur\_Autoren und Autoren sind unver?ndert. In Bibliothek existiert ein neuer korrekter Datensatz, in Autoren sind angegebene Autoren eingef?gt und in Literatur\_Autoren sind die Verbindung von Literatur zu Autoren vorhanden.
+\end{enumerate}
 
-\subsubsection{Fall 8: L?schen Literatur}
-TODO
+\subsubsection{Fall 8: ?ndern Literatur}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Kommentare ist leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek sind mehrere Literaturdatens?tze vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Bestehende Literatur wird gew?hlt und bearbeitet. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System ?ndert Literatur und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher bis auf Bibliothek, Literatur\_Autoren und Autoren sind unver?ndert. In Bibliothek existiert die selbe Anzahl an Datens?tzen und der zu ?ndernte Datensatz wurde korrekt ?berschrieben. In Autoren sind angegebene Autoren eingef?gt, nicht angegebene entfernt und in Literatur\_Autoren sind die Verbindung von Literatur zu Autoren vorhanden.
+\end{enumerate}
 
-\subsubsection{Fall 9: Anlegen neues Mitglied}
-TODO
+\subsubsection{Fall 9: L?schen Literatur}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Kommentare ist leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek sind mehrere Literaturdatens?tze vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Bestehende Literatur wird gew?hlt und entfernt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System fragt nach Best?tigung und ?ndert nach Best?tigung Literatur und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher bis auf Bibliothek, Literatur\_Autoren und Autoren sind unver?ndert. In Bibliothek existieren alle Datens?tze, bis auf den zu l?schenden Datensatz. In Autoren sind nicht mehr benutzte Autoren entfernt und in Literatur\_Autoren sind die nicht mehr ben?tigten Verbindungen von Literatur zu Autoren entfernt.
+\end{enumerate}
 
-\subsubsection{Fall 10: ?ndern Mitglied}
-TODO
+\subsubsection{Fall 10: Anlegen neues Mitglied}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Neues Mitglied wird angelegt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System legt neues Mitglied an und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher bis auf Mitglieder sind unver?ndert. In Mitglieder existiert neben dem Administratordatensatz ein korrekter neuer Datensatz.
+\end{enumerate}
 
-\subsubsection{Fall 11: L?schen Mitglied}
-TODO
+\subsubsection{Fall 11: Anlegen neues Mitglied, das schon existiert}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Neues Mitglied wird mit dem Login des Administratos angelegt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System gibt Fehlermeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher sind unver?ndert.
+\end{enumerate}
 
-\subsubsection{Fall 12: Anlegen Kommentar}
-TODO
+\subsubsection{Fall 12: ?ndern Mitglied}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein weiteres Mitglied vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Mitglied wird ausgew?hlt und bearbeitet. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System ?ndert das Mitglied und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher sind bis auf Mitglieder unver?ndert. In Mitglieder existiert die selbe Anzahl an Datens?tzen und der zu ?ndernte Datensatz wurde korrekt ?berschrieben.
+\end{enumerate}
 
-\subsubsection{Fall 13: ?ndern Kommentar}
-TODO
+\subsubsection{Fall 13: ?ndern Mitglied - eigene Daten}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein weiteres Mitglied ohne Administratorrechte vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Eigene Mitgliedsdaten werden ausgew?hlt und bearbeitet. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System ?ndert das Mitglied und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher sind bis auf Mitglieder unver?ndert. In Mitglieder existiert die selbe Anzahl an Datens?tzen und der zu eigene Datensatz wurde korrekt ?berschrieben.
+\end{enumerate}
 
-\subsubsection{Fall 14: L?schen Kommentar}
-TODO
+\subsubsection{Fall 14: L?schen Mitglied}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein weiteres Mitglied vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Mitglied wird ausgew?hlt und entfernt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System l?scht das Mitglied und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher sind bis auf Mitglieder unver?ndert. In Mitglieder existieren alle Datens?tze, bis auf den zu l?schenden Datensatz.
+\end{enumerate}
 
-\subsubsection{Fall 15: L?schen Kommentar -- Administrator}
-TODO
+\subsubsection{Fall 15: Anlegen Kommentar}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Kommentare ist leer. In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek ist Literaturdatensatz vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Literatur wird ausgew?hlt. Neuer Kommentar wird angelegt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System legt neuen Kommentar an und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher bis auf Kommentare sind unver?ndert. In Kommentare existiert ein neuer korrekter Datensatz.
+\end{enumerate}
 
-\subsubsection{Fall 16: Volltextsuche}
-TODO
+\subsubsection{Fall 16: ?ndern Kommentar}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek ist Literaturdatensatz vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden. In Kommentare ist Kommentar zu Literatureintrag vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Literatur wird ausgew?hlt. Kommentar wird ge?ndert. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System ?ndert Kommentar und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher bis auf Kommentare sind unver?ndert. In Kommentare wurde nur der Kommentar korrekt ge?ndert.
+\end{enumerate}
 
-\subsubsection{Fall 17: Erweiterte Suche}
-TODO
+\subsubsection{Fall 17: L?schen Kommentar}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek ist Literaturdatensatz vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden. In Kommentare sind mehrere Kommentare zu Literatureintrag vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Mitglied. Literatur wird ausgew?hlt. Kommentar wird entfernt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System l?scht Kommentar und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher sind bis auf Kommentare unver?ndert. In Kommentare existieren alle Datens?tze, bis auf den zu l?schenden Datensatz.
+\end{enumerate}
 
+\subsubsection{Fall 18: L?schen fremden Kommentar}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek ist Literaturdatensatz vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden. In Kommentare sind mehrere Kommentare zu Literatureintrag vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Literatur wird ausgew?hlt. Kommentar eines anderen Mitglieds wird entfernt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System l?scht Kommentar und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Alle Speicher sind bis auf Kommentare unver?ndert. In Kommentare existieren alle Datens?tze, bis auf den zu l?schenden Datensatz.
+\end{enumerate}
+
+\subsubsection{Fall 19: L?schen Literatur inklusive Kommentare}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek ist Literaturdatensatz vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden. In Kommentare sind mehrere Kommentare zu Literatureintrag vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Literatur wird ausgew?hlt und entfernt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System l?scht Literatur und dazugeh?rigen Kommentar und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Speicher Mitglieder unver?ndert. In Kommentare existieren alle Datens?tze, bis auf die zu der Literatur geh?renden Datens?tze. Literaturdatensatz wurde aus Bibliothek entfernt. Nicht mehr ben?tigte Autoren aus Autoren entfernt und nicht mehr ben?tigte Verbindungen in Literatur\_Autoren entfernt.
+\end{enumerate}
+
+\subsubsection{Fall 20: L?schen Mitglied inklusive Kommentare}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	In Mitglieder ist neben dem Datensatz des ersten Administrators ein Mitglied ohne Administratorrechte vorhanden. In Bibliothek ist Literaturdatensatz vorhanden. In Autoren sind Autoren vohanden und in Literatur\_Autoren sind die Verbindungen zu Literatur vorhanden. In Kommentare sind mehrere Kommentare zu Literatureintrag vorhanden.
+\item Eingabedaten:\\
+	Begonnen wird der Test mit dem Anmelden als Administrator. Mitglied wird ausgew?hlt und entfernt. Beendet wird der Test mit dem Abmelden.
+\item Erwartete Ereignisse:\\
+	System l?scht Mitglied und dazugeh?rigen Kommentar und gibt Erfolgsmeldung aus.
+\item Systemzustand nach Test:\\
+	Speicher Literatur, Autoren, Literatur\_Autoren unver?ndert. In Kommentare existieren alle Datens?tze, bis auf die zu dem Mitglied geh?renden Datens?tze.
+\end{enumerate}
+
+\subsubsection{Fall 21: Volltextsuche}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder und Bibliothek sind leer. In Mitglieder ist nur der Datensatz des ersten Administrators. In Bibliothek sind mehrere Literaturdatens?tze vorhanden.
+\item Eingabedaten:\\
+	Suchbegriff wird eingegeben
+\item Erwartete Ereignisse:\\
+	System sucht ?ber Volltextsuche Literatur heraus und gibt diese mit Autoren aus
+\item Systemzustand nach Test:\\
+	Alle Speicher unver?ndert wie vor dem Test
+\end{enumerate}
+
+\subsubsection{Fall 22: Erweiterte Suche}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	Alle Speicher bis auf Mitglieder und Bibliothek sind leer. In Mitglieder ist nur der Datensatz des ersten Administrators. In Bibliothek sind mehrere Literaturdatens?tze vorhanden.
+\item Eingabedaten:\\
+	Suchbegriff wird eingegeben
+\item Erwartete Ereignisse:\\
+	System sucht ?ber Autor und Titel Literatur heraus und gibt diese mit Autoren aus
+\item Systemzustand nach Test:\\
+	Alle Speicher unver?ndert wie vor dem Test
+\end{enumerate}
+
 \subsection{Testmatrix}
 \begin{longtable}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
 \hline
@@ -112,11 +280,28 @@
 	\multicolumn{1}{R{6em}|}{Installation}\\
 \hline\hline
 \endhead
-1 &   &   &   &   &   &   & x & x & x & x &   & x & x &   &  \\\hline
-2 & x &   &   &   &   &   &   &   &   &   &   &   &   & x & x\\\hline
-3 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
-4 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
-5 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
+ 1 &   &   &   &   &   &   & x & x & x & x &   & x & x &   &  \\\hline
+ 2 & x &   &   &   &   &   &   &   &   &   &   &   &   & x & x\\\hline
+ 3 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
+ 4 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
+ 5 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
+ 6 & x & x &   & x &   & x & x &   & x & x & x &   & x & x &  \\\hline
+ 7 & x & x &   & x &   &   & x &   & x & x & x &   & x & x &  \\\hline
+ 8 & x & x &   & x &   &   & x &   & x & x & x &   &   & x &  \\\hline
+ 9 & x & x &   & x &   &   & x &   & x & x & x &   &   & x &  \\\hline
+10 & x &   &   &   & x &   &   &   &   &   & x & x &   & x &  \\\hline
+11 & x &   &   &   & x &   &   &   &   &   & x & x &   & x &  \\\hline
+12 & x &   &   &   & x &   &   &   &   &   & x & x &   & x &  \\\hline
+13 & x &   &   &   & x &   &   &   &   &   & x & x &   & x &  \\\hline
+14 & x &   &   &   & x &   &   &   &   &   & x & x &   & x &  \\\hline
+15 & x &   & x & x &   &   &   & x &   &   & x &   &   & x &  \\\hline
+16 & x &   & x & x &   &   &   & x &   &   & x &   &   & x &  \\\hline
+17 & x &   & x & x &   &   &   & x &   &   & x &   &   & x &  \\\hline
+18 & x &   & x & x &   &   &   & x &   &   & x &   &   & x &  \\\hline
+19 & x & x &   &   &   &   & x &   & x & x &   &   &   & x &  \\\hline
+20 & x &   &   &   & x &   &   & x &   &   &   & x &   & x &  \\\hline
+21 & x &   &   &   &   & x & x &   &   & x &   &   & x & x &  \\\hline
+22 & x &   &   &   &   & x & x &   &   & x &   &   & x & x &  \\\hline
 \end{longtable}
 
 \section{Systemtest}



From trusch at berlios.de  Mon Jun 19 21:16:34 2006
From: trusch at berlios.de (trusch at BerliOS)
Date: Mon, 19 Jun 2006 21:16:34 +0200
Subject: [Liman-svn] r176 - trunk/docs/beleg3
Message-ID: <200606191916.k5JJGY6V023096@sheep.berlios.de>

Author: trusch
Date: 2006-06-19 21:16:25 +0200 (Mon, 19 Jun 2006)
New Revision: 176

Modified:
   trunk/docs/beleg3/systemhandbuch.tex
Log:


Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-18 13:13:25 UTC (rev 175)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-19 19:16:25 UTC (rev 176)
@@ -29,10 +29,70 @@
 include/config.php anpassen.
 
 "Uberpr"ufen sie Ihre Einstellungen mit einem Login auf http://ihr.server.de/liman/ .
-Wenn alles korrekt installiert wurde, sollten abschlie??end noch die Datei install.php 
+Wenn alles korrekt installiert wurde, sollten abschlie?end noch die Datei install.php 
 aus dem Webserver-Verzeichnis gel"oscht werden, damit niemand die Datenbankverbindungsdaten neu 
 setzen kann.
 
 \section{Programm-Filesystem}
+{TODO}
+\begin{longtable}{|l|p{6.0cm}|p{2cm}|}
+\hline
+{\bf Bezeichnung der Datei} & {\bf Bedeutung} & {\bf Anzahl Bytes}\\
+\hline
+\endhead
 
+index.php & Startseite mit Letzte Literatur & 1196\\
+\hline
+login.php & login/logout mit Begr"u"sungstext & 836\\
+\hline
+user.php & Nutzerdetails & 1680\\
+\hline
+usermode.php & Nutzer l"oschen/"andern/hinzuf"ugen & 7892\\
+\hline
+userlist.php & Nutzerdaten anzeigen & 1924\\
+\hline
+search.php & Suche (Ergebnisse) & 1893\\
+\hline
+searchmore.php & Suche (Formular) & 1284\\
+\hline
+litmod.php & Literatur l"oschen / "andern / hinzuf"ugen & 10056\\
+\hline
+commentmod.php & Kommentar l"oschen / "andern / hinzuf"ugen & 3089\\
+\hline
+lit.php & Literaturdetails & 4436\\
+\hline
+bibtex.php & BibTeX Importieren & 2318\\
+\hline
+include$\backslash$config.php & Datenbankkonfiguration & 362\\
+\hline
+include$\backslash$global.php & Einrichtung Prog. - Umgebung & 1557\\
+\hline
+include$\backslash$literatur.php & Stellt Funktionen f"ur Literatur in Bibliothek zur Verf"ugung & 11846\\
+\hline
+include$\backslash$mitglied.php & Stellt Funktionen f"ur Mitglieder bereit & 8436\\
+\hline
+include$\backslash$suche.php & Durchsucht die Tabelle Bibliothek und Autoren "uber Volltextsuche & 7852\\
+\hline
+include$\backslash$footer.php & Ende jeder Html - Datei & 36 \\
+\hline
+include$\backslash$header.php & Kopf jeder Html-Datei & 2885 \\
+\hline
+include$\backslash$literaturart.php & Speicherung aus der Datenbank oder BibTeX-Datei erhaltenen Art von Informationen & 3811\\
+\hline
+include$\backslash$sqldb.php & Datenbankzugriffsauswahl & 354 \\
+\hline
+include$\backslash$autor.php & Stellt Funktionen f"ur Autoren bereit & 4608\\
+\hline
+include$\backslash$formhelper.php & Hilfsfunktionen f"ur Formulare & 2278\\
+\hline
+include$\backslash$kommentar.php & Stellt Funktionen f"ur Kommentare bereit & 7911\\
+\hline   
+include$\backslash$login.php &  Verwaltet die Session des Users und der damit entstehenden Rechte & 5243\\
+\hline
+include$\backslash$sqldbmysql.php & Startet eine Verbindung zum Datenbanksystem her und w"ahlt eine Datenbank & 6323\\
+\hline
+
+\end{longtable}
+
+
 \section{Administrationsanleitung}



From fwilhelm at berlios.de  Thu Jun 22 23:12:11 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Thu, 22 Jun 2006 23:12:11 +0200
Subject: [Liman-svn] r177 - trunk/include/tests
Message-ID: <200606222112.k5MLCBKi022133@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-22 23:12:10 +0200 (Thu, 22 Jun 2006)
New Revision: 177

Removed:
   trunk/include/tests/literatur.php
Modified:
   trunk/include/tests/autor.php
   trunk/include/tests/kommentar.php
   trunk/include/tests/mitglied.php
Log:
Test f?\195?\188r Literatur gel?\195?\182scht (zu schwer isolierbar),
Tests von Autor beinhalten Nutzerrechte,
Tests f?\195?\188r Kommentar und Mitglied vervollst?\195?\164ndigt

Modified: trunk/include/tests/autor.php
===================================================================
--- trunk/include/tests/autor.php	2006-06-19 19:16:25 UTC (rev 176)
+++ trunk/include/tests/autor.php	2006-06-22 21:12:10 UTC (rev 177)
@@ -3,15 +3,26 @@
 	
 	class AutorTest
 	{
+		var $login;
+		
 		function Setup()
 		{
+			global $login;
+			
+			$this->login = new stdClass();
+			$this->login->Level = $login->Level;
+			$this->login->Nr = $login->Nr;
 		}
 		
 		function TearDown()
 		{
-			global $sqldb;
+			global $login, $sqldb;
 			
 			$sqldb->Verify();
+			$login->Level = $this->login->Level;
+			$login->Nr = $this->login->Nr;
+			
+			$sqldb->Verify();
 		}
 		
 		function ConstructorTest()
@@ -71,16 +82,30 @@
 		
 		function Split()
 		{
-			global $sqldb;
+			global $sqldb, $login;
 			
+			$login->Level = 0;	// Gast
+			
 			$testAutorNamen = "Schon Vorhanden, Wird Hinzugef?gt";
 			
+			$autoren = Autor::Split( $testAutorNamen );
+			
+			$result = $sqldb->Verify();
+			if( $result !== false )
+			{
+				$result->Unit = 'Autor';
+				$result->Test = 'Split (Gast)';
+				return $result;
+			}
+			
 			$testAutoren = array();
 			$testAutoren[] = new stdClass();
 			$testAutoren[] = new stdClass();
 			
 			$testAutoren[0]->Nr = 1;
 			$testAutoren[1]->Nr = 2;
+			
+			$login->Level = 1;	// Mitglied
 			 
 			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', $testAutoren[0] );
 			$sqldb->ExpectQuery( 'SELECT.*Autor_Nr.*WHERE.*Autorname', false  );
@@ -92,12 +117,12 @@
 			if( $result !== false )
 			{
 				$result->Unit = 'Autor';
-				$result->Test = 'Split';
+				$result->Test = 'Split (Mitglied)';
 				return $result;
 			}
 			
 			if( count($autoren) != count($testAutoren) )
-				return new ErrorMessage( 'Autor', 'Split', 'Anzahl Autoren', count($testAutoren), count($autoren) );
+				return new ErrorMessage( 'Autor', 'Split (Mitglied)', 'Anzahl Autoren', count($testAutoren), count($autoren) );
 			
 			return true;
 		}

Modified: trunk/include/tests/kommentar.php
===================================================================
--- trunk/include/tests/kommentar.php	2006-06-19 19:16:25 UTC (rev 176)
+++ trunk/include/tests/kommentar.php	2006-06-22 21:12:10 UTC (rev 177)
@@ -3,25 +3,43 @@
 	
 	class KommentarTest
 	{
+		var $login;
+		
 		function Setup()
 		{
+			global $login;
+			
+			$this->login = new stdClass();
+			$this->login->Level = $login->Level;
+			$this->login->Nr = $login->Nr;
 		}
 		
 		function TearDown()
 		{
-			global $sqldb;
+			global $sqldb, $login;
 			
 			$sqldb->Verify();
+			$login->Level = $this->login->Level;
+			$login->Nr = $this->login->Nr;
+			
+			$sqldb->Verify();
 		}
 		
+		function CreateKommentarData( $nr, $text, $mitglieds_nr, $vorname, $nachname )
+		{
+			$data = new stdClass();
+			$data->Nr = $nr;
+			$data->Text = $text;
+			$data->Mitglieds_Nr = $mitglieds_nr;
+			$data->Vorname = $vorname;
+			$data->Nachname = $nachname;
+			
+			return $data;
+		}
+		
 		function ConstructorTest()
 		{
-			$testData = new stdClass();
-			$testData->Nr = 1;
-			$testData->Text = "Das ist ein Kommentar";
-			$testData->Mitglieds_Nr = 2;
-			$testData->Vorname = "Max";
-			$testData->Nachname = "Mustermann";
+			$testData = CreateKommentarData( 1, "Das ist ein Kommentar", 2, "Max", "Mustermann" );
 			
 			$kommentar = new Kommentar($testData);
 			
@@ -40,9 +58,79 @@
 			return true; 
 		}
 		
+		function Delete()
+		{
+			global $sqldb, $login;
+			
+			$login->Rechte = 0;
+			
+			Kommentar::Delete( 0 );
+			
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Delete (Gast)';
+				return $dbResult;
+			}
+			
+			$login->Rechte = 1;
+			
+			$sqldb->ExpectQuery( 'DELETE FROM.*Kommentare.*WHERE.*Mitglieds_Nr.*', 1 );
+			
+			Kommentar::Delete( 0 );
+			
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Delete (Mitglied)';
+				return $dbResult;
+			}
+			
+			$login->Rechte = 2;
+			
+			$sqldb->ExpectQuery( 'DELETE FROM.*Kommentare.*WHERE.*', 1 );
+			
+			Kommentar::Delete( 0 );
+			
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Delete (Admin)';
+				return $dbResult;
+			}
+			
+			return true;
+		}
+		
 		function GetAll()
 		{
-			return new ErrorMessage( 'Kommentar', 'GetAll', 'Test nicht implementiert', null, null  );
+			global $sqldb;
+			
+			$testData = array();
+			$testData[] = CreateKommentarData( 1, "Das ist ein Kommentar", 1, "Max", "Mustermann" );
+			$testData[] = CreateKommentarData( 2, "Noch ein Kommentar", 2, "Fritz", "Fischer" );
+			
+			$sqldb->ExpectQuery( 'SELECT.*FROM.*Kommentare', $testData );
+			$result = Kommentar::GetAll();
+			
+			$dbResult = $sqldb->Verify();
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'GetAll';
+				return $dbResult;
+			}
+
+			if( count($testData) != count($result) )
+				return new ErrorMessage( 'Kommentar', 'GetAll', 'Anzahl Kommentare', count($testData), count($result) );
+			
+			return true;
 		}
 		
 		function Insert()
@@ -52,7 +140,43 @@
 		
 		function Update()
 		{
-			return new ErrorMessage( 'Kommentar', 'Update', 'Test nicht implementiert', null, null  );
+			global $login, $sqldb;
+			
+			$login->Rechte = 1;
+			
+			$sqldb->ExpectQuery( 'DELETE FROM.*Kommentare', 1 );
+			Kommentar::Update( 1, "" );		// Wenn Text leer ist, soll Kommentar gel?scht werden
+			$dbResult = $sqldb->Verify();
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Update (leer)';
+				return $dbResult; 
+			}
+			
+			$sqldb->ExpectQuery( 'UPDATE.*Kommentare.*WHERE.*Mitglieds_Nr', 1 );
+			Kommentar::Update( 1, "Neuer Text" );
+			$dbResult = $sqldb->Verify();
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Update (Mitglied)';
+				return $dbResult; 
+			}
+			
+			$login->Rechte = 2;
+			
+			$sqldb->ExpectQuery( 'UPDATE.*Kommentare.*WHERE', 1 );
+			Kommentar::Update( 1, "Neuer Text" );
+			$dbResult = $sqldb->Verify();
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Update (Admin)';
+				return $dbResult; 
+			}
+			
+			return true;
 		}
 	}
 ?>

Deleted: trunk/include/tests/literatur.php
===================================================================
--- trunk/include/tests/literatur.php	2006-06-19 19:16:25 UTC (rev 176)
+++ trunk/include/tests/literatur.php	2006-06-22 21:12:10 UTC (rev 177)
@@ -1,42 +0,0 @@
-<?php
-	require_once("include/tests/errormessage.php");
-	
-	class LiteraturTest
-	{
-		function Setup()
-		{
-		}
-		
-		function TearDown()
-		{
-			global $sqldb;
-			
-			$sqldb->Verify();
-		}
-		
-		function ConstructorTest()
-		{
-			return new ErrorMessage( 'Literatur', 'ctor', 'Test nicht implementiert', null, null );
-		}
-		
-		function Insert()
-		{
-			return new ErrorMessage( 'Literatur', 'Insert', 'Test nicht implementiert', null, null );
-		}
-		
-		function Update()
-		{
-			return new ErrorMessage( 'Literatur', 'Update', 'Test nicht implementiert', null, null );
-		}
-		
-		function InsertBibtex()
-		{
-			return new ErrorMessage( 'Literatur', 'InsertBibtex', 'Test nicht implementiert', null, null );
-		}
-		
-		function ToBibtex()
-		{
-			return new ErrorMessage( 'Literatur', 'ToBibtex', 'Test nicht implementiert', null, null );
-		}
-	}
-?>

Modified: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-19 19:16:25 UTC (rev 176)
+++ trunk/include/tests/mitglied.php	2006-06-22 21:12:10 UTC (rev 177)
@@ -3,29 +3,44 @@
 	
 	class MitgliedTest
 	{
+		var $login;
+		
 		function Setup()
 		{
+			global $login;
+			
+			$this->login = new stdClass();
+			$this->login->Level = $login->Level;
+			$this->login->Nr = $login->Nr;
 		}
 		
 		function TearDown()
 		{
-			global $sqldb;
+			global $sqldb, $login;
 			
 			$sqldb->Verify();
+			$login->Level = $this->login->Level;
+			$login->Nr = $this->login->Nr;
 		}
 		
+		function CreateMemberData( $nr, $login, $pass, $firstName, $name, $email, $rights )
+		{
+			$data = new stdClass();
+			$data->Nr = $nr;
+			$data->Login = $login;
+			$data->Passwort = Mitglied::PasswordHash($pass);
+			$data->Vorname = $firstName;
+			$data->Nachname = $name;
+			$data->Email = $email;
+			$data->Rechte = $rights;
+			return $data;
+		}
+		
 		function ConstructorTest()
 		{
 			global $sqldb;
 			
-			$testData = new stdClass();
-			$testData->Mitglieds_Nr = 1;
-			$testData->Login = "Maximator";
-			$testData->Passwort = Mitglied::PasswordHash("passwort");
-			$testData->Vorname = "Max";
-			$testData->Name = "Mustermann";
-			$testData->Email = "max.mustermann at gmx.de";
-			$testData->Rechte = "Benutzer";
+			$testData = CreateMemberData( 1, "Maximator", "passwort","Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
 			
 			$sqldb->ExpectQuery("SELECT.*FROM.*Mitglieder.*WHERE.*Mitglieds_Nr.*LIMIT 1", $testData );
 			
@@ -40,7 +55,7 @@
 			}
 			
 			if( $mitglied->Nr != $testData->Mitglieds_Nr )
-				return new ErrorMessage( 'Mitglied', 'ctor', 'Mitgliedsnummer falsch', $testData->Mitglieds_Nr, $mitglied->Nr );
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Mitgliedsnummer falsch', $testData->Mitglieds_Nr, $mitglied->Mitglieds_Nr );
 				
 			if( $mitglied->Login != $testData->Login )
 				return new ErrorMessage( 'Mitglied', 'ctor', 'Login falsch', $testData->Login, $mitglied->Login );
@@ -52,15 +67,243 @@
 				return new ErrorMessage( 'Mitglied', 'ctor', 'Vorname falsch', $testData->Vorname, $mitglied->Vorname );
 				
 			if( $mitglied->Nachname != $testData->Name )
-				return new ErrorMessage( 'Mitglied', 'ctor', 'Name falsch', $testData->Name, $mitglied->Nachname );
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Name falsch', $testData->Name, $mitglied->Name );
 				
 			if( $mitglied->Email != $testData->Email )
 				return new ErrorMessage( 'Mitglied', 'ctor', 'Email falsch', $testData->Email, $mitglied->Email );
 				
 			if( $mitglied->Rechte != 1 )
-				return new ErrorMessage( 'Mitglied', 'ctor', 'Rechte falsch', 1, $mitglied->Rechte );
+				return new ErrorMessage( 'Mitglied', 'ctor', 'Email falsch', 1, $mitglied->Rechte );
 				
 			return true;
 		}
+		
+		function Delete()
+		{
+			global $sqldb, $login;
+			
+			$login->Rechte = 1;		// Test mit Mitglied-Rechten
+			
+			$delResult = Mitglied::Delete( 1 );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true)
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'Delete (Mitglied)';
+				return $dbResult;
+			}
+			
+			if( $delResult !== false )	//	< Admin darf nicht l?schen
+			{
+				return new ErrorMessage( 'Mitglied', 'Delete (Mitglied)', 'R?ckgabewert', false, $delResult );
+			}
+			
+			// ------------------------------------------------
+			
+			$login->Rechte = 2;		// Test mit Admin-Rechten
+			
+			$sqldb->ExpectQuery( 'DELETE FROM.*Mitglieder.*WHERE', 1 );
+			
+			$delResult = Mitglied::Delete( 1 );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true)
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'Delete (Mitglied)';
+				return $dbResult;
+			}
+			
+			if( $delResult !== true )	// Admin darf l?schen
+			{
+				return new ErrorMessage( 'Mitglied', 'Delete (Admin)', 'R?ckgabewert', true, $delResult );
+			}
+			
+			return true;
+		}
+		
+		function Insert()
+		{
+			global $sqldb, $login;
+			
+			$login->Rechte = 1;		// Test mit Mitglied-Rechten
+			
+			$insResult = Mitglied::Insert( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true)
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'Insert (Mitglied)';
+				return $dbResult;
+			}
+			
+			if( $insResult !== false )	//	< Admin darf nicht hinzuf?gen
+			{
+				return new ErrorMessage( 'Mitglied', 'Insert (Mitglied)', 'R?ckgabewert', false, $insResult );
+			}
+			
+			// ------------------------------------------------
+			
+			$login->Rechte = 2;		// Test mit Admin-Rechten
+			
+			$sqldb->ExpectQuery( 'INSERT INTO.*Mitglieder.*VALUES', 1 );
+			
+			$insResult = Mitglied::Insert( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true)
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'Insert (Mitglied)';
+				return $dbResult;
+			}
+			
+			if( $insResult !== true )	// Admin darf hinzuf?gen
+			{
+				return new ErrorMessage( 'Mitglied', 'Insert (Admin)', 'R?ckgabewert', true, $insResult );
+			}
+			
+			return true;
+		}
+		
+		function Update()
+		{
+			global $sqldb, $login;
+			
+			$login->Rechte = 1;	// Test mit Mitglied-Rechten
+			$login->Nr = 3;		// aber falscher Nummer
+			$updResult = Mitglied::Update( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
+			
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true)
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'Update (anderes Mitglied)';
+				return $dbResult;
+			}
+			
+			if( $updResult !== false )	// fremder Nutzer darf nicht editieren
+			{
+				return new ErrorMessage( 'Mitglied', 'Update (Gast)', 'R?ckgabewert', false, $updResult );
+			}
+			
+			// ------------------------------------------------
+			
+			$login->Rechte = 1;	// Test mit Mitglied-Rechten
+			$login->Nr = 1;		// richtige Nummer
+			$sqldb->ExpectQuery( 'UPDATE.*Mitglieder.*WHERE', 1 );
+			
+			$updResult = Mitglied::Update( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
+			
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true)
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'Update (selbst)';
+				return $dbResult;
+			}
+			
+			if( $updResult !== true )	// man darf sich selbst editieren
+			{
+				return new ErrorMessage( 'Mitglied', 'Update (Gast)', 'R?ckgabewert', true, $updResult );
+			}
+			
+			// ------------------------------------------------
+			
+			$login->Rechte = 1;	// Test mit Administrator-Rechten
+			$login->Nr = 2;		// andere Nummer
+			$sqldb->ExpectQuery( 'UPDATE.*Mitglieder.*WHERE', 1 );
+			
+			$updResult = Mitglied::Update( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
+			
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true)
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'Update (Admin)';
+				return $dbResult;
+			}
+			
+			if( $updResult !== true )	// Admin darf alle editieren
+			{
+				return new ErrorMessage( 'Mitglied', 'Update (Gast)', 'R?ckgabewert', true, $updResult );
+			}
+			
+			return true;
+		}
+		
+		function GetAll()
+		{
+			global $sqldb, $login;
+			
+			$queryResult = array();
+			$queryResult[] = CreateMemberData( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" ); 
+			$queryResult[] = CreateMemberData( 2, "FischerFritze", "passwort", "Fritz", "fischer", "fritz at fischer.net", "Administrator" );
+			
+			$login->Level = 0;	// Test mit Gast-Rechten
+			
+			$members = Mitglied::GetAll();
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'GetAll (Gast)';
+				return $dbResult;
+			}
+			
+			if( count($members) != 0 )	// Gast bekommt keine Anzeige
+				return new ErrorMessage( 'Mitglied', 'GetAll (Gast)', 'Anzahl Mitglieder', 0, count($members) );
+				
+			// ------------------------------------------------
+			
+			$login->Nr = 1;
+			$login->Level = 1;	// Test mit Mitglied-Rechten
+			
+			$sqldb->ExpectQuery( "SELECT.*FROM.*Mitglieder.*WHERE.*Mitglieds_Nr\\s*=\\s*'1'", $queryResult[0] );
+			
+			$members = Mitglied::GetAll();
+			$dbResult = $sqldb->Verify();
+
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'GetAll (Mitglied)';
+				return $dbResult;
+			}
+			
+			if( count($members) != 1 )	// Mitglied bekommt nur sich selbst
+				return new ErrorMessage( 'Mitglied', 'GetAll (Mitglied)', 'Anzahl Mitglieder', 1, count($members) );
+				
+			if( $members[0]->Nr != 1 )	// nur einer wird angezeigt (Mitglied selbst)
+				return new ErrorMessage( 'Mitglied', 'GetAll (Mitglied)', 'Mitgliedsnummer', 1, $members[0]->Nr );
+				
+			// ------------------------------------------------
+			
+			$login->Nr = 2;
+			$login->Level = 2;	// Test mit Admin-Rechten
+			
+			$sqldb->ExpectQuery( 'SELECT.*FROM.*Mitglieder', $queryResult );
+			
+			$members = Mitglied::GetAll();
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Mitglied';
+				$dbResult->Test = 'GetAll (Admin)';
+				return $dbResult;
+			}
+			
+			if( count($members) != count($queryResult) )	// alle werden angezeigt
+				return new ErrorMessage( 'Mitglied', 'GetAll (Admin)', 'Anzahl Mitglieder', count($queryResult), count($members) );
+				
+			return true;
+		}
 	}
 ?>



From lazhur at berlios.de  Fri Jun 23 06:33:52 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Fri, 23 Jun 2006 06:33:52 +0200
Subject: [Liman-svn] r178 - in trunk: . docs/beleg3 include/tests
Message-ID: <200606230433.k5N4Xq9m000194@sheep.berlios.de>

Author: lazhur
Date: 2006-06-23 06:33:49 +0200 (Fri, 23 Jun 2006)
New Revision: 178

Modified:
   trunk/docs/beleg3/systemhandbuch.tex
   trunk/docs/beleg3/tests.tex
   trunk/include/tests/kommentar.php
   trunk/include/tests/mitglied.php
   trunk/test.php
Log:
- Tests korrigiert (Kommentar, Mitglied)
- Literatur aus test.php entfernt
- Literatur aus Unittestzeile der Testmatrix entfernt
- Dateigr?\195?\182?\195?\159en in Programm-Filesystem korrigiert
- In Programm-Filesystem Backslashes in Slashes ge?\195?\164ndert


Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-22 21:12:10 UTC (rev 177)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-23 04:33:49 UTC (rev 178)
@@ -29,69 +29,68 @@
 include/config.php anpassen.
 
 "Uberpr"ufen sie Ihre Einstellungen mit einem Login auf http://ihr.server.de/liman/ .
-Wenn alles korrekt installiert wurde, sollten abschlie?end noch die Datei install.php 
+Wenn alles korrekt installiert wurde, sollten abschlie"send noch die Datei install.php 
 aus dem Webserver-Verzeichnis gel"oscht werden, damit niemand die Datenbankverbindungsdaten neu 
 setzen kann.
 
 \section{Programm-Filesystem}
 {TODO}
-\begin{longtable}{|l|p{6.0cm}|p{2cm}|}
+\begin{longtable}{|l|p{6cm}|r|}
 \hline
 {\bf Bezeichnung der Datei} & {\bf Bedeutung} & {\bf Anzahl Bytes}\\
 \hline
 \endhead
 
-index.php & Startseite mit Letzte Literatur & 1196\\
+index.php & Startseite mit Letzte Literatur & 1364\\
 \hline
-login.php & login/logout mit Begr"u"sungstext & 836\\
+login.php & login/logout mit Begr"u"sungstext & 1384\\
 \hline
-user.php & Nutzerdetails & 1680\\
+user.php & Nutzerdetails & 1983\\
 \hline
-usermode.php & Nutzer l"oschen/"andern/hinzuf"ugen & 7892\\
+usermod.php & Nutzer l"oschen/"andern/hinzuf"ugen & 9534\\
 \hline
-userlist.php & Nutzerdaten anzeigen & 1924\\
+userlist.php & Nutzerdaten anzeigen & 2251\\
 \hline
-search.php & Suche (Ergebnisse) & 1893\\
+search.php & Suche (Ergebnisse) & 2245\\
 \hline
-searchmore.php & Suche (Formular) & 1284\\
+searchmore.php & Suche (Formular) & 1257\\
 \hline
-litmod.php & Literatur l"oschen / "andern / hinzuf"ugen & 10056\\
+litmod.php & Literatur l"oschen / "andern / hinzuf"ugen & 11701\\
 \hline
-commentmod.php & Kommentar l"oschen / "andern / hinzuf"ugen & 3089\\
+commentmod.php & Kommentar l"oschen / "andern / hinzuf"ugen & 4009\\
 \hline
-lit.php & Literaturdetails & 4436\\
+lit.php & Literaturdetails & 4771\\
 \hline
-bibtex.php & BibTeX Importieren & 2318\\
+bibtex.php & BibTeX Importieren & 2856\\
 \hline
-include$\backslash$config.php & Datenbankkonfiguration & 362\\
+include/config.php & Datenbankkonfiguration & 362\\
 \hline
-include$\backslash$global.php & Einrichtung Prog. - Umgebung & 1557\\
+include/global.php & Einrichtung Prog. - Umgebung & 1375\\
 \hline
-include$\backslash$literatur.php & Stellt Funktionen f"ur Literatur in Bibliothek zur Verf"ugung & 11846\\
+include/literatur.php & Stellt Funktionen f"ur Literatur in Bibliothek zur Verf"ugung & 13372\\
 \hline
-include$\backslash$mitglied.php & Stellt Funktionen f"ur Mitglieder bereit & 8436\\
+include/mitglied.php & Stellt Funktionen f"ur Mitglieder bereit & 9370\\
 \hline
-include$\backslash$suche.php & Durchsucht die Tabelle Bibliothek und Autoren "uber Volltextsuche & 7852\\
+include/suche.php & Durchsucht die Tabelle Bibliothek und Autoren "uber Volltextsuche & 8463\\
 \hline
-include$\backslash$footer.php & Ende jeder Html - Datei & 36 \\
+include/footer.php & Ende jeder HTML-Datei & 36 \\
 \hline
-include$\backslash$header.php & Kopf jeder Html-Datei & 2885 \\
+include/header.php & Kopf jeder HTML-Datei & 3236 \\
 \hline
-include$\backslash$literaturart.php & Speicherung aus der Datenbank oder BibTeX-Datei erhaltenen Art von Informationen & 3811\\
+include/literaturart.php & Speicherung aus der Datenbank oder BibTeX-Datei erhaltenen Art von Informationen & 3959\\
 \hline
-include$\backslash$sqldb.php & Datenbankzugriffsauswahl & 354 \\
+include/sqldb.php & Datenbankzugriffsauswahl & 481 \\
 \hline
-include$\backslash$autor.php & Stellt Funktionen f"ur Autoren bereit & 4608\\
+include/autor.php & Stellt Funktionen f"ur Autoren bereit & 5495\\
 \hline
-include$\backslash$formhelper.php & Hilfsfunktionen f"ur Formulare & 2278\\
+include/formhelper.php & Hilfsfunktionen f"ur Formulare & 2278\\
 \hline
-include$\backslash$kommentar.php & Stellt Funktionen f"ur Kommentare bereit & 7911\\
+include/kommentar.php & Stellt Funktionen f"ur Kommentare bereit & 9342\\
 \hline   
-include$\backslash$login.php &  Verwaltet die Session des Users und der damit entstehenden Rechte & 5243\\
+include/login.php &  Verwaltet die Session des Users und der damit entstehenden Rechte & 5414\\
 \hline
-include$\backslash$sqldbmysql.php & Startet eine Verbindung zum Datenbanksystem her und w"ahlt eine Datenbank & 6323\\
+include/sqldb\_mysql.php & Startet eine Verbindung zum Datenbanksystem her und w"ahlt eine Datenbank & 7212\\
 \hline
-
 \end{longtable}
 
 

Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-22 21:12:10 UTC (rev 177)
+++ trunk/docs/beleg3/tests.tex	2006-06-23 04:33:49 UTC (rev 178)
@@ -280,7 +280,7 @@
 	\multicolumn{1}{R{6em}|}{Installation}\\
 \hline\hline
 \endhead
- 1 &   &   &   &   &   &   & x & x & x & x &   & x & x &   &  \\\hline
+ 1 &   &   &   &   &   &   & x & x &   & x &   & x & x &   &  \\\hline
  2 & x &   &   &   &   &   &   &   &   &   &   &   &   & x & x\\\hline
  3 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline
  4 & x & x & x & x & x & x & x & x & x & x & x & x & x & x &  \\\hline

Modified: trunk/include/tests/kommentar.php
===================================================================
--- trunk/include/tests/kommentar.php	2006-06-22 21:12:10 UTC (rev 177)
+++ trunk/include/tests/kommentar.php	2006-06-23 04:33:49 UTC (rev 178)
@@ -39,7 +39,7 @@
 		
 		function ConstructorTest()
 		{
-			$testData = CreateKommentarData( 1, "Das ist ein Kommentar", 2, "Max", "Mustermann" );
+			$testData = $this->CreateKommentarData( 1, "Das ist ein Kommentar", 2, "Max", "Mustermann" );
 			
 			$kommentar = new Kommentar($testData);
 			
@@ -113,11 +113,11 @@
 			global $sqldb;
 			
 			$testData = array();
-			$testData[] = CreateKommentarData( 1, "Das ist ein Kommentar", 1, "Max", "Mustermann" );
-			$testData[] = CreateKommentarData( 2, "Noch ein Kommentar", 2, "Fritz", "Fischer" );
+			$testData[] = $this->CreateKommentarData( 1, "Das ist ein Kommentar", 1, "Max", "Mustermann" );
+			$testData[] = $this->CreateKommentarData( 2, "Noch ein Kommentar", 2, "Fritz", "Fischer" );
 			
 			$sqldb->ExpectQuery( 'SELECT.*FROM.*Kommentare', $testData );
-			$result = Kommentar::GetAll();
+			$result = Kommentar::GetAll(1);
 			
 			$dbResult = $sqldb->Verify();
 			if( $dbResult !== true )

Modified: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-22 21:12:10 UTC (rev 177)
+++ trunk/include/tests/mitglied.php	2006-06-23 04:33:49 UTC (rev 178)
@@ -40,7 +40,7 @@
 		{
 			global $sqldb;
 			
-			$testData = CreateMemberData( 1, "Maximator", "passwort","Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
+			$testData = $this->CreateMemberData( 1, "Maximator", "passwort","Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
 			
 			$sqldb->ExpectQuery("SELECT.*FROM.*Mitglieder.*WHERE.*Mitglieds_Nr.*LIMIT 1", $testData );
 			

Modified: trunk/test.php
===================================================================
--- trunk/test.php	2006-06-22 21:12:10 UTC (rev 177)
+++ trunk/test.php	2006-06-23 04:33:49 UTC (rev 178)
@@ -110,41 +110,6 @@
 				$kommentarTest->TearDown();
 				echo "</tr>";
 				
-				// Literatur
-				require_once("include/literatur.php");
-				require_once("include/tests/literatur.php");
-				$literaturTest = new LiteraturTest();
-
-				echo "<tr><td>Literatur::Literatur()</td>";
-				$literaturTest->Setup();
-				PrintTestResults($literaturTest->ConstructorTest());
-				$literaturTest->TearDown();
-				echo "</tr>";
-				
-				echo "<tr><td>Literatur::Insert()</td>";
-				$literaturTest->Setup();
-				PrintTestResults($literaturTest->Insert());
-				$literaturTest->TearDown();
-				echo "</tr>";
-				
-				echo "<tr><td>Literatur::Update()</td>";
-				$literaturTest->Setup();
-				PrintTestResults($literaturTest->Update());
-				$literaturTest->TearDown();
-				echo "</tr>";
-				
-				echo "<tr><td>Literatur::InsertBibtex()</td>";
-				$literaturTest->Setup();
-				PrintTestResults($literaturTest->InsertBibtex());
-				$literaturTest->TearDown();
-				echo "</tr>";
-				
-				echo "<tr><td>Literatur::ToBibtex()</td>";
-				$literaturTest->Setup();
-				PrintTestResults($literaturTest->ToBibtex());
-				$literaturTest->TearDown();
-				echo "</tr>";
-				
 				// Mitglied
 				require_once("include/mitglied.php");
 				require_once("include/tests/mitglied.php");



From fwilhelm at berlios.de  Sat Jun 24 12:05:54 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Sat, 24 Jun 2006 12:05:54 +0200
Subject: [Liman-svn] r179 - in trunk: . include/tests
Message-ID: <200606241005.k5OA5sH7022063@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-24 12:05:53 +0200 (Sat, 24 Jun 2006)
New Revision: 179

Modified:
   trunk/include/tests/autor.php
   trunk/include/tests/kommentar.php
   trunk/include/tests/mitglied.php
   trunk/include/tests/sqldb_mock.php
   trunk/include/tests/suche.php
   trunk/test.php
Log:
Fehler bei SQLDB_Mock::Verify korregiert,
test.php verfollst?\195?\164ndigt

Modified: trunk/include/tests/autor.php
===================================================================
--- trunk/include/tests/autor.php	2006-06-23 04:33:49 UTC (rev 178)
+++ trunk/include/tests/autor.php	2006-06-24 10:05:53 UTC (rev 179)
@@ -1,5 +1,6 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/autor.php");
 	
 	class AutorTest
 	{
@@ -91,7 +92,7 @@
 			$autoren = Autor::Split( $testAutorNamen );
 			
 			$result = $sqldb->Verify();
-			if( $result !== false )
+			if( $result !== true )
 			{
 				$result->Unit = 'Autor';
 				$result->Test = 'Split (Gast)';
@@ -114,7 +115,7 @@
 			$autoren = Autor::Split( $testAutorNamen );
 
 			$result = $sqldb->Verify();
-			if( $result !== false )
+			if( $result !== true )
 			{
 				$result->Unit = 'Autor';
 				$result->Test = 'Split (Mitglied)';

Modified: trunk/include/tests/kommentar.php
===================================================================
--- trunk/include/tests/kommentar.php	2006-06-23 04:33:49 UTC (rev 178)
+++ trunk/include/tests/kommentar.php	2006-06-24 10:05:53 UTC (rev 179)
@@ -1,5 +1,6 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/kommentar.php");
 	
 	class KommentarTest
 	{

Modified: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-23 04:33:49 UTC (rev 178)
+++ trunk/include/tests/mitglied.php	2006-06-24 10:05:53 UTC (rev 179)
@@ -1,5 +1,6 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/mitglied.php");
 	
 	class MitgliedTest
 	{
@@ -242,8 +243,8 @@
 			global $sqldb, $login;
 			
 			$queryResult = array();
-			$queryResult[] = CreateMemberData( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" ); 
-			$queryResult[] = CreateMemberData( 2, "FischerFritze", "passwort", "Fritz", "fischer", "fritz at fischer.net", "Administrator" );
+			$queryResult[] = $this->CreateMemberData( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" ); 
+			$queryResult[] = $this->CreateMemberData( 2, "FischerFritze", "passwort", "Fritz", "fischer", "fritz at fischer.net", "Administrator" );
 			
 			$login->Level = 0;	// Test mit Gast-Rechten
 			

Modified: trunk/include/tests/sqldb_mock.php
===================================================================
--- trunk/include/tests/sqldb_mock.php	2006-06-23 04:33:49 UTC (rev 178)
+++ trunk/include/tests/sqldb_mock.php	2006-06-24 10:05:53 UTC (rev 179)
@@ -111,7 +111,7 @@
 			}
 		}
 		
-		var $error = false;
+		var $error = true;
 		var $patterns = array();
 		var $results = array();
 		var $queryCounter = 0;
@@ -144,7 +144,7 @@
 		function Verify()
 		{
 			$ret = $this->error;
-			if( ($ret === false) && (count($this->results) != $this->queryCounter) )
+			if( ($ret === true) && (count($this->results) != $this->queryCounter) )
 			{
 				$ret = new ErrorMessage( null, null, "Anzahl Queries", count($this->results), $this->queryCounter );
 			}
@@ -154,7 +154,7 @@
 			}
 			
 			// reset
-			$this->error = false;
+			$this->error = true;
 			$this->error_msg = false;
 			$this->patterns = array();
 			$this->results = array();
@@ -165,7 +165,7 @@
 		
 		function Query($query)
 		{
-			if( $this->isOpen && ($this->error_msg === false) )
+			if( $this->isOpen && ($this->error === true) && ($this->error_msg === false) )
 			{
 				if( count($this->patterns) <= $this->queryCounter )
 				{

Modified: trunk/include/tests/suche.php
===================================================================
--- trunk/include/tests/suche.php	2006-06-23 04:33:49 UTC (rev 178)
+++ trunk/include/tests/suche.php	2006-06-24 10:05:53 UTC (rev 179)
@@ -1,7 +1,7 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/suche.php");
 	
-	
 	class SucheTest
 	{
 		var $suche;

Modified: trunk/test.php
===================================================================
--- trunk/test.php	2006-06-23 04:33:49 UTC (rev 178)
+++ trunk/test.php	2006-06-24 10:05:53 UTC (rev 179)
@@ -120,6 +120,30 @@
 				PrintTestResults($mitgliedTest->ConstructorTest());
 				$mitgliedTest->TearDown();
 				echo "</tr>";
+				
+				echo "<tr><td>Mitglied::GetAll()</td>";
+				$mitgliedTest->Setup();
+				PrintTestResults($mitgliedTest->GetAll());
+				$mitgliedTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Mitglied::Insert()</td>";
+				$mitgliedTest->Setup();
+				PrintTestResults($mitgliedTest->Insert());
+				$mitgliedTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Mitglied::Update()</td>";
+				$mitgliedTest->Setup();
+				PrintTestResults($mitgliedTest->Update());
+				$mitgliedTest->TearDown();
+				echo "</tr>";
+				
+				echo "<tr><td>Mitglied::Delete()</td>";
+				$mitgliedTest->Setup();
+				PrintTestResults($mitgliedTest->Delete());
+				$mitgliedTest->TearDown();
+				echo "</tr>";
 			?>
 		</tbody>
 	</table>



From fwilhelm at berlios.de  Sat Jun 24 12:18:53 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Sat, 24 Jun 2006 12:18:53 +0200
Subject: [Liman-svn] r180 - in trunk: docs/beleg3 include/tests
Message-ID: <200606241018.k5OAIrum023682@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-24 12:18:53 +0200 (Sat, 24 Jun 2006)
New Revision: 180

Modified:
   trunk/docs/beleg3/programmdokumentation.tex
   trunk/docs/beleg3/tests.tex
   trunk/include/tests/autor.php
   trunk/include/tests/kommentar.php
   trunk/include/tests/mitglied.php
   trunk/include/tests/suche.php
Log:
Dummheitsfehler beseitigt (falsche Vergleiche, falsche Membernamen, etc.)

Modified: trunk/docs/beleg3/programmdokumentation.tex
===================================================================
--- trunk/docs/beleg3/programmdokumentation.tex	2006-06-24 10:05:53 UTC (rev 179)
+++ trunk/docs/beleg3/programmdokumentation.tex	2006-06-24 10:18:53 UTC (rev 180)
@@ -3,4 +3,4 @@
 %\input{interfaces_code}
 
 % Tests
-\input{tests}
\ No newline at end of file
+\input{tests}

Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-24 10:05:53 UTC (rev 179)
+++ trunk/docs/beleg3/tests.tex	2006-06-24 10:18:53 UTC (rev 180)
@@ -1,7 +1,17 @@
 \section{Testplan}
 \subsection{Testf?lle}
 
-TODO: Fall 1 - Unittests
+\subsubsection{Fall 1: Unit Tests}
+\begin{enumerate}
+\item Systemzustand vor dem Test:\\
+	TODO: H?bsche Formulierung f?r: egal, wird nicht benutzt
+\item Eingabedaten:\\
+	test.php wird aufgerufen. Sonstige Eingaben werden fest im Code der Tests durchgef?hrt.
+\item Erwartete Ereignisse:\\
+	Alle Tests liefern "OK" zur?ck
+\item Systemzustand nach Test:\\
+	Unver?ndert, wie vor dem Test.
+\end{enumerate}
 
 \subsubsection{Fall 2: Installation}
 \begin{enumerate}

Modified: trunk/include/tests/autor.php
===================================================================
--- trunk/include/tests/autor.php	2006-06-24 10:05:53 UTC (rev 179)
+++ trunk/include/tests/autor.php	2006-06-24 10:18:53 UTC (rev 180)
@@ -1,5 +1,6 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/tests/sqldb_mock.php");
 	require_once("include/autor.php");
 	
 	class AutorTest

Modified: trunk/include/tests/kommentar.php
===================================================================
--- trunk/include/tests/kommentar.php	2006-06-24 10:05:53 UTC (rev 179)
+++ trunk/include/tests/kommentar.php	2006-06-24 10:18:53 UTC (rev 180)
@@ -1,5 +1,6 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/tests/sqldb_mock.php");
 	require_once("include/kommentar.php");
 	
 	class KommentarTest

Modified: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-24 10:05:53 UTC (rev 179)
+++ trunk/include/tests/mitglied.php	2006-06-24 10:18:53 UTC (rev 180)
@@ -1,5 +1,6 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/tests/sqldb_mock.php");
 	require_once("include/mitglied.php");
 	
 	class MitgliedTest
@@ -83,7 +84,7 @@
 		{
 			global $sqldb, $login;
 			
-			$login->Rechte = 1;		// Test mit Mitglied-Rechten
+			$login->Level = 1;		// Test mit Mitglied-Rechten
 			
 			$delResult = Mitglied::Delete( 1 );
 			$dbResult = $sqldb->Verify();
@@ -95,32 +96,28 @@
 				return $dbResult;
 			}
 			
-			if( $delResult !== false )	//	< Admin darf nicht l?schen
+			if( $delResult === true )	//	< Admin darf nicht l?schen
 			{
-				return new ErrorMessage( 'Mitglied', 'Delete (Mitglied)', 'R?ckgabewert', false, $delResult );
+				return new ErrorMessage( 'Mitglied', 'Delete (Mitglied)', 'R?ckgabewert', false, $delResult );
 			}
 			
 			// ------------------------------------------------
 			
-			$login->Rechte = 2;		// Test mit Admin-Rechten
+			$login->Level = 2;		// Test mit Admin-Rechten
 			
-			$sqldb->ExpectQuery( 'DELETE FROM.*Mitglieder.*WHERE', 1 );
+			$sqldb->ExpectQuery( 'DELETE FROM.*Mitglieder.*WHERE', 1 );	// Mitglied l?schen
+			$sqldb->ExpectQuery( "DELETE FROM.*Kommentare.*WHERE Mitglieds_Nr = '1'" );	// Kommentare aufr?umen
 			
-			$delResult = Mitglied::Delete( 1 );
+			Mitglied::Delete( 1 );
 			$dbResult = $sqldb->Verify();
 			
 			if( $dbResult !== true)
 			{
 				$dbResult->Unit = 'Mitglied';
-				$dbResult->Test = 'Delete (Mitglied)';
+				$dbResult->Test = 'Delete (Admin)';
 				return $dbResult;
 			}
 			
-			if( $delResult !== true )	// Admin darf l?schen
-			{
-				return new ErrorMessage( 'Mitglied', 'Delete (Admin)', 'R?ckgabewert', true, $delResult );
-			}
-			
 			return true;
 		}
 		
@@ -128,7 +125,7 @@
 		{
 			global $sqldb, $login;
 			
-			$login->Rechte = 1;		// Test mit Mitglied-Rechten
+			$login->Level = 1;		// Test mit Mitglied-Rechten
 			
 			$insResult = Mitglied::Insert( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
 			$dbResult = $sqldb->Verify();
@@ -147,7 +144,7 @@
 			
 			// ------------------------------------------------
 			
-			$login->Rechte = 2;		// Test mit Admin-Rechten
+			$login->Level = 2;		// Test mit Admin-Rechten
 			
 			$sqldb->ExpectQuery( 'INSERT INTO.*Mitglieder.*VALUES', 1 );
 			
@@ -173,7 +170,7 @@
 		{
 			global $sqldb, $login;
 			
-			$login->Rechte = 1;	// Test mit Mitglied-Rechten
+			$login->Level = 1;	// Test mit Mitglied-Rechten
 			$login->Nr = 3;		// aber falscher Nummer
 			$updResult = Mitglied::Update( 1, "Maximator", "passwort", "Max", "Mustermann", "max.mustermann at gmx.de", "Benutzer" );
 			
@@ -193,7 +190,7 @@
 			
 			// ------------------------------------------------
 			
-			$login->Rechte = 1;	// Test mit Mitglied-Rechten
+			$login->Level = 1;	// Test mit Mitglied-Rechten
 			$login->Nr = 1;		// richtige Nummer
 			$sqldb->ExpectQuery( 'UPDATE.*Mitglieder.*WHERE', 1 );
 			
@@ -215,7 +212,7 @@
 			
 			// ------------------------------------------------
 			
-			$login->Rechte = 1;	// Test mit Administrator-Rechten
+			$login->Level = 2;	// Test mit Administrator-Rechten
 			$login->Nr = 2;		// andere Nummer
 			$sqldb->ExpectQuery( 'UPDATE.*Mitglieder.*WHERE', 1 );
 			

Modified: trunk/include/tests/suche.php
===================================================================
--- trunk/include/tests/suche.php	2006-06-24 10:05:53 UTC (rev 179)
+++ trunk/include/tests/suche.php	2006-06-24 10:18:53 UTC (rev 180)
@@ -1,5 +1,6 @@
 <?php
 	require_once("include/tests/errormessage.php");
+	require_once("include/tests/sqldb_mock.php");
 	require_once("include/suche.php");
 	
 	class SucheTest



From lazhur at berlios.de  Sat Jun 24 12:36:14 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sat, 24 Jun 2006 12:36:14 +0200
Subject: [Liman-svn] r181 - in trunk: docs/beleg3 include/tests
Message-ID: <200606241036.k5OAaEOM027939@sheep.berlios.de>

Author: lazhur
Date: 2006-06-24 12:36:13 +0200 (Sat, 24 Jun 2006)
New Revision: 181

Modified:
   trunk/docs/beleg3/tests.tex
   trunk/include/tests/mitglied.php
Log:
- Beschreibung f?\195?\188r Systemzustand in Unittests hinzugef?\195?\188gt
- Fehlenden Parameter in MitgliedTest::Insert f?\195?\188r ExpectQuery hinzugef?\195?\188gt


Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-24 10:18:53 UTC (rev 180)
+++ trunk/docs/beleg3/tests.tex	2006-06-24 10:36:13 UTC (rev 181)
@@ -4,7 +4,7 @@
 \subsubsection{Fall 1: Unit Tests}
 \begin{enumerate}
 \item Systemzustand vor dem Test:\\
-	TODO: H?bsche Formulierung f?r: egal, wird nicht benutzt
+	Alle Speicher sind vom System entkoppelt. Je nach Test werden spezielle, virtuelle Speicher angelegt, die auf den jeweiligen Test zugeschnitten sind. Allgemein werden dazu f?r Abfragen, ?nderungs- und L?schaktionen statische Datens?tze erstellt, die als Resultate behandelt werden. F?r Einf?geaktionen werden leere virtuelle Speicher angenommen.
 \item Eingabedaten:\\
 	test.php wird aufgerufen. Sonstige Eingaben werden fest im Code der Tests durchgef?hrt.
 \item Erwartete Ereignisse:\\

Modified: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-24 10:18:53 UTC (rev 180)
+++ trunk/include/tests/mitglied.php	2006-06-24 10:36:13 UTC (rev 181)
@@ -106,7 +106,7 @@
 			$login->Level = 2;		// Test mit Admin-Rechten
 			
 			$sqldb->ExpectQuery( 'DELETE FROM.*Mitglieder.*WHERE', 1 );	// Mitglied l?schen
-			$sqldb->ExpectQuery( "DELETE FROM.*Kommentare.*WHERE Mitglieds_Nr = '1'" );	// Kommentare aufr?umen
+			$sqldb->ExpectQuery( "DELETE FROM.*Kommentare.*WHERE Mitglieds_Nr = '1'", false );	// Kommentare aufr?umen
 			
 			Mitglied::Delete( 1 );
 			$dbResult = $sqldb->Verify();



From fwilhelm at berlios.de  Sat Jun 24 12:55:30 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Sat, 24 Jun 2006 12:55:30 +0200
Subject: [Liman-svn] r182 - in trunk: . include/tests
Message-ID: <200606241055.k5OAtUFh003399@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-24 12:55:03 +0200 (Sat, 24 Jun 2006)
New Revision: 182

Modified:
   trunk/include/tests/kommentar.php
   trunk/include/tests/mitglied.php
   trunk/test.php
Log:
Test f?\195?\188r Kommentar::Insert implementiert,
Test f?\195?\188r Kommentar::Delete in test.php aufgenommen

Modified: trunk/include/tests/kommentar.php
===================================================================
--- trunk/include/tests/kommentar.php	2006-06-24 10:36:13 UTC (rev 181)
+++ trunk/include/tests/kommentar.php	2006-06-24 10:55:03 UTC (rev 182)
@@ -20,7 +20,6 @@
 		{
 			global $sqldb, $login;
 			
-			$sqldb->Verify();
 			$login->Level = $this->login->Level;
 			$login->Nr = $this->login->Nr;
 			
@@ -64,7 +63,7 @@
 		{
 			global $sqldb, $login;
 			
-			$login->Rechte = 0;
+			$login->Level = 0;
 			
 			Kommentar::Delete( 0 );
 			
@@ -77,7 +76,7 @@
 				return $dbResult;
 			}
 			
-			$login->Rechte = 1;
+			$login->Level = 1;
 			
 			$sqldb->ExpectQuery( 'DELETE FROM.*Kommentare.*WHERE.*Mitglieds_Nr.*', 1 );
 			
@@ -92,7 +91,7 @@
 				return $dbResult;
 			}
 			
-			$login->Rechte = 2;
+			$login->Level = 2;
 			
 			$sqldb->ExpectQuery( 'DELETE FROM.*Kommentare.*WHERE.*', 1 );
 			
@@ -137,14 +136,95 @@
 		
 		function Insert()
 		{
-			return new ErrorMessage( 'Kommentar', 'Insert', 'Test nicht implementiert', null, null  );
+			global $login, $sqldb;
+			
+			$login->Level = 0;
+			
+			Kommentar::Insert( "Ein Kommentar", 1, 1 );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Insert (Gast)';
+				return $dbResult;
+			}
+			
+			//----------------------------------------------------------------
+			
+			$login->Level = 1;
+			$login->Nr = 1;
+			
+			Kommentar::Insert( "Noch ein Kommentar", 2, 1 );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Insert (anderes Mitglied)';
+				return $dbResult;
+			}
+			
+			//----------------------------------------------------------------
+			$sqldb->ExpectQuery( "SELECT Literatur_Nr FROM .*Bibliothek".
+			                     " WHERE Literatur_Nr", false );
+			
+			Kommentar::Insert( "Noch ein Kommentar", 1, 1 );
+			
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Insert (ohne Literatur)';
+				return $dbResult;
+			}
+			
+			//----------------------------------------------------------------
+			$sqldb->ExpectQuery( "SELECT Literatur_Nr FROM .*Bibliothek".
+			                     " WHERE Literatur_Nr", new stdClass() );	// Ergebniss darf nicht leer sein
+			$sqldb->ExpectQuery( "SELECT Kommentar_Nr FROM .*Kommentare WHERE Literatur_Nr.* AND Mitglieds_Nr.*", false );
+			$sqldb->ExpectQuery( "INSERT INTO .*Kommentare", 1 );
+			
+			Kommentar::Insert( "Noch ein Kommentar", 1, 1 );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Insert (Mitglied)';
+				return $dbResult;
+			}
+			
+			//----------------------------------------------------------------
+			$login->Level = 2;
+			
+			$sqldb->ExpectQuery( "SELECT Literatur_Nr FROM .*Bibliothek".
+			                     " WHERE Literatur_Nr", new stdClass() );
+			$queryResult = new stdClass();
+			$queryResult->Kommentar_Nr = 1;
+			$sqldb->ExpectQuery( "SELECT Kommentar_Nr FROM .*Kommentare".
+			                     " WHERE Literatur_Nr.* AND Mitglieds_Nr.*", $queryResult );
+			$sqldb->ExpectQuery( "UPDATE .*Kommentare", 1 );
+			
+			Kommentar::Insert( "Noch ein Kommentar", 2, 1 );
+			$dbResult = $sqldb->Verify();
+			
+			if( $dbResult !== true )
+			{
+				$dbResult->Unit = 'Kommentar';
+				$dbResult->Test = 'Insert (Admin)';
+				return $dbResult;
+			}
+			
+			return true;
 		}
 		
 		function Update()
 		{
 			global $login, $sqldb;
 			
-			$login->Rechte = 1;
+			$login->Level = 1;
 			
 			$sqldb->ExpectQuery( 'DELETE FROM.*Kommentare', 1 );
 			Kommentar::Update( 1, "" );		// Wenn Text leer ist, soll Kommentar gel?scht werden
@@ -166,7 +246,7 @@
 				return $dbResult; 
 			}
 			
-			$login->Rechte = 2;
+			$login->Level = 2;
 			
 			$sqldb->ExpectQuery( 'UPDATE.*Kommentare.*WHERE', 1 );
 			Kommentar::Update( 1, "Neuer Text" );

Modified: trunk/include/tests/mitglied.php
===================================================================
--- trunk/include/tests/mitglied.php	2006-06-24 10:36:13 UTC (rev 181)
+++ trunk/include/tests/mitglied.php	2006-06-24 10:55:03 UTC (rev 182)
@@ -106,7 +106,7 @@
 			$login->Level = 2;		// Test mit Admin-Rechten
 			
 			$sqldb->ExpectQuery( 'DELETE FROM.*Mitglieder.*WHERE', 1 );	// Mitglied l?schen
-			$sqldb->ExpectQuery( "DELETE FROM.*Kommentare.*WHERE Mitglieds_Nr = '1'", false );	// Kommentare aufr?umen
+			$sqldb->ExpectQuery( "DELETE FROM.*Kommentare.*WHERE Mitglieds_Nr = '1'", 1 );	// Kommentare aufr?umen
 			
 			Mitglied::Delete( 1 );
 			$dbResult = $sqldb->Verify();

Modified: trunk/test.php
===================================================================
--- trunk/test.php	2006-06-24 10:36:13 UTC (rev 181)
+++ trunk/test.php	2006-06-24 10:55:03 UTC (rev 182)
@@ -110,6 +110,12 @@
 				$kommentarTest->TearDown();
 				echo "</tr>";
 				
+				echo "<tr><td>Kommentar::Delete()</td>";
+				$kommentarTest->Setup();
+				PrintTestResults($kommentarTest->Delete());
+				$kommentarTest->TearDown();
+				echo "</tr>";
+				
 				// Mitglied
 				require_once("include/mitglied.php");
 				require_once("include/tests/mitglied.php");



From lazhur at berlios.de  Sat Jun 24 14:12:48 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sat, 24 Jun 2006 14:12:48 +0200
Subject: [Liman-svn] r183 - in trunk: . docs/beleg3
Message-ID: <200606241212.k5OCCmvZ000747@sheep.berlios.de>

Author: lazhur
Date: 2006-06-24 14:12:46 +0200 (Sat, 24 Jun 2006)
New Revision: 183

Modified:
   trunk/Makefile
   trunk/docs/beleg3/systemhandbuch.tex
Log:
- Fehlendes "design/liman.css" zu Dateiliste hinzugef?\195?\188gt
- Makefile entfernt svn-Dateien und CSS des Unittests


Modified: trunk/Makefile
===================================================================
--- trunk/Makefile	2006-06-24 10:55:03 UTC (rev 182)
+++ trunk/Makefile	2006-06-24 12:12:46 UTC (rev 183)
@@ -5,7 +5,9 @@
 FILES=*.php include design
 DROP=\
 	$(DISTDIR)/$(PACKAGE)-$(VERSION)/test.php\
-	$(DISTDIR)/$(PACKAGE)-$(VERSION)/include/tests
+	$(DISTDIR)/$(PACKAGE)-$(VERSION)/include/tests\
+	$(DISTDIR)/$(PACKAGE)-$(VERSION)/design/unittest.css\
+	$(DISTDIR)/$(PACKAGE)-$(VERSION)/*/.svn
 default:	dist
 dist:		$(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz
 $(DISTDIR)/$(PACKAGE)-$(VERSION).tar.gz: $(DEPEND) 

Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-24 10:55:03 UTC (rev 182)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-24 12:12:46 UTC (rev 183)
@@ -38,7 +38,7 @@
 \begin{longtable}{|l|p{6cm}|r|}
 \hline
 {\bf Bezeichnung der Datei} & {\bf Bedeutung} & {\bf Anzahl Bytes}\\
-\hline
+\hline\hline
 \endhead
 
 index.php & Startseite mit Letzte Literatur & 1364\\
@@ -63,6 +63,8 @@
 \hline
 bibtex.php & BibTeX Importieren & 2856\\
 \hline
+design/liman.css & Stylesheet f?r CSS & 2097\\
+\hline
 include/config.php & Datenbankkonfiguration & 362\\
 \hline
 include/global.php & Einrichtung Prog. - Umgebung & 1375\\



From lazhur at berlios.de  Sat Jun 24 14:16:39 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Sat, 24 Jun 2006 14:16:39 +0200
Subject: [Liman-svn] r184 - trunk/docs/beleg3
Message-ID: <200606241216.k5OCGdIQ002837@sheep.berlios.de>

Author: lazhur
Date: 2006-06-24 14:16:37 +0200 (Sat, 24 Jun 2006)
New Revision: 184

Modified:
   trunk/docs/beleg3/systemhandbuch.tex
Log:
- Sinnlose Beschreibung f?\195?\188r liman.css korrigiert


Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-24 12:12:46 UTC (rev 183)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-24 12:16:37 UTC (rev 184)
@@ -63,7 +63,7 @@
 \hline
 bibtex.php & BibTeX Importieren & 2856\\
 \hline
-design/liman.css & Stylesheet f?r CSS & 2097\\
+design/liman.css & Stylesheet f?r LiMan & 2097\\
 \hline
 include/config.php & Datenbankkonfiguration & 362\\
 \hline



From lazhur at berlios.de  Mon Jun 26 19:28:16 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 26 Jun 2006 19:28:16 +0200
Subject: [Liman-svn] r185 - trunk/docs/beleg3
Message-ID: <200606261728.k5QHSGsJ017343@sheep.berlios.de>

Author: lazhur
Date: 2006-06-26 19:28:15 +0200 (Mon, 26 Jun 2006)
New Revision: 185

Modified:
   trunk/docs/beleg3/tests.tex
Log:
- Systemtest hinzugef?\195?\188gt
- Zeitplan und Verantwortlichkeiten hinzugef?\195?\188gt
- Abschlu?\195?\159einsch?\195?\164tzung hinzugef?\195?\188gt
- Tippfehler in Testf?\195?\164llen korrigiert


Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-24 12:16:37 UTC (rev 184)
+++ trunk/docs/beleg3/tests.tex	2006-06-26 17:28:15 UTC (rev 185)
@@ -126,7 +126,7 @@
 \item Systemzustand vor dem Test:\\
 	Alle Speicher bis auf Mitglieder sind leer. In Mitglieder ist nur der Datensatz des ersten Administrators.
 \item Eingabedaten:\\
-	Begonnen wird der Test mit dem Anmelden als Administrator. Neues Mitglied wird mit dem Login des Administratos angelegt. Beendet wird der Test mit dem Abmelden.
+	Begonnen wird der Test mit dem Anmelden als Administrator. Neues Mitglied wird mit dem Login des Administrators angelegt. Beendet wird der Test mit dem Abmelden.
 \item Erwartete Ereignisse:\\
 	System gibt Fehlermeldung aus.
 \item Systemzustand nach Test:\\
@@ -314,6 +314,42 @@
 22 & x &   &   &   &   & x & x &   &   & x &   &   & x & x &  \\\hline
 \end{longtable}
 
+\subsection{Zeitplan und Verantwortlichkeiten}
+Verantwortlich f?r die Vorbereitung, Durchf?hrung und Auswertung der Tests waren Frank Wilhelm und Sven Eckelmann. Abh?ngigkeiten zwischen den einzelnen Testf?llen besteht nicht. Alle Tests wurden mehrfach zwischen 30.04. und 26.06.2006 durchgef?hrt. Ein abschlie?ender Test erfolgte am 26.06.2006.
+
 \section{Systemtest}
+\begin{longtable}{|c|p{8cm}|c|c|}
+\hline
+	\textbf{Testfall} & 
+	\textbf{Ergebnis} &
+	\textbf{korrekt} &
+	\textbf{nicht korrekt}\\
+\hline\hline
+\endhead
 
+ 1 & Alle Klassentests geben ``OK'' zur?ck. & x &  \\\hline
+ 2 & Speicher wurden angelegt bzw. gel?scht und danach neu angelegt. Neuer Administrator ist angelegt. & x &  \\\hline
+ 3 & Anzeige aller Ansichten. Kein Speicher wurde ge?ndert. & x &  \\\hline
+ 4 & Anzeige aller Ansichten, au?er gesperrter Ansichten. Kein Speicher wurde ge?ndert. & x &  \\\hline
+ 5 & Anzeige aller Ansichten, au?er gesperrter Ansichten. Kein Speicher wurde ge?ndert. & x &  \\\hline
+ 6 & Neue Literatur wurde angelegt und wird in Literaturinformation angezeigt. Neue Autoren wurden in Autoren abgelegt und mit Literatur verkn?pft. Kein weiterer Speicher wurde ge?ndert. & x &  \\\hline
+ 7 & Neue Literatur wurde nach Best?tigung angelegt und wird in Literaturinformation angezeigt. Neue Autoren wurden in Autoren abgelegt und mit Literatur verkn?pft. Kein weiterer Speicher wurde ge?ndert. & x &  \\\hline
+ 8 & Literatur wurde ge?ndert und wird in Literaturinformation angezeigt. Neue Autoren wurden in Autoren abgelegt, alte entfernt und neue mit Literatur verkn?pft. Kein weiterer Speicher wurde ge?ndert. & x &  \\\hline
+ 9 & Literatur wurde entfernt. Alte Autoren wurden genauso wie ihre Verkn?pfungen entfernt. Kein weiterer Speicher wurde ge?ndert. & x &  \\\hline
+10 & Neuer Nutzer wurde angelegt und wird angezeigt. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+11 & Fehler wurde beim Anlegen ausgegeben. Keine Speicher wurden ge?ndert. & x &  \\\hline
+12 & Nutzer wurde ge?ndert und wird angezeigt. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+13 & Eigener Nutzer wurde ge?ndert und wird angezeigt. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+14 & Nutzer wurde gel?scht. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+15 & Neuer Kommentar wurde angelegt und wird in Literaturinformation angezeigt. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+16 & Kommentar wurde ge?ndert und wird in Literaturinformation angezeigt. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+17 & Kommentar wurde gel?scht. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+18 & Kommentar wurde gel?scht. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+19 & Literatur wurde entfernt. Alte Autoren wurden genauso wie ihre Verkn?pfungen und Kommentare entfernt. Kein weiterer Speicher wurde ge?ndert. & x &  \\\hline
+20 & Nutzer wurde mit dazugeh?rigen Kommentaren gel?scht. Keine weiteren Speicher wurden ge?ndert. & x &  \\\hline
+21 & Alle gesuchten B?cher wurden gefunden, ausgegeben und k?nnen ausgew?hlt werden. & x &  \\\hline
+22 & Alle gesuchten B?cher wurden gefunden, ausgegeben und k?nnen ausgew?hlt werden. & x &  \\\hline
+\end{longtable}
+
 \section{Abschlu?einsch?tzung}
+Die beim abschlie?enden Systemtest erhaltenen Ergebnisse stimmen mit den erwarteten Ergebnissen ?berein. Durch dies kann der Systemtest als erfolgreich angesehen werden. Die in der Spezifikation gesetzten Anforderungen wurden erf?llt. Das System kann aus diesem Grund als einsatzbereit angesehen werden. Eine vollkommene Fehlerfreiheit kann trotz der Tests nicht garantiert werden.



From gregorian at berlios.de  Mon Jun 26 19:31:55 2006
From: gregorian at berlios.de (gregorian at berlios.de)
Date: Mon, 26 Jun 2006 19:31:55 +0200
Subject: [Liman-svn] r186 - trunk/docs/beleg3
Message-ID: <200606261731.k5QHVtL0019294@sheep.berlios.de>

Author: gregorian
Date: 2006-06-26 19:31:43 +0200 (Mon, 26 Jun 2006)
New Revision: 186

Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
Log:
3.1 Produktzweck
3.2 Basismaschiene und Ress...
3.3 Nutzergruppen

Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-26 17:28:15 UTC (rev 185)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-26 17:31:43 UTC (rev 186)
@@ -1,8 +1,42 @@
-\chapter{Anwenderdokumentation}
-\section{Produktzweck}
-
-\section{Basismaschine und Ressourcenanforderungen}
-
-\section{Nutzerklassen}
-
-\section{Bedienungsanleitung}
+\chapter{Anwenderdokumentation}
+\section{Produktzweck}
+Eines der wohl wichtigsten Werkzeugen nicht nur im Studium, sondern 
+auch in Berufen speziell in der Forschung und Entwicklung, sind B"ucher. 
+Allerdings ist der Umfang von Fachliteratur nicht unbedingt klein und 
+"uberschaubar. Au"serdem kann ein Fehlkauf sehr schnell ins Geld gehen, 
+bei B"ucherpreisen von 50 EUR und mehr.\\
+Wie w"are es also mit einem Werkzeug um Informationen "uber diese 
+Werkzeuge "ubersichtlich bereit zu stellen.\\
+Informationen wie Titel, Autor und ISBN werden von 
+Migliedern verfasst und in einer Datenbank abgelegt. Aber 
+damit nicht genug, es ist jedem Mitglied auch m"oglich Kommentare zu 
+verfassen, z.B. wie ihm das Buch gefallen hat oder ob es bei Recherchen "uber gewisse Themen
+hilfreich war oder nicht.\\
+Um einen universellen Zugriff auf die Datenbest"ande der Literaturverwaltung zu gew"ahrleisten, 
+erfolgt der Zugriff "uber dynamisch erzeugte HTML-Seiten, die einfach 
+mit jedem Web-Browser "uber die Web-Adresse aufgerufen werden k"onnen.\\
+Ein weiterer Vorteil, den dynamisch erzeugte HTML-Seiten bieten ist die freie Plattformwahl durch den Nutzer.
+\section{Basismaschine und Ressourcenanforderungen}
+Die Literaturverwaltung wird von einem Administrator auf einem Web-Server installiert und konfiguriert, dies erm"oglicht jedem Nutzer einen ortsunab"angigen Zugriff auf die Datenbest"ande.\\
+Es wird lediglich ein Web-Browser wie z.B. Firefox, Opera oder der Internet Explorer ben"otigt.\\
+Die Anforderungen an die Hardware richten sich nach den Anforderungen des benutzten Web-Browsers.\\
+\section{Nutzerklassen}
+Es gibt drei Nutzerklassen:
+\begin{enumerate}
+\item Nutzer:\\
+Nutzer ist jeder, der sich "uber einen Web-Browser auf die Seite begibt um Informationen abzurufen.\\
+Der Nutzer besitzt keinerlei M"oglichkeiten Datenbest"ande anzulegen, zu ver"andern oder zu l"oschen. Er besitzt lediglich Lesezugriff auf die Buchinformationen und Kommentare. \\
+
+\item Mitglied:\\
+Das Mitglied ist ein registrierte Nutzer, der sich durch sein Anmelden "uber die grafische Oberfl"ache mit einem LogIn-Namen und einem Passwort als solcher authentifiziert.\\
+Als Mitglied darf man zus"atzlich zu den Rechten eines Nutzers neue Buchtitel anlegen oder bereits bestehende Titel bearbeiten und l"oschen.\\
+Desweiteren besitzt jedes Mitglied das Recht, Kommentare zu verfassen sowie eigens erstellte Kommentare zu bearbeiten und zu l"oschen.\\
+Was die Mitgliedsdaten betrifft, so darf jedes Mitglied die eigenen Nutzerdaten bearbeiten. Was die Rechte betrifft, so ist eine "Anderung ausschlie"slich durch einen Administrator m"oglich.\\
+
+\item Administrator:\\
+Zun"achst wird durch einen Administrator die Literaturverwaltung auf einem Web-Server installiert und konfiguriert.\\
+Weiterhin ist der Administrator f"ur die Datenverwaltung und inbesondere f"ur die Mitgliedsverwaltung zust"andig, also z.B. f"ur die Pflege der Mitgliedsdaten.\\
+Was die Rechte eines Administrators betrifft so sind diese allein auf Grund seines Aufgabengebietes unbeschr"ankt, d.h. er kann alle Daten sehen, erstellen, bearbeiten und l"oschen.\\ 
+
+\end{enumerate}
+\section{Bedienungsanleitung}



From lazhur at berlios.de  Mon Jun 26 19:51:43 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 26 Jun 2006 19:51:43 +0200
Subject: [Liman-svn] r187 - trunk/docs/beleg3
Message-ID: <200606261751.k5QHph0q024901@sheep.berlios.de>

Author: lazhur
Date: 2006-06-26 19:50:59 +0200 (Mon, 26 Jun 2006)
New Revision: 187

Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
Log:
Kleine Korrekturen Anwenderdokumentation


Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-26 17:31:43 UTC (rev 186)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-26 17:50:59 UTC (rev 187)
@@ -10,16 +10,18 @@
 Informationen wie Titel, Autor und ISBN werden von 
 Migliedern verfasst und in einer Datenbank abgelegt. Aber 
 damit nicht genug, es ist jedem Mitglied auch m"oglich Kommentare zu 
-verfassen, z.B. wie ihm das Buch gefallen hat oder ob es bei Recherchen "uber gewisse Themen
+verfassen, z. B. wie ihm das Buch gefallen hat oder ob es bei Recherchen "uber gewisse Themen
 hilfreich war oder nicht.\\
 Um einen universellen Zugriff auf die Datenbest"ande der Literaturverwaltung zu gew"ahrleisten, 
 erfolgt der Zugriff "uber dynamisch erzeugte HTML-Seiten, die einfach 
 mit jedem Web-Browser "uber die Web-Adresse aufgerufen werden k"onnen.\\
 Ein weiterer Vorteil, den dynamisch erzeugte HTML-Seiten bieten ist die freie Plattformwahl durch den Nutzer.
+
 \section{Basismaschine und Ressourcenanforderungen}
-Die Literaturverwaltung wird von einem Administrator auf einem Web-Server installiert und konfiguriert, dies erm"oglicht jedem Nutzer einen ortsunab"angigen Zugriff auf die Datenbest"ande.\\
-Es wird lediglich ein Web-Browser wie z.B. Firefox, Opera oder der Internet Explorer ben"otigt.\\
-Die Anforderungen an die Hardware richten sich nach den Anforderungen des benutzten Web-Browsers.\\
+Die Literaturverwaltung wird von einem Administrator auf einem Web-Server installiert und konfiguriert. Dies erm"oglicht jedem Nutzer einen ortsunab"angigen Zugriff auf die Datenbest"ande.\\
+Es wird lediglich ein Web-Browser wie z. B. Firefox, Opera oder der Internet Explorer ben"otigt.\\
+Die Anforderungen an die Hardware richten sich nach den Anforderungen des benutzten Web-Browsers.
+
 \section{Nutzerklassen}
 Es gibt drei Nutzerklassen:
 \begin{enumerate}
@@ -29,13 +31,13 @@
 
 \item Mitglied:\\
 Das Mitglied ist ein registrierte Nutzer, der sich durch sein Anmelden "uber die grafische Oberfl"ache mit einem LogIn-Namen und einem Passwort als solcher authentifiziert.\\
-Als Mitglied darf man zus"atzlich zu den Rechten eines Nutzers neue Buchtitel anlegen oder bereits bestehende Titel bearbeiten und l"oschen.\\
+Als Mitglied darf man zus"atzlich zu den Rechten eines Nutzers neue Literatur anlegen oder bereits bestehende Titel bearbeiten und l"oschen.\\
 Desweiteren besitzt jedes Mitglied das Recht, Kommentare zu verfassen sowie eigens erstellte Kommentare zu bearbeiten und zu l"oschen.\\
 Was die Mitgliedsdaten betrifft, so darf jedes Mitglied die eigenen Nutzerdaten bearbeiten. Was die Rechte betrifft, so ist eine "Anderung ausschlie"slich durch einen Administrator m"oglich.\\
 
 \item Administrator:\\
 Zun"achst wird durch einen Administrator die Literaturverwaltung auf einem Web-Server installiert und konfiguriert.\\
-Weiterhin ist der Administrator f"ur die Datenverwaltung und inbesondere f"ur die Mitgliedsverwaltung zust"andig, also z.B. f"ur die Pflege der Mitgliedsdaten.\\
+Weiterhin ist der Administrator f"ur die Datenverwaltung und inbesondere f"ur die Mitgliedsverwaltung zust"andig, also z. B. f"ur die Pflege der Mitgliedsdaten.\\
 Was die Rechte eines Administrators betrifft so sind diese allein auf Grund seines Aufgabengebietes unbeschr"ankt, d.h. er kann alle Daten sehen, erstellen, bearbeiten und l"oschen.\\ 
 
 \end{enumerate}



From dotslash at berlios.de  Mon Jun 26 20:34:04 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Mon, 26 Jun 2006 20:34:04 +0200
Subject: [Liman-svn] r188 - in trunk/docs: beleg3 protokoll
Message-ID: <200606261834.k5QIY46w007358@sheep.berlios.de>

Author: dotslash
Date: 2006-06-26 20:34:03 +0200 (Mon, 26 Jun 2006)
New Revision: 188

Added:
   trunk/docs/protokoll/convert.sh
Modified:
   trunk/docs/beleg3/arbeitsaufgaben.tex
Log:
- Protokolle + krankes script

Modified: trunk/docs/beleg3/arbeitsaufgaben.tex
===================================================================
--- trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-26 17:50:59 UTC (rev 187)
+++ trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-26 18:34:03 UTC (rev 188)
@@ -1 +1,373 @@
- 
+\chapter{Arbeitsaufgaben}
+		\section{Protokoll Anfangskonsultation 18.04.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Arten von Buchlisten
+			\item Einteilung von Benutzern
+			\item Sichtbarkeit von Kommentaren
+			\item Funktionsweise der Suche
+			\item Informationen f?r B?cher
+			\item Verwendete Software im Softwaresystem
+			\item Software f?r Graphen
+			\item N?chste Sitzung
+		\end{itemize}
+			\subsection{Arten von Buchlisten}
+			\begin{itemize}
+				\item globale B?cherliste
+				\item User k?nnen recherchieren und gefundene B?cher als BibTeX exportieren
+				\item keine lokalen Listen f?r User
+			\end{itemize}
+			\subsection{Einteilung von Benutzern}
+			\begin{itemize}
+				\item Anonyme Nutzer (G?ste) k?nnen Suchen und Exportieren
+				\item Registrierte Nutzer k?nnen zus?tzlich B?cher hinzuf?gen/?ndern/l?schen/kommentieren
+				\item Administratoren k?nnen zus?tzlich Nutzer hinzuf?gen/?ndern/l?schen
+			\end{itemize}
+			\subsection{Sichtbarkeit von Kommentaren}
+			\begin{itemize}
+				\item registrierte Nutzer k?nnen Kommentare zu Buch verfassen
+				\item jeder kann Kommentare zu Buch lesen
+			\end{itemize}
+			\subsection{Funktionsweise der Suche}
+			\begin{itemize}
+				\item Suche nach spezifischen Informationen (Titel, Autor, Verlag, ...)
+				\item Freie Suche (Volltextsuche) nach Stichw?rtern (auch in Bemerkungen, Stichworte, ...)
+			\end{itemize}
+			\subsection{Informationen f?r B?cher}
+			\begin{itemize}
+				\item Informationen laut Aufgabenbeschreibung:
+					\begin{itemize}
+						\item Art
+						\item Titel
+						\item Autor
+						\item ISBN
+						\item Jahr
+						\item Ort
+						\item Beschreibung
+					\end{itemize}
+				\item weitere Informationen laut DIN 1505 Teil 2
+			\end{itemize}
+			\subsection{Verwendete Software im Softwaresystem}
+			\begin{itemize}
+				\item DBS
+					: MySQL 5.0
+				\item Webserver
+					: Apache 2.0
+				\item Skriptsprache
+					: PHP 5.1
+			\end{itemize}
+			\subsection{Software f?r Graphen}
+			Vorschl?ge:
+			\begin{itemize}
+				\item xfig
+				\item dot
+				\item Microsoft Visio
+			\end{itemize}
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+				\item Treffen am 19.04. 15:15
+				\item Besprechung einzelner Punkte des 1. Belegs
+				\item Einteilen f?r Aufgaben
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
+\newpage
+		\section{Sitzungsprotokoll 19.04.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg
+		\end{itemize}
+			\subsection{Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg}
+			Es wurden die zu bearbeitenden Aufgaben zur Erstellung des ersten Teilbeleges in folgende drei Komplexe aufgeteilt und an die jeweiligen Mitglieder des Teams verteilt:
+			\begin{itemize}
+				\item 1. Komplex - Sven Eckelmann, Frank Wilhelm
+					\begin{itemize}	
+						\item Kontextdiagramm
+						\item Verhaltensmodells
+						\item Prozessbeschreibung
+						\item Planung in Form eines Gantt-Diagramms
+					\end{itemize}
+				\item 2. Komplex - Simon Wunderlich
+					\begin{itemize}
+						\item Definition der Nutzerschnittstellen
+						\item Produktbeschreibung
+						\item Entwicklungsumgebung
+					\end{itemize}
+				\item 3. Komplex - Andreas Tr?ger, Florian Scharl
+					\begin{itemize}
+						\item Datenkatalog
+						\item Entity-Relationship-Modell
+						\item Spezifikation wichtiger Qualifikationsanforderungen
+					\end{itemize}
+			\end{itemize}
+			Chemnitz, 19.04.2006
+			\begin{itemize}
+				\item Protokolant: Florian Scharl
+				\item Korrekturen: Sven Eckelmann
+			\end{itemize}
+\newpage
+?
+		\section{Sitzungsprotokoll 26.04.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg
+		\end{itemize}
+			\subsection{Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg}
+			\begin{itemize}
+				\item Es wurden die Erbegnisse der einzelnen Aufgaben des erste Teilbeleg durchgesehen und Korrekturen besprochen.
+				\item Weiteren Projektverlauf anhand des Gentt-Diagramms festgelegt.
+				\item Aufgrund fehlenden Engagements und dem Vers?umen aller bisherigen Treffen war es notwendig das Mitglied Benedikt Keil aus dem Projektteam zu entfernen. 
+			\end{itemize}
+			Chemnitz, 26.04.2006
+			\begin{itemize}
+				\item Protokolant: Andreas Tr?ger
+				\item Korrekturen: Florian Scharl
+			\end{itemize}
+\newpage
+?
+		\section{Sitzungsprotokoll 03.05.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Korrekturen zum 1. Teilbeleg
+		\end{itemize}
+			\subsection{Korrekturen zum 1. Teilbeleg}
+			\begin{itemize}
+				\item Autoren Entit?t mit Relation zu Literatur hinzugef?gt (ERD und Datenkatalog)
+				\item Arten an Literatur im Datenkatalog definiert:
+					\begin{itemize}
+						\item Buch
+						\item Artikel
+						\item Brosch?re
+						\item Protokoll
+						\item Anleitung
+						\item Diplomarbeit
+						\item Dissertation
+						\item Techn. Bericht
+						\item Unver?ffentlicht
+						\item Sonstiges
+					\end{itemize}
+				\item Suche auf Titel und Autoren
+				\item ?berarbeitung des Abschnitts 3.3 (Flexibilit?t)
+			\end{itemize}
+			Chemnitz, 03.05.2006
+			\begin{itemize}
+				\item Protokolant: Frank Wilhelm
+			\end{itemize}
+\newpage
+		\section{Sitzungsprotokoll 10.05.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Korrekturen zum 1. Teilbeleg
+			\item Beleg2 Klassenaufteilung
+		\end{itemize}
+			\subsection{Korrekturen zum 1. Teilbeleg}
+			\begin{itemize}
+				\item Autoren bei Suchanfragen mit einbeziehen
+			\end{itemize}
+			\subsection{Beleg2 Klassenaufteilung}
+			\begin{itemize}
+					\item Eine Klassenaufteilung wurde festgelegt:
+					\includegraphics[scale=0.8]{../protokoll/2006_05_10.png}
+					\item Generierung mit Doxygen soweit m"o;glich
+			\end{itemize}
+			Chemnitz, 10.05.2006
+			\begin{itemize}
+				\item Protokolant: Simon Wunderlich
+			\end{itemize}
+\newpage
+		\section{Protokoll 1. Pflichtkonsultation 30.05.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Besprechung Teilbeleg 1
+			\item Vorstellung Stand Teilbeleg 2
+			\item Stand Projektarbeit
+			\item N?chste Sitzung
+		\end{itemize}
+			\subsection{Besprechung Teilbeleg 1}
+			\begin{itemize}
+				\item fehlende Suchabfrage in Ereignistabelle und Datenkatalog
+				\item kleine Fehler bei Formulierungen ({\it freier} Festplattenspeicher, Stil {\it der grafischen Oberfl?che})
+				\item keine Liste der Fehlercodes
+			\end{itemize}
+			\subsection{Vorstellung Stand Teilbeleg 2}
+			\begin{itemize}
+				\item ?nderungsstand und Bearbeiter noch nicht aufgef?hrt
+				\item Klassendiagramm nur ?hnlich Moduldiagramm und kein UML-Klassendiagramm
+			\end{itemize}
+			\subsection{Stand Projektarbeit}
+			\begin{itemize}
+				\item Implementierung fast vollst?ndig
+				\item Systemtests am laufen bzw. in Vorbereitung
+			\end{itemize}
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+				\item Treffen am 7.6. 15:15
+				\item Besprechung einzelner Punkte des 3. Belegs
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
+\newpage
+		\section{Sitzungsprotokoll 07.06.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Verteilung der Aufgaben zum 3. Teilbeleg
+			\item N?chste Sitzung
+			\item N?chste Pflichtkonsultation mit Betreuer
+		\end{itemize}
+			\subsection{Verteilung der Aufgaben zum 3. Teilbeleg}
+			\begin{itemize}
+			\item Programmdokumentation
+			\begin{itemize}
+			\item Definition der Interfaces in der Implementierungssprache -- Sven Eckelmann u. Frank 			Wilhelm
+			\item Kommentierte Quelltexte -- Sven Eckelmann u. Frank Wilhelm
+			\item Testplan -- Sven Eckelmann u. Frank Wilhelm
+			\item Systemtest -- Sven Eckelmann u. Frank Wilhelm
+			\item Abschlusseinsch?tzung -- Sven Eckelmann u. Frank Wilhelm
+			\end{itemize}
+			\item Systemhandbuch
+			\begin{itemize}
+			\item Installationsanleitung -- Simon Wunderlich
+			\item Programm-Filesystem -- Andreas Tr?ger
+			\item Administrationsanleitung -- Andreas Tr?ger
+			\end{itemize}
+			\item Anwenderdokumentation
+			\begin{itemize}
+			\item Produktzweck -- Florian Scharl
+			\item Basismaschine und Ressourcenanforderungen -- Florian Scharl
+			\item Nutzerklassen -- Florian Scharl
+			\item Bedienungsanleitung -- Florian Scharl
+			\item Helpsystem -- Florian Scharl
+			\end{itemize}
+			\item ?bersicht ?ber die Arbeitsaufgaben alle Teammitglieder w?hrend der gesamten Projektbearbeitung
+			inkl. der Festlegungsprotokolle	-- Simon Wunderlich
+			\end{itemize}
+			Bemerkung: Die endg?ltige Festlegung erfolgt in der n?chsten Sitzung nachdem jeder den Umfang 				seines Aufgabengebietes bzw. seiner Aufgabengebiete erschlossen hat.
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+			\item Die n?chste Sitzung findet am {\em 14.06.2006 um 15:15 Uhr im Raum 1/204 } statt.
+			\end{itemize}
+			\subsection{N?chste Pflichtkonsultation mit Betreuer}
+			\begin{itemize}
+			\item Die n?chste Pflichtkonsultation mit Herrn Rentzsch findet am {\em 13.06.2006 um 13:10 Uhr im Raum 			1/B317 } statt.
+			\end{itemize}
+			Chemnitz, 07.06.2006
+			\begin{itemize}
+				\item Protokolant: Florian Scharl
+			\end{itemize}
+\newpage
+		\section{Protokoll 2. Pflichtkonsultation 13.06.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Besprechung Teilbeleg 2
+			\item Vorstellung Stand Teilbeleg 3
+			\item N?chste Sitzung
+		\end{itemize}
+			\subsection{Besprechung Teilbeleg 2}
+			\begin{itemize}
+				\item fehlende Trennung zwischen SQLDB-Klasse und Datenbank
+				\item unklare Formulierung "Felder {\it mit Elementen} vom Typ..."
+			\end{itemize}
+			\subsection{Vorstellung Stand Teilbeleg 3}
+			\begin{itemize}
+				\item Implementierung weitgehend vollst?ndig
+				\item Tests werden fertiggestellt
+				\item Anwender- und Systemdokumentation in Vorbereitung
+			\end{itemize}
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+				\item Treffen am 14.06. 15:15
+				\item Besprechung einzelner Punkte des 3. Belegs
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
+\newpage
+		\section{Sitzungsprotokoll 14.06.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Besprechung Teilbeleg 3
+		\end{itemize}
+			\subsection{Besprechung Teilbeleg 3}
+			\begin{itemize}
+				\item Explizite Aufteilung noch zu erledigender Aufgaben
+				\item Besprechung und Korrektur bisher vorhandener Teile
+				\item Besprechung technischer M?glichkeiten zur Dokumentation der Oberfl?che
+				\item Archivierungsm?glichkeiten des Administrators (phpMyAdmin, mysqldump)
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
+\newpage

Added: trunk/docs/protokoll/convert.sh
===================================================================
--- trunk/docs/protokoll/convert.sh	2006-06-26 17:50:59 UTC (rev 187)
+++ trunk/docs/protokoll/convert.sh	2006-06-26 18:34:03 UTC (rev 188)
@@ -0,0 +1,78 @@
+#!/bin/sh
+FINAL="../beleg3/arbeitsaufgaben.tex"
+function sedit()
+{
+	sed  "$1" $TMP1 > $TMP2
+	mv $TMP2 $TMP1
+}
+echo '\chapter{Arbeitsaufgaben}' > $FINAL
+
+
+for FILE in *.xhtml;
+ do 
+	TMP1="/tmp/${FILE}1"
+	TMP2="/tmp/${FILE}2"
+	cp $FILE $TMP1
+	sedit 's/<!DOCTYPE.*>//' 
+	sedit 's/<[\/]*html.*>//'
+	sedit 's/<[\/]*head.*>//' 
+	sedit 's/<title.*<\/title>//' 
+	sedit 's/<\/title.*>/\}/' 
+	sedit 's/<[\/]*meta.*>//' 
+	sedit 's/<style.*>.*<\/style>//' 
+	sedit 's/<[\/]*body.*>//'
+	sedit 's/<[\/]*h1.*>.*<\/h1>//'
+	sedit 's/<h2>/\\section\{/'
+	sedit 's/<\/h2>/\}/'
+	sedit 's/<h3[^>]*>/\\subsection\{/'
+	sedit 's/<\/h3>/\}/'
+	sedit 's/<ul>/\\begin\{itemize\}/' 
+	sedit 's/<\/ul>/\\end\{itemize\}/' 
+	sedit 's/<ol>/\\begin\{itemize\}/' 
+	sedit 's/<\/ol>/\\end\{itemize\}/' 
+	sedit 's/<dl>/\\begin\{itemize\}/' 
+	sedit 's/<\/dl>/\\end\{itemize\}/' 
+	sedit 's/<li>/\\item /' 
+	sedit 's/<\/li>//' 
+	sedit 's/<dt>/\\item /' 
+	sedit 's/<\/dt>//' 
+	sedit 's/<dd>/\:\ /' 
+	sedit 's/<\/dd>//' 
+	sedit 's/<a [^>]*>//' 
+	sedit 's/<\/a>//' 
+	# sed only subsitutes once on a line? well, then do it again:
+	sedit 's/<a [^>]*>//' 
+	sedit 's/<\/a>//' 
+
+	sedit 's/<acronym [^>]*>//' 
+	sedit 's/<\/acronym>//' 
+	sedit 's/<[\/]*div[^>]*>//'
+	#sedit 's/<br[^>]*>/\\\\\n/'
+	sedit 's/<br[^>]*>//'
+	sedit 's/<p>//'
+	#sedit 's/<p>/\\\\\n/'
+	sedit 's/<\/p>//'
+	sedit 's/<img src=\"/\\includegraphics\[scale=0.8\]\{\.\.\/protokoll\//'
+	sedit 's/\" alt=\"Klassenaufteilung\"\ \/>/}/'
+	sedit 's/<b>/\{\\em /' 
+	sedit 's/<\/b>/}/' 
+	sedit 's/<i>/\{\\it /' 
+	sedit 's/<\/i>/}/' 
+	# sed only subsitutes once on a line? well, then do it again:
+	sedit 's/<i>/\{\\it /' 
+	sedit 's/<\/i>/}/' 
+
+	sedit 's/\&ouml/\"o/'
+	sedit 's/\&auml/\"a/'
+	sedit 's/\&uuml/\"u/'
+	dos2unix $TMP1
+
+	
+	sedit '/^[ \t]*$/d' # remove blanks
+	#sedit 's/^[ \t]*//' # remove spaces
+	# sedit 's/\\item/\t\\item/' # add some spaces ;)
+	cat $TMP1 >> $FINAL
+	echo '\newpage' >> $FINAL
+	rm $TMP1 
+done
+echo "converted to $FINAL"


Property changes on: trunk/docs/protokoll/convert.sh
___________________________________________________________________
Name: svn:executable
   + *



From lazhur at berlios.de  Mon Jun 26 20:51:05 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 26 Jun 2006 20:51:05 +0200
Subject: [Liman-svn] r189 - in trunk/docs: beleg3 protokoll
Message-ID: <200606261851.k5QIp51m011967@sheep.berlios.de>

Author: lazhur
Date: 2006-06-26 20:51:03 +0200 (Mon, 26 Jun 2006)
New Revision: 189

Modified:
   trunk/docs/beleg3/arbeitsaufgaben.tex
   trunk/docs/protokoll/2006_04_26.xhtml
   trunk/docs/protokoll/2006_05_03.xhtml
   trunk/docs/protokoll/convert.sh
Log:
Korrektur Arbeitsaufgaben


Modified: trunk/docs/beleg3/arbeitsaufgaben.tex
===================================================================
--- trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-26 18:34:03 UTC (rev 188)
+++ trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-26 18:51:03 UTC (rev 189)
@@ -1,373 +1,10 @@
 \chapter{Arbeitsaufgaben}
-		\section{Protokoll Anfangskonsultation 18.04.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Arten von Buchlisten
-			\item Einteilung von Benutzern
-			\item Sichtbarkeit von Kommentaren
-			\item Funktionsweise der Suche
-			\item Informationen f?r B?cher
-			\item Verwendete Software im Softwaresystem
-			\item Software f?r Graphen
-			\item N?chste Sitzung
-		\end{itemize}
-			\subsection{Arten von Buchlisten}
-			\begin{itemize}
-				\item globale B?cherliste
-				\item User k?nnen recherchieren und gefundene B?cher als BibTeX exportieren
-				\item keine lokalen Listen f?r User
-			\end{itemize}
-			\subsection{Einteilung von Benutzern}
-			\begin{itemize}
-				\item Anonyme Nutzer (G?ste) k?nnen Suchen und Exportieren
-				\item Registrierte Nutzer k?nnen zus?tzlich B?cher hinzuf?gen/?ndern/l?schen/kommentieren
-				\item Administratoren k?nnen zus?tzlich Nutzer hinzuf?gen/?ndern/l?schen
-			\end{itemize}
-			\subsection{Sichtbarkeit von Kommentaren}
-			\begin{itemize}
-				\item registrierte Nutzer k?nnen Kommentare zu Buch verfassen
-				\item jeder kann Kommentare zu Buch lesen
-			\end{itemize}
-			\subsection{Funktionsweise der Suche}
-			\begin{itemize}
-				\item Suche nach spezifischen Informationen (Titel, Autor, Verlag, ...)
-				\item Freie Suche (Volltextsuche) nach Stichw?rtern (auch in Bemerkungen, Stichworte, ...)
-			\end{itemize}
-			\subsection{Informationen f?r B?cher}
-			\begin{itemize}
-				\item Informationen laut Aufgabenbeschreibung:
-					\begin{itemize}
-						\item Art
-						\item Titel
-						\item Autor
-						\item ISBN
-						\item Jahr
-						\item Ort
-						\item Beschreibung
-					\end{itemize}
-				\item weitere Informationen laut DIN 1505 Teil 2
-			\end{itemize}
-			\subsection{Verwendete Software im Softwaresystem}
-			\begin{itemize}
-				\item DBS
-					: MySQL 5.0
-				\item Webserver
-					: Apache 2.0
-				\item Skriptsprache
-					: PHP 5.1
-			\end{itemize}
-			\subsection{Software f?r Graphen}
-			Vorschl?ge:
-			\begin{itemize}
-				\item xfig
-				\item dot
-				\item Microsoft Visio
-			\end{itemize}
-			\subsection{N?chste Sitzung}
-			\begin{itemize}
-				\item Treffen am 19.04. 15:15
-				\item Besprechung einzelner Punkte des 1. Belegs
-				\item Einteilen f?r Aufgaben
-			\end{itemize}
-		\begin{itemize}
-			\item Protokolant: Sven Eckelmann
-		\end{itemize}
 \newpage
-		\section{Sitzungsprotokoll 19.04.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg
-		\end{itemize}
-			\subsection{Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg}
-			Es wurden die zu bearbeitenden Aufgaben zur Erstellung des ersten Teilbeleges in folgende drei Komplexe aufgeteilt und an die jeweiligen Mitglieder des Teams verteilt:
-			\begin{itemize}
-				\item 1. Komplex - Sven Eckelmann, Frank Wilhelm
-					\begin{itemize}	
-						\item Kontextdiagramm
-						\item Verhaltensmodells
-						\item Prozessbeschreibung
-						\item Planung in Form eines Gantt-Diagramms
-					\end{itemize}
-				\item 2. Komplex - Simon Wunderlich
-					\begin{itemize}
-						\item Definition der Nutzerschnittstellen
-						\item Produktbeschreibung
-						\item Entwicklungsumgebung
-					\end{itemize}
-				\item 3. Komplex - Andreas Tr?ger, Florian Scharl
-					\begin{itemize}
-						\item Datenkatalog
-						\item Entity-Relationship-Modell
-						\item Spezifikation wichtiger Qualifikationsanforderungen
-					\end{itemize}
-			\end{itemize}
-			Chemnitz, 19.04.2006
-			\begin{itemize}
-				\item Protokolant: Florian Scharl
-				\item Korrekturen: Sven Eckelmann
-			\end{itemize}
 \newpage
-?
-		\section{Sitzungsprotokoll 26.04.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg
-		\end{itemize}
-			\subsection{Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg}
-			\begin{itemize}
-				\item Es wurden die Erbegnisse der einzelnen Aufgaben des erste Teilbeleg durchgesehen und Korrekturen besprochen.
-				\item Weiteren Projektverlauf anhand des Gentt-Diagramms festgelegt.
-				\item Aufgrund fehlenden Engagements und dem Vers?umen aller bisherigen Treffen war es notwendig das Mitglied Benedikt Keil aus dem Projektteam zu entfernen. 
-			\end{itemize}
-			Chemnitz, 26.04.2006
-			\begin{itemize}
-				\item Protokolant: Andreas Tr?ger
-				\item Korrekturen: Florian Scharl
-			\end{itemize}
 \newpage
-?
-		\section{Sitzungsprotokoll 03.05.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Korrekturen zum 1. Teilbeleg
-		\end{itemize}
-			\subsection{Korrekturen zum 1. Teilbeleg}
-			\begin{itemize}
-				\item Autoren Entit?t mit Relation zu Literatur hinzugef?gt (ERD und Datenkatalog)
-				\item Arten an Literatur im Datenkatalog definiert:
-					\begin{itemize}
-						\item Buch
-						\item Artikel
-						\item Brosch?re
-						\item Protokoll
-						\item Anleitung
-						\item Diplomarbeit
-						\item Dissertation
-						\item Techn. Bericht
-						\item Unver?ffentlicht
-						\item Sonstiges
-					\end{itemize}
-				\item Suche auf Titel und Autoren
-				\item ?berarbeitung des Abschnitts 3.3 (Flexibilit?t)
-			\end{itemize}
-			Chemnitz, 03.05.2006
-			\begin{itemize}
-				\item Protokolant: Frank Wilhelm
-			\end{itemize}
 \newpage
-		\section{Sitzungsprotokoll 10.05.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Korrekturen zum 1. Teilbeleg
-			\item Beleg2 Klassenaufteilung
-		\end{itemize}
-			\subsection{Korrekturen zum 1. Teilbeleg}
-			\begin{itemize}
-				\item Autoren bei Suchanfragen mit einbeziehen
-			\end{itemize}
-			\subsection{Beleg2 Klassenaufteilung}
-			\begin{itemize}
-					\item Eine Klassenaufteilung wurde festgelegt:
-					\includegraphics[scale=0.8]{../protokoll/2006_05_10.png}
-					\item Generierung mit Doxygen soweit m"o;glich
-			\end{itemize}
-			Chemnitz, 10.05.2006
-			\begin{itemize}
-				\item Protokolant: Simon Wunderlich
-			\end{itemize}
 \newpage
-		\section{Protokoll 1. Pflichtkonsultation 30.05.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Besprechung Teilbeleg 1
-			\item Vorstellung Stand Teilbeleg 2
-			\item Stand Projektarbeit
-			\item N?chste Sitzung
-		\end{itemize}
-			\subsection{Besprechung Teilbeleg 1}
-			\begin{itemize}
-				\item fehlende Suchabfrage in Ereignistabelle und Datenkatalog
-				\item kleine Fehler bei Formulierungen ({\it freier} Festplattenspeicher, Stil {\it der grafischen Oberfl?che})
-				\item keine Liste der Fehlercodes
-			\end{itemize}
-			\subsection{Vorstellung Stand Teilbeleg 2}
-			\begin{itemize}
-				\item ?nderungsstand und Bearbeiter noch nicht aufgef?hrt
-				\item Klassendiagramm nur ?hnlich Moduldiagramm und kein UML-Klassendiagramm
-			\end{itemize}
-			\subsection{Stand Projektarbeit}
-			\begin{itemize}
-				\item Implementierung fast vollst?ndig
-				\item Systemtests am laufen bzw. in Vorbereitung
-			\end{itemize}
-			\subsection{N?chste Sitzung}
-			\begin{itemize}
-				\item Treffen am 7.6. 15:15
-				\item Besprechung einzelner Punkte des 3. Belegs
-			\end{itemize}
-		\begin{itemize}
-			\item Protokolant: Sven Eckelmann
-		\end{itemize}
 \newpage
-		\section{Sitzungsprotokoll 07.06.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Verteilung der Aufgaben zum 3. Teilbeleg
-			\item N?chste Sitzung
-			\item N?chste Pflichtkonsultation mit Betreuer
-		\end{itemize}
-			\subsection{Verteilung der Aufgaben zum 3. Teilbeleg}
-			\begin{itemize}
-			\item Programmdokumentation
-			\begin{itemize}
-			\item Definition der Interfaces in der Implementierungssprache -- Sven Eckelmann u. Frank 			Wilhelm
-			\item Kommentierte Quelltexte -- Sven Eckelmann u. Frank Wilhelm
-			\item Testplan -- Sven Eckelmann u. Frank Wilhelm
-			\item Systemtest -- Sven Eckelmann u. Frank Wilhelm
-			\item Abschlusseinsch?tzung -- Sven Eckelmann u. Frank Wilhelm
-			\end{itemize}
-			\item Systemhandbuch
-			\begin{itemize}
-			\item Installationsanleitung -- Simon Wunderlich
-			\item Programm-Filesystem -- Andreas Tr?ger
-			\item Administrationsanleitung -- Andreas Tr?ger
-			\end{itemize}
-			\item Anwenderdokumentation
-			\begin{itemize}
-			\item Produktzweck -- Florian Scharl
-			\item Basismaschine und Ressourcenanforderungen -- Florian Scharl
-			\item Nutzerklassen -- Florian Scharl
-			\item Bedienungsanleitung -- Florian Scharl
-			\item Helpsystem -- Florian Scharl
-			\end{itemize}
-			\item ?bersicht ?ber die Arbeitsaufgaben alle Teammitglieder w?hrend der gesamten Projektbearbeitung
-			inkl. der Festlegungsprotokolle	-- Simon Wunderlich
-			\end{itemize}
-			Bemerkung: Die endg?ltige Festlegung erfolgt in der n?chsten Sitzung nachdem jeder den Umfang 				seines Aufgabengebietes bzw. seiner Aufgabengebiete erschlossen hat.
-			\subsection{N?chste Sitzung}
-			\begin{itemize}
-			\item Die n?chste Sitzung findet am {\em 14.06.2006 um 15:15 Uhr im Raum 1/204 } statt.
-			\end{itemize}
-			\subsection{N?chste Pflichtkonsultation mit Betreuer}
-			\begin{itemize}
-			\item Die n?chste Pflichtkonsultation mit Herrn Rentzsch findet am {\em 13.06.2006 um 13:10 Uhr im Raum 			1/B317 } statt.
-			\end{itemize}
-			Chemnitz, 07.06.2006
-			\begin{itemize}
-				\item Protokolant: Florian Scharl
-			\end{itemize}
 \newpage
-		\section{Protokoll 2. Pflichtkonsultation 13.06.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Besprechung Teilbeleg 2
-			\item Vorstellung Stand Teilbeleg 3
-			\item N?chste Sitzung
-		\end{itemize}
-			\subsection{Besprechung Teilbeleg 2}
-			\begin{itemize}
-				\item fehlende Trennung zwischen SQLDB-Klasse und Datenbank
-				\item unklare Formulierung "Felder {\it mit Elementen} vom Typ..."
-			\end{itemize}
-			\subsection{Vorstellung Stand Teilbeleg 3}
-			\begin{itemize}
-				\item Implementierung weitgehend vollst?ndig
-				\item Tests werden fertiggestellt
-				\item Anwender- und Systemdokumentation in Vorbereitung
-			\end{itemize}
-			\subsection{N?chste Sitzung}
-			\begin{itemize}
-				\item Treffen am 14.06. 15:15
-				\item Besprechung einzelner Punkte des 3. Belegs
-			\end{itemize}
-		\begin{itemize}
-			\item Protokolant: Sven Eckelmann
-		\end{itemize}
 \newpage
-		\section{Sitzungsprotokoll 14.06.2006}
-		\subsection{Anwesende}
-		\begin{itemize}
-			\item Simon Wunderlich
-			\item Andreas Tr?ger
-			\item Frank Wilhelm
-			\item Florian Scharl
-			\item Sven Eckelmann
-		\end{itemize}
-		\subsection{Tagesordnung}
-		\begin{itemize}
-			\item Besprechung Teilbeleg 3
-		\end{itemize}
-			\subsection{Besprechung Teilbeleg 3}
-			\begin{itemize}
-				\item Explizite Aufteilung noch zu erledigender Aufgaben
-				\item Besprechung und Korrektur bisher vorhandener Teile
-				\item Besprechung technischer M?glichkeiten zur Dokumentation der Oberfl?che
-				\item Archivierungsm?glichkeiten des Administrators (phpMyAdmin, mysqldump)
-			\end{itemize}
-		\begin{itemize}
-			\item Protokolant: Sven Eckelmann
-		\end{itemize}
 \newpage

Modified: trunk/docs/protokoll/2006_04_26.xhtml
===================================================================
--- trunk/docs/protokoll/2006_04_26.xhtml	2006-06-26 18:34:03 UTC (rev 188)
+++ trunk/docs/protokoll/2006_04_26.xhtml	2006-06-26 18:51:03 UTC (rev 189)
@@ -1,4 +1,4 @@
-?<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
 	<head>
 		<title>Protokoll Sitzung 26.04.2006</title>

Modified: trunk/docs/protokoll/2006_05_03.xhtml
===================================================================
--- trunk/docs/protokoll/2006_05_03.xhtml	2006-06-26 18:34:03 UTC (rev 188)
+++ trunk/docs/protokoll/2006_05_03.xhtml	2006-06-26 18:51:03 UTC (rev 189)
@@ -1,4 +1,4 @@
-?<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
 	<head>
 		<title>Protokoll Sitzung 03.05.2006</title>

Modified: trunk/docs/protokoll/convert.sh
===================================================================
--- trunk/docs/protokoll/convert.sh	2006-06-26 18:34:03 UTC (rev 188)
+++ trunk/docs/protokoll/convert.sh	2006-06-26 18:51:03 UTC (rev 189)
@@ -52,7 +52,7 @@
 	sedit 's/<p>//'
 	#sedit 's/<p>/\\\\\n/'
 	sedit 's/<\/p>//'
-	sedit 's/<img src=\"/\\includegraphics\[scale=0.8\]\{\.\.\/protokoll\//'
+	sedit 's/<img src=\"/\\\\\\includegraphics\[scale=0.8\]\{\.\.\/protokoll\//'
 	sedit 's/\" alt=\"Klassenaufteilung\"\ \/>/}/'
 	sedit 's/<b>/\{\\em /' 
 	sedit 's/<\/b>/}/' 
@@ -62,9 +62,9 @@
 	sedit 's/<i>/\{\\it /' 
 	sedit 's/<\/i>/}/' 
 
-	sedit 's/\&ouml/\"o/'
-	sedit 's/\&auml/\"a/'
-	sedit 's/\&uuml/\"u/'
+	sedit 's/\&ouml;/\"o/'
+	sedit 's/\&auml;/\"a/'
+	sedit 's/\&uuml;/\"u/'
 	dos2unix $TMP1
 
 	



From lazhur at berlios.de  Mon Jun 26 20:54:30 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 26 Jun 2006 20:54:30 +0200
Subject: [Liman-svn] r190 - trunk/docs/beleg3
Message-ID: <200606261854.k5QIsUK4013907@sheep.berlios.de>

Author: lazhur
Date: 2006-06-26 20:54:27 +0200 (Mon, 26 Jun 2006)
New Revision: 190

Modified:
   trunk/docs/beleg3/arbeitsaufgaben.tex
Log:
Entfernte Arbeitsaufgaben wieder hinzugef?\195?\188gt


Modified: trunk/docs/beleg3/arbeitsaufgaben.tex
===================================================================
--- trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-26 18:51:03 UTC (rev 189)
+++ trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-26 18:54:27 UTC (rev 190)
@@ -1,10 +1,371 @@
 \chapter{Arbeitsaufgaben}
+		\section{Protokoll Anfangskonsultation 18.04.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Arten von Buchlisten
+			\item Einteilung von Benutzern
+			\item Sichtbarkeit von Kommentaren
+			\item Funktionsweise der Suche
+			\item Informationen f?r B?cher
+			\item Verwendete Software im Softwaresystem
+			\item Software f?r Graphen
+			\item N?chste Sitzung
+		\end{itemize}
+			\subsection{Arten von Buchlisten}
+			\begin{itemize}
+				\item globale B?cherliste
+				\item User k?nnen recherchieren und gefundene B?cher als BibTeX exportieren
+				\item keine lokalen Listen f?r User
+			\end{itemize}
+			\subsection{Einteilung von Benutzern}
+			\begin{itemize}
+				\item Anonyme Nutzer (G?ste) k?nnen Suchen und Exportieren
+				\item Registrierte Nutzer k?nnen zus?tzlich B?cher hinzuf?gen/?ndern/l?schen/kommentieren
+				\item Administratoren k?nnen zus?tzlich Nutzer hinzuf?gen/?ndern/l?schen
+			\end{itemize}
+			\subsection{Sichtbarkeit von Kommentaren}
+			\begin{itemize}
+				\item registrierte Nutzer k?nnen Kommentare zu Buch verfassen
+				\item jeder kann Kommentare zu Buch lesen
+			\end{itemize}
+			\subsection{Funktionsweise der Suche}
+			\begin{itemize}
+				\item Suche nach spezifischen Informationen (Titel, Autor, Verlag, ...)
+				\item Freie Suche (Volltextsuche) nach Stichw?rtern (auch in Bemerkungen, Stichworte, ...)
+			\end{itemize}
+			\subsection{Informationen f?r B?cher}
+			\begin{itemize}
+				\item Informationen laut Aufgabenbeschreibung:
+					\begin{itemize}
+						\item Art
+						\item Titel
+						\item Autor
+						\item ISBN
+						\item Jahr
+						\item Ort
+						\item Beschreibung
+					\end{itemize}
+				\item weitere Informationen laut DIN 1505 Teil 2
+			\end{itemize}
+			\subsection{Verwendete Software im Softwaresystem}
+			\begin{itemize}
+				\item DBS
+					: MySQL 5.0
+				\item Webserver
+					: Apache 2.0
+				\item Skriptsprache
+					: PHP 5.1
+			\end{itemize}
+			\subsection{Software f?r Graphen}
+			Vorschl?ge:
+			\begin{itemize}
+				\item xfig
+				\item dot
+				\item Microsoft Visio
+			\end{itemize}
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+				\item Treffen am 19.04. 15:15
+				\item Besprechung einzelner Punkte des 1. Belegs
+				\item Einteilen f?r Aufgaben
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
 \newpage
+		\section{Sitzungsprotokoll 19.04.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg
+		\end{itemize}
+			\subsection{Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg}
+			Es wurden die zu bearbeitenden Aufgaben zur Erstellung des ersten Teilbeleges in folgende drei Komplexe aufgeteilt und an die jeweiligen Mitglieder des Teams verteilt:
+			\begin{itemize}
+				\item 1. Komplex - Sven Eckelmann, Frank Wilhelm
+					\begin{itemize}	
+						\item Kontextdiagramm
+						\item Verhaltensmodells
+						\item Prozessbeschreibung
+						\item Planung in Form eines Gantt-Diagramms
+					\end{itemize}
+				\item 2. Komplex - Simon Wunderlich
+					\begin{itemize}
+						\item Definition der Nutzerschnittstellen
+						\item Produktbeschreibung
+						\item Entwicklungsumgebung
+					\end{itemize}
+				\item 3. Komplex - Andreas Tr?ger, Florian Scharl
+					\begin{itemize}
+						\item Datenkatalog
+						\item Entity-Relationship-Modell
+						\item Spezifikation wichtiger Qualifikationsanforderungen
+					\end{itemize}
+			\end{itemize}
+			Chemnitz, 19.04.2006
+			\begin{itemize}
+				\item Protokolant: Florian Scharl
+				\item Korrekturen: Sven Eckelmann
+			\end{itemize}
 \newpage
+		\section{Sitzungsprotokoll 26.04.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg
+		\end{itemize}
+			\subsection{Aufteilung und Verteilung der Aufgaben zum 1. Teilbeleg}
+			\begin{itemize}
+				\item Es wurden die Erbegnisse der einzelnen Aufgaben des erste Teilbeleg durchgesehen und Korrekturen besprochen.
+				\item Weiteren Projektverlauf anhand des Gentt-Diagramms festgelegt.
+				\item Aufgrund fehlenden Engagements und dem Vers?umen aller bisherigen Treffen war es notwendig das Mitglied Benedikt Keil aus dem Projektteam zu entfernen. 
+			\end{itemize}
+			Chemnitz, 26.04.2006
+			\begin{itemize}
+				\item Protokolant: Andreas Tr?ger
+				\item Korrekturen: Florian Scharl
+			\end{itemize}
 \newpage
+		\section{Sitzungsprotokoll 03.05.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Korrekturen zum 1. Teilbeleg
+		\end{itemize}
+			\subsection{Korrekturen zum 1. Teilbeleg}
+			\begin{itemize}
+				\item Autoren Entit?t mit Relation zu Literatur hinzugef?gt (ERD und Datenkatalog)
+				\item Arten an Literatur im Datenkatalog definiert:
+					\begin{itemize}
+						\item Buch
+						\item Artikel
+						\item Brosch?re
+						\item Protokoll
+						\item Anleitung
+						\item Diplomarbeit
+						\item Dissertation
+						\item Techn. Bericht
+						\item Unver?ffentlicht
+						\item Sonstiges
+					\end{itemize}
+				\item Suche auf Titel und Autoren
+				\item ?berarbeitung des Abschnitts 3.3 (Flexibilit?t)
+			\end{itemize}
+			Chemnitz, 03.05.2006
+			\begin{itemize}
+				\item Protokolant: Frank Wilhelm
+			\end{itemize}
 \newpage
+		\section{Sitzungsprotokoll 10.05.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Korrekturen zum 1. Teilbeleg
+			\item Beleg2 Klassenaufteilung
+		\end{itemize}
+			\subsection{Korrekturen zum 1. Teilbeleg}
+			\begin{itemize}
+				\item Autoren bei Suchanfragen mit einbeziehen
+			\end{itemize}
+			\subsection{Beleg2 Klassenaufteilung}
+			\begin{itemize}
+					\item Eine Klassenaufteilung wurde festgelegt:
+					\\\includegraphics[scale=0.8]{../protokoll/2006_05_10.png}
+					\item Generierung mit Doxygen soweit m"oglich
+			\end{itemize}
+			Chemnitz, 10.05.2006
+			\begin{itemize}
+				\item Protokolant: Simon Wunderlich
+			\end{itemize}
 \newpage
+		\section{Protokoll 1. Pflichtkonsultation 30.05.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Besprechung Teilbeleg 1
+			\item Vorstellung Stand Teilbeleg 2
+			\item Stand Projektarbeit
+			\item N?chste Sitzung
+		\end{itemize}
+			\subsection{Besprechung Teilbeleg 1}
+			\begin{itemize}
+				\item fehlende Suchabfrage in Ereignistabelle und Datenkatalog
+				\item kleine Fehler bei Formulierungen ({\it freier} Festplattenspeicher, Stil {\it der grafischen Oberfl?che})
+				\item keine Liste der Fehlercodes
+			\end{itemize}
+			\subsection{Vorstellung Stand Teilbeleg 2}
+			\begin{itemize}
+				\item ?nderungsstand und Bearbeiter noch nicht aufgef?hrt
+				\item Klassendiagramm nur ?hnlich Moduldiagramm und kein UML-Klassendiagramm
+			\end{itemize}
+			\subsection{Stand Projektarbeit}
+			\begin{itemize}
+				\item Implementierung fast vollst?ndig
+				\item Systemtests am laufen bzw. in Vorbereitung
+			\end{itemize}
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+				\item Treffen am 7.6. 15:15
+				\item Besprechung einzelner Punkte des 3. Belegs
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
 \newpage
+		\section{Sitzungsprotokoll 07.06.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Verteilung der Aufgaben zum 3. Teilbeleg
+			\item N?chste Sitzung
+			\item N?chste Pflichtkonsultation mit Betreuer
+		\end{itemize}
+			\subsection{Verteilung der Aufgaben zum 3. Teilbeleg}
+			\begin{itemize}
+			\item Programmdokumentation
+			\begin{itemize}
+			\item Definition der Interfaces in der Implementierungssprache -- Sven Eckelmann u. Frank 			Wilhelm
+			\item Kommentierte Quelltexte -- Sven Eckelmann u. Frank Wilhelm
+			\item Testplan -- Sven Eckelmann u. Frank Wilhelm
+			\item Systemtest -- Sven Eckelmann u. Frank Wilhelm
+			\item Abschlusseinsch?tzung -- Sven Eckelmann u. Frank Wilhelm
+			\end{itemize}
+			\item Systemhandbuch
+			\begin{itemize}
+			\item Installationsanleitung -- Simon Wunderlich
+			\item Programm-Filesystem -- Andreas Tr?ger
+			\item Administrationsanleitung -- Andreas Tr?ger
+			\end{itemize}
+			\item Anwenderdokumentation
+			\begin{itemize}
+			\item Produktzweck -- Florian Scharl
+			\item Basismaschine und Ressourcenanforderungen -- Florian Scharl
+			\item Nutzerklassen -- Florian Scharl
+			\item Bedienungsanleitung -- Florian Scharl
+			\item Helpsystem -- Florian Scharl
+			\end{itemize}
+			\item ?bersicht ?ber die Arbeitsaufgaben alle Teammitglieder w?hrend der gesamten Projektbearbeitung
+			inkl. der Festlegungsprotokolle	-- Simon Wunderlich
+			\end{itemize}
+			Bemerkung: Die endg?ltige Festlegung erfolgt in der n?chsten Sitzung nachdem jeder den Umfang 				seines Aufgabengebietes bzw. seiner Aufgabengebiete erschlossen hat.
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+			\item Die n?chste Sitzung findet am {\em 14.06.2006 um 15:15 Uhr im Raum 1/204 } statt.
+			\end{itemize}
+			\subsection{N?chste Pflichtkonsultation mit Betreuer}
+			\begin{itemize}
+			\item Die n?chste Pflichtkonsultation mit Herrn Rentzsch findet am {\em 13.06.2006 um 13:10 Uhr im Raum 			1/B317 } statt.
+			\end{itemize}
+			Chemnitz, 07.06.2006
+			\begin{itemize}
+				\item Protokolant: Florian Scharl
+			\end{itemize}
 \newpage
+		\section{Protokoll 2. Pflichtkonsultation 13.06.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Besprechung Teilbeleg 2
+			\item Vorstellung Stand Teilbeleg 3
+			\item N?chste Sitzung
+		\end{itemize}
+			\subsection{Besprechung Teilbeleg 2}
+			\begin{itemize}
+				\item fehlende Trennung zwischen SQLDB-Klasse und Datenbank
+				\item unklare Formulierung "Felder {\it mit Elementen} vom Typ..."
+			\end{itemize}
+			\subsection{Vorstellung Stand Teilbeleg 3}
+			\begin{itemize}
+				\item Implementierung weitgehend vollst?ndig
+				\item Tests werden fertiggestellt
+				\item Anwender- und Systemdokumentation in Vorbereitung
+			\end{itemize}
+			\subsection{N?chste Sitzung}
+			\begin{itemize}
+				\item Treffen am 14.06. 15:15
+				\item Besprechung einzelner Punkte des 3. Belegs
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
 \newpage
+		\section{Sitzungsprotokoll 14.06.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+			\item Florian Scharl
+			\item Sven Eckelmann
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Besprechung Teilbeleg 3
+		\end{itemize}
+			\subsection{Besprechung Teilbeleg 3}
+			\begin{itemize}
+				\item Explizite Aufteilung noch zu erledigender Aufgaben
+				\item Besprechung und Korrektur bisher vorhandener Teile
+				\item Besprechung technischer M?glichkeiten zur Dokumentation der Oberfl?che
+				\item Archivierungsm?glichkeiten des Administrators (phpMyAdmin, mysqldump)
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Sven Eckelmann
+		\end{itemize}
 \newpage



From lazhur at berlios.de  Mon Jun 26 21:18:49 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 26 Jun 2006 21:18:49 +0200
Subject: [Liman-svn] r191 - trunk/docs/beleg3
Message-ID: <200606261918.k5QJIn3t031066@sheep.berlios.de>

Author: lazhur
Date: 2006-06-26 21:18:34 +0200 (Mon, 26 Jun 2006)
New Revision: 191

Modified:
   trunk/docs/beleg3/systemhandbuch.tex
Log:
WinZip durch freie Software 7-Zip ersetzt


Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-26 18:54:27 UTC (rev 190)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-26 19:18:34 UTC (rev 191)
@@ -7,7 +7,7 @@
 
 Je nach verf"ugbarem Entpackprogramm sollte man die neuste Version im .tar.gz, 
 .tar.bz2 (zu entpacken mit z.b. GNU tar, \pdfurl{http://www.gnu.org/software/tar/}) oder .zip-Format 
-(zu entpacken mit z. B. WinZIP, \pdfurl{http://www.winzip.de/}) herunterladen und entpacken.
+(zu entpacken mit z. B. 7-Zip, \pdfurl{http://www.7-zip.org/}) herunterladen und entpacken.
 
 Nun muss der Inhalt des Archivs auf das Server in einen vom Webserver verwalteten Ordner 
 abgelegt werden, z. B. in (oder unterhalb) von /var/www auf einem Standard-Debian System.



From lazhur at berlios.de  Mon Jun 26 22:00:28 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Mon, 26 Jun 2006 22:00:28 +0200
Subject: [Liman-svn] r192 - in trunk: docs/beleg3/sourcecodes/include include
Message-ID: <200606262000.k5QK0SIb017581@sheep.berlios.de>

Author: lazhur
Date: 2006-06-26 22:00:26 +0200 (Mon, 26 Jun 2006)
New Revision: 192

Modified:
   trunk/docs/beleg3/sourcecodes/include/suche.php
   trunk/include/suche.php
Log:
- Schalte Boolean Mode in Volltextsuche f?\195?\188r MySQL >= 4 ein
- Workaround f?\195?\188r Volltextsuche f?\195?\188r MySQL < 4


Modified: trunk/docs/beleg3/sourcecodes/include/suche.php
===================================================================
--- trunk/docs/beleg3/sourcecodes/include/suche.php	2006-06-26 19:18:34 UTC (rev 191)
+++ trunk/docs/beleg3/sourcecodes/include/suche.php	2006-06-26 20:00:26 UTC (rev 192)
@@ -106,9 +106,23 @@
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr
+						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext' IN BOOLEAN MODE)
+						OR MATCH (Autorname) AGAINST ('$volltext' IN BOOLEAN MODE)";
+
+				if ($sqldb->Query($sql) === false)
+				{
+					// Workaround f?r MySQL < 4
+					// Ohne Boolean Mode suchen
+					$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
+						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
+							INNER JOIN  ". $db_config['prefix'] ."Literatur_Autor AS connect
+							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
+						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
+						ON connect.Autor_Nr = autoren.Autor_Nr
 						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext')
 						OR MATCH (Autorname) AGAINST ('$volltext')";
-				$sqldb->Query($sql);
+					$sqldb->Query($sql);
+				}
 				
 				// Lese Treffer aus
 				while ($cur = $sqldb->Fetch())

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-06-26 19:18:34 UTC (rev 191)
+++ trunk/include/suche.php	2006-06-26 20:00:26 UTC (rev 192)
@@ -106,9 +106,23 @@
 							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
 						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
 						ON connect.Autor_Nr = autoren.Autor_Nr
+						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext' IN BOOLEAN MODE)
+						OR MATCH (Autorname) AGAINST ('$volltext' IN BOOLEAN MODE)";
+
+				if ($sqldb->Query($sql) === false)
+				{
+					// Workaround f??r MySQL < 4
+					// Ohne Boolean Mode suchen
+					$sql = "SELECT DISTINCT bibliothek.Literatur_Nr AS Nr, Titel, Verlag, ISBN
+						FROM (".$db_config['prefix']."Bibliothek AS bibliothek
+							INNER JOIN  ". $db_config['prefix'] ."Literatur_Autor AS connect
+							ON bibliothek.Literatur_Nr = connect.Literatur_Nr)
+						INNER JOIN  ".$db_config['prefix']."Autoren AS autoren
+						ON connect.Autor_Nr = autoren.Autor_Nr
 						WHERE MATCH (Titel, Verlag, ISBN, Beschreibung, Ort, Stichworte) AGAINST ('$volltext')
 						OR MATCH (Autorname) AGAINST ('$volltext')";
-				$sqldb->Query($sql);
+					$sqldb->Query($sql);
+				}
 				
 				// Lese Treffer aus
 				while ($cur = $sqldb->Fetch())



From fwilhelm at berlios.de  Tue Jun 27 01:12:01 2006
From: fwilhelm at berlios.de (fwilhelm at BerliOS)
Date: Tue, 27 Jun 2006 01:12:01 +0200
Subject: [Liman-svn] r193 - in trunk/docs/beleg3: . visio
Message-ID: <200606262312.k5QNC1lT011224@sheep.berlios.de>

Author: fwilhelm
Date: 2006-06-27 01:11:54 +0200 (Tue, 27 Jun 2006)
New Revision: 193

Added:
   trunk/docs/beleg3/testplan.pdf
   trunk/docs/beleg3/visio/
   trunk/docs/beleg3/visio/testplan.vsd
Modified:
   trunk/docs/beleg3/tests.tex
Log:
Testplan hinzugef?\195?\188gt

Added: trunk/docs/beleg3/testplan.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/testplan.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/docs/beleg3/tests.tex
===================================================================
--- trunk/docs/beleg3/tests.tex	2006-06-26 20:00:26 UTC (rev 192)
+++ trunk/docs/beleg3/tests.tex	2006-06-26 23:11:54 UTC (rev 193)
@@ -315,8 +315,10 @@
 \end{longtable}
 
 \subsection{Zeitplan und Verantwortlichkeiten}
-Verantwortlich f?r die Vorbereitung, Durchf?hrung und Auswertung der Tests waren Frank Wilhelm und Sven Eckelmann. Abh?ngigkeiten zwischen den einzelnen Testf?llen besteht nicht. Alle Tests wurden mehrfach zwischen 30.04. und 26.06.2006 durchgef?hrt. Ein abschlie?ender Test erfolgte am 26.06.2006.
+Verantwortlich f?r die Vorbereitung, Durchf?hrung und Auswertung der Tests waren Frank Wilhelm und Sven Eckelmann. Alle Tests wurden mehrfach zwischen 30.04. und 26.06.2006 durchgef?hrt. Ein abschlie?ender Test erfolgte am 26.06.2006.
 
+\includegraphics{testplan}
+
 \section{Systemtest}
 \begin{longtable}{|c|p{8cm}|c|c|}
 \hline
@@ -352,4 +354,4 @@
 \end{longtable}
 
 \section{Abschlu?einsch?tzung}
-Die beim abschlie?enden Systemtest erhaltenen Ergebnisse stimmen mit den erwarteten Ergebnissen ?berein. Durch dies kann der Systemtest als erfolgreich angesehen werden. Die in der Spezifikation gesetzten Anforderungen wurden erf?llt. Das System kann aus diesem Grund als einsatzbereit angesehen werden. Eine vollkommene Fehlerfreiheit kann trotz der Tests nicht garantiert werden.
+F?r jede Klasse von Eingaben wurde ein Test durchgef?hrt. Die Funktionen wurden isoliert als Unittest sowie in realer Umgebung getestet. Die beim abschlie?enden Systemtest erhaltenen Ergebnisse stimmen mit den erwarteten Ergebnissen ?berein. Durch dies kann der Systemtest als erfolgreich angesehen werden. Die in der Spezifikation gesetzten Anforderungen wurden erf?llt. Das System kann aus diesem Grund als einsatzbereit angesehen werden. Eine vollkommene Fehlerfreiheit kann trotz der Tests nicht garantiert werden.

Added: trunk/docs/beleg3/visio/testplan.vsd
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/visio/testplan.vsd
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From gregorian at berlios.de  Tue Jun 27 13:40:50 2006
From: gregorian at berlios.de (gregorian at berlios.de)
Date: Tue, 27 Jun 2006 13:40:50 +0200
Subject: [Liman-svn] r194 - trunk/docs/beleg3
Message-ID: <200606271140.k5RBeoIL001834@sheep.berlios.de>

Author: gregorian
Date: 2006-06-27 13:40:10 +0200 (Tue, 27 Jun 2006)
New Revision: 194

Added:
   trunk/docs/beleg3/lit_ins.pdf
   trunk/docs/beleg3/lit_ins1.pdf
   trunk/docs/beleg3/login.pdf
   trunk/docs/beleg3/login1.pdf
   trunk/docs/beleg3/screen1.pdf
   trunk/docs/beleg3/suche.pdf
   trunk/docs/beleg3/treffer.pdf
Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
Log:
Anwenderdokumentation
- mit 3.4 Bedienungsanleitung begonnen
- Login, Suche, Buch einf. ...

Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-26 23:11:54 UTC (rev 193)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-27 11:40:10 UTC (rev 194)
@@ -42,3 +42,53 @@
 
 \end{enumerate}
 \section{Bedienungsanleitung}
+\subsection{Start der Anwenung}
+Um den Literaturmanager zu starten muss man einen Web-Browser (hier Firefox 1.5.0.4) starten und die passende Internet-Adresse in das URL-Feld eintragen. Die URL kann man beim Administrator erfragen, da er den Web-Server zuvor konfiguriert.
+\subsection{Die Hauptseite}
+Hat man die richtige Web-Adresse eingegeben, so l"adt der Browser folgende Seite:\\
+\includegraphics[scale=0.8]{screen1.pdf}\\
+Die Hauptseite ist in vier Segmente aufgeteilt:\\
+\begin{enumerate}
+\item Navigation:\\
+In dem Segment Navigation kann man nun zwischen zwei Men"upunkten w"ahlen:\\
+Literatur und Nutzer\\
+Auf diese beiden Punkte wird sp"ater genauer eingegangen.
+\item Letzte Literatur:\\
+Dieses Segment erm"oglicht einen "Uberblick der zuletzt get"atigten Literatureintr"age.
+\item Suchen:\\
+Die Suchfunktion erm"oglicht eine schnelle Recherche in den vorhandenen Buchdaten. Die genauere Bedienung wird noch erl"autert.
+\item Einloggen:\\
+Hier kann sich jedes Mitglied mit seinem Login, also einem Namen und seinem Passwort bei dem Literaturmanager anmelden.\\
+Sollte man keinen Login-Name und kein Passwort besitzen so muss man sich bei einem Administrator anmelden.\\
+Auch wenn man sein Passwort vergessen hat, muss man einen Adminsitrator kontaktieren.\\
+\end{enumerate}
+\subsection{Wie logge ich mich ein?}
+Im Segment Einloggen auf der Hauptseite existieren zwei Editfelder, Login und Passwort.\\
+Man gibt also in das obere Feld seinen Login-Namen und in das zweite Feld sein Passwort ein. Anschlie"send bet"atigt man den Button "Login" (1).\\
+In der folgenden Abbildung ist der Abschnitt Einloggen einmal vergr"o"sert dargestellt.
+Wir Loggen uns mit dem Namen 'Lazhur' und dem Passwort 'tescht' ein:\\
+\begin{center}
+\includegraphics[scale=1.0]{login.pdf}\\
+\end{center}
+War die Anmeldung erfolgreich so erscheint folgende Anzeige und man ist als Mitglied eingeloggt:\\
+\includegraphics[scale=0.8]{login1.pdf}\\
+
+\subsection{Wie finde ich ein Buch?}
+Um Informationen zu einem Buchtitel zu erhalten bietet es sich an die Suchfunktion des Literaturmanagers zu nutzen. Hierzu kommen wir kurz auf das Bild des Hauptbildschirm weiter oben zur"uck:\\
+Folgendes Bild verg"o"sert das Suchsegment (3):\\
+\begin{center}
+\includegraphics[scale=2.0]{suche.pdf}\\
+\end{center}
+Das Prinzip ist ganz einfach. Man gibt ein Stichwort zu einem Buchtitel ein, z.B. ein Wort aus dem Titel oder den Namen des Autors, und dr"uckt den Suche-Button (1).\\
+Gibt man z.B. den Begriff 'Python' ein so erscheinen alle Buchtitel mit diesem Begriff. Die n"achste Abbildung zeigt einmal eine solche Trefferliste:\\
+\includegraphics[scale=0.8]{treffer.pdf}\\
+\subsection{Wie kann ich ein neues Buch anlegen?}
+Kommen wir nun vom Recherchieren zum bearbeiten und Pflegen der Literaturverwaltung.\\
+Angenommen ein Buch ist nicht in der Literaturverwaltung vorhanden und ein Mitglied m"ochte es darin aufnehmen.\\
+Hierzu klicken wir zun"achst im Segment 'Navigation' auf den Punkt 'Literatur', daraufhin erscheint folgendes Fenster:\\
+\includegraphics[scale=0.8]{lit_ins.pdf}\\
+Dominiert wird das Segment von der Tabelle mit den Literatureintr"agen darunter befinden sich zwei Buttons, die nur dann erscheinen, wenn man sich als Mitglied angemeldet hat.\\
+Der Button 'Literatur hinzuf"ugen' spricht wohl f"ur sich. Er erm"oglicht das hinzuf"ugen eines neuen Buchtitels.\\
+Der Button 'BibTex importieren' erm"oglicht es bereits vorgefertigte Buchbeschreibungen im BibTex-Format zu importieren.\\
+Klickt man nun auf den Button 'Literatur hinzuf"ugen' erscheint folgendes Formular:\\
+\includegraphics[scale=0.8]{lit_ins1.pdf}\\
\ No newline at end of file

Added: trunk/docs/beleg3/lit_ins.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/lit_ins.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/lit_ins1.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/lit_ins1.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/login.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/login.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/login1.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/login1.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/screen1.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/screen1.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/suche.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/suche.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/treffer.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/treffer.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From lazhur at berlios.de  Tue Jun 27 15:49:05 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Tue, 27 Jun 2006 15:49:05 +0200
Subject: [Liman-svn] r195 - trunk/docs/beleg3
Message-ID: <200606271349.k5RDn5mw030775@sheep.berlios.de>

Author: lazhur
Date: 2006-06-27 15:49:03 +0200 (Tue, 27 Jun 2006)
New Revision: 195

Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
Log:
- Korrektur Anwenderdokumentation:
  - z.B. -> z. B.
  - Buch -> Literatur
  - Tippfehler entfernt


Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-27 11:40:10 UTC (rev 194)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-27 13:49:03 UTC (rev 195)
@@ -27,7 +27,7 @@
 \begin{enumerate}
 \item Nutzer:\\
 Nutzer ist jeder, der sich "uber einen Web-Browser auf die Seite begibt um Informationen abzurufen.\\
-Der Nutzer besitzt keinerlei M"oglichkeiten Datenbest"ande anzulegen, zu ver"andern oder zu l"oschen. Er besitzt lediglich Lesezugriff auf die Buchinformationen und Kommentare. \\
+Der Nutzer besitzt keinerlei M"oglichkeiten Datenbest"ande anzulegen, zu ver"andern oder zu l"oschen. Er besitzt lediglich Lesezugriff auf die Literaturinformationen und Kommentare. \\
 
 \item Mitglied:\\
 Das Mitglied ist ein registrierte Nutzer, der sich durch sein Anmelden "uber die grafische Oberfl"ache mit einem LogIn-Namen und einem Passwort als solcher authentifiziert.\\
@@ -46,7 +46,7 @@
 Um den Literaturmanager zu starten muss man einen Web-Browser (hier Firefox 1.5.0.4) starten und die passende Internet-Adresse in das URL-Feld eintragen. Die URL kann man beim Administrator erfragen, da er den Web-Server zuvor konfiguriert.
 \subsection{Die Hauptseite}
 Hat man die richtige Web-Adresse eingegeben, so l"adt der Browser folgende Seite:\\
-\includegraphics[scale=0.8]{screen1.pdf}\\
+\includegraphics[scale=0.8]{screen1}\\
 Die Hauptseite ist in vier Segmente aufgeteilt:\\
 \begin{enumerate}
 \item Navigation:\\
@@ -56,11 +56,11 @@
 \item Letzte Literatur:\\
 Dieses Segment erm"oglicht einen "Uberblick der zuletzt get"atigten Literatureintr"age.
 \item Suchen:\\
-Die Suchfunktion erm"oglicht eine schnelle Recherche in den vorhandenen Buchdaten. Die genauere Bedienung wird noch erl"autert.
+Die Suchfunktion erm"oglicht eine schnelle Recherche in den vorhandenen Literaturdaten. Die genauere Bedienung wird noch erl"autert.
 \item Einloggen:\\
 Hier kann sich jedes Mitglied mit seinem Login, also einem Namen und seinem Passwort bei dem Literaturmanager anmelden.\\
 Sollte man keinen Login-Name und kein Passwort besitzen so muss man sich bei einem Administrator anmelden.\\
-Auch wenn man sein Passwort vergessen hat, muss man einen Adminsitrator kontaktieren.\\
+Auch wenn man sein Passwort vergessen hat, muss man einen Administrator kontaktieren.\\
 \end{enumerate}
 \subsection{Wie logge ich mich ein?}
 Im Segment Einloggen auf der Hauptseite existieren zwei Editfelder, Login und Passwort.\\
@@ -68,27 +68,27 @@
 In der folgenden Abbildung ist der Abschnitt Einloggen einmal vergr"o"sert dargestellt.
 Wir Loggen uns mit dem Namen 'Lazhur' und dem Passwort 'tescht' ein:\\
 \begin{center}
-\includegraphics[scale=1.0]{login.pdf}\\
+\includegraphics[scale=1.0]{login}\\
 \end{center}
 War die Anmeldung erfolgreich so erscheint folgende Anzeige und man ist als Mitglied eingeloggt:\\
-\includegraphics[scale=0.8]{login1.pdf}\\
+\includegraphics[scale=0.8]{login1}\\
 
-\subsection{Wie finde ich ein Buch?}
-Um Informationen zu einem Buchtitel zu erhalten bietet es sich an die Suchfunktion des Literaturmanagers zu nutzen. Hierzu kommen wir kurz auf das Bild des Hauptbildschirm weiter oben zur"uck:\\
+\subsection{Wie finde ich eine Literatur?}
+Um Informationen zu einem Literaturtitel zu erhalten bietet es sich an die Suchfunktion des Literaturmanagers zu nutzen. Hierzu kommen wir kurz auf das Bild des Hauptbildschirm weiter oben zur"uck:\\
 Folgendes Bild verg"o"sert das Suchsegment (3):\\
 \begin{center}
-\includegraphics[scale=2.0]{suche.pdf}\\
+\includegraphics[scale=2.0]{suche}\\
 \end{center}
-Das Prinzip ist ganz einfach. Man gibt ein Stichwort zu einem Buchtitel ein, z.B. ein Wort aus dem Titel oder den Namen des Autors, und dr"uckt den Suche-Button (1).\\
-Gibt man z.B. den Begriff 'Python' ein so erscheinen alle Buchtitel mit diesem Begriff. Die n"achste Abbildung zeigt einmal eine solche Trefferliste:\\
-\includegraphics[scale=0.8]{treffer.pdf}\\
-\subsection{Wie kann ich ein neues Buch anlegen?}
+Das Prinzip ist ganz einfach. Man gibt ein Stichwort zu einem Literaturtitel ein, z. B. ein Wort aus dem Titel oder den Namen des Autors, und dr"uckt den Suche-Button (1).\\
+Gibt man z. B. den Begriff 'Python' ein so erscheinen alle Literaturtitel mit diesem Begriff. Die n"achste Abbildung zeigt einmal eine solche Trefferliste:\\
+\includegraphics[scale=0.8]{treffer}\\
+\subsection{Wie kann ich eine neue Literatur anlegen?}
 Kommen wir nun vom Recherchieren zum bearbeiten und Pflegen der Literaturverwaltung.\\
-Angenommen ein Buch ist nicht in der Literaturverwaltung vorhanden und ein Mitglied m"ochte es darin aufnehmen.\\
+Angenommen eine Literatur ist nicht in der Literaturverwaltung vorhanden und ein Mitglied m"ochte es darin aufnehmen.\\
 Hierzu klicken wir zun"achst im Segment 'Navigation' auf den Punkt 'Literatur', daraufhin erscheint folgendes Fenster:\\
-\includegraphics[scale=0.8]{lit_ins.pdf}\\
+\includegraphics[scale=0.8]{lit_ins}\\
 Dominiert wird das Segment von der Tabelle mit den Literatureintr"agen darunter befinden sich zwei Buttons, die nur dann erscheinen, wenn man sich als Mitglied angemeldet hat.\\
-Der Button 'Literatur hinzuf"ugen' spricht wohl f"ur sich. Er erm"oglicht das hinzuf"ugen eines neuen Buchtitels.\\
-Der Button 'BibTex importieren' erm"oglicht es bereits vorgefertigte Buchbeschreibungen im BibTex-Format zu importieren.\\
+Der Button 'Literatur hinzuf"ugen' spricht wohl f"ur sich. Er erm"oglicht das hinzuf"ugen eines neuen Literaturtitels.\\
+Der Button 'BibTex importieren' erm"oglicht es bereits vorgefertigte Literaturbeschreibungen im BibTex-Format zu importieren.\\
 Klickt man nun auf den Button 'Literatur hinzuf"ugen' erscheint folgendes Formular:\\
-\includegraphics[scale=0.8]{lit_ins1.pdf}\\
\ No newline at end of file
+\includegraphics[scale=0.8]{lit_ins1}\\
\ No newline at end of file



From gregorian at berlios.de  Wed Jun 28 02:02:01 2006
From: gregorian at berlios.de (gregorian at berlios.de)
Date: Wed, 28 Jun 2006 02:02:01 +0200
Subject: [Liman-svn] r196 - trunk/docs/beleg3
Message-ID: <200606280002.k5S0214w030877@sheep.berlios.de>

Author: gregorian
Date: 2006-06-28 02:01:39 +0200 (Wed, 28 Jun 2006)
New Revision: 196

Added:
   trunk/docs/beleg3/bearb1.pdf
   trunk/docs/beleg3/bearb2.pdf
   trunk/docs/beleg3/bearb3.pdf
   trunk/docs/beleg3/bibtex.pdf
   trunk/docs/beleg3/comment1.pdf
   trunk/docs/beleg3/comment2.pdf
   trunk/docs/beleg3/comment3.pdf
   trunk/docs/beleg3/comment4.pdf
   trunk/docs/beleg3/comment5.pdf
   trunk/docs/beleg3/del_lit.pdf
   trunk/docs/beleg3/err.pdf
   trunk/docs/beleg3/ext_suche.pdf
   trunk/docs/beleg3/import1.pdf
   trunk/docs/beleg3/import2.pdf
   trunk/docs/beleg3/import_succ.pdf
   trunk/docs/beleg3/nutzer1.pdf
   trunk/docs/beleg3/nutzer2.pdf
   trunk/docs/beleg3/sure.pdf
Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
Log:
Anwenderdokumentation
Bedienanleitung f?\195?\188r Mitglieder fertig gestellt

es fehlt noch:
kurze Anleitung zur Nutzerverwaltung per graf. Oberfl?\195?\164che
ALSO: Nutzer anlegen, bearbeiten, l?\195?\182schen...

Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-27 13:49:03 UTC (rev 195)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-28 00:01:39 UTC (rev 196)
@@ -82,6 +82,14 @@
 Das Prinzip ist ganz einfach. Man gibt ein Stichwort zu einem Literaturtitel ein, z. B. ein Wort aus dem Titel oder den Namen des Autors, und dr"uckt den Suche-Button (1).\\
 Gibt man z. B. den Begriff 'Python' ein so erscheinen alle Literaturtitel mit diesem Begriff. Die n"achste Abbildung zeigt einmal eine solche Trefferliste:\\
 \includegraphics[scale=0.8]{treffer}\\
+\subsection{Die erweiterte Suche}
+Klickt in dem Suchsegments auf den Link 'Erweiterte Suche' so erscheint folgender Bildschirm:\\
+\includegraphics[scale=0.8]{ext_suche}\\
+Die Suchfunktionen richten sich nunmehr auf spezielle Informationen eines Buches, was sich bei sehr gro"sen Datenbest"anden, die sich im Lauf der Zeit anreichern, in Form einer gr"o"seren "Ubersichtlichkeit der Suchtreffer auszahlen k"onnte.\\
+Im Feld 'Titel' gibt man einfach einen Literatur-Titel , ein Wort aus dem Titel oder sogar nur eine kurze Zeichenkette wie 'Algo' ein.\\
+Im Feld 'Autor' funktioniert es genau so, einfach einen Autor oder auch nur Teile seines Namens eingeben und den Button 'Suche' dr"ucken.\\
+Die Volltextsuche sucht, "ahnlich wie die 'normale' Suche auf dem Hauptformular in allen Informationen eines Literaturtitels mit Ausnahme der Kommentare.\\
+
 \subsection{Wie kann ich eine neue Literatur anlegen?}
 Kommen wir nun vom Recherchieren zum bearbeiten und Pflegen der Literaturverwaltung.\\
 Angenommen eine Literatur ist nicht in der Literaturverwaltung vorhanden und ein Mitglied m"ochte es darin aufnehmen.\\
@@ -91,4 +99,75 @@
 Der Button 'Literatur hinzuf"ugen' spricht wohl f"ur sich. Er erm"oglicht das hinzuf"ugen eines neuen Literaturtitels.\\
 Der Button 'BibTex importieren' erm"oglicht es bereits vorgefertigte Literaturbeschreibungen im BibTex-Format zu importieren.\\
 Klickt man nun auf den Button 'Literatur hinzuf"ugen' erscheint folgendes Formular:\\
-\includegraphics[scale=0.8]{lit_ins1}\\
\ No newline at end of file
+\includegraphics[scale=0.8]{lit_ins1}\\
+Will man nun einen Eintrag in das Literaturverzeichnis machen, so muss man alle Felder ihrer Beschreibung gem"a"s auszuf"ullen und den Button '"Ubernehmen' dr"ucken.\\
+F"ur einen von der Anwendung akzeptierten Eintrag sind die Felder 'Titel' und 'Autor' zwingend auszuf"ullen, sonst erscheint folgende Fehlermeldung:\\
+\includegraphics[scale=0.8]{err}\\
+
+\subsection{Literatur mit BibTeX anlegen}
+W"ahlt man statt dem Web-Formular zum Literatur-Import den Import via BibTeX, so sieht man sich folgendem Formular konfrontiert:\\
+\includegraphics[scale=0.8]{bibtex}\\
+Auch hier deuten zwei Segmente auf zwei M"oglichkeiten die BibTeX-Beschreibung zu importieren.\\
+Die erste M"oglichkeit ist es, ein lokale BibTeX-Datei vom Computer des Mitglieds einzulesen. Hierzu klickt man auf 'Durchsuchen' und w"ahlt in dem lokalen Verzeichnisbaum die BibTeX-Datei aus und dr"uckt den "Offnen-Button. Folgendes Bild zeigt den "Offnen-Dialog indem man die Datei ausw"ahlen kann:\\
+\begin{center}
+\includegraphics[scale=0.8]{import1}\\
+\end{center}
+Nachdem man die BibTeX-Datei ausgew"ahlt hat, dr"uckt man noch den Button 'Imprtieren' und ein neuer Literatureintrag wurde get"atigt.\\[0.4cm]
+Die zweite M"oglichkeit ist die direkte Eingabe der BibTeX-Beschreibung in das Memo-Feld im zweiten, unteren Segment des Import-Formulars.\\
+Folgendes Bild zeigt ein Beispiel:\\
+\includegraphics[scale=0.8]{import2}\\
+Nach der Eingabe der Beschreibung muss man noch den Button 'Importieren' dr"ucken und ein neues Buch mit Titel 'BibTeX kurzgefasst' wurde in die Literaturverwaltung aufgenommen.\\
+Der efolgreiche Import wird durch folgende Anzeige signalisiert:\\
+\includegraphics[scale=0.8]{import_succ}\\
+
+\subsection{Wie bearbeite ich eine Literatur?}
+M"ochte man einen Literatureintrag "andern, etwa weil man einen Fehler bei der Erstellung gemacht hat oder um eine Aktualisierung vorzunehmen, muss man sich zun"achst die Literaturtabelle anzeigen lassen, danach den zu "andernden Eintrag ausw"ahlen und den Button 'Bearbeiten' dr"ucken.\\
+\includegraphics[scale=0.8]{bearb1}\\
+Anschlie"send erscheint ein Formular "ahnlich dem Formular 'Literatur erstellen' nur stehen bereits Literatur-Information in den Feldern.
+Im folgenden Bild wollen wir eine "Anderung an unserem erstellten Literatur-Titel 'BibTeX kurzgefasst' vornehmen, wir wollen die ISBN bon 9-99999-999-9 in 0-00000-000-0 "andern und Verlag in SwP umbenennen:\\
+\includegraphics[scale=0.8]{bearb2}\\
+Anschlie"send noch '"Uebernehmen' dr"ucken und unsere Literaturdaten wurden ge"andert. Best"atigt wird die "Anderung durch folgende Meldung:\\
+\includegraphics[scale=0.8]{bearb3}\\
+
+\subsection{Wie l"osche ich eine Literatur?}
+Ist es n"otig einen Literatureintrag zu l"oschen, so w"ahlt man ihn wie auch beim 'Bearbeiten' in der Literaturliste aus, l"asst sich also die betreffenden Literaturdetails anzeigen, und bet"atigt den Button 'L"oschen':\\
+\includegraphics[scale=0.8]{del_lit}\\
+Daraufhin erscheint die Aufforderung den L"oschvorgang zu best"atigen. Sollten man es sich anders "uberlegt haben, so bet"atigt man NICHT den Best"atigen-Button sonder verl"asst "uber das seitliche Men"u den L"oschprozess.\\
+Sollte man sich sicher sein, dass man den Eintrag l"oschen will, so klickt man auf den Button 'Best"atigen':\\
+\includegraphics[scale=0.8]{sure}\\
+
+
+\subsection{Wie kommentiere ich einen Literatureintrag?}
+Oftmals ist ein kurzer Kommentar eines Lesers eines Buches oder einer Zeitschrift wesentlich aussagekr"aftiger als alle fachlichen Beschreibungen, die man findet.\\
+M"ochte man nun einen solchen Kommentar zu einem Literatureintrag verfassen, etwa weil man das jeweilige Medium bereits gelesen oder zu Recherchen herangezogen hat muss man zun"achst, wie auch beim l"oschen und bearbeiten eines Eintrages, sich die Literaturdetails anzeigen lassen.\\
+Bei niedriegeren Aufl"osungen, etwa 800x600 oder noch niedriger, k"onnte es n"otig sein mit der Laufleiste rechts von den Details in den unteren Bereich des Segments zu scrollen.\\
+Dort findet man ein Textfeld worin man seinen Kommentar verfassen kann, anschlie"send best"atigt man ihn mit dem Button 'Kommentar versenden':\\
+\includegraphics[scale=0.8]{comment1}\\
+Auch hier erfolgt eine visuelle Best"atigung "uber die erfolgreiche Abgabe eines Kommentars:
+\includegraphics[scale=0.8]{comment2}\\
+Mit dem Button 'Zur"uck' gelangt man zu den Literaturdetails des gerade kommentierten Titels zur"uck.\\
+
+\subsection{Wie "andere ich einen Kommentar?}
+Will man einen seiner Kommentare zu einem Literaturtitel "andern, muss man den gew"unschten Titel in der Literaturliste ausw"ahlen um sich die Details anzeigen zu lassen.\\
+Scrollt man nun zu den Kommentaren, so sieht man in dem Textfeld, welches bereits beim Erstellen eines Kommentars n"otig war, den Kommentar, den man zuvor abgegeben hatte.\\
+M"ochte man den zuvor abgegeben Kommentar "andern, so formatiert man ihn jediglich in diesem Textfeld und bet"atigt erneut 'Kommentar senden'.\\
+\includegraphics[scale=0.8]{comment3}\\
+Es erscheint eine Best"atigung "ahnlich der, die beim Verfassen eines Kommentares erscheint.\\
+
+\subsection{Wie l"osche ich einen Kommentar?}
+Ist es n"otig einen seiner verfassten Kommentare zu l"oschen, muss man sich wieder die Literaturdetails des Literaturtitels anzeigen lassen, worin der zu l"oschende Kommentare steht.\\
+Sucht man den Kommentar, hinter dem ein Link mit der Aufschrift l"oschen steht und bet"atigt diesen. Die folgende Abbildung soll dies verdeutlichen:\\
+\includegraphics[scale=0.8]{comment4}\\
+Bet"atigt man diesen Link, so erscheint als n"achstes eine L"oschbest"atigung. Hier gilt Selbiges wie auch beim L"oschen von Literatur, will man den Vorgang abbrechen geht man einfach "uber die Men"uleiste am linken Browser-Rand in ein anderes Men"u. Ist man sich sicher, dass man den Kommentar l"oschen will so bet"atigt man den Button.\\
+\includegraphics[scale=0.8]{comment5}\\
+Nachdem man den Best"atigen-Button benutzt hat, erscheint eine L"oschbest"atigung.
+
+\subsection{Wie kann ich meine Mitgliedsdaten "andern?}
+Grunds"atzlich gilt, dass jedes Mitglied die eigenen Mitgliedsdaten "andern darf.\\ Man benutzt einfach im Navigationssegment den Men"upunkt 'Nutzer'. Tut man dies, so erscheint folgende "Ubersicht:\\
+\includegraphics[scale=0.8]{nutzer1}\\
+Wie man leicht erkennen kann, hat man als Mitglied jediglich das Recht die eigenen Nutzerdaten zu sehen und zu "andern.\\
+Bet"atigt man nun den Button 'Bearbeiten' so erh"alt man Zugang zu den eigenen Mitgliedsinformationen.\\
+\includegraphics[scale=0.8]{nutzer2}\\
+M"ochte man beispielsweise seine E-Mail-Adresse "andern, l"oscht man einfach die alte Adresse raus und schreibt seine neue hinein, danach best"atigt man mit dem Button '"Ubernehmen'.\\
+Jedes Mitglied kann alle eigenen Daten, bis auf die 'Rechte', auf diese Wiese "andern. Allerdings ist das "Andern der Rechte einzig und allein Administratoren "uberlassen.\\
+Danach erscheint eine Best"atigung "uber die "Anderung der Nutzerdaten.\\

Added: trunk/docs/beleg3/bearb1.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/bearb1.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/bearb2.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/bearb2.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/bearb3.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/bearb3.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/bibtex.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/bibtex.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/comment1.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/comment1.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/comment2.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/comment2.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/comment3.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/comment3.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/comment4.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/comment4.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/comment5.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/comment5.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/del_lit.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/del_lit.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/err.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/err.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/ext_suche.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/ext_suche.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/import1.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/import1.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/import2.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/import2.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/import_succ.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/import_succ.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/nutzer1.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/nutzer1.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/nutzer2.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/nutzer2.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/docs/beleg3/sure.pdf
===================================================================
(Binary files differ)


Property changes on: trunk/docs/beleg3/sure.pdf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From trusch at berlios.de  Wed Jun 28 09:36:59 2006
From: trusch at berlios.de (trusch at BerliOS)
Date: Wed, 28 Jun 2006 09:36:59 +0200
Subject: [Liman-svn] r197 - trunk/docs/beleg3
Message-ID: <200606280736.k5S7axs6006574@sheep.berlios.de>

Author: trusch
Date: 2006-06-28 09:36:56 +0200 (Wed, 28 Jun 2006)
New Revision: 197

Modified:
   trunk/docs/beleg3/systemhandbuch.tex
Log:


Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-28 00:01:39 UTC (rev 196)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-28 07:36:56 UTC (rev 197)
@@ -34,7 +34,11 @@
 setzen kann.
 
 \section{Programm-Filesystem}
-{TODO}
+
+
+
+Nachdem sie das System erfolgreich eingerichtet haben, sind folgende Datein auf Ihrem Webverzeichnis:
+
 \begin{longtable}{|l|p{6cm}|r|}
 \hline
 {\bf Bezeichnung der Datei} & {\bf Bedeutung} & {\bf Anzahl Bytes}\\
@@ -93,7 +97,30 @@
 \hline
 include/sqldb\_mysql.php & Startet eine Verbindung zum Datenbanksystem her und w"ahlt eine Datenbank & 7212\\
 \hline
+design/liman.css & Stylesheets & 2097\\
+\hline
+design/unittest.css & Stylesheets & 246\\
+\hline
 \end{longtable}
 
 
 \section{Administrationsanleitung}
+
+
+Es wird empfohlen, regelm"a"sig eine Sicherung der Datenbank anzulegen. Das System bietet diese Funktion nicht direkt an,
+sondern verweist auf das Programm phpMyAdmin. Um es zu starten, rufen sie die Datei ............ in Ihrem Installationsverzeichnis auf.
+Zust"andig f"ur die Sicherung der Datenbank ist der Link "Exportieren" in der Datenbankansicht. 
+
+{TODO Screenshot}
+
+Ihr Datenbank besteht aus mehreren Tabellen, bevor diese Exportiert werden k"onnen, m"ussen sie ausw"ahlen, welche der Tabellen Sie Sichern wollen. 
+Daneben stellen Sie ein, ob nur die Struktur 
+(also der Aufbau) der jeweiligen Tabelle, die Struktur zusammen mit den gespeicherten Datens"atzen oder nur die Datens"atze gesichert werden sollen.
+
+Weiter unten k"onnen Sie die Funktion Drop Table ausw"ahlen, welche bewirkt, dass die jeweilige Tabelle nach dem Kopieren sofort gel"oscht wird. Des weiteren 
+kann man einstellen, ob vollst"andige oder erweiterte Inserts ausgef"uhrt werden sollen.  
+
+Wenn Sie Senden ausw"ahlen, wird die Ausgabe als Datei gespeichert, was f"ur den Zweck der Datensicherung am Sinn vollsten ist. Ansonsten wird die 
+Ausgabe auf dem Bildschirm wiedergegeben. 
+Falls sie "ofters Sicherungen anlegt, ist eine weitere Option "ZIP / GZIP Komprimieren" sehr praktisch. Wenn Sie dies ausw"ahlen wird die Datei mit ZIP 
+komprimiert.



From lazhur at berlios.de  Wed Jun 28 10:45:17 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Wed, 28 Jun 2006 10:45:17 +0200
Subject: [Liman-svn] r198 - trunk/docs/beleg3
Message-ID: <200606280845.k5S8jHVk021129@sheep.berlios.de>

Author: lazhur
Date: 2006-06-28 10:45:02 +0200 (Wed, 28 Jun 2006)
New Revision: 198

Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
   trunk/docs/beleg3/programmdokumentation.tex
   trunk/docs/beleg3/systemhandbuch.tex
Log:
- Quellcode wieder in Teilbeleg3 aktiviert
- Tippfehler in Anwenderdokumentation entfernt
- Systemhandbuch mit TODOs erweitert und mysqldump-Hinweis hinzugef?\195?\188gt


Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-28 07:36:56 UTC (rev 197)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-28 08:45:02 UTC (rev 198)
@@ -112,7 +112,7 @@
 \begin{center}
 \includegraphics[scale=0.8]{import1}\\
 \end{center}
-Nachdem man die BibTeX-Datei ausgew"ahlt hat, dr"uckt man noch den Button 'Imprtieren' und ein neuer Literatureintrag wurde get"atigt.\\[0.4cm]
+Nachdem man die BibTeX-Datei ausgew"ahlt hat, dr"uckt man noch den Button 'Importieren' und ein neuer Literatureintrag wurde get"atigt.\\[0.4cm]
 Die zweite M"oglichkeit ist die direkte Eingabe der BibTeX-Beschreibung in das Memo-Feld im zweiten, unteren Segment des Import-Formulars.\\
 Folgendes Bild zeigt ein Beispiel:\\
 \includegraphics[scale=0.8]{import2}\\
@@ -124,15 +124,15 @@
 M"ochte man einen Literatureintrag "andern, etwa weil man einen Fehler bei der Erstellung gemacht hat oder um eine Aktualisierung vorzunehmen, muss man sich zun"achst die Literaturtabelle anzeigen lassen, danach den zu "andernden Eintrag ausw"ahlen und den Button 'Bearbeiten' dr"ucken.\\
 \includegraphics[scale=0.8]{bearb1}\\
 Anschlie"send erscheint ein Formular "ahnlich dem Formular 'Literatur erstellen' nur stehen bereits Literatur-Information in den Feldern.
-Im folgenden Bild wollen wir eine "Anderung an unserem erstellten Literatur-Titel 'BibTeX kurzgefasst' vornehmen, wir wollen die ISBN bon 9-99999-999-9 in 0-00000-000-0 "andern und Verlag in SwP umbenennen:\\
+Im folgenden Bild wollen wir eine "Anderung an unserem erstellten Literatur-Titel 'BibTeX kurzgefasst' vornehmen, wir wollen die ISBN von 9-99999-999-9 in 0-00000-000-0 "andern und Verlag in SwP umbenennen:\\
 \includegraphics[scale=0.8]{bearb2}\\
-Anschlie"send noch '"Uebernehmen' dr"ucken und unsere Literaturdaten wurden ge"andert. Best"atigt wird die "Anderung durch folgende Meldung:\\
+Anschlie"send noch '"Ubernehmen' dr"ucken und unsere Literaturdaten wurden ge"andert. Best"atigt wird die "Anderung durch folgende Meldung:\\
 \includegraphics[scale=0.8]{bearb3}\\
 
 \subsection{Wie l"osche ich eine Literatur?}
 Ist es n"otig einen Literatureintrag zu l"oschen, so w"ahlt man ihn wie auch beim 'Bearbeiten' in der Literaturliste aus, l"asst sich also die betreffenden Literaturdetails anzeigen, und bet"atigt den Button 'L"oschen':\\
 \includegraphics[scale=0.8]{del_lit}\\
-Daraufhin erscheint die Aufforderung den L"oschvorgang zu best"atigen. Sollten man es sich anders "uberlegt haben, so bet"atigt man NICHT den Best"atigen-Button sonder verl"asst "uber das seitliche Men"u den L"oschprozess.\\
+Daraufhin erscheint die Aufforderung den L"oschvorgang zu best"atigen. Sollten man es sich anders "uberlegt haben, so bet"atigt man NICHT den Best"atigen-Button sondern verl"asst "uber das seitliche Men"u oder den Zur?ck-Knopf des Browsers den L"oschprozess.\\
 Sollte man sich sicher sein, dass man den Eintrag l"oschen will, so klickt man auf den Button 'Best"atigen':\\
 \includegraphics[scale=0.8]{sure}\\
 
@@ -168,6 +168,6 @@
 Wie man leicht erkennen kann, hat man als Mitglied jediglich das Recht die eigenen Nutzerdaten zu sehen und zu "andern.\\
 Bet"atigt man nun den Button 'Bearbeiten' so erh"alt man Zugang zu den eigenen Mitgliedsinformationen.\\
 \includegraphics[scale=0.8]{nutzer2}\\
-M"ochte man beispielsweise seine E-Mail-Adresse "andern, l"oscht man einfach die alte Adresse raus und schreibt seine neue hinein, danach best"atigt man mit dem Button '"Ubernehmen'.\\
+M"ochte man beispielsweise seine E-Mail-Adresse "andern, l"oscht man einfach die alte Adresse raus und schreibt seine neue hinein. Danach best"atigt man mit dem Button '"Ubernehmen'.\\
 Jedes Mitglied kann alle eigenen Daten, bis auf die 'Rechte', auf diese Wiese "andern. Allerdings ist das "Andern der Rechte einzig und allein Administratoren "uberlassen.\\
 Danach erscheint eine Best"atigung "uber die "Anderung der Nutzerdaten.\\

Modified: trunk/docs/beleg3/programmdokumentation.tex
===================================================================
--- trunk/docs/beleg3/programmdokumentation.tex	2006-06-28 07:36:56 UTC (rev 197)
+++ trunk/docs/beleg3/programmdokumentation.tex	2006-06-28 08:45:02 UTC (rev 198)
@@ -1,6 +1,6 @@
 \chapter{Programmdokumentation}
 % W?hrend der Weiteren Arbeiten kurzzeitig deaktiviert
-%\input{interfaces_code}
+\input{interfaces_code}
 
 % Tests
 \input{tests}

Modified: trunk/docs/beleg3/systemhandbuch.tex
===================================================================
--- trunk/docs/beleg3/systemhandbuch.tex	2006-06-28 07:36:56 UTC (rev 197)
+++ trunk/docs/beleg3/systemhandbuch.tex	2006-06-28 08:45:02 UTC (rev 198)
@@ -97,10 +97,6 @@
 \hline
 include/sqldb\_mysql.php & Startet eine Verbindung zum Datenbanksystem her und w"ahlt eine Datenbank & 7212\\
 \hline
-design/liman.css & Stylesheets & 2097\\
-\hline
-design/unittest.css & Stylesheets & 246\\
-\hline
 \end{longtable}
 
 
@@ -108,8 +104,7 @@
 
 
 Es wird empfohlen, regelm"a"sig eine Sicherung der Datenbank anzulegen. Das System bietet diese Funktion nicht direkt an,
-sondern verweist auf das Programm phpMyAdmin. Um es zu starten, rufen sie die Datei ............ in Ihrem Installationsverzeichnis auf.
-Zust"andig f"ur die Sicherung der Datenbank ist der Link "Exportieren" in der Datenbankansicht. 
+sondern verweist auf das Programm phpMyAdmin (\pdfurl{http://www.phpmyadmin.net/}). Zust"andig f"ur die Sicherung der Datenbank ist der Link ``Exportieren'' in der Datenbankansicht.
 
 {TODO Screenshot}
 
@@ -124,3 +119,11 @@
 Ausgabe auf dem Bildschirm wiedergegeben. 
 Falls sie "ofters Sicherungen anlegt, ist eine weitere Option "ZIP / GZIP Komprimieren" sehr praktisch. Wenn Sie dies ausw"ahlen wird die Datei mit ZIP 
 komprimiert.
+
+Eine weitere M?glichkeit, besonders f?r die automatisierte Sicherung der Datenbank, bietet das Programm mysqldump, welches ein Teil der MySQL-Anwendungen ist. Eine genau Erkl?rung ?ber die Funktionsweise von mysqldump ist in den Handb?chern zu MySQL enthalten (\pdfurl{http://www.mysql.com/doc/de/mysqldump.html}).
+
+{TODO Was tun, wenn der Webserver ``Could not connect to SQL server. Please inform Webmaster'' bringt?}
+
+{TODO Was tun, wenn Daten nie geschrieben/ge?ndert/gel?scht werden?}
+
+{TODO Was tun, wenn User nach dem einloggen direkt wieder ausgeloggt werden?}
\ No newline at end of file



From dotslash at berlios.de  Wed Jun 28 20:11:46 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 28 Jun 2006 20:11:46 +0200
Subject: [Liman-svn] r199 - trunk/docs/protokoll
Message-ID: <200606281811.k5SIBkSZ003353@sheep.berlios.de>

Author: dotslash
Date: 2006-06-28 20:11:43 +0200 (Wed, 28 Jun 2006)
New Revision: 199

Added:
   trunk/docs/protokoll/2006_06_28.xhtml
Log:
- Protokoll

Added: trunk/docs/protokoll/2006_06_28.xhtml
===================================================================
--- trunk/docs/protokoll/2006_06_28.xhtml	2006-06-28 08:45:02 UTC (rev 198)
+++ trunk/docs/protokoll/2006_06_28.xhtml	2006-06-28 18:11:43 UTC (rev 199)
@@ -0,0 +1,37 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
+	<head>
+		<title>Sitzungsprotokoll 28.06.2006</title>
+		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
+		<meta http-equiv="content-language" content="de" />
+		<style type="text/css">@import "./protokoll.css";</style>
+	</head>
+	<body>
+		<h1>Literaturverwaltung</h1>
+		<h2>Sitzungsprotokoll 28.06.2006</h2>
+
+		<h3>Anwesende</h3>
+		<ul>
+			<li>Simon Wunderlich</li>
+			<li>Andreas Tr?ger</li>
+			<li>Frank Wilhelm</li>
+		</ul>
+
+		<h3>Tagesordnung</h3>
+		<ol>
+			<li><a href="#teilbeleg3">Besprechung Teilbeleg 3</a></li>
+		</ol>
+
+		<div id="content">
+			<h3 id="teilbeleg3">Besprechung Teilbeleg 3</h3>
+			<ul>
+				<li>Stand Aufgabenerf&uuml;llung des Teams verglichen</li>
+				<li>Details zur Administrationsanleitung besprochen</li>
+			</ul>
+		</div>
+
+		<dl>
+			<dt>Protokolant</dt><dd>Simon Wunderlich</dd>
+		</dl>
+	</body>
+</html>



From gregorian at berlios.de  Thu Jun 29 15:26:28 2006
From: gregorian at berlios.de (gregorian at berlios.de)
Date: Thu, 29 Jun 2006 15:26:28 +0200
Subject: [Liman-svn] r200 - trunk/docs/beleg3
Message-ID: <200606291326.k5TDQSIR003014@sheep.berlios.de>

Author: gregorian
Date: 2006-06-29 15:26:12 +0200 (Thu, 29 Jun 2006)
New Revision: 200

Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
Log:


Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-28 18:11:43 UTC (rev 199)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-29 13:26:12 UTC (rev 200)
@@ -171,3 +171,9 @@
 M"ochte man beispielsweise seine E-Mail-Adresse "andern, l"oscht man einfach die alte Adresse raus und schreibt seine neue hinein. Danach best"atigt man mit dem Button '"Ubernehmen'.\\
 Jedes Mitglied kann alle eigenen Daten, bis auf die 'Rechte', auf diese Wiese "andern. Allerdings ist das "Andern der Rechte einzig und allein Administratoren "uberlassen.\\
 Danach erscheint eine Best"atigung "uber die "Anderung der Nutzerdaten.\\
+
+\subsection{Ein"uhrung in die Nutzerverwaltung "uber die grafische Oberfl"ache der Literaturverwaltung}
+Grunds"atzlich gilt, dass man "anderungen in den Nutzerdaten der Mitglieder ausschlie"slich als Administrator durchf"uhren darf.\\
+Um in die Nutzerverwaltung zu gelangen, befolgt man zun"achst die selben Anweisungen, wie sie im Punkt 3.4.4 'Wie logge ich mich ein?' aufgef"uhrt sind.\\
+Hat man sich eingeloggt geht man im Segment Navigation (siehe 3.4.2 'Die Hauptseite') in das Untermenu 'Nutzer'.\\
+Im Gegensatz zur Mitgliedsoberfl"ache, sind nun alle Mitglieder aufgelistet, die 
\ No newline at end of file



From lazhur at berlios.de  Thu Jun 29 21:50:38 2006
From: lazhur at berlios.de (lazhur at BerliOS)
Date: Thu, 29 Jun 2006 21:50:38 +0200
Subject: [Liman-svn] r201 - trunk/docs/beleg3
Message-ID: <200606291950.k5TJocuO026999@sheep.berlios.de>

Author: lazhur
Date: 2006-06-29 21:50:37 +0200 (Thu, 29 Jun 2006)
New Revision: 201

Modified:
   trunk/docs/beleg3/anwenderdokumentation.tex
   trunk/docs/beleg3/arbeitsaufgaben.tex
Log:
- Sitzungsprotokoll 28.06.2006 in Teilbeleg3 eingef?\195?\188gt
- Tippfehler in Dokumentation der Nutzerverwaltung korrigiert


Modified: trunk/docs/beleg3/anwenderdokumentation.tex
===================================================================
--- trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-29 13:26:12 UTC (rev 200)
+++ trunk/docs/beleg3/anwenderdokumentation.tex	2006-06-29 19:50:37 UTC (rev 201)
@@ -173,7 +173,7 @@
 Danach erscheint eine Best"atigung "uber die "Anderung der Nutzerdaten.\\
 
 \subsection{Ein"uhrung in die Nutzerverwaltung "uber die grafische Oberfl"ache der Literaturverwaltung}
-Grunds"atzlich gilt, dass man "anderungen in den Nutzerdaten der Mitglieder ausschlie"slich als Administrator durchf"uhren darf.\\
+Grunds"atzlich gilt, dass man "Anderungen in den Nutzerdaten der Mitglieder ausschlie"slich als Administrator durchf"uhren darf.\\
 Um in die Nutzerverwaltung zu gelangen, befolgt man zun"achst die selben Anweisungen, wie sie im Punkt 3.4.4 'Wie logge ich mich ein?' aufgef"uhrt sind.\\
-Hat man sich eingeloggt geht man im Segment Navigation (siehe 3.4.2 'Die Hauptseite') in das Untermenu 'Nutzer'.\\
-Im Gegensatz zur Mitgliedsoberfl"ache, sind nun alle Mitglieder aufgelistet, die 
\ No newline at end of file
+Hat man sich eingeloggt geht man im Segment Navigation (siehe 3.4.2 'Die Hauptseite') in das Untermen"u 'Nutzer'.\\
+Im Gegensatz zur Mitgliedsoberfl"ache, sind nun alle Mitglieder aufgelistet.
\ No newline at end of file

Modified: trunk/docs/beleg3/arbeitsaufgaben.tex
===================================================================
--- trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-29 13:26:12 UTC (rev 200)
+++ trunk/docs/beleg3/arbeitsaufgaben.tex	2006-06-29 19:50:37 UTC (rev 201)
@@ -369,3 +369,23 @@
 			\item Protokolant: Sven Eckelmann
 		\end{itemize}
 \newpage
+		\section{Sitzungsprotokoll 28.06.2006}
+		\subsection{Anwesende}
+		\begin{itemize}
+			\item Simon Wunderlich
+			\item Andreas Tr?ger
+			\item Frank Wilhelm
+		\end{itemize}
+		\subsection{Tagesordnung}
+		\begin{itemize}
+			\item Besprechung Teilbeleg 3
+		\end{itemize}
+			\subsection{Besprechung Teilbeleg 3}
+			\begin{itemize}
+				\item Stand Aufgabenerf"ullung des Teams verglichen
+				\item Details zur Administrationsanleitung besprochen
+			\end{itemize}
+		\begin{itemize}
+			\item Protokolant: Simon Wunderlich
+		\end{itemize}
+\newpage



