<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Liman-svn] r121 - in trunk: docs/beleg2 docs/beleg2/doxygen include
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/liman-svn/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:liman-svn%40lists.berlios.de?Subject=Re%3A%20%5BLiman-svn%5D%20r121%20-%20in%20trunk%3A%20docs/beleg2%20docs/beleg2/doxygen%20include&In-Reply-To=%3C200605271148.k4RBmdtN028915%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000110.html">
   <LINK REL="Next"  HREF="000112.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Liman-svn] r121 - in trunk: docs/beleg2 docs/beleg2/doxygen include</H1>
    <B>lazhur at BerliOS</B> 
    <A HREF="mailto:liman-svn%40lists.berlios.de?Subject=Re%3A%20%5BLiman-svn%5D%20r121%20-%20in%20trunk%3A%20docs/beleg2%20docs/beleg2/doxygen%20include&In-Reply-To=%3C200605271148.k4RBmdtN028915%40sheep.berlios.de%3E"
       TITLE="[Liman-svn] r121 - in trunk: docs/beleg2 docs/beleg2/doxygen include">lazhur at berlios.de
       </A><BR>
    <I>Sat May 27 13:48:39 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000110.html">[Liman-svn] r120 - in trunk: . design include
</A></li>
        <LI>Next message: <A HREF="000112.html">[Liman-svn] r122 - in trunk: . docs/beleg2/doxygen include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111">[ date ]</a>
              <a href="thread.html#111">[ thread ]</a>
              <a href="subject.html#111">[ subject ]</a>
              <a href="author.html#111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lazhur
Date: 2006-05-27 13:48:29 +0200 (Sat, 27 May 2006)
New Revision: 121

Modified:
   trunk/docs/beleg2/doxygen/classAutor.tex
   trunk/docs/beleg2/doxygen/classLiteratur.tex
   trunk/docs/beleg2/doxygen/classLogin.tex
   trunk/docs/beleg2/doxygen/classSuche.tex
   trunk/docs/beleg2/doxymake.sh
   trunk/include/autor.php
   trunk/include/literatur.php
   trunk/include/login.php
   trunk/include/suche.php
Log:
- SQL-Abfrage in Autor::Clean korrigiert
- Literatur_Autoren korrekt in Literatur_Autor umbenannt
- Importiert-Listen zu implementierten Klassen hinzugef?\195?\188gt
- Fehlende $ vor Variablennamen in Autor::Split hinzugef?\195?\188gt


Modified: trunk/docs/beleg2/doxygen/classAutor.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classAutor.tex	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/docs/beleg2/doxygen/classAutor.tex	2006-05-27 11:48:29 UTC (rev 121)
@@ -13,7 +13,7 @@
 \hyperlink{classAutor_77b27af7e471abe5a404fc92c7319921}{Clean} ()
 \begin{CompactList}\small\item\em Entfernt unn&#195;&#182;tige Autoren. \item\end{CompactList}\item 
 \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Get\-All} (\$literatur\_\-nr)
-\begin{CompactList}\small\item\em R&#195;&#188;ckgabe eines Feldes von Autoren. \item\end{CompactList}\item 
+\begin{CompactList}\small\item\em Gibt Autoren zu bestimmter \hyperlink{classLiteratur}{Literatur} zur&#195;&#188;ck. \item\end{CompactList}\item 
 \hyperlink{classAutor_2ba5418b6622f414fa8a054e6c2a2db8}{Split} (\$autoren)
 \begin{CompactList}\small\item\em Legt neue Autoren aus kommagetrennter Liste an. \item\end{CompactList}\end{CompactItemize}
 \subsubsection*{\&quot;{O}ffentliche Attribute}
@@ -30,6 +30,10 @@
 
 Stellt Funktionen zum Hinzuf&#195;&#188;gen von Autoren und Bereinigen nicht mehr benutzter Autoren bereit. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\begin{Desc}
+\item[Importiert:]\begin{itemize}
+\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch} \end{itemize}
+\end{Desc}
 
 
 
@@ -65,8 +69,8 @@
 
 Entfernt unn&#195;&#182;tige Autoren. 
 
-Entfernt aus Autoren alle Autoren, die keine Verbindung (Literatur\_\-Autoren-Tabelle) mehr mit \hyperlink{classLiteratur}{Literatur} haben. \begin{Desc}
-\item[Vorbedingung:]Datenbankverbindung muss bestehen\end{Desc}
+Entfernt aus Autoren alle Autoren, die keine Verbindung (Literatur\_\-Autor-Tabelle) mehr mit \hyperlink{classLiteratur}{Literatur} haben. \begin{Desc}
+\item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \hypertarget{classAutor_79cd90084cab240919a5daecf39156a7}{
 \index{Autor@{Autor}!GetAll@{GetAll}}
 \index{GetAll@{GetAll}!Autor@{Autor}}
@@ -74,7 +78,7 @@
 \label{classAutor_79cd90084cab240919a5daecf39156a7}
 
 
-R&#195;&#188;ckgabe eines Feldes von Autoren. 
+Gibt Autoren zu bestimmter \hyperlink{classLiteratur}{Literatur} zur&#195;&#188;ck. 
 
 Liest alle Autoren die einer \hyperlink{classLiteratur}{Literatur} (\$nr) zugeordnet sind aus Bibliothek aus und gibt sie als Feld des Typs \hyperlink{classAutor}{Autor} zur&#195;&#188;ck. \begin{Desc}
 \item[Parameter:]
@@ -102,7 +106,7 @@
 \item[\mbox{$\leftarrow$} {\em \$autoren}]String mit kommagetrennter Liste von Autoren \end{description}
 \end{Desc}
 \begin{Desc}
-\item[R\&quot;{u}ckgabe:]Feld mit Autor\_\-Nr der Autoren\end{Desc}
+\item[R\&quot;{u}ckgabe:]Feld mit Autor\_\-Nr der Autoren \end{Desc}
 
 
 \subsubsection{Dokumentation der Datenelemente}

Modified: trunk/docs/beleg2/doxygen/classLiteratur.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/docs/beleg2/doxygen/classLiteratur.tex	2006-05-27 11:48:29 UTC (rev 121)
@@ -101,7 +101,7 @@
 
 Legt \hyperlink{classLiteratur}{Literatur} an. 
 
-Legt neue \hyperlink{classLiteratur}{Literatur} in Bibliothek mit den &#195;&#188;bergebenen Parametern (\$art, \$titel, \$jahr, \$verlag, \$isbn, \$beschreibung, \$ort, \$stichworte) an. Danach werden die Autoren (\$autoren) in Autoren geschrieben und mit der Tabelle Literatur\_\-Autoren der \hyperlink{classLiteratur}{Literatur} zugeordnet. \begin{Desc}
+Legt neue \hyperlink{classLiteratur}{Literatur} in Bibliothek mit den &#195;&#188;bergebenen Parametern (\$art, \$titel, \$jahr, \$verlag, \$isbn, \$beschreibung, \$ort, \$stichworte) an. Danach werden die Autoren (\$autoren) in Autoren geschrieben und mit der Tabelle Literatur\_\-Autor der \hyperlink{classLiteratur}{Literatur} zugeordnet. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]
@@ -146,7 +146,7 @@
 
 &#195;&#132;ndert \hyperlink{classLiteratur}{Literatur}. 
 
-Entfernt alle zur Literatur\_\-Nr (\$nr) geh&#195;&#182;renden Verbindungen in Autor\_\-Literatur um danach die \hyperlink{classLiteratur}{Literatur} mit Literatur\_\-Nr \$nr zu den neuen Werten (\$art, \$titel, \$jahr, \$verlag, \$isbn, \$beschreibung, \$ort, \$stichworte) zu &#195;&#164;ndern. Danach werden die Autoren (\$autoren) in Autoren geschrieben und mit der Tabelle Literatur\_\-Autoren der \hyperlink{classLiteratur}{Literatur} zugeordnet. Alle jetzt noch nicht zugeordneten Autoren in Autoren werden gel&#195;&#182;scht. \begin{Desc}
+Entfernt alle zur Literatur\_\-Nr (\$nr) geh&#195;&#182;renden Verbindungen in Autor\_\-Literatur um danach die \hyperlink{classLiteratur}{Literatur} mit Literatur\_\-Nr \$nr zu den neuen Werten (\$art, \$titel, \$jahr, \$verlag, \$isbn, \$beschreibung, \$ort, \$stichworte) zu &#195;&#164;ndern. Danach werden die Autoren (\$autoren) in Autoren geschrieben und mit der Tabelle Literatur\_\-Autor der \hyperlink{classLiteratur}{Literatur} zugeordnet. Alle jetzt noch nicht zugeordneten Autoren in Autoren werden gel&#195;&#182;scht. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
 \begin{Desc}
 \item[Parameter:]

Modified: trunk/docs/beleg2/doxygen/classLogin.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classLogin.tex	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/docs/beleg2/doxygen/classLogin.tex	2006-05-27 11:48:29 UTC (rev 121)
@@ -30,6 +30,10 @@
 \item[Vorbedingung:]Das Loginobjekt muss vor einer &#195;&#156;bertragung von Inhaltsdaten zum User angelegt werden, um ein Cookie anlegen zu k&#195;&#182;nnen. Es sollte kein zweites Objekt vom Typ \hyperlink{classLogin}{Login} existieren. Datenbankverbindung muss bestehen. \end{Desc}
 \begin{Desc}
 \item[Bemerkungen:]Sollte ein weiteres Objekt vom Typ \hyperlink{classLogin}{Login} existieren, in welche neue Logininformationen eingetragen werden, wird keine weitere Session angelegt, sondern die alten Informationen in der aktuellen Session &#195;&#188;berschrieben. \end{Desc}
+\begin{Desc}
+\item[Importiert:]\begin{itemize}
+\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch} \end{itemize}
+\end{Desc}
 
 
 

Modified: trunk/docs/beleg2/doxygen/classSuche.tex
===================================================================
--- trunk/docs/beleg2/doxygen/classSuche.tex	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/docs/beleg2/doxygen/classSuche.tex	2006-05-27 11:48:29 UTC (rev 121)
@@ -22,6 +22,10 @@
 
 Durchsucht die Literatur- und Autorentabelle &#195;&#188;ber Volltextsuche, nach \hyperlink{classAutor}{Autor} und Titel oder nach den 10 zuletzt hinzugef&#195;&#188;gten Literatureintr&#195;&#164;gen und speichert sie in \$Treffer zwischen. \begin{Desc}
 \item[Vorbedingung:]Datenbankverbindung muss bestehen \end{Desc}
+\begin{Desc}
+\item[Importiert:]\begin{itemize}
+\item \hyperlink{classAutor_79cd90084cab240919a5daecf39156a7}{Autor::Get\-All}\item \hyperlink{classSQLDB_fc6ffa8df50f68f07d9f5e3385b96d7a}{SQLDB::Query}\item \hyperlink{classSQLDB_a55c00ce1de0e50e0a58cae61892ba35}{SQLDB::Fetch} \end{itemize}
+\end{Desc}
 
 
 

Modified: trunk/docs/beleg2/doxymake.sh
===================================================================
--- trunk/docs/beleg2/doxymake.sh	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/docs/beleg2/doxymake.sh	2006-05-27 11:48:29 UTC (rev 121)
@@ -2,3 +2,4 @@
 # Kleiner Hack um UTF-8 im Zusammenhang mit Doxygen und LaTeX nutzen zu k&#195;&#182;nnen
 doxygen Doxyfile
 sed -i &quot;s/\\\~{A}/&#195;/g&quot; doxygen/*.tex
+sed -i &quot;s/Siehe auch:/Importiert:/g&quot; doxygen/*.tex

Modified: trunk/include/autor.php
===================================================================
--- trunk/include/autor.php	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/include/autor.php	2006-05-27 11:48:29 UTC (rev 121)
@@ -8,6 +8,9 @@
 	 *  Stellt Funktionen zum Hinzuf&#195;&#188;gen von Autoren und Bereinigen nicht
 	 *  mehr benutzter Autoren bereit.
 	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
 	 */
 	class Autor
 	{
@@ -32,17 +35,22 @@
 		/*! \brief Entfernt unn&#195;&#182;tige Autoren
 		 *
 		 *  Entfernt aus Autoren alle Autoren, die keine Verbindung
-		 *  (Literatur_Autoren-Tabelle) mehr mit Literatur haben.
+		 *  (Literatur_Autor-Tabelle) mehr mit Literatur haben.
 		 *  \pre Datenbankverbindung muss bestehen
 		 */
 		function Clean()
 		{
-			$sql = &quot;DELETE FROM &quot;.$db_config['prefix'].&quot;Autoren as autoren
-					WHERE (0 = (SELECT COUNT(*) FROM &quot;.$db_config['prefix'].&quot;Literatur_Autoren WHERE (AutorNr = autoren.ID)))&quot;;
+			global $db_config, $sqldb;
+
+			$sql = &quot;DELETE autoren, connect
+					FROM &quot;.$db_config['prefix'].&quot;Autoren AS autoren
+					LEFT JOIN &quot;.$db_config['prefix'].&quot;Literatur_Autor AS connect
+					ON autoren.Autor_Nr = connect.Autor_Nr
+					WHERE connect.Autor_Nr is NULL&quot;;
 			$sqldb-&gt;Query($sql);
 		}
 
-		/*! \brief R&#195;&#188;ckgabe eines Feldes von Autoren
+		/*! \brief Gibt Autoren zu bestimmter Literatur zur&#195;&#188;ck
 		 *
 		 *  Liest alle Autoren die einer Literatur ($nr) zugeordnet
 		 *  sind aus Bibliothek aus und gibt sie als Feld des Typs
@@ -91,10 +99,10 @@
 			$authorNumbers = array();
 			$authorNames = split( &quot;,&quot;, $autoren );
 			
-			for( $i = 0; i &lt; count($authorNames); $i++ )
+			for( $i = 0; $i &lt; count($authorNames); $i++ )
 			{
 				$sqlSelect = &quot;SELECT Autor_Nr AS Nr FROM &quot;.$db_config['prefix'].&quot;Autoren AS autoren
-						      WHERE Autorname = '&quot;.trim($authorNames[i]).&quot;'&quot;;
+						      WHERE Autorname = '&quot;.trim($authorNames[$i]).&quot;'&quot;;
 				$sqldb-&gt;Query( $sqlSelect );
 				
 				if( $cur = $sqldb-&gt;Fetch() )
@@ -103,7 +111,7 @@
 				}
 				else
 				{
-					$sqlInsert = &quot;INSERT INTO &quot;.$db_config['prefix'].&quot;Autoren VALUES ('&quot;.trim($authorNames[i]).&quot;')&quot;;
+					$sqlInsert = &quot;INSERT INTO &quot;.$db_config['prefix'].&quot;Autoren VALUES (NULL, '&quot;.trim($authorNames[$i]).&quot;')&quot;;
 					$sqlIdentity = &quot;SELECT @@IDENTITY AS Nr FROM &quot;.$db_config['prefix'].&quot;Autoren&quot;;
 					$sqldb-&gt;Query( $sqlInsert );
 					$sqldb-&gt;Query( $sqlIdentity );

Modified: trunk/include/literatur.php
===================================================================
--- trunk/include/literatur.php	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/include/literatur.php	2006-05-27 11:48:29 UTC (rev 121)
@@ -85,7 +85,7 @@
 		 *  Parametern ($art, $titel, $jahr, $verlag, $isbn,
 		 *  $beschreibung, $ort, $stichworte) an. Danach werden die
 		 *  Autoren ($autoren) in Autoren geschrieben und mit der
-		 *  Tabelle Literatur_Autoren der Literatur zugeordnet.
+		 *  Tabelle Literatur_Autor der Literatur zugeordnet.
 		 *  \pre Datenbankverbindung muss bestehen
 		 *  \param[in] $autoren String mit kommagetrennter Liste von Autoren
 		 *  \param[in] $art Bezeichner der Literaturart
@@ -109,7 +109,7 @@
 		 *  Literatur_Nr $nr zu den neuen Werten ($art, $titel, $jahr,
 		 *  $verlag, $isbn, $beschreibung, $ort, $stichworte) zu &#195;&#164;ndern.
 		 *  Danach werden die Autoren ($autoren) in Autoren geschrieben
-		 *  und mit der Tabelle Literatur_Autoren der Literatur
+		 *  und mit der Tabelle Literatur_Autor der Literatur
 		 *  zugeordnet. Alle jetzt noch nicht zugeordneten Autoren in
 		 *  Autoren werden gel&#195;&#182;scht.
 		 *  \pre Datenbankverbindung muss bestehen

Modified: trunk/include/login.php
===================================================================
--- trunk/include/login.php	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/include/login.php	2006-05-27 11:48:29 UTC (rev 121)
@@ -16,6 +16,9 @@
 	 *    welche neue Logininformationen eingetragen werden, wird keine
 	 *    weitere Session angelegt, sondern die alten Informationen in
 	 *    der aktuellen Session &#195;&#188;berschrieben.
+	 *  \sa
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
 	 */
 	class Login
 	{

Modified: trunk/include/suche.php
===================================================================
--- trunk/include/suche.php	2006-05-27 10:15:35 UTC (rev 120)
+++ trunk/include/suche.php	2006-05-27 11:48:29 UTC (rev 121)
@@ -11,6 +11,10 @@
 	 *  nach Autor und Titel oder nach den 10 zuletzt hinzugef&#195;&#188;gten
 	 *  Literatureintr&#195;&#164;gen und speichert sie in $Treffer zwischen.
 	 *  \pre Datenbankverbindung muss bestehen
+	 *  \sa
+	 *  - Autor::GetAll
+	 *  - SQLDB::Query
+	 *  - SQLDB::Fetch
 	 */
 	class Suche
 	{


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000110.html">[Liman-svn] r120 - in trunk: . design include
</A></li>
	<LI>Next message: <A HREF="000112.html">[Liman-svn] r122 - in trunk: . docs/beleg2/doxygen include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111">[ date ]</a>
              <a href="thread.html#111">[ thread ]</a>
              <a href="subject.html#111">[ subject ]</a>
              <a href="author.html#111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/liman-svn">More information about the Liman-svn
mailing list</a><br>
</body></html>
